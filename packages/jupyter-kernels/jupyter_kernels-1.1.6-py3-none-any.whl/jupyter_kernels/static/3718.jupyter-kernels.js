"use strict";(self.webpackChunk_datalayer_jupyter_kernels=self.webpackChunk_datalayer_jupyter_kernels||[]).push([[3718],{83718:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var o=n(75497),l=n(13224),s=n(42768),a=n(87938);const i=new a.Token("@jupyterlab/toc:ITableOfContentsRegistry","A service to register table of content factory."),d=new a.Token("@jupyterlab/toc:ITableOfContentsTracker","A widget tracker for table of contents.");var r;!function(e){e.defaultConfig={baseNumbering:1,maximalDepth:4,numberingH1:!0,numberHeaders:!1,includeOutput:!0,syncCollapseState:!1}}(r||(r={}));var c,u=n(85485),m=n(80709),p=n(52980),h=n(89456),g=n(48290);class b extends h.PureComponent{render(){const{children:e,isActive:t,heading:n,onCollapse:o,onMouseDown:l}=this.props;return h.createElement("li",{className:"jp-tocItem"},h.createElement("div",{className:"jp-tocItem-heading "+(t?"jp-tocItem-active":""),onMouseDown:e=>{e.defaultPrevented||(e.preventDefault(),l(n))}},h.createElement("button",{className:"jp-tocItem-collapser",onClick:e=>{e.preventDefault(),o(n)},style:{visibility:e?"visible":"hidden"}},n.collapsed?h.createElement(g.dz.react,{tag:"span",width:"20px"}):h.createElement(g.h4.react,{tag:"span",width:"20px"})),h.createElement("span",{className:"jp-tocItem-content",title:n.text,...n.dataset},n.prefix,n.text)),e&&!n.collapsed&&h.createElement("ol",null,e))}}class v extends h.PureComponent{render(){const{documentType:e}=this.props;return h.createElement("ol",{className:"jp-TableOfContents-content","data-document-type":e},this.buildTree())}buildTree(){if(0===this.props.headings.length)return[];const e=t=>{const n=this.props.headings,o=new Array,l=n[t];let s=t+1;for(;s<n.length&&!(n[s].level<=l.level);){const[t,n]=e(s);o.push(t),s=n}return[h.createElement(b,{key:`${l.level}-${t}-${l.text}`,isActive:!!this.props.activeHeading&&l===this.props.activeHeading,heading:l,onMouseDown:this.props.setActiveHeading,onCollapse:this.props.onCollapseChange},o.length?o:null),s]},t=new Array;let n=0;for(;n<this.props.headings.length;){const[o,l]=e(n);t.push(o),n=l}return t}}class f extends p.UB{constructor(e){super(e.model),this._placeholderHeadline=e.placeholderHeadline,this._placeholderText=e.placeholderText}render(){return this.model&&0!==this.model.headings.length?h.createElement(v,{activeHeading:this.model.activeHeading,documentType:this.model.documentType,headings:this.model.headings,onCollapseChange:e=>{this.model.toggleCollapse({heading:e})},setActiveHeading:e=>{this.model.setActiveHeading(e)}}):h.createElement("div",{className:"jp-TableOfContents-placeholder"},h.createElement("div",{className:"jp-TableOfContents-placeholderContent"},h.createElement("h3",null,this._placeholderHeadline),h.createElement("p",null,this._placeholderText)))}}class C extends u.h{constructor(e){super({content:new m.s_,translator:e}),this._model=null,this.addClass("jp-TableOfContents"),this._title=new c.Header(this._trans.__("Table of Contents")),this.header.addWidget(this._title),this._treeview=new f({placeholderHeadline:this._trans.__("No Headings"),placeholderText:this._trans.__("The table of contents shows headings in notebooks and supported files.")}),this._treeview.addClass("jp-TableOfContents-tree"),this.content.addWidget(this._treeview)}get model(){return this._model}set model(e){var t,n;this._model!==e&&(null===(t=this._model)||void 0===t||t.stateChanged.disconnect(this._onTitleChanged,this),this._model=e,this._model&&(this._model.isActive=this.isVisible),null===(n=this._model)||void 0===n||n.stateChanged.connect(this._onTitleChanged,this),this._onTitleChanged(),this._treeview.model=this._model)}onAfterHide(e){super.onAfterHide(e),this._model&&(this._model.isActive=!1)}onBeforeShow(e){super.onBeforeShow(e),this._model&&(this._model.isActive=!0)}_onTitleChanged(){var e,t;this._title.setTitle(null!==(t=null===(e=this._model)||void 0===e?void 0:e.title)&&void 0!==t?t:this._trans.__("Table of Contents"))}}!function(e){class t extends m.$L{constructor(e){const t=document.createElement("h2");t.textContent=e,t.classList.add("jp-text-truncated"),super({node:t}),this._title=t}setTitle(e){this._title.textContent=e}}e.Header=t}(c||(c={}));class _{constructor(){this.modelMapping=new WeakMap}add(e,t){this.modelMapping.set(e,t)}get(e){const t=this.modelMapping.get(e);return!t||t.isDisposed?null:t}}var y=n(33153);class w{constructor(){this._generators=new Map,this._idCounter=0}getModel(e,t){for(const n of this._generators.values())if(n.isApplicable(e))return n.createNew(e,t)}add(e){const t=this._idCounter++;return this._generators.set(t,e),new y.DisposableDelegate((()=>{this._generators.delete(t)}))}}var T,H=n(61649),x=n(45729),j=n(73962);!function(e){e.displayNumbering="toc:display-numbering",e.displayH1Numbering="toc:display-h1-numbering",e.displayOutputNumbering="toc:display-outputs-numbering",e.showPanel="toc:show-panel",e.toggleCollapse="toc:toggle-collapse"}(T||(T={}));const A={id:"@jupyterlab/toc-extension:registry",description:"Provides the table of contents registry.",autoStart:!0,provides:i,activate:()=>new w},N={id:"@jupyterlab/toc-extension:tracker",description:"Adds the table of content widget and provides its tracker.",autoStart:!0,provides:d,requires:[i],optional:[H.gv,o.L,l.r,s.O],activate:async function(e,t,n,o,l,s){const a=(null!=n?n:H.Sr).load("jupyterlab");let i={...r.defaultConfig};const d=new C(null!=n?n:void 0);function c(e){return e.headings.some((e=>{var t;return!(null!==(t=e.collapsed)&&void 0!==t&&t)}))}d.title.icon=g.yv,d.title.caption=a.__("Table of Contents"),d.id="table-of-contents",d.node.setAttribute("role","region"),d.node.setAttribute("aria-label",a.__("Table of Contents section")),e.commands.addCommand(T.displayH1Numbering,{label:a.__("Show first-level heading number"),execute:()=>{d.model&&d.model.setConfiguration({numberingH1:!d.model.configuration.numberingH1})},isEnabled:()=>{var e,t;return null!==(t=null===(e=d.model)||void 0===e?void 0:e.supportedOptions.includes("numberingH1"))&&void 0!==t&&t},isToggled:()=>{var e,t;return null!==(t=null===(e=d.model)||void 0===e?void 0:e.configuration.numberingH1)&&void 0!==t&&t}}),e.commands.addCommand(T.displayNumbering,{label:a.__("Show heading number in the document"),icon:e=>e.toolbar?g.SZ:void 0,execute:()=>{d.model&&(d.model.setConfiguration({numberHeaders:!d.model.configuration.numberHeaders}),e.commands.notifyCommandChanged(T.displayNumbering))},isEnabled:()=>{var e,t;return null!==(t=null===(e=d.model)||void 0===e?void 0:e.supportedOptions.includes("numberHeaders"))&&void 0!==t&&t},isToggled:()=>{var e,t;return null!==(t=null===(e=d.model)||void 0===e?void 0:e.configuration.numberHeaders)&&void 0!==t&&t}}),e.commands.addCommand(T.displayOutputNumbering,{label:a.__("Show output headings"),execute:()=>{d.model&&d.model.setConfiguration({includeOutput:!d.model.configuration.includeOutput})},isEnabled:()=>{var e,t;return null!==(t=null===(e=d.model)||void 0===e?void 0:e.supportedOptions.includes("includeOutput"))&&void 0!==t&&t},isToggled:()=>{var e,t;return null!==(t=null===(e=d.model)||void 0===e?void 0:e.configuration.includeOutput)&&void 0!==t&&t}}),e.commands.addCommand(T.showPanel,{label:a.__("Table of Contents"),execute:()=>{e.shell.activateById(d.id)}}),e.commands.addCommand(T.toggleCollapse,{label:()=>d.model&&!c(d.model)?a.__("Expand All Headings"):a.__("Collapse All Headings"),icon:e=>e.toolbar?d.model&&!c(d.model)?g.L3:g.tK:void 0,execute:()=>{d.model&&(c(d.model)?d.model.toggleCollapse({collapsed:!0}):d.model.toggleCollapse({collapsed:!1}))},isEnabled:()=>null!==d.model});const u=new _;let m;if(o&&o.add(d,"@jupyterlab/toc:plugin"),s)try{m=await s.load(A.id);const t=t=>{const n=t.composite;for(const e of[...Object.keys(i)]){const t=n[e];void 0!==t&&(i[e]=t)}if(l)for(const e of l.widgets("main")){const t=u.get(e);t&&t.setConfiguration(i)}else if(e.shell.currentWidget){const t=u.get(e.shell.currentWidget);t&&t.setConfiguration(i)}};m&&(m.changed.connect(t),t(m))}catch(e){console.error(`Failed to load settings for the Table of Contents extension.\n\n${e}`)}const p=new x.oR({commands:e.commands,id:T.displayNumbering,args:{toolbar:!0},label:""});p.addClass("jp-toc-numberingButton"),d.toolbar.addItem("display-numbering",p),d.toolbar.addItem("spacer",x.o8.createSpacerItem()),d.toolbar.addItem("collapse-all",new x.oR({commands:e.commands,id:T.toggleCollapse,args:{toolbar:!0},label:""}));const h=new j.q({commands:e.commands});h.addItem({command:T.displayH1Numbering}),h.addItem({command:T.displayOutputNumbering});const b=new x.hA({tooltip:a.__("More actionsâ€¦"),icon:g.uW,actualOnClick:!0,onClick:()=>{const e=b.node.getBoundingClientRect();h.open(e.x,e.bottom)}});return d.toolbar.addItem("submenu",b),e.shell.add(d,"left",{rank:400,type:"Table of Contents"}),l&&l.currentChanged.connect(v),e.restored.then((()=>{v()})),u;function v(){var n;let o=e.shell.currentWidget;if(!o)return;let l=u.get(o);l||(l=null!==(n=t.getModel(o,i))&&void 0!==n?n:null,l&&u.add(o,l),o.disposed.connect((()=>{null==l||l.dispose()}))),d.model&&(d.model.headingsChanged.disconnect(f),d.model.collapseChanged.disconnect(f)),d.model=l,d.model&&(d.model.headingsChanged.connect(f),d.model.collapseChanged.connect(f)),e.commands.notifyCommandChanged(T.displayNumbering),e.commands.notifyCommandChanged(T.toggleCollapse)}function f(){e.commands.notifyCommandChanged(T.toggleCollapse)}}},O=[A,N]}}]);