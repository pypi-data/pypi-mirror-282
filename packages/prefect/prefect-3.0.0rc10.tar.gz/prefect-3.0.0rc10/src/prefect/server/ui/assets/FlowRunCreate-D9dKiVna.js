import{cd as h,d as b,aF as k,e as F,an as N,ce as I,ae as S,f as x,m as e,c as B,g as d,a as D,i as J,k as O,o as P,l as p,cf as T,cg as V,ch as $,ci as Q,bo as i,$ as f,K as U}from"./index-DmG-an2w.js";import{u as A}from"./usePageTitle-dvSfGJr8.js";class K extends h{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const j=b({__name:"FlowRunCreate",setup(y){const t=k(),l=F("deploymentId"),c=O(),w=N("parameters",K,void 0),{deployment:a}=I(l),o=S(!1),R=async u=>{var m,s;if(!o.value)try{o.value=!0;const n=await t.deployments.createDeploymentFlowRunV2(l.value,u),r=((s=(m=u.state)==null?void 0:m.stateDetails)==null?void 0:s.scheduledTime)??void 0,g=!r,C=$(Q,{flowRun:n,flowRunRoute:i.flowRun,router:c,immediate:g,startTime:r});f(C,"success"),c.push(i.deployment(l.value))}catch(n){const r=U(n,"Something went wrong trying to create a flow run");f(r,"error"),console.error(n)}finally{o.value=!1}},_=()=>{c.back()},v=x(()=>a.value?`Create Flow Run for Deployment: ${a.value.name}`:"Create Flow Run for Deployment");return A(v),(u,m)=>{const s=J("p-layout-default");return e(a)?(P(),B(s,{key:0},{header:d(()=>[p(e(T),{deployment:e(a)},null,8,["deployment"])]),default:d(()=>[p(e(V),{deployment:e(a),parameters:e(w),disabled:o.value,onSubmit:R,onCancel:_},null,8,["deployment","parameters","disabled"])]),_:1})):D("",!0)}}});export{j as default};
//# sourceMappingURL=FlowRunCreate-D9dKiVna.js.map
