import{_ as oe}from"./nuxt-link.DkX7AKf7.js";import{n as se,u as D,r as c,v as P,q as m,A as le,w as n,B as ie,o as h,a as t,b as i,d as p,y as s,C as G,t as R,c as y,s as N,F as j,x as F,z as ne}from"./entry.DufkozSH.js";import{r as T,h as U}from"./http-error-handling.BbcmLHJS.js";import{i as re,a as de,b as ue,c as ce,d as pe}from"./artifact-validation.B954oN-7.js";const me={style:{"padding-top":"60px"}},he={style:{display:"flex"}},_e={class:"split-div"},be=t("b",null,"Model",-1),ve=t("br",null,null,-1),fe={class:"split-div"},ye=t("b",null,"Version",-1),we=t("br",null,null,-1),Ve=t("div",null,null,-1),ge={class:"scrollable-table-div"},Ee=t("p",null," A negotiation card is a document with a series of discussion points to be documented during a negotiation between all project stakeholders at the project's outset. It is then used as a reference throughout development and is updated at prescribed negotiation points. ",-1),xe={class:"table usa-table usa-table--borderless"},Ae=t("thead",null,[t("tr",null,[t("th",{"data-sortable":"",scope:"col",role:"columnheader"},"ID"),t("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Timestamp"),t("th",{scope:"col"},"Actions")])],-1),Re={scope:"row"},Te={key:0,style:{float:"left",color:"red"}},Ue={class:"scrollable-table-div"},ke=t("p",null," A report is a human and machine-readable summary of all knowledge gained about a model during the MLTE process. ",-1),Se={class:"table usa-table usa-table--borderless"},Ie=t("thead",null,[t("tr",null,[t("th",{"data-sortable":"",scope:"col",role:"columnheader"},"ID"),t("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Timestamp"),t("th",{scope:"col"},"Actions")])],-1),qe={scope:"row"},Be={key:0,style:{float:"left",color:"red"}},Ce={class:"scrollable-table-div"},Me=t("p",null," A specification (spec) defines the model requirements that must be satisfied to ensure successful integration with the target system. ",-1),Le={class:"scrollable-table-div"},$e=t("p",null," Validated Specification are produced by combining a specification with its corresponding results; this artifact communicates how well a model performed against all of its requirements. ",-1),De={class:"scrollable-table-div"},Pe=t("p",null," Values are the atomic unit of model evaluation in MLTE. A value is any artifact produced by a MLTE measurement for the purposes of model evaluation. ",-1),je=se({__name:"index",async setup(ze){let _,b;const w=ne(),V=D("token"),J=c([{href:"/",text:""}]),g=c(""),E=c(""),v=c([]),f=c([]),S=c([]),r=D("selectedModel");r.value=r.value||"";const u=D("selectedVersion",{decode:!1});u.value=u.value||"";const K=c([{id:"id",label:"ID",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),Q=c([{id:"id",label:"ID",sortable:!0},{id:"specid",label:"SpecID",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),W=c([{id:"id",label:"ID",sortable:!0},{id:"measurement",label:"Measurement",sortable:!0},{id:"type",label:"Type",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),I=c([]),q=c([]),B=c([]),C=c([]),M=c([]);[_,b]=P(()=>z()),await _,b(),v.value!==null&&v.value.length>0&&(v.value.map(a=>a.value).includes(r.value)||(r.value="",u.value=""),r.value!==""&&([_,b]=P(()=>L(r.value,!1)),await _,b(),f.value.map(d=>d.value).includes(u.value)||(u.value=""),u.value!==""&&([_,b]=P(()=>H(u.value)),await _,b())));async function z(){await $fetch(w.public.apiPath+"/user/me/models/",{retry:0,method:"GET",headers:{Authorization:"Bearer "+V.value},onRequestError(){T()},onResponse({response:o}){S.value=o._data},onResponseError({response:o}){U(o.status,o._data.error_description)}}),v.value=[],S.value&&S.value.forEach(o=>{v.value.push({value:o,text:o})})}async function L(o,a){if(r.value=o,a&&(u.value=""),o===""){f.value=[],k();return}await $fetch(w.public.apiPath+"/model/"+o+"/version",{retry:0,method:"GET",headers:{Authorization:"Bearer "+V.value},onRequestError(){T()},onResponse({response:d}){d._data&&(k(),r.value=o,f.value=[],d._data.forEach(e=>{f.value.push({value:e,text:e})}))},onResponseError({response:d}){U(d.status,d._data.error_description)}}),f.value.sort(function(d,e){return d.value<e.value?-1:d.value>e.value?1:0})}async function H(o){if(u.value=o,o===""){k();return}await $fetch(w.public.apiPath+"/model/"+r.value+"/version/"+o+"/artifact",{retry:0,method:"GET",headers:{Authorization:"Bearer "+V.value},onRequestError(){T()},onResponse({response:a}){a._data&&(u.value=o,X(r.value,u.value,a._data))},onResponseError({response:a}){U(a.status,a._data.error_description)}})}function X(o,a,d){k(),d.forEach(e=>{e.header.timestamp=new Date(e.header.timestamp*1e3).toLocaleString("en-US"),e.header.type==="negotiation_card"?re(e)&&I.value.push({id:e.header.identifier,timestamp:e.header.timestamp,model:o,version:a}):e.header.type==="report"?de(e)&&B.value.push({id:e.header.identifier,timestamp:e.header.timestamp,model:o,version:a}):e.header.type==="spec"?ue(e)&&q.value.push({id:e.header.identifier,timestamp:e.header.timestamp,model:o,version:a}):e.header.type==="validated_spec"&&ce(e)&&C.value.push({id:e.header.identifier,specid:e.body.spec_identifier,timestamp:e.header.timestamp,model:o,version:a}),e.header.type==="value"&&pe(e)&&M.value.push({id:e.header.identifier.slice(0,-6),measurement:e.body.metadata.measurement_type,type:e.body.value.value_type,timestamp:e.header.timestamp,model:o,version:a})})}function k(){I.value=[],B.value=[],q.value=[],C.value=[],M.value=[]}async function Y(o){try{await $fetch(w.public.apiPath+"/model/",{retry:0,method:"POST",headers:{Authorization:"Bearer "+V.value},body:{identifier:o},onRequestError(){T()},onResponse({response:a}){a.ok&&(z(),alert(`Model, ${o} has been created.`),g.value="")},onResponseError({response:a}){U(a.status,a._data.error_description)}})}catch{return}}async function Z(o,a){try{await $fetch(w.public.apiPath+"/model/"+o+"/version",{retry:0,method:"POST",headers:{Authorization:"Bearer "+V.value},body:{identifier:a},onRequestError(){T()},onResponse({response:d}){d.ok&&(L(o,!1),alert(`Version, ${a} for model, ${o} has been created`),E.value="")},onResponseError({response:d}){U(d.status,d._data.error_description)}})}catch{return}}return(o,a)=>{const d=m("UsaTextInput"),e=m("UsaButton"),ee=m("UsaBreadcrumb"),O=m("UsaSelect"),x=oe,A=m("UsaAccordionItem"),$=m("UsaTable"),te=m("UsaAccordion"),ae=ie;return h(),le(ae,{name:"base-layout"},{sidebar:n(()=>[t("div",me,[i(d,{modelValue:s(g),"onUpdate:modelValue":a[0]||(a[0]=l=>G(g)?g.value=l:null)},{label:n(()=>[p(" New Model ")]),_:1},8,["modelValue"]),i(e,{class:"secondary-button margin-button",onClick:a[1]||(a[1]=l=>Y(s(g)))},{default:n(()=>[p(" Create Model ")]),_:1}),i(d,{modelValue:s(E),"onUpdate:modelValue":a[2]||(a[2]=l=>G(E)?E.value=l:null),disabled:s(r)===""},{label:n(()=>[p(" New Version for: "+R(s(r)),1)]),_:1},8,["modelValue","disabled"]),i(e,{class:"secondary-button margin-button",onClick:a[3]||(a[3]=l=>Z(s(r),s(E)))},{default:n(()=>[p(" Create Version ")]),_:1})])]),default:n(()=>[i(ee,{items:s(J)},null,8,["items"]),t("div",he,[t("div",_e,[be,i(O,{options:s(v),"model-value":s(r),"onUpdate:modelValue":a[4]||(a[4]=l=>L(l,!0))},null,8,["options","model-value"]),ve]),t("div",fe,[ye,i(O,{options:s(f),"model-value":s(u),"onUpdate:modelValue":a[5]||(a[5]=l=>H(l))},null,8,["options","model-value"]),we]),Ve]),i(te,{multiselectable:"",bordered:""},{default:n(()=>[i(A,{label:"Negotiation Cards"},{default:n(()=>[t("div",ge,[Ee,t("table",xe,[Ae,t("tbody",null,[(h(!0),y(j,null,N(s(I),l=>(h(),y("tr",{key:l.id},[t("th",Re,R(l.id),1),t("td",null,R(l.timestamp),1),t("td",null,[i(x,{to:{path:"/negotiation-card",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:n(()=>[i(e,{class:"primary-button"},{default:n(()=>[p(" Edit ")]),_:1})]),_:2},1032,["to"])])]))),128))])]),i(x,{to:{path:"/negotiation-card",query:{model:s(r),version:s(u)}}},{default:n(()=>[i(e,{disabled:s(r)===""||s(u)==="",class:"primary-button",style:{float:"left"}},{default:n(()=>[p(" New ")]),_:1},8,["disabled"])]),_:1},8,["to"]),s(r)===""||s(u)===""?(h(),y("p",Te," Select a model and version to start a new negotiation card here. ")):F("",!0)])]),_:1}),i(A,{label:"Reports"},{default:n(()=>[t("div",Ue,[ke,t("table",Se,[Ie,t("tbody",null,[(h(!0),y(j,null,N(s(B),l=>(h(),y("tr",{key:l.id},[t("th",qe,R(l.id),1),t("td",null,R(l.timestamp),1),t("td",null,[i(x,{to:{path:"/report-form",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:n(()=>[i(e,{class:"primary-button"},{default:n(()=>[p(" Edit ")]),_:1})]),_:2},1032,["to"]),i(x,{target:"_blank",to:{path:"/report-export",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:n(()=>[i(e,{class:"primary-button"},{default:n(()=>[p(" Export ")]),_:1})]),_:2},1032,["to"])])]))),128))])]),i(x,{to:{path:"/report-form",query:{model:s(r),version:s(u)}}},{default:n(()=>[i(e,{disabled:s(r)===""||s(u)==="",class:"primary-button",style:{float:"left"}},{default:n(()=>[p(" New ")]),_:1},8,["disabled"])]),_:1},8,["to"]),s(r)===""||s(u)===""?(h(),y("p",Be," Select a model and version to start a new report. ")):F("",!0)])]),_:1}),i(A,{label:"Specifications"},{default:n(()=>[t("div",Ce,[Me,i($,{headers:s(K),rows:s(q),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1}),i(A,{label:"Validated Specification"},{default:n(()=>[t("div",Le,[$e,i($,{headers:s(Q),rows:s(C),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1}),i(A,{label:"Values"},{default:n(()=>[t("div",De,[Pe,i($,{headers:s(W),rows:s(M),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1})]),_:1})]),_:1})}}});export{je as default};
