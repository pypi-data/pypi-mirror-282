import{n as S,u as F,r as x,H as m,v as T,c as r,a as e,d as s,t,y as i,F as b,s as p,o as a,z as B}from"./entry.DufkozSH.js";import{u as C}from"./fetch.BKmV86es.js";import{r as L,h as O}from"./http-error-handling.BbcmLHJS.js";import{a as q}from"./artifact-validation.B954oN-7.js";import{f as N}from"./util.CdFxTbte.js";const P=""+new URL("MLTE_Black.DU6oRV2v.svg",import.meta.url).href,A={class:"report-body"},D={class:"report-header rounded-border section-margin"},V=e("div",{class:"header-img"},[e("img",{src:P,height:"75px",width:"75px"})],-1),z=e("div",{class:"spacer"},null,-1),G={class:"header-title centered-container"},H=e("br",null,null,-1),I=e("div",{class:"spacer"},null,-1),U=e("div",{class:"header-authors"},[s(" author details "),e("br"),s(" author details "),e("br"),s(" author details ")],-1),J={class:"rounded-border section-margin"},j=e("h3",{class:"insection-margin"},"Overview",-1),$=e("hr",null,null,-1),K={class:"info-box-row insection-margin"},Q={class:"info-box-third rounded-border"},W=e("br",null,null,-1),X={class:"info-box-two-third rounded-border"},Y=e("br",null,null,-1),Z=e("div",{class:"rounded-border insection-margin"},[e("h3",null,"Results")],-1),ee={class:"table usa-table usa-table--borderless section-margin",style:{"margin-top":"0px"}},te=e("thead",null,[e("tr",null,[e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Status"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Property"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Measurement"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Evidence ID"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Message")])],-1),se={key:0,style:{"background-color":"rgba(210, 232, 221, 255)"}},oe={key:1,style:{"background-color":"rgba(255, 243, 205, 255)"}},re={key:2,style:{"background-color":"rgba(248, 216, 219, 255)"}},ae={key:3},ne={class:"rounded-border"},de=e("h3",null,"System Information",-1),ie=e("hr",null,null,-1),le={class:"info-box-row insection-margin"},ce={class:"info-box-third rounded-border"},ue=e("br",null,null,-1),_e={class:"info-box-third rounded-border"},he=e("br",null,null,-1),me={class:"info-box-third rounded-border"},be=e("br",null,null,-1),pe={class:"info-box-row"},ve={class:"info-box-third rounded-border"},fe=e("br",null,null,-1),ye={class:"info-box-third rounded-border"},ge=e("br",null,null,-1),ke={class:"info-box-third rounded-border"},xe=e("br",null,null,-1),Te=S({__name:"report-export",async setup(Re){let v,f;const R=B(),y=F("token"),g=x(null),n=x(null),_=m().query.model,k=m().query.version,E=m().query.artifactId;[v,f]=T(async()=>C(R.public.apiPath+"/model/"+_+"/version/"+k+"/artifact/"+E,{retry:0,method:"GET",headers:{Authorization:"Bearer "+y.value},onRequestError(){L()},async onResponse({response:d}){if(q(d._data)&&(n.value=d._data.body,d._data.body.performance.validated_spec_id)){n.value.performance.validated_spec_id=d._data.body.performance.validated_spec_id;const c=await N(y.value,_,k,n.value.performance.validated_spec_id);g.value=w(c)}},onResponseError({response:d}){O(d.status,d._data.error_description)}},"$tg4zeeHG5C")),await v,f();function w(d){console.log("loading findings");const c=[],o=JSON.parse(JSON.stringify(d));return o.body.spec.properties.forEach(u=>{new Map(Object.entries(o.body.results[u.name])).forEach(l=>{const M={status:l.type,property:u.name,measurement:l.metadata.measurement_type,evidence_id:l.metadata.identifier.name,message:l.message};c.push(M)})}),c}return(d,c)=>(a(),r("div",A,[e("div",D,[V,z,e("div",G,[e("h3",null,[s(" MLTE REPORT "),H,s(" "+t(i(_))+" Model ",1)])]),I,U]),e("div",J,[j,$,(a(!0),r(b,null,p(i(n).performance.goals,(o,u)=>(a(),r("div",{key:u},[e("div",K,[e("div",Q,[s(" Goal "+t(u+1)+":",1),W,s(" "+t(o.description),1)]),e("div",X,[s(" Metrics and Baselines: "),Y,(a(!0),r(b,null,p(o.metrics,(h,l)=>(a(),r("div",{key:l},t(l+1)+". "+t(h.description)+" - "+t(h.baseline),1))),128))])])]))),128))]),Z,e("table",ee,[te,e("tbody",null,[(a(!0),r(b,null,p(i(g),o=>(a(),r("tr",{key:o.evidence_id},[o.status=="Success"?(a(),r("td",se,t(o.status),1)):o.status=="Ignore"?(a(),r("td",oe,t(o.status),1)):o.status=="Failure"?(a(),r("td",re,t(o.status),1)):(a(),r("td",ae,t(o.status),1)),e("td",null,t(o.property),1),e("td",null,t(o.measurement),1),e("td",null,t(o.evidence_id),1),e("td",null,t(o.message),1)]))),128))])]),e("div",ne,[de,ie,e("div",le,[e("div",ce,[s(" ML Problem Type: "),ue,s(" "+t(i(n).summary.problem_type),1)]),e("div",_e,[s(" ML Task: "),he,s(" "+t(i(n).summary.task),1)]),e("div",me,[s(" Usage Context: "),be,s(" "+t(i(n).intended_use.usage_context),1)])]),e("div",pe,[e("div",ve,[s(" FP Risk: "),fe,s(" "+t(i(n).risks.fp),1)]),e("div",ye,[s(" FN Risk: "),ge,s(" "+t(i(n).risks.fn),1)]),e("div",ke,[s(" Other Risks: "),xe,s(" "+t(i(n).risks.other),1)])])])]))}});export{Te as default};
