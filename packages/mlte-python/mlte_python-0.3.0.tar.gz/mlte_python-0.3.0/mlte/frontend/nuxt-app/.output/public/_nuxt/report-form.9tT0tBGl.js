import{_ as le,a as ae,b as ne}from"./add-button.BZtjkZ4h.js";import{n as se,u as ie,r as D,H as g,v as re,q as w,A as G,w as a,B as ue,o as p,b as l,y as u,C as de,d as o,x as ce,a as e,c as _,s as k,t as b,F as C,z as me}from"./entry.DufkozSH.js";import{u as pe}from"./fetch.BKmV86es.js";import{r as N,h as O}from"./http-error-handling.BbcmLHJS.js";import{a as L}from"./artifact-validation.B954oN-7.js";import{f as _e}from"./util.CdFxTbte.js";import{c as fe,s as he}from"./form-methods.CNbtV1xJ.js";const ve=e("h1",{class:"section-header"},"MLTE REPORT",-1),be=e("br",null,null,-1),Ve=e("h2",{class:"section-header"},"Model Summary",-1),ye=e("p",null,"A summary of the model under evaluation.",-1),ge=e("h2",{class:"section-header"},"Performance",-1),Ue=e("p",null,"Model performance evaluation.",-1),ke={class:"input-group"},Ce=e("h3",null,"Goals",-1),Ae=e("p",null,"Goals or objectives that the model is going to help satisfy.",-1),qe=e("h3",{class:"no-margin-sub-header"},"Metrics",-1),De={class:"inline-input-left"},we=e("br",null,null,-1),Se=e("br",null,null,-1),xe={class:"inline-input-right"},Re=e("br",null,null,-1),Pe=e("br",null,null,-1),Ee=e("br",null,null,-1),Te={class:"inline-button"},Fe=e("hr",null,null,-1),Me=e("h3",null,"MLTE Evaluation",-1),Be={class:"table usa-table usa-table--borderless"},$e=e("thead",null,[e("tr",null,[e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Status"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Property"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Measurement"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Evidence ID"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Message")])],-1),Ge={key:0,style:{"background-color":"rgba(210, 232, 221, 255)"}},Ne={key:1,style:{"background-color":"rgba(255, 243, 205, 255)"}},Oe={key:2,style:{"background-color":"rgba(248, 216, 219, 255)"}},Le={key:3},He=e("h2",{class:"section-header"},"Intended Use",-1),je=e("p",null,"A description of how the model is intended to be used.",-1),ze={class:"input-group",style:{"margin-top":"1em"}},Ie=e("h3",null,"Production Compute Resources",-1),Je=e("p",null," Describe the hardware and software requirements including amount of compute resources needed for inference. ",-1),Ke={class:"inline-input-left"},Qe={class:"inline-input-right"},Ze={class:"inline-input-left"},We={class:"inline-input-right"},Xe=e("h2",{class:"section-header"},"Risks",-1),Ye=e("h2",{class:"section-header"},"Data",-1),et=e("p",null,"A description of the data used to train the model.",-1),tt=e("h2",{class:"section-header"},"Data",-1),ot=e("p",null," Details of the data that will influence development efforts; fill out all that are known. For access / availability, record what needs to happen to access the data, such as accounts that need to be created or methods for data transportation. ",-1),lt={class:"input-group"},at={class:"inline-input-left"},nt={class:"inline-input-right"},st={class:"input-group",style:{"margin-top":"1em"}},it={class:"inline-input-left"},rt={class:"inline-input-right"},ut={class:"inline-button"},dt={class:"input-group",style:{"margin-top":"1em"}},ct={class:"no-margin-sub-header"},mt={class:"inline-input-left"},pt={class:"inline-input-right"},_t={class:"inline-input-left"},ft={class:"inline-input-right"},ht={class:"inline-input-left"},vt={class:"inline-input-right"},bt=e("hr",null,null,-1),Vt=e("hr",null,null,-1),yt=e("h3",null,"Comments",-1),gt=e("p",null,"Free-form comments from model developers and system integrators.",-1),Ut=e("h3",null,"Quantitative Analysis",-1),kt=e("p",null,"No quantitative analysis included with this report.",-1),Ct={style:{"text-align":"right","margin-top":"1em"}},Et=se({__name:"report-form",async setup(At){let T,F;const M=me(),R=ie("token"),H=D([{href:"/",text:"Artifact Store"},{href:"/here",text:"Report"}]),S=D(""),B=D(g().query.artifactId!==void 0),$=D(null),i=D({artifact_type:"report",summary:{problem_type:"classification",task:""},performance:{goals:[{description:"",metrics:[{description:"",baseline:""}]}],validated_spec_id:null},intended_use:{usage_context:"",production_requirements:{integration:"",interface:{input:{description:""},output:{description:""}},resources:{cpu:"",gpu:"",memory:"",storage:""}}},risks:{fp:"",fn:"",other:""},data:[{access:"",description:"",source:"",classification:"unclassified",labels:[{description:"",percentage:0}],fields:[{name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""}],rights:"",policies:"",identifiable_information:""}],comments:[{content:""}],quantitative_analysis:{}}),P=[{value:"classification",text:"Classification"},{value:"clustering",text:"Clustering"},{value:"detection",text:"Detection"},{value:"trend",text:"Trend"},{value:"alert",text:"Alert"},{value:"forecasting",text:"Forecasting"},{value:"content_generation",text:"Content Generation"},{value:"benchmarking",text:"Benchmarking"},{value:"goals",text:"Goals"},{value:"other",text:"Other"}],E=[{value:"unclassified",text:"Unclassified"},{value:"cui",text:"Controlled Unclassified Information (CUI)"},{value:"pii",text:"Personally Identifiable Information (PII)"},{value:"phi",text:"Protected Health Information (PHI)"},{value:"other",text:"Other"}];if(g().query.artifactId!==void 0){const d=g().query.model,n=g().query.version,V=g().query.artifactId;[T,F]=re(async()=>pe(M.public.apiPath+"/model/"+d+"/version/"+n+"/artifact/"+V,{retry:0,method:"GET",headers:{Authorization:"Bearer "+R.value},onRequestError(){N()},async onResponse({response:c}){var r,h;if(L(c._data)){i.value=c._data.body;const y=c._data.body.summary.problem_type;if(((r=P.find(v=>v.value===y))==null?void 0:r.value)!==void 0&&(i.value.summary.problem_type=(h=P.find(v=>v.value===y))==null?void 0:h.value),c._data.body.data.forEach(v=>{var A,x;const q=v.classification;((A=E.find(t=>t.value===q))==null?void 0:A.value)!==void 0&&(v.classification=(x=E.find(t=>t.value===q))==null?void 0:x.value)}),c._data.body.performance.validated_spec_id){i.value.performance.validated_spec_id=c._data.body.performance.validated_spec_id;const v=await _e(R.value,d,n,i.value.performance.validated_spec_id);$.value=z(v)}}},onResponseError({response:c}){O(c.status,c._data.error_description)}},"$gSGc1Ze9fK")),await T,F()}async function j(){var r;const d=g().query.model,n=g().query.version;let V="";g().query.artifactId===void 0?V=S.value:V=(r=g().query.artifactId)==null?void 0:r.toString();const c={header:{identifier:V,type:"report",timestamp:-1,creator:""},body:i.value};if(L(c))try{await $fetch(M.public.apiPath+"/model/"+d+"/version/"+n+"/artifact",{retry:0,method:"POST",headers:{Authorization:"Bearer "+R.value},body:{artifact:c,force:B.value,parents:!1},onRequestError(){N()},onResponseError({response:h}){h.status===409?conflictErrorAlert():O(h.status,h._data.error_description)}}),he("report",V),B.value=!0}catch{return}else console.log("Invalid report.")}function z(d){const n=[],V=JSON.parse(JSON.stringify(d));return V.body.spec.properties.forEach(c=>{new Map(Object.entries(V.body.results[c.name])).forEach(h=>{const y={status:h.type,property:c.name,measurement:h.metadata.measurement_type,evidence_id:h.metadata.identifier.name,message:h.message};n.push(y)})}),n}function I(){alert("Report export is not currently implemented.")}function J(){i.value.performance.goals.push({description:"",metrics:[{description:"",baseline:""}]})}function K(d){confirm("Are you sure you want to delete this goal?")&&i.value.performance.goals.splice(d,1)}function Q(d){i.value.performance.goals[d].metrics.push({description:"",baseline:""})}function Z(d,n){confirm("Are you sure you want to delete this metric?")&&i.value.performance.goals[d].metrics.splice(n,1)}function W(){i.value.data.push({access:"",description:"",source:"",classification:"unclassified",labels:[{description:"",percentage:0}],fields:[{name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""}],rights:"",policies:"",identifiable_information:""})}function X(d){confirm("Are you sure you want to delete this data item?")&&i.value.data.splice(d,1)}function Y(d){i.value.data[d].labels.push({description:"",percentage:0})}function ee(d,n){confirm("Are you sure you want to delete this label?")&&i.value.data[d].labels.splice(n,1)}function te(d){i.value.data[d].fields.push({name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""})}function oe(d,n){confirm("Are you sure you want to delete this field?")&&i.value.data[d].fields.splice(n,1)}return(d,n)=>{const V=w("UsaBreadcrumb"),c=le,r=w("UsaTextInput"),h=w("UsaSelect"),y=ae,v=ne,q=w("UsaTextarea"),A=w("UsaButton"),x=ue;return p(),G(x,{name:"base-layout"},{default:a(()=>[l(V,{items:u(H)},null,8,["items"]),ve,("useRoute"in d?d.useRoute:u(g))().query.artifactId===void 0?(p(),G(r,{key:0,modelValue:u(S),"onUpdate:modelValue":n[0]||(n[0]=t=>de(S)?S.value=t:null)},{label:a(()=>[o(" Artifact ID "),l(c,null,{default:a(()=>[o(" The Artifact ID this negotiation card "),be,o(" will be saved under upon submission. ")]),_:1})]),_:1},8,["modelValue"])):ce("",!0),Ve,ye,l(h,{modelValue:u(i).summary.problem_type,"onUpdate:modelValue":n[1]||(n[1]=t=>u(i).summary.problem_type=t),options:P},{label:a(()=>[o(" Problem Type "),l(c,null,{default:a(()=>[o(" Type of ML problem the model is intended to solve ")]),_:1})]),_:1},8,["modelValue"]),l(r,{"model-value":u(i).summary.task},{label:a(()=>[o(" Task ")]),_:1},8,["model-value"]),ge,Ue,e("div",ke,[Ce,Ae,(p(!0),_(C,null,k(u(i).performance.goals,(t,f)=>(p(),_("div",{key:f},[e("h3",null,"Goal "+b(f+1),1),l(r,{modelValue:t.description,"onUpdate:modelValue":s=>t.description=s},{label:a(()=>[o(" Goal Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),qe,(p(!0),_(C,null,k(t.metrics,(s,U)=>(p(),_("div",{key:U},[e("div",De,[l(r,{modelValue:s.description,"onUpdate:modelValue":m=>s.description=m},{label:a(()=>[o(" Description "),l(c,null,{default:a(()=>[o(" For each goal, select a performance metric that captures the system's "),we,o(" ability to accomplish that goal; e.g., acceptance criteria for determining "),Se,o(" that the model is performing correctly. ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",xe,[l(r,{modelValue:s.baseline,"onUpdate:modelValue":m=>s.baseline=m},{label:a(()=>[o(" Baseline "),l(c,null,{default:a(()=>[o(" Select a baseline for each performance metric, which means a measurement that "),Re,o(" evaluates whether or not the model will/can achieve the main goal for which it is being created. "),Pe,o(" If the goal cannot be measured directly, select a reasonable proxy and justify how that will "),Ee,o(" reliably predict the model’s performance in achieving its goal. ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",Te,[l(y,{onClick:m=>Z(f,U)},{default:a(()=>[o(" Delete Metric ")]),_:2},1032,["onClick"])])]))),128)),l(v,{class:"margin-button",onClick:s=>Q(f)},{default:a(()=>[o(" Add Metric ")]),_:2},1032,["onClick"]),l(y,{onClick:s=>K(f)},{default:a(()=>[o(" Delete goal ")]),_:2},1032,["onClick"]),Fe]))),128)),l(v,{class:"margin-button",onClick:n[2]||(n[2]=t=>J())},{default:a(()=>[o(" Add goal ")]),_:1})]),Me,e("table",Be,[$e,e("tbody",null,[(p(!0),_(C,null,k(u($),t=>(p(),_("tr",{key:t.evidence_id},[t.status=="Success"?(p(),_("td",Ge,b(t.status),1)):t.status=="Ignore"?(p(),_("td",Ne,b(t.status),1)):t.status=="Failure"?(p(),_("td",Oe,b(t.status),1)):(p(),_("td",Le,b(t.status),1)),e("td",null,b(t.property),1),e("td",null,b(t.measurement),1),e("td",null,b(t.evidence_id),1),e("td",null,b(t.message),1)]))),128))])]),He,je,l(q,{"model-value":u(i).intended_use.usage_context},null,8,["model-value"]),l(q,{modelValue:u(i).intended_use.production_requirements.integration,"onUpdate:modelValue":n[3]||(n[3]=t=>u(i).intended_use.production_requirements.integration=t)},{label:a(()=>[o(" A description of model integration practices. ")]),_:1},8,["modelValue"]),l(r,{modelValue:u(i).intended_use.production_requirements.interface.input.description,"onUpdate:modelValue":n[4]||(n[4]=t=>u(i).intended_use.production_requirements.interface.input.description=t)},{label:a(()=>[o(" Model input description. ")]),_:1},8,["modelValue"]),l(r,{modelValue:u(i).intended_use.production_requirements.interface.output.description,"onUpdate:modelValue":n[5]||(n[5]=t=>u(i).intended_use.production_requirements.interface.output.description=t)},{label:a(()=>[o(" Mode output description. ")]),_:1},8,["modelValue"]),e("div",ze,[Ie,Je,e("div",null,[e("div",Ke,[l(r,{modelValue:u(i).intended_use.production_requirements.resources.gpu,"onUpdate:modelValue":n[6]||(n[6]=t=>u(i).intended_use.production_requirements.resources.gpu=t)},{label:a(()=>[o(" GPU ")]),_:1},8,["modelValue"])]),e("div",Qe,[l(r,{modelValue:u(i).intended_use.production_requirements.resources.cpu,"onUpdate:modelValue":n[7]||(n[7]=t=>u(i).intended_use.production_requirements.resources.cpu=t)},{label:a(()=>[o(" CPU ")]),_:1},8,["modelValue"])])]),e("div",null,[e("div",Ze,[l(r,{modelValue:u(i).intended_use.production_requirements.resources.memory,"onUpdate:modelValue":n[8]||(n[8]=t=>u(i).intended_use.production_requirements.resources.memory=t)},{label:a(()=>[o(" Memory ")]),_:1},8,["modelValue"])]),e("div",We,[l(r,{modelValue:u(i).intended_use.production_requirements.resources.storage,"onUpdate:modelValue":n[9]||(n[9]=t=>u(i).intended_use.production_requirements.resources.storage=t)},{label:a(()=>[o(" Storage ")]),_:1},8,["modelValue"])])])]),Xe,l(r,{modelValue:u(i).risks.fp,"onUpdate:modelValue":n[10]||(n[10]=t=>u(i).risks.fp=t)},{label:a(()=>[o(" False Positive Risk ")]),_:1},8,["modelValue"]),l(r,{modelValue:u(i).risks.fn,"onUpdate:modelValue":n[11]||(n[11]=t=>u(i).risks.fn=t)},{label:a(()=>[o(" False Negative Risk ")]),_:1},8,["modelValue"]),l(r,{modelValue:u(i).risks.other,"onUpdate:modelValue":n[12]||(n[12]=t=>u(i).risks.other=t)},{label:a(()=>[o(" Other risks of producing incorrect results ")]),_:1},8,["modelValue"]),Ye,et,tt,ot,e("div",lt,[(p(!0),_(C,null,k(u(i).data,(t,f)=>(p(),_("div",{key:f},[e("h3",null,"Data Item "+b(f+1),1),l(r,{modelValue:t.access,"onUpdate:modelValue":s=>t.access=s},{label:a(()=>[o(" Account Access / Account Availability ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",null,[e("div",at,[l(r,{modelValue:t.description,"onUpdate:modelValue":s=>t.description=s},{label:a(()=>[o(" Data Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",nt,[l(r,{modelValue:t.source,"onUpdate:modelValue":s=>t.source=s},{label:a(()=>[o(" Source Data Location ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),l(h,{modelValue:t.classification,"onUpdate:modelValue":s=>t.classification=s,options:E},{label:a(()=>[o(" Data Classification ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",st,[(p(!0),_(C,null,k(t.labels,(s,U)=>(p(),_("div",{key:U},[e("div",it,[l(r,{modelValue:s.description,"onUpdate:modelValue":m=>s.description=m},{label:a(()=>[o(" Label Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",rt,[l(r,{modelValue:s.percentage,"onUpdate:modelValue":m=>s.percentage=m,type:"number"},{label:a(()=>[o(" Percentage ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",ut,[l(y,{onClick:m=>ee(f,U)},{default:a(()=>[o(" Delete label ")]),_:2},1032,["onClick"])])]))),128)),l(v,{class:"margin-button",onClick:s=>Y(f)},{default:a(()=>[o(" Add additional label ")]),_:2},1032,["onClick"])]),e("div",dt,[(p(!0),_(C,null,k(t.fields,(s,U)=>(p(),_("div",{key:U},[e("h3",ct," Data Schema "+b(f+1)+" - "+b(U+1),1),e("div",null,[e("div",mt,[l(r,{modelValue:s.name,"onUpdate:modelValue":m=>s.name=m},{label:a(()=>[o(" Field Name ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",pt,[l(r,{modelValue:s.description,"onUpdate:modelValue":m=>s.description=m},{label:a(()=>[o(" Field Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",_t,[l(r,{modelValue:s.type,"onUpdate:modelValue":m=>s.type=m},{label:a(()=>[o(" Field Type ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",ft,[l(r,{modelValue:s.expected_values,"onUpdate:modelValue":m=>s.expected_values=m},{label:a(()=>[o(" Expected Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",ht,[l(r,{modelValue:s.missing_values,"onUpdate:modelValue":m=>s.missing_values=m},{label:a(()=>[o(" Missing Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",vt,[l(r,{modelValue:s.special_values,"onUpdate:modelValue":m=>s.special_values=m},{label:a(()=>[o(" Special Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),l(y,{class:"margin-button",onClick:m=>oe(f,U)},{default:a(()=>[o(" Delete schema ")]),_:2},1032,["onClick"]),bt]))),128)),l(v,{class:"margin-button",onClick:s=>te(f)},{default:a(()=>[o(" Add additional schema ")]),_:2},1032,["onClick"])]),l(r,{modelValue:t.rights,"onUpdate:modelValue":s=>t.rights=s},{label:a(()=>[o(" Data Rights "),l(c,null,{default:a(()=>[o(" Are there particular ways in which the data can and cannot be used? ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(r,{modelValue:t.policies,"onUpdate:modelValue":s=>t.policies=s},{label:a(()=>[o(" Data Policies "),l(c,null,{default:a(()=>[o(" Are there policies that govern the data and its use, such as Personally Identifiable Information [PII]? ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(r,{modelValue:t.identifiable_information,"onUpdate:modelValue":s=>t.identifiable_information=s},{label:a(()=>[o(" Identifiable Information ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(y,{class:"margin-button",onClick:s=>X(f)},{default:a(()=>[o(" Delete data item ")]),_:2},1032,["onClick"]),Vt]))),128)),l(v,{class:"margin-button",onClick:n[13]||(n[13]=t=>W())},{default:a(()=>[o(" Add data item ")]),_:1})]),yt,gt,(p(!0),_(C,null,k(u(i).comments,(t,f)=>(p(),_("div",{key:f},[l(r,{modelValue:t.content,"onUpdate:modelValue":s=>t.content=s},null,8,["modelValue","onUpdate:modelValue"])]))),128)),Ut,kt,e("div",Ct,[l(A,{class:"secondary-button",onClick:n[14]||(n[14]=t=>("cancelFormSubmission"in d?d.cancelFormSubmission:u(fe))("/"))},{default:a(()=>[o(" Cancel ")]),_:1}),l(A,{class:"primary-button",disabled:"",onClick:n[15]||(n[15]=t=>I())},{default:a(()=>[o(" Export ")]),_:1}),l(A,{class:"primary-button",onClick:n[16]||(n[16]=t=>j())},{default:a(()=>[o(" Save ")]),_:1})])]),_:1})}}});export{Et as default};
