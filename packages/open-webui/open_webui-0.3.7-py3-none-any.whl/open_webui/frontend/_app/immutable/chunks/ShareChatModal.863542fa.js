import{x as te,b as Pe,U as Re,q as We,i as fe,p as de,h as qe,c as Ge}from"./index.30f324e9.js";import{s as le,z as se,A as ae,h as $,d as i,j as u,i as B,r as p,C as ce,p as $e,W as Be,w as Z,P as Ae,V as je,E as Le,a as L,c as U,F as Ue,G as Ne,H as Oe,f as S,l as O,e as we,g as M,R as ee,m as D,u as J,n as V,v as De,o as Je}from"./scheduler.8ceb707f.js";import{S as ne,i as oe,f as Ve,b as Y,d as F,m as x,a as H,t as R,e as K,g as ze,c as He}from"./index.07e72a31.js";import{T as Ze}from"./updater.8432fa66.js";import{b as Ye,c as Fe,M as xe}from"./menu-trigger.e06dd104.js";import{g as be}from"./navigation.89ef0947.js";import{f as Ke}from"./index.87fe8e34.js";import{A as Qe,B as Xe,k as ke,o as ye,C as et,n as tt,b as st,m as he,D as at,E as lt}from"./index.8a88a4ab.js";import{T as nt}from"./Tags.9560aa63.js";import{a as Te}from"./Toaster.svelte_svelte_type_style_lang.a1b53f72.js";import{a as ot}from"./index.a7d9cab8.js";import{M as rt}from"./Modal.3ec19a4a.js";const Wt=async l=>{let e=null;const s=await fetch(`${te}/memories/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return s},qt=async(l,e)=>{let s=null;const t=await fetch(`${te}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(s=a.detail,console.log(a),null));if(s)throw s;return t},Gt=async(l,e,s)=>{let t=null;const a=await fetch(`${te}/memories/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:s})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).catch(o=>(t=o.detail,console.log(o),null));if(t)throw t;return a},Jt=async(l,e)=>{let s=null;const t=await fetch(`${te}/memories/query`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(s=a.detail,console.log(a),null));if(s)throw s;return t},Zt=async(l,e)=>{let s=null;const t=await fetch(`${te}/memories/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).then(a=>a).catch(a=>(s=a.detail,console.log(a),null));if(s)throw s;return t},Yt=async l=>{let e=null;const s=await fetch(`${te}/memories/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return s};function it(l){let e,s;return{c(){e=se("svg"),s=se("path"),this.h()},l(t){e=ae(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=$(e);s=ae(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(s).forEach(i),a.forEach(i),this.h()},h(){u(s,"stroke-linecap","round"),u(s,"stroke-linejoin","round"),u(s,"d","m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",l[1]),u(e,"stroke","currentColor"),u(e,"class",l[0])},m(t,a){B(t,e,a),p(e,s)},p(t,[a]){a&2&&u(e,"stroke-width",t[1]),a&1&&u(e,"class",t[0])},i:ce,o:ce,d(t){t&&i(e)}}}function ct(l,e,s){let{className:t="size-3.5"}=e,{strokeWidth:a="2.5"}=e;return l.$$set=o=>{"className"in o&&s(0,t=o.className),"strokeWidth"in o&&s(1,a=o.strokeWidth)},[t,a]}class ut extends ne{constructor(e){super(),oe(this,e,ct,it,le,{className:0,strokeWidth:1})}}const ft=l=>({}),Ce=l=>({});function dt(l){let e;const s=l[8].default,t=Le(s,l,l[17],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,o){t&&t.m(a,o),e=!0},p(a,o){t&&t.p&&(!e||o&131072)&&Ue(t,s,a,a[17],e?Oe(s,a[17],o,null):Ne(a[17]),null)},i(a){e||(H(t,a),e=!0)},o(a){R(t,a),e=!1},d(a){t&&t.d(a)}}}function Ee(l){let e,s,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"></path></svg>',a,o,n=l[3].t("Playground")+"",r,c,f,w,_='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',b,m,g=l[3].t("Admin Panel")+"",T,E,y;return{c(){e=S("button"),s=S("div"),s.innerHTML=t,a=L(),o=S("div"),r=O(n),c=L(),f=S("button"),w=S("div"),w.innerHTML=_,b=L(),m=S("div"),T=O(g),this.h()},l(A){e=M(A,"BUTTON",{class:!0});var d=$(e);s=M(d,"DIV",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-4ehrk0"&&(s.innerHTML=t),a=U(d),o=M(d,"DIV",{class:!0});var I=$(o);r=D(I,n),I.forEach(i),d.forEach(i),c=U(A),f=M(A,"BUTTON",{class:!0});var v=$(f);w=M(v,"DIV",{class:!0,"data-svelte-h":!0}),ee(w)!=="svelte-1vodyax"&&(w.innerHTML=_),b=U(v),m=M(v,"DIV",{class:!0});var h=$(m);T=D(h,g),h.forEach(i),v.forEach(i),this.h()},h(){u(s,"class","self-center mr-3"),u(o,"class","self-center font-medium"),u(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),u(w,"class","self-center mr-3"),u(m,"class","self-center font-medium"),u(f,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(A,d){B(A,e,d),p(e,s),p(e,a),p(e,o),p(o,r),B(A,c,d),B(A,f,d),p(f,w),p(f,b),p(f,m),p(m,T),E||(y=[J(e,"click",l[11]),J(f,"click",l[12])],E=!0)},p(A,d){d&8&&n!==(n=A[3].t("Playground")+"")&&V(r,n),d&8&&g!==(g=A[3].t("Admin Panel")+"")&&V(T,g)},d(A){A&&(i(e),i(c),i(f)),E=!1,De(y)}}}function Ie(l){let e,s,t,a;return t=new Ze({props:{content:l[5]&&l[5].length>0?`${l[3].t("Running")}: ${l[5].join(", ")} ✨`:"",$$slots:{default:[ht]},$$scope:{ctx:l}}}),{c(){e=S("hr"),s=L(),Y(t.$$.fragment),this.h()},l(o){e=M(o,"HR",{class:!0}),s=U(o),F(t.$$.fragment,o),this.h()},h(){u(e,"class","dark:border-gray-800 my-1.5 p-0")},m(o,n){B(o,e,n),B(o,s,n),x(t,o,n),a=!0},p(o,n){const r={};n&40&&(r.content=o[5]&&o[5].length>0?`${o[3].t("Running")}: ${o[5].join(", ")} ✨`:""),n&131096&&(r.$$scope={dirty:n,ctx:o}),t.$set(r)},i(o){a||(H(t.$$.fragment,o),a=!0)},o(o){R(t.$$.fragment,o),a=!1},d(o){o&&(i(e),i(s)),K(t,o)}}}function ht(l){let e,s,t='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',a,o,n,r=l[3].t("Active Users")+"",c,f,w,_,b;return{c(){e=S("div"),s=S("div"),s.innerHTML=t,a=L(),o=S("div"),n=S("span"),c=O(r),f=O(":"),w=L(),_=S("span"),b=O(l[4]),this.h()},l(m){e=M(m,"DIV",{class:!0});var g=$(e);s=M(g,"DIV",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-dl2p8d"&&(s.innerHTML=t),a=U(g),o=M(g,"DIV",{class:!0});var T=$(o);n=M(T,"SPAN",{class:!0});var E=$(n);c=D(E,r),f=D(E,":"),E.forEach(i),w=U(T),_=M(T,"SPAN",{class:!0});var y=$(_);b=D(y,l[4]),y.forEach(i),T.forEach(i),g.forEach(i),this.h()},h(){u(s,"class","flex items-center"),u(n,"class","font-medium"),u(_,"class","font-semibold"),u(o,"class",""),u(e,"class","flex rounded-md py-1.5 px-3 text-xs gap-2.5 items-center")},m(m,g){B(m,e,g),p(e,s),p(e,a),p(e,o),p(o,n),p(n,c),p(n,f),p(o,w),p(o,_),p(_,b)},p(m,g){g&8&&r!==(r=m[3].t("Active Users")+"")&&V(c,r),g&16&&V(b,m[4])},d(m){m&&i(e)}}}function mt(l){let e,s,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',a,o,n=l[3].t("Settings")+"",r,c,f,w,_,b,m,g=l[3].t("Archived Chats")+"",T,E,y,A,d,I,v,h='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z" clip-rule="evenodd"></path></svg>',C,P,W=l[3].t("Sign Out")+"",Q,G,q,X,ue,me;_=new ut({props:{className:"size-5",strokeWidth:"1.5"}});let z=l[1]==="admin"&&Ee(l),N=l[4]&&Ie(l);return{c(){e=S("button"),s=S("div"),s.innerHTML=t,a=L(),o=S("div"),r=O(n),c=L(),f=S("button"),w=S("div"),Y(_.$$.fragment),b=L(),m=S("div"),T=O(g),E=L(),z&&z.c(),y=L(),A=S("hr"),d=L(),I=S("button"),v=S("div"),v.innerHTML=h,C=L(),P=S("div"),Q=O(W),G=L(),N&&N.c(),q=we(),this.h()},l(k){e=M(k,"BUTTON",{class:!0});var j=$(e);s=M(j,"DIV",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-1ew1v3e"&&(s.innerHTML=t),a=U(j),o=M(j,"DIV",{class:!0});var pe=$(o);r=D(pe,n),pe.forEach(i),j.forEach(i),c=U(k),f=M(k,"BUTTON",{class:!0});var re=$(f);w=M(re,"DIV",{class:!0});var _e=$(w);F(_.$$.fragment,_e),_e.forEach(i),b=U(re),m=M(re,"DIV",{class:!0});var ge=$(m);T=D(ge,g),ge.forEach(i),re.forEach(i),E=U(k),z&&z.l(k),y=U(k),A=M(k,"HR",{class:!0}),d=U(k),I=M(k,"BUTTON",{class:!0});var ie=$(I);v=M(ie,"DIV",{class:!0,"data-svelte-h":!0}),ee(v)!=="svelte-1svlfdm"&&(v.innerHTML=h),C=U(ie),P=M(ie,"DIV",{class:!0});var ve=$(P);Q=D(ve,W),ve.forEach(i),ie.forEach(i),G=U(k),N&&N.l(k),q=we(),this.h()},h(){u(s,"class","self-center mr-3"),u(o,"class","self-center font-medium"),u(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),u(w,"class","self-center mr-3"),u(m,"class","self-center font-medium"),u(f,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),u(A,"class","dark:border-gray-800 my-1.5 p-0"),u(v,"class","self-center mr-3"),u(P,"class","self-center font-medium"),u(I,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(k,j){B(k,e,j),p(e,s),p(e,a),p(e,o),p(o,r),B(k,c,j),B(k,f,j),p(f,w),x(_,w,null),p(f,b),p(f,m),p(m,T),B(k,E,j),z&&z.m(k,j),B(k,y,j),B(k,A,j),B(k,d,j),B(k,I,j),p(I,v),p(I,C),p(I,P),p(P,Q),B(k,G,j),N&&N.m(k,j),B(k,q,j),X=!0,ue||(me=[J(e,"click",l[9]),J(f,"click",l[10]),J(I,"click",l[13])],ue=!0)},p(k,j){(!X||j&8)&&n!==(n=k[3].t("Settings")+"")&&V(r,n),(!X||j&8)&&g!==(g=k[3].t("Archived Chats")+"")&&V(T,g),k[1]==="admin"?z?z.p(k,j):(z=Ee(k),z.c(),z.m(y.parentNode,y)):z&&(z.d(1),z=null),(!X||j&8)&&W!==(W=k[3].t("Sign Out")+"")&&V(Q,W),k[4]?N?(N.p(k,j),j&16&&H(N,1)):(N=Ie(k),N.c(),H(N,1),N.m(q.parentNode,q)):N&&(ze(),R(N,1,1,()=>{N=null}),He())},i(k){X||(H(_.$$.fragment,k),H(N),X=!0)},o(k){R(_.$$.fragment,k),R(N),X=!1},d(k){k&&(i(e),i(c),i(f),i(E),i(y),i(A),i(d),i(I),i(G),i(q)),K(_),z&&z.d(k),N&&N.d(k),ue=!1,De(me)}}}function pt(l){let e,s;return e=new xe({props:{class:"w-full "+l[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:8,side:"bottom",align:"start",transition:l[14],$$slots:{default:[mt]},$$scope:{ctx:l}}}),{c(){Y(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){x(e,t,a),s=!0},p(t,a){const o={};a&4&&(o.class="w-full "+t[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow"),a&131131&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function _t(l){let e,s,t;e=new Fe({props:{$$slots:{default:[dt]},$$scope:{ctx:l}}});const a=l[8].content,o=Le(a,l,l[17],Ce),n=o||pt(l);return{c(){Y(e.$$.fragment),s=L(),n&&n.c()},l(r){F(e.$$.fragment,r),s=U(r),n&&n.l(r)},m(r,c){x(e,r,c),B(r,s,c),n&&n.m(r,c),t=!0},p(r,c){const f={};c&131072&&(f.$$scope={dirty:c,ctx:r}),e.$set(f),o?o.p&&(!t||c&131072)&&Ue(o,a,r,r[17],t?Oe(a,r[17],c,ft):Ne(r[17]),Ce):n&&n.p&&(!t||c&63)&&n.p(r,t?c:-1)},i(r){t||(H(e.$$.fragment,r),H(n,r),t=!0)},o(r){R(e.$$.fragment,r),R(n,r),t=!1},d(r){r&&i(s),K(e,r),n&&n.d(r)}}}function gt(l){let e,s,t;function a(n){l[16](n)}let o={onOpenChange:l[15],$$slots:{default:[_t]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.open=l[0]),e=new Ye({props:o}),$e.push(()=>Ve(e,"open",a)),{c(){Y(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,[r]){const c={};r&131135&&(c.$$scope={dirty:r,ctx:n}),!s&&r&1&&(s=!0,c.open=n[0],Be(()=>s=!1)),e.$set(c)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function vt(l,e,s){let t,a,o;Z(l,Pe,v=>s(4,a=v)),Z(l,Re,v=>s(5,o=v));let{$$slots:n={},$$scope:r}=e;const c=Ae("i18n");Z(l,c,v=>s(3,t=v));let{show:f=!1}=e,{role:w=""}=e,{className:_="max-w-[240px]"}=e;const b=je(),m=async()=>{await We.set(!0),s(0,f=!1)},g=()=>{b("show","archived-chat"),s(0,f=!1)},T=()=>{be("/playground"),s(0,f=!1)},E=()=>{be("/admin"),s(0,f=!1)},y=()=>{localStorage.removeItem("token"),location.href="/auth",s(0,f=!1)},A=v=>Ke(v,{duration:100}),d=v=>{b("change",v)};function I(v){f=v,s(0,f)}return l.$$set=v=>{"show"in v&&s(0,f=v.show),"role"in v&&s(1,w=v.role),"className"in v&&s(2,_=v.className),"$$scope"in v&&s(17,r=v.$$scope)},[f,w,_,t,a,o,c,b,n,m,g,T,E,y,A,d,I,r]}class Ft extends ne{constructor(e){super(),oe(this,e,vt,gt,le,{show:0,role:1,className:2})}}function wt(l){let e,s;return e=new nt({props:{tags:l[0],deleteTag:l[2],addTag:l[1]}}),{c(){Y(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){x(e,t,a),s=!0},p(t,[a]){const o={};a&1&&(o.tags=t[0]),e.$set(o)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function bt(l,e,s){let t,a;Z(l,fe,_=>s(4,t=_)),Z(l,de,_=>s(5,a=_));const o=je();let{chatId:n=""}=e,r=[];const c=async()=>await Qe(localStorage.token,n).catch(async _=>[]),f=async _=>{await Xe(localStorage.token,n,_),s(0,r=await c()),await ke(localStorage.token,n,{tags:r}),de.set(await ye(localStorage.token))},w=async _=>{await et(localStorage.token,n,_),s(0,r=await c()),await ke(localStorage.token,n,{tags:r}),console.log(a),await de.set(await ye(localStorage.token)),console.log(a),a.map(b=>b.name).includes(_)?(await fe.set(await tt(localStorage.token,_)),t.find(b=>b.id===n)&&o("close")):await fe.set(await st(localStorage.token))};return Je(async()=>{n&&s(0,r=await c())}),l.$$set=_=>{"chatId"in _&&s(3,n=_.chatId)},[r,f,w,n]}class xt extends ne{constructor(e){super(),oe(this,e,bt,wt,le,{chatId:3})}}function kt(l){let e,s,t;return{c(){e=se("svg"),s=se("path"),t=se("path"),this.h()},l(a){e=ae(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=$(e);s=ae(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),$(s).forEach(i),t=ae(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),$(t).forEach(i),o.forEach(i),this.h()},h(){u(s,"fill-rule","evenodd"),u(s,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),u(s,"clip-rule","evenodd"),u(t,"fill-rule","evenodd"),u(t,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 16 16"),u(e,"fill","currentColor"),u(e,"class",l[0])},m(a,o){B(a,e,o),p(e,s),p(e,t)},p(a,[o]){o&1&&u(e,"class",a[0])},i:ce,o:ce,d(a){a&&i(e)}}}function yt(l,e,s){let{className:t="w-4 h-4"}=e;return l.$$set=a=>{"className"in a&&s(0,t=a.className)},[t]}class Tt extends ne{constructor(e){super(),oe(this,e,yt,kt,le,{className:0})}}function Se(l){var v;let e,s,t,a,o,n,r,c,f,w,_,b,m;function g(h,C){return h[2].share_id?Et:Ct}let T=g(l),E=T(l),y=((v=l[4])==null?void 0:v.features.enable_community_sharing)&&Me(l);f=new Tt({});function A(h,C){return h[2].share_id?St:It}let d=A(l),I=d(l);return{c(){e=S("div"),s=S("div"),E.c(),t=L(),a=S("div"),o=S("div"),n=S("div"),y&&y.c(),r=L(),c=S("button"),Y(f.$$.fragment),w=L(),I.c(),this.h()},l(h){e=M(h,"DIV",{class:!0});var C=$(e);s=M(C,"DIV",{class:!0});var P=$(s);E.l(P),P.forEach(i),t=U(C),a=M(C,"DIV",{class:!0});var W=$(a);o=M(W,"DIV",{class:!0});var Q=$(o);n=M(Q,"DIV",{class:!0});var G=$(n);y&&y.l(G),r=U(G),c=M(G,"BUTTON",{class:!0,type:!0,id:!0});var q=$(c);F(f.$$.fragment,q),w=U(q),I.l(q),q.forEach(i),G.forEach(i),Q.forEach(i),W.forEach(i),C.forEach(i),this.h()},h(){u(s,"class","text-sm dark:text-gray-300 mb-1"),u(c,"class","self-center flex items-center gap-1 px-3.5 py-2 rounded-xl text-sm font-medium bg-emerald-600 hover:bg-emerald-500 text-white"),u(c,"type","button"),u(c,"id","copy-and-share-chat-button"),u(n,"class","flex gap-1"),u(o,"class","flex flex-col items-end space-x-1 mt-1.5"),u(a,"class","flex justify-end"),u(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(h,C){B(h,e,C),p(e,s),E.m(s,null),p(e,t),p(e,a),p(a,o),p(o,n),y&&y.m(n,null),p(n,r),p(n,c),x(f,c,null),p(c,w),I.m(c,null),_=!0,b||(m=J(c,"click",l[11]),b=!0)},p(h,C){var P;T===(T=g(h))&&E?E.p(h,C):(E.d(1),E=T(h),E&&(E.c(),E.m(s,null))),(P=h[4])!=null&&P.features.enable_community_sharing?y?y.p(h,C):(y=Me(h),y.c(),y.m(n,r)):y&&(y.d(1),y=null),d===(d=A(h))&&I?I.p(h,C):(I.d(1),I=d(h),I&&(I.c(),I.m(c,null)))},i(h){_||(H(f.$$.fragment,h),_=!0)},o(h){R(f.$$.fragment,h),_=!1},d(h){h&&i(e),E.d(),y&&y.d(),K(f),I.d(),b=!1,m()}}}function Ct(l){let e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",s;return{c(){s=O(e)},l(t){s=D(t,e)},m(t,a){B(t,s,a)},p(t,a){a&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&V(s,e)},d(t){t&&i(s)}}}function Et(l){let e,s=l[3].t("You have shared this chat")+"",t,a,o,n=l[3].t("before")+"",r,c,f,w,_=l[3].t("Click here to")+"",b,m,g,T=l[3].t("delete this link")+"",E,y,A=l[3].t("and create a new shared link.")+"",d,I,v;return{c(){e=S("a"),t=O(s),a=L(),o=S("span"),r=O(n),c=O("."),w=L(),b=O(_),m=L(),g=S("button"),E=O(T),y=L(),d=O(A),this.h()},l(h){e=M(h,"A",{href:!0,target:!0});var C=$(e);t=D(C,s),a=U(C),o=M(C,"SPAN",{class:!0});var P=$(o);r=D(P,n),P.forEach(i),c=D(C,"."),C.forEach(i),w=U(h),b=D(h,_),m=U(h),g=M(h,"BUTTON",{class:!0});var W=$(g);E=D(W,T),W.forEach(i),y=U(h),d=D(h,A),this.h()},h(){u(o,"class","underline"),u(e,"href",f="/s/"+l[2].share_id),u(e,"target","_blank"),u(g,"class","underline")},m(h,C){B(h,e,C),p(e,t),p(e,a),p(e,o),p(o,r),p(e,c),B(h,w,C),B(h,b,C),B(h,m,C),B(h,g,C),p(g,E),B(h,y,C),B(h,d,C),I||(v=J(g,"click",l[9]),I=!0)},p(h,C){C&8&&s!==(s=h[3].t("You have shared this chat")+"")&&V(t,s),C&8&&n!==(n=h[3].t("before")+"")&&V(r,n),C&4&&f!==(f="/s/"+h[2].share_id)&&u(e,"href",f),C&8&&_!==(_=h[3].t("Click here to")+"")&&V(b,_),C&8&&T!==(T=h[3].t("delete this link")+"")&&V(E,T),C&8&&A!==(A=h[3].t("and create a new shared link.")+"")&&V(d,A)},d(h){h&&(i(e),i(w),i(b),i(m),i(g),i(y),i(d)),I=!1,v()}}}function Me(l){let e,s=l[3].t("Share to OpenWebUI Community")+"",t,a,o;return{c(){e=S("button"),t=O(s),this.h()},l(n){e=M(n,"BUTTON",{class:!0,type:!0});var r=$(e);t=D(r,s),r.forEach(i),this.h()},h(){u(e,"class","self-center px-3.5 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white"),u(e,"type","button")},m(n,r){B(n,e,r),p(e,t),a||(o=J(e,"click",l[10]),a=!0)},p(n,r){r&8&&s!==(s=n[3].t("Share to OpenWebUI Community")+"")&&V(t,s)},d(n){n&&i(e),a=!1,o()}}}function It(l){let e=l[3].t("Copy Link")+"",s;return{c(){s=O(e)},l(t){s=D(t,e)},m(t,a){B(t,s,a)},p(t,a){a&8&&e!==(e=t[3].t("Copy Link")+"")&&V(s,e)},d(t){t&&i(s)}}}function St(l){let e=l[3].t("Update and Copy Link")+"",s;return{c(){s=O(e)},l(t){s=D(t,e)},m(t,a){B(t,s,a)},p(t,a){a&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&V(s,e)},d(t){t&&i(s)}}}function Mt(l){let e,s,t,a=l[3].t("Share Chat")+"",o,n,r,c='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,w,_,b,m=l[2]&&Se(l);return{c(){e=S("div"),s=S("div"),t=S("div"),o=O(a),n=L(),r=S("button"),r.innerHTML=c,f=L(),m&&m.c(),this.h()},l(g){e=M(g,"DIV",{});var T=$(e);s=M(T,"DIV",{class:!0});var E=$(s);t=M(E,"DIV",{class:!0});var y=$(t);o=D(y,a),y.forEach(i),n=U(E),r=M(E,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(r)!=="svelte-745w2y"&&(r.innerHTML=c),E.forEach(i),f=U(T),m&&m.l(T),T.forEach(i),this.h()},h(){u(t,"class","text-lg font-medium self-center"),u(r,"class","self-center"),u(s,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(g,T){B(g,e,T),p(e,s),p(s,t),p(t,o),p(s,n),p(s,r),p(e,f),m&&m.m(e,null),w=!0,_||(b=J(r,"click",l[8]),_=!0)},p(g,T){(!w||T&8)&&a!==(a=g[3].t("Share Chat")+"")&&V(o,a),g[2]?m?(m.p(g,T),T&4&&H(m,1)):(m=Se(g),m.c(),H(m,1),m.m(e,null)):m&&(ze(),R(m,1,1,()=>{m=null}),He())},i(g){w||(H(m),w=!0)},o(g){R(m),w=!1},d(g){g&&i(e),m&&m.d(),_=!1,b()}}}function $t(l){let e,s,t;function a(n){l[12](n)}let o={size:"sm",$$slots:{default:[Mt]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.show=l[0]),e=new rt({props:o}),$e.push(()=>Ve(e,"show",a)),{c(){Y(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,[r]){const c={};r&65567&&(c.$$scope={dirty:r,ctx:n}),!s&&r&1&&(s=!0,c.show=n[0],Be(()=>s=!1)),e.$set(c)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Bt(l,e,s){let t,a,o;Z(l,qe,d=>s(14,t=d)),Z(l,Ge,d=>s(4,o=d));let{chatId:n}=e,r=null,c=null;const f=Ae("i18n");Z(l,f,d=>s(3,a=d));const w=async()=>{const d=await at(localStorage.token,n);return c=`${window.location.origin}/s/${d.id}`,console.log(c),s(2,r=await he(localStorage.token,n)),c},_=async()=>{const d=r.chat;console.log("share",d),Te.success(a.t("Redirecting you to OpenWebUI Community"));const I="https://openwebui.com",v=await window.open(`${I}/chats/upload`,"_blank");window.addEventListener("message",h=>{h.origin===I&&h.data==="loaded"&&v.postMessage(JSON.stringify({chat:d,models:t.filter(C=>d.models.includes(C.id))}),"*")},!1)};let{show:b=!1}=e;const m=d=>r?d?r.id!==d.id||r.share_id!==d.share_id:!1:!0,g=()=>{s(0,b=!1)},T=async()=>{await lt(localStorage.token,n)&&s(2,r=await he(localStorage.token,n))},E=()=>{_(),s(0,b=!1)},y=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const I=async()=>{const v=await w();return new Blob([v],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":I()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(v=>(console.error("Async: Could not copy text: ",v),!1))}else ot(await w());Te.success(a.t("Copied shared chat URL to clipboard!")),s(0,b=!1)};function A(d){b=d,s(0,b)}return l.$$set=d=>{"chatId"in d&&s(1,n=d.chatId),"show"in d&&s(0,b=d.show)},l.$$.update=()=>{l.$$.dirty&7&&b&&(async()=>{if(n){const d=await he(localStorage.token,n);m(d)&&s(2,r=d)}else s(2,r=null),console.log(r)})()},[b,n,r,a,o,f,w,_,g,T,E,y,A]}class Kt extends ne{constructor(e){super(),oe(this,e,Bt,$t,le,{chatId:1,show:0})}}export{ut as A,Kt as S,xt as T,Ft as U,qt as a,Yt as b,Zt as d,Wt as g,Jt as q,Gt as u};
//# sourceMappingURL=ShareChatModal.863542fa.js.map
