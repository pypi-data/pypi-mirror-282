import{s as Xe,E as Ct,F as Tt,G as Vt,H as Ht,w as ge,e as Ke,i as B,d as h,I as Il,x as Rt,y as _s,p as De,f as b,g as w,h as _,L as Lt,Y as el,u as le,v as Bt,T as Cl,C as ye,V as rl,o as Tl,l as ae,a as j,m as ce,c as P,j as u,r as m,n as ve,R as ze,P as Et,K as Wt,t as Te,z as we,A as ke,W as je,k as It,S as Kt,Q as on,O as Ss,M as Ms}from"./scheduler.8ceb707f.js";import{S as $e,i as et,a as L,t as O,g as We,c as qe,h as vs,j as bs,k as Dl,f as Pe,b as ne,d as se,m as re,e as oe}from"./index.07e72a31.js";import{g as Cs}from"./globals.7f7f1b26.js";import{e as bt}from"./each.0e379b97.js";import{a as Se}from"./Toaster.svelte_svelte_type_style_lang.a1b53f72.js";import{M as Ts,m as Vs}from"./Messages.54f11c0d.js";import"./dayjs.min.1e504c00.js";import{g as Bl}from"./navigation.89ef0947.js";import{p as Hs}from"./stores.41592c93.js";import{r as xs,v as Ls,h as ol,c as il,g as At,n as Sl,j as Bs,u as Ol,m as ws,a as sl,x as Ns,S as zs,y as As,z as Ml,W as ks,l as Yt,o as Os,s as Us,w as js,i as ll}from"./index.30f324e9.js";import{i as ys,r as Nl,j as an,k as Ul,v as cn,p as fn,s as Ps,l as El,a as un,m as Rs}from"./index.a7d9cab8.js";import{i as Fs}from"./index.4940cd65.js";import{e as Zs,p as dn,c as Ws,b as nl,z as hn,k as zl,m as qs,A as Gs}from"./index.8a88a4ab.js";import{f as Js}from"./index.f65937a1.js";import{p as Qs,h as Ys,i as Ks,j as Xs}from"./index.8979075a.js";import{T as $s,S as er,U as tr,q as lr}from"./ShareChatModal.863542fa.js";import{r as nr,s as sr,t as rr,v as or}from"./index.5bae366a.js";import{f as mn}from"./index.87fe8e34.js";import{u as ir}from"./index.6bb81d8d.js";import{A as ar}from"./AddFilesPlaceholder.685275a7.js";import"./sha256.65a6c54a.js";import{f as Es,h as cr,T as Ot}from"./updater.8432fa66.js";import{D as Vl,M as Jt}from"./Dropdown.c8bca6dd.js";import{s as fr,g as ur,u as dr,a as hr,M as Hl}from"./menu-trigger.e06dd104.js";import{f as al}from"./index.e8e699b3.js";import{S as Is}from"./Switch.7038dc08.js";import{t as jl,s as mr}from"./index.fa5d740f.js";import{S as gr}from"./Selector.d2d916c0.js";import{d as pr}from"./index.e51049e7.js";import{g as tl}from"./spread.8a54911c.js";import{f as _r}from"./FileSaver.min.898eb36f.js";import{b as vr}from"./index.3e27c27a.js";import"./paths.778a4d10.js";import{M as br}from"./MenuLines.01456c47.js";import"./index.c4ca6160.js";import{M as wr}from"./Modal.3ec19a4a.js";const kr=s=>({subIds:s&1}),gn=s=>({subIds:s[0]});function yr(s){let e;const t=s[6].default,l=Ct(t,s,s[5],gn);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,[r]){l&&l.p&&(!e||r&33)&&Tt(l,t,n,n[5],e?Ht(t,n[5],r,kr):Vt(n[5]),gn)},i(n){e||(L(l,n),e=!0)},o(n){O(l,n),e=!1},d(n){l&&l.d(n)}}}function Er(s,e,t){let l,{$$slots:n={},$$scope:r}=e,{disabled:o=void 0}=e,{open:i=void 0}=e,{onOpenChange:a=void 0}=e;const{updateOption:f,ids:c,states:{subOpen:d}}=fr({disabled:o,onOpenChange:({next:g})=>(i!==g&&(a==null||a(g),t(2,i=g)),g)}),p=pr([c.menu,c.trigger],([g,D])=>({menu:g,trigger:D}));return ge(s,p,g=>t(0,l=g)),s.$$set=g=>{"disabled"in g&&t(3,o=g.disabled),"open"in g&&t(2,i=g.open),"onOpenChange"in g&&t(4,a=g.onOpenChange),"$$scope"in g&&t(5,r=g.$$scope)},s.$$.update=()=>{s.$$.dirty&4&&i!==void 0&&d.set(i),s.$$.dirty&8&&f("disabled",o)},[l,p,i,o,a,r,n]}class Ir extends $e{constructor(e){super(),et(this,e,Er,yr,Xe,{disabled:3,open:2,onOpenChange:4})}}const Dr=s=>({builder:s[0]&256}),pn=s=>({builder:s[8]}),Sr=s=>({builder:s[0]&256}),_n=s=>({builder:s[8]}),Mr=s=>({builder:s[0]&256}),vn=s=>({builder:s[8]}),Cr=s=>({builder:s[0]&256}),bn=s=>({builder:s[8]}),Tr=s=>({builder:s[0]&256}),wn=s=>({builder:s[8]}),Vr=s=>({builder:s[0]&256}),kn=s=>({builder:s[8]});function Hr(s){let e,t,l,n;const r=s[28].default,o=Ct(r,s,s[27],pn);let i=[s[8],s[13]],a={};for(let f=0;f<i.length;f+=1)a=Rt(a,i[f]);return{c(){e=b("div"),o&&o.c(),this.h()},l(f){e=w(f,"DIV",{});var c=_(e);o&&o.l(c),c.forEach(h),this.h()},h(){Lt(e,a)},m(f,c){B(f,e,c),o&&o.m(e,null),s[33](e),t=!0,l||(n=[el(s[8].action(e)),le(e,"m-focusout",s[12]),le(e,"m-keydown",s[12]),le(e,"m-pointermove",s[12])],l=!0)},p(f,c){o&&o.p&&(!t||c[0]&134217984)&&Tt(o,r,f,f[27],t?Ht(r,f[27],c,Dr):Vt(f[27]),pn),Lt(e,a=tl(i,[c[0]&256&&f[8],c[0]&8192&&f[13]]))},i(f){t||(L(o,f),t=!0)},o(f){O(o,f),t=!1},d(f){f&&h(e),o&&o.d(f),s[33](null),l=!1,Bt(n)}}}function xr(s){let e,t,l,n,r;const o=s[28].default,i=Ct(o,s,s[27],_n);let a=[s[8],s[13]],f={};for(let c=0;c<a.length;c+=1)f=Rt(f,a[c]);return{c(){e=b("div"),i&&i.c(),this.h()},l(c){e=w(c,"DIV",{});var d=_(e);i&&i.l(d),d.forEach(h),this.h()},h(){Lt(e,f)},m(c,d){B(c,e,d),i&&i.m(e,null),s[32](e),l=!0,n||(r=[el(s[8].action(e)),le(e,"m-focusout",s[12]),le(e,"m-keydown",s[12]),le(e,"m-pointermove",s[12])],n=!0)},p(c,d){s=c,i&&i.p&&(!l||d[0]&134217984)&&Tt(i,o,s,s[27],l?Ht(o,s[27],d,Sr):Vt(s[27]),_n),Lt(e,f=tl(a,[d[0]&256&&s[8],d[0]&8192&&s[13]]))},i(c){l||(L(i,c),t&&t.end(1),l=!0)},o(c){O(i,c),c&&(t=vs(e,s[5],s[6])),l=!1},d(c){c&&h(e),i&&i.d(c),s[32](null),c&&t&&t.end(),n=!1,Bt(r)}}}function Lr(s){let e,t,l,n,r;const o=s[28].default,i=Ct(o,s,s[27],vn);let a=[s[8],s[13]],f={};for(let c=0;c<a.length;c+=1)f=Rt(f,a[c]);return{c(){e=b("div"),i&&i.c(),this.h()},l(c){e=w(c,"DIV",{});var d=_(e);i&&i.l(d),d.forEach(h),this.h()},h(){Lt(e,f)},m(c,d){B(c,e,d),i&&i.m(e,null),s[31](e),l=!0,n||(r=[el(s[8].action(e)),le(e,"m-focusout",s[12]),le(e,"m-keydown",s[12]),le(e,"m-pointermove",s[12])],n=!0)},p(c,d){s=c,i&&i.p&&(!l||d[0]&134217984)&&Tt(i,o,s,s[27],l?Ht(o,s[27],d,Mr):Vt(s[27]),vn),Lt(e,f=tl(a,[d[0]&256&&s[8],d[0]&8192&&s[13]]))},i(c){l||(L(i,c),c&&(t||Cl(()=>{t=bs(e,s[3],s[4]),t.start()})),l=!0)},o(c){O(i,c),l=!1},d(c){c&&h(e),i&&i.d(c),s[31](null),n=!1,Bt(r)}}}function Br(s){let e,t,l,n,r,o;const i=s[28].default,a=Ct(i,s,s[27],bn);let f=[s[8],s[13]],c={};for(let d=0;d<f.length;d+=1)c=Rt(c,f[d]);return{c(){e=b("div"),a&&a.c(),this.h()},l(d){e=w(d,"DIV",{});var p=_(e);a&&a.l(p),p.forEach(h),this.h()},h(){Lt(e,c)},m(d,p){B(d,e,p),a&&a.m(e,null),s[30](e),n=!0,r||(o=[el(s[8].action(e)),le(e,"m-focusout",s[12]),le(e,"m-keydown",s[12]),le(e,"m-pointermove",s[12])],r=!0)},p(d,p){s=d,a&&a.p&&(!n||p[0]&134217984)&&Tt(a,i,s,s[27],n?Ht(i,s[27],p,Cr):Vt(s[27]),bn),Lt(e,c=tl(f,[p[0]&256&&s[8],p[0]&8192&&s[13]]))},i(d){n||(L(a,d),d&&Cl(()=>{n&&(l&&l.end(1),t=bs(e,s[3],s[4]),t.start())}),n=!0)},o(d){O(a,d),t&&t.invalidate(),d&&(l=vs(e,s[5],s[6])),n=!1},d(d){d&&h(e),a&&a.d(d),s[30](null),d&&l&&l.end(),r=!1,Bt(o)}}}function Nr(s){let e,t,l,n,r;const o=s[28].default,i=Ct(o,s,s[27],wn);let a=[s[8],s[13]],f={};for(let c=0;c<a.length;c+=1)f=Rt(f,a[c]);return{c(){e=b("div"),i&&i.c(),this.h()},l(c){e=w(c,"DIV",{});var d=_(e);i&&i.l(d),d.forEach(h),this.h()},h(){Lt(e,f)},m(c,d){B(c,e,d),i&&i.m(e,null),s[29](e),l=!0,n||(r=[el(s[8].action(e)),le(e,"m-focusout",s[12]),le(e,"m-keydown",s[12]),le(e,"m-pointermove",s[12])],n=!0)},p(c,d){s=c,i&&i.p&&(!l||d[0]&134217984)&&Tt(i,o,s,s[27],l?Ht(o,s[27],d,Tr):Vt(s[27]),wn),Lt(e,f=tl(a,[d[0]&256&&s[8],d[0]&8192&&s[13]]))},i(c){l||(L(i,c),c&&Cl(()=>{l&&(t||(t=Dl(e,s[1],s[2],!0)),t.run(1))}),l=!0)},o(c){O(i,c),c&&(t||(t=Dl(e,s[1],s[2],!1)),t.run(0)),l=!1},d(c){c&&h(e),i&&i.d(c),s[29](null),c&&t&&t.end(),n=!1,Bt(r)}}}function zr(s){let e;const t=s[28].default,l=Ct(t,s,s[27],kn);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r[0]&134217984)&&Tt(l,t,n,n[27],e?Ht(t,n[27],r,Vr):Vt(n[27]),kn)},i(n){e||(L(l,n),e=!0)},o(n){O(l,n),e=!1},d(n){l&&l.d(n)}}}function Ar(s){let e,t,l,n;const r=[zr,Nr,Br,Lr,xr,Hr],o=[];function i(a,f){return a[7]&&a[9]?0:a[1]&&a[9]?1:a[3]&&a[5]&&a[9]?2:a[3]&&a[9]?3:a[5]&&a[9]?4:a[9]?5:-1}return~(e=i(s))&&(t=o[e]=r[e](s)),{c(){t&&t.c(),l=Ke()},l(a){t&&t.l(a),l=Ke()},m(a,f){~e&&o[e].m(a,f),B(a,l,f),n=!0},p(a,f){let c=e;e=i(a),e===c?~e&&o[e].p(a,f):(t&&(We(),O(o[c],1,1,()=>{o[c]=null}),qe()),~e?(t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),L(t,1),t.m(l.parentNode,l)):t=null)},i(a){n||(L(t),n=!0)},o(a){O(t),n=!1},d(a){a&&h(l),~e&&o[e].d(a)}}}function Or(s,e,t){let l;const n=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let r=Il(e,n),o,i,{$$slots:a={},$$scope:f}=e,{transition:c=void 0}=e,{transitionConfig:d=void 0}=e,{inTransition:p=void 0}=e,{inTransitionConfig:g=void 0}=e,{outTransition:D=void 0}=e,{outTransitionConfig:v=void 0}=e,{asChild:y=!1}=e,{id:E=void 0}=e,{side:k="right"}=e,{align:V="start"}=e,{sideOffset:C=0}=e,{alignOffset:H=0}=e,{collisionPadding:A=8}=e,{avoidCollisions:N=!0}=e,{collisionBoundary:M=void 0}=e,{sameWidth:F=!1}=e,{fitViewport:R=!1}=e,{strategy:U="absolute"}=e,{overlap:z=!1}=e,{el:K=void 0}=e;const{elements:{subMenu:te},states:{subOpen:Y},ids:S,getAttrs:T}=ur();ge(s,te,W=>t(26,o=W)),ge(s,Y,W=>t(9,i=W));const J=Es(),pe=T("sub-content");function de(W){De[W?"unshift":"push"](()=>{K=W,t(0,K)})}function Me(W){De[W?"unshift":"push"](()=>{K=W,t(0,K)})}function Le(W){De[W?"unshift":"push"](()=>{K=W,t(0,K)})}function lt(W){De[W?"unshift":"push"](()=>{K=W,t(0,K)})}function Ge(W){De[W?"unshift":"push"](()=>{K=W,t(0,K)})}return s.$$set=W=>{e=Rt(Rt({},e),_s(W)),t(13,r=Il(e,n)),"transition"in W&&t(1,c=W.transition),"transitionConfig"in W&&t(2,d=W.transitionConfig),"inTransition"in W&&t(3,p=W.inTransition),"inTransitionConfig"in W&&t(4,g=W.inTransitionConfig),"outTransition"in W&&t(5,D=W.outTransition),"outTransitionConfig"in W&&t(6,v=W.outTransitionConfig),"asChild"in W&&t(7,y=W.asChild),"id"in W&&t(14,E=W.id),"side"in W&&t(15,k=W.side),"align"in W&&t(16,V=W.align),"sideOffset"in W&&t(17,C=W.sideOffset),"alignOffset"in W&&t(18,H=W.alignOffset),"collisionPadding"in W&&t(19,A=W.collisionPadding),"avoidCollisions"in W&&t(20,N=W.avoidCollisions),"collisionBoundary"in W&&t(21,M=W.collisionBoundary),"sameWidth"in W&&t(22,F=W.sameWidth),"fitViewport"in W&&t(23,R=W.fitViewport),"strategy"in W&&t(24,U=W.strategy),"overlap"in W&&t(25,z=W.overlap),"el"in W&&t(0,K=W.el),"$$scope"in W&&t(27,f=W.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&16384&&E&&S.menu.set(E),s.$$.dirty[0]&67108864&&t(8,l=o),s.$$.dirty[0]&256&&Object.assign(l,pe),s.$$.dirty[0]&67076096&&dr({side:k,align:V,sideOffset:C,alignOffset:H,collisionPadding:A,avoidCollisions:N,collisionBoundary:M,sameWidth:F,fitViewport:R,strategy:U,overlap:z})},[K,c,d,p,g,D,v,y,l,i,te,Y,J,r,E,k,V,C,H,A,N,M,F,R,U,z,o,f,a,de,Me,Le,lt,Ge]}class Ur extends $e{constructor(e){super(),et(this,e,Or,Ar,Xe,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const jr=s=>({builder:s&4}),yn=s=>({builder:s[2]}),Pr=s=>({builder:s&4}),En=s=>({builder:s[2]});function Rr(s){let e,t,l,n;const r=s[13].default,o=Ct(r,s,s[12],yn);let i=[s[2],s[6]],a={};for(let f=0;f<i.length;f+=1)a=Rt(a,i[f]);return{c(){e=b("div"),o&&o.c(),this.h()},l(f){e=w(f,"DIV",{});var c=_(e);o&&o.l(c),c.forEach(h),this.h()},h(){Lt(e,a)},m(f,c){B(f,e,c),o&&o.m(e,null),s[14](e),t=!0,l||(n=[el(s[2].action(e)),le(e,"m-click",s[5]),le(e,"m-focusin",s[5]),le(e,"m-focusout",s[5]),le(e,"m-keydown",s[5]),le(e,"m-pointerleave",s[5]),le(e,"m-pointermove",s[5])],l=!0)},p(f,c){o&&o.p&&(!t||c&4100)&&Tt(o,r,f,f[12],t?Ht(r,f[12],c,jr):Vt(f[12]),yn),Lt(e,a=tl(i,[c&4&&f[2],c&64&&f[6]]))},i(f){t||(L(o,f),t=!0)},o(f){O(o,f),t=!1},d(f){f&&h(e),o&&o.d(f),s[14](null),l=!1,Bt(n)}}}function Fr(s){let e;const t=s[13].default,l=Ct(t,s,s[12],En);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&4100)&&Tt(l,t,n,n[12],e?Ht(t,n[12],r,Pr):Vt(n[12]),En)},i(n){e||(L(l,n),e=!0)},o(n){O(l,n),e=!1},d(n){l&&l.d(n)}}}function Zr(s){let e,t,l,n;const r=[Fr,Rr],o=[];function i(a,f){return a[1]?0:1}return e=i(s),t=o[e]=r[e](s),{c(){t.c(),l=Ke()},l(a){t.l(a),l=Ke()},m(a,f){o[e].m(a,f),B(a,l,f),n=!0},p(a,[f]){let c=e;e=i(a),e===c?o[e].p(a,f):(We(),O(o[c],1,1,()=>{o[c]=null}),qe(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),L(t,1),t.m(l.parentNode,l))},i(a){n||(L(t),n=!0)},o(a){O(t),n=!1},d(a){a&&h(l),o[e].d(a)}}}function Wr(s,e,t){let l,n;const r=["disabled","asChild","id","el"];let o=Il(e,r),i,a,{$$slots:f={},$$scope:c}=e,{disabled:d=!1}=e,{asChild:p=!1}=e,{id:g=void 0}=e,{el:D=void 0}=e;const{elements:{subTrigger:v},ids:y,getAttrs:E,options:k}=hr();ge(s,v,A=>t(11,a=A));const{disabled:V}=k;ge(s,V,A=>t(10,i=A));const C=Es();function H(A){De[A?"unshift":"push"](()=>{D=A,t(0,D)})}return s.$$set=A=>{e=Rt(Rt({},e),_s(A)),t(6,o=Il(e,r)),"disabled"in A&&t(7,d=A.disabled),"asChild"in A&&t(1,p=A.asChild),"id"in A&&t(8,g=A.id),"el"in A&&t(0,D=A.el),"$$scope"in A&&t(12,c=A.$$scope)},s.$$.update=()=>{s.$$.dirty&256&&g&&y.trigger.set(g),s.$$.dirty&2048&&t(2,l=a),s.$$.dirty&1152&&t(9,n={...E("sub-trigger"),...cr(d||i)}),s.$$.dirty&516&&Object.assign(l,n)},[D,p,l,v,V,C,o,d,g,n,i,a,c,f,H]}class qr extends $e{constructor(e){super(),et(this,e,Wr,Zr,Xe,{disabled:7,asChild:1,id:8,el:0})}}function Gr(s){let e,t,l,n,r,o,i;return a(),{feed:f,reset:a};function a(){e=!0,t="",l=0,n=-1,r=void 0,o=void 0,i=""}function f(d){t=t?t+d:d,e&&Jr(t)&&(t=t.slice(Ds.length)),e=!1;const p=t.length;let g=0,D=!1;for(;g<p;){D&&(t[g]===`
`&&++g,D=!1);let v=-1,y=n,E;for(let k=l;v<0&&k<p;++k)E=t[k],E===":"&&y<0?y=k-g:E==="\r"?(D=!0,v=k-g):E===`
`&&(v=k-g);if(v<0){l=p-g,n=y;break}else l=0,n=-1;c(t,g,y,v),g+=v+1}g===p?t="":g>0&&(t=t.slice(g))}function c(d,p,g,D){if(D===0){i.length>0&&(s({type:"event",id:r,event:o||void 0,data:i.slice(0,-1)}),i="",r=void 0),o=void 0;return}const v=g<0,y=d.slice(p,p+(v?D:g));let E=0;v?E=D:d[p+g+1]===" "?E=g+2:E=g+1;const k=p+E,V=D-E,C=d.slice(k,k+V).toString();if(y==="data")i+=C?"".concat(C,`
`):`
`;else if(y==="event")o=C;else if(y==="id"&&!C.includes("\0"))r=C;else if(y==="retry"){const H=parseInt(C,10);Number.isNaN(H)||s({type:"reconnect-interval",value:H})}}}const Ds=[239,187,191];function Jr(s){return Ds.every((e,t)=>s.charCodeAt(t)===e)}class Qr extends TransformStream{constructor(){let e;super({start(t){e=Gr(l=>{l.type==="event"&&t.enqueue(l)})},transform(t){e.feed(t)}})}}async function Yr(s,e){const t=s.pipeThrough(new TextDecoderStream).pipeThrough(new Qr).getReader();let l=Kr(t);return e&&(l=Xr(l)),l}async function*Kr(s){var e,t,l;for(;;){const{value:n,done:r}=await s.read();if(r){yield{done:!0,value:""};break}if(!n)continue;const o=n.data;if(o.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const i=JSON.parse(o);if(console.log(i),i.error){yield{done:!0,value:"",error:i.error};break}if(i.citations){yield{done:!1,value:"",citations:i.citations};continue}yield{done:!1,value:((l=(t=(e=i.choices)==null?void 0:e[0])==null?void 0:t.delta)==null?void 0:l.content)??"",usage:i.usage}}catch(i){console.error("Error extracting delta from SSE event:",i)}}}async function*Xr(s){for await(const e of s){if(e.done){yield e;return}if(e.citations){yield e;continue}let t=e.value;if(t.length<5){yield{done:!1,value:t};continue}for(;t!="";){const l=Math.min(Math.floor(Math.random()*3)+1,t.length);yield{done:!1,value:t.slice(0,l)},(document==null?void 0:document.visibilityState)!=="hidden"&&await $r(5),t=t.slice(l)}}}const $r=s=>new Promise(e=>setTimeout(e,s));function In(s){let e,t=s[2]&&Dn(s);return{c(){t&&t.c(),e=Ke()},l(l){t&&t.l(l),e=Ke()},m(l,n){t&&t.m(l,n),B(l,e,n)},p(l,n){l[2]?t?(t.p(l,n),n&4&&L(t,1)):(t=Dn(l),t.c(),L(t,1),t.m(e.parentNode,e)):t&&(We(),O(t,1,1,()=>{t=null}),qe())},d(l){l&&h(e),t&&t.d(l)}}}function Dn(s){let e,t,l,n,r=s[1].type+"",o,i,a,f,c,d=s[1].content+"",p,g,D,v,y,E,k=s[1].url&&Sn(),V=s[1].url&&Mn(),C=s[1].dismissible&&Cn(s);return{c(){e=b("div"),t=b("div"),l=b("div"),n=b("div"),o=ae(r),a=j(),k&&k.c(),f=j(),c=b("div"),p=ae(d),g=j(),V&&V.c(),D=j(),v=b("div"),C&&C.c(),this.h()},l(H){e=w(H,"DIV",{class:!0});var A=_(e);t=w(A,"DIV",{class:!0});var N=_(t);l=w(N,"DIV",{class:!0});var M=_(l);n=w(M,"DIV",{class:!0});var F=_(n);o=ce(F,r),F.forEach(h),a=P(M),k&&k.l(M),M.forEach(h),f=P(N),c=w(N,"DIV",{class:!0});var R=_(c);p=ce(R,d),R.forEach(h),N.forEach(h),g=P(A),V&&V.l(A),D=P(A),v=w(A,"DIV",{class:!0});var U=_(v);C&&C.l(U),U.forEach(h),A.forEach(h),this.h()},h(){u(n,"class",i="text-xs font-black "+(s[3][s[1].type]??s[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"),u(l,"class","flex justify-between self-start"),u(c,"class","flex-1 text-xs text-gray-700 dark:text-white"),u(t,"class","flex flex-col md:flex-row md:items-center flex-1 text-sm w-fit gap-1.5"),u(v,"class","flex self-start"),u(e,"class","top-0 left-0 right-0 p-2 mx-4 px-3 flex justify-center items-center relative rounded-xl border border-gray-50 dark:border-gray-850 text-gray-800 dark:text-gary-100 bg-white dark:bg-gray-900 backdrop-blur-xl z-30")},m(H,A){B(H,e,A),m(e,t),m(t,l),m(l,n),m(n,o),m(l,a),k&&k.m(l,null),m(t,f),m(t,c),m(c,p),m(e,g),V&&V.m(e,null),m(e,D),m(e,v),C&&C.m(v,null),E=!0},p(H,A){(!E||A&2)&&r!==(r=H[1].type+"")&&ve(o,r),(!E||A&2&&i!==(i="text-xs font-black "+(H[3][H[1].type]??H[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"))&&u(n,"class",i),H[1].url?k||(k=Sn(),k.c(),k.m(l,null)):k&&(k.d(1),k=null),(!E||A&2)&&d!==(d=H[1].content+"")&&ve(p,d),H[1].url?V||(V=Mn(),V.c(),V.m(e,D)):V&&(V.d(1),V=null),H[1].dismissible?C?C.p(H,A):(C=Cn(H),C.c(),C.m(v,null)):C&&(C.d(1),C=null)},i(H){E||(H&&Cl(()=>{E&&(y||(y=Dl(e,mn,{delay:100,duration:300},!0)),y.run(1))}),E=!0)},o(H){H&&(y||(y=Dl(e,mn,{delay:100,duration:300},!1)),y.run(0)),E=!1},d(H){H&&h(e),k&&k.d(),V&&V.d(),C&&C.d(),H&&y&&y.end()}}}function Sn(s){let e,t='<a class="text-gray-700 dark:text-white text-xs font-bold underline" href="/assets/files/whitepaper.pdf" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-1ofrdjc"&&(e.innerHTML=t),this.h()},h(){u(e,"class","flex md:hidden group w-fit md:items-center")},m(l,n){B(l,e,n)},d(l){l&&h(e)}}}function Mn(s){let e,t='<a class="text-gray-700 dark:text-white text-xs font-bold underline" href="/" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-15ujvd1"&&(e.innerHTML=t),this.h()},h(){u(e,"class","hidden md:flex group w-fit md:items-center")},m(l,n){B(l,e,n)},d(l){l&&h(e)}}}function Cn(s){let e,t="×",l,n;return{c(){e=b("button"),e.textContent=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-17pf3tf"&&(e.textContent=t),this.h()},h(){u(e,"class","-mt-[3px] ml-1.5 mr-1 text-gray-400 dark:hover:text-white h-1")},m(r,o){B(r,e,o),l||(n=le(e,"click",s[5]),l=!0)},p:ye,d(r){r&&h(e),l=!1,n()}}}function eo(s){let e,t=!s[0]&&In(s);return{c(){t&&t.c(),e=Ke()},l(l){t&&t.l(l),e=Ke()},m(l,n){t&&t.m(l,n),B(l,e,n)},p(l,[n]){l[0]?t&&(t.d(1),t=null):t?t.p(l,n):(t=In(l),t.c(),t.m(e.parentNode,e))},i:ye,o:ye,d(l){l&&h(e),t&&t.d(l)}}}function to(s,e,t){const l=rl();let{banner:n={id:"",type:"info",title:"",content:"",url:"",dismissable:!0,timestamp:Math.floor(Date.now()/1e3)}}=e,{dismissed:r=!1}=e,o=!1;const i={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"},a=c=>{t(0,r=!0),l("dismiss",c)};Tl(()=>{t(2,o=!0)});const f=()=>{a(n.id)};return s.$$set=c=>{"banner"in c&&t(1,n=c.banner),"dismissed"in c&&t(0,r=c.dismissed)},[r,n,o,i,a,f]}class lo extends $e{constructor(e){super(),et(this,e,to,eo,Xe,{banner:1,dismissed:0})}}function Tn(s,e,t){const l=s.slice();return l[12]=e[t],l[14]=t,l}function Vn(s){let e,t,l,n='<div class="text-lg font-semibold mt-2">/</div>',r,o,i,a,f,c,d='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',p,g,D=s[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",v,y=bt(s[1]),E=[];for(let k=0;k<y.length;k+=1)E[k]=Hn(Tn(s,y,k));return{c(){e=b("div"),t=b("div"),l=b("div"),l.innerHTML=n,r=j(),o=b("div"),i=b("div");for(let k=0;k<E.length;k+=1)E[k].c();a=j(),f=b("div"),c=b("div"),c.innerHTML=d,p=j(),g=b("div"),v=ae(D),this.h()},l(k){e=w(k,"DIV",{class:!0});var V=_(e);t=w(V,"DIV",{class:!0});var C=_(t);l=w(C,"DIV",{class:!0,"data-svelte-h":!0}),ze(l)!=="svelte-17yak1f"&&(l.innerHTML=n),r=P(C),o=w(C,"DIV",{class:!0});var H=_(o);i=w(H,"DIV",{class:!0});var A=_(i);for(let F=0;F<E.length;F+=1)E[F].l(A);A.forEach(h),a=P(H),f=w(H,"DIV",{class:!0});var N=_(f);c=w(N,"DIV",{"data-svelte-h":!0}),ze(c)!=="svelte-cdi12d"&&(c.innerHTML=d),p=P(N),g=w(N,"DIV",{class:!0});var M=_(g);v=ce(M,D),M.forEach(h),N.forEach(h),H.forEach(h),C.forEach(h),V.forEach(h),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(i,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),u(g,"class","line-clamp-1"),u(f,"class","px-2 pb-1 text-xs text-gray-600 dark:text-gray-100 bg-white dark:bg-gray-900 rounded-br-xl flex items-center space-x-1"),u(o,"class","max-h-60 flex flex-col w-full rounded-r-lg bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(k,V){B(k,e,V),m(e,t),m(t,l),m(t,r),m(t,o),m(o,i);for(let C=0;C<E.length;C+=1)E[C]&&E[C].m(i,null);m(o,a),m(o,f),m(f,c),m(f,p),m(f,g),m(g,v)},p(k,V){if(V&19){y=bt(k[1]);let C;for(C=0;C<y.length;C+=1){const H=Tn(k,y,C);E[C]?E[C].p(H,V):(E[C]=Hn(H),E[C].c(),E[C].m(i,null))}for(;C<E.length;C+=1)E[C].d(1);E.length=y.length}V&4&&D!==(D=k[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&ve(v,D)},d(k){k&&h(e),Wt(E,k)}}}function Hn(s){let e,t,l=s[12].command+"",n,r,o,i=s[12].title+"",a,f,c,d,p;function g(){return s[10](s[12])}function D(){return s[11](s[14])}return{c(){e=b("button"),t=b("div"),n=ae(l),r=j(),o=b("div"),a=ae(i),f=j(),this.h()},l(v){e=w(v,"BUTTON",{class:!0,type:!0});var y=_(e);t=w(y,"DIV",{class:!0});var E=_(t);n=ce(E,l),E.forEach(h),r=P(y),o=w(y,"DIV",{class:!0});var k=_(o);a=ce(k,i),k.forEach(h),f=P(y),y.forEach(h),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100"),u(o,"class","text-xs text-gray-600 dark:text-gray-100"),u(e,"class",c="px-3 py-1.5 rounded-xl w-full text-left "+(s[14]===s[0]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),u(e,"type","button")},m(v,y){B(v,e,y),m(e,t),m(t,n),m(e,r),m(e,o),m(o,a),m(e,f),d||(p=[le(e,"click",g),le(e,"mousemove",D),le(e,"focus",so)],d=!0)},p(v,y){s=v,y&2&&l!==(l=s[12].command+"")&&ve(n,l),y&2&&i!==(i=s[12].title+"")&&ve(a,i),y&1&&c!==(c="px-3 py-1.5 rounded-xl w-full text-left "+(s[14]===s[0]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&u(e,"class",c)},d(v){v&&h(e),d=!1,Bt(p)}}}function no(s){let e,t=s[1].length>0&&Vn(s);return{c(){t&&t.c(),e=Ke()},l(l){t&&t.l(l),e=Ke()},m(l,n){t&&t.m(l,n),B(l,e,n)},p(l,[n]){l[1].length>0?t?t.p(l,n):(t=Vn(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ye,o:ye,d(l){l&&h(e),t&&t.d(l)}}}const so=()=>{};function ro(s,e,t){let l,n;ge(s,xs,v=>t(9,n=v));const r=Et("i18n");ge(s,r,v=>t(2,l=v));let{files:o}=e,{prompt:i=""}=e,a=0,f=[];const c=()=>{t(0,a=Math.max(0,a-1))},d=()=>{t(0,a=Math.min(a+1,f.length-1))},p=async v=>{let y=v.content;if(v.content.includes("{{CLIPBOARD}}")){const V=await navigator.clipboard.readText().catch(A=>(Se.error(l.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));console.log(V);const C=await navigator.clipboard.read();let H=null;for(const A of C)for(const N of A.types)if(N.startsWith("image/")){const M=await A.getType(N);H=URL.createObjectURL(M),console.log(`Image URL (${N}): ${H}`)}H&&t(6,o=[...o,{type:"image",url:H}]),y=v.content.replaceAll("{{CLIPBOARD}}",V)}t(5,i=y);const E=document.getElementById("chat-textarea");await Te(),E.style.height="",E.style.height=Math.min(E.scrollHeight,200)+"px",E==null||E.focus(),await Te();const k=ys(i);if(k.length>0){const V=k.at(0);E.setSelectionRange(V==null?void 0:V.startIndex,V.endIndex+1)}},g=v=>{p(v)},D=v=>{t(0,a=v)};return s.$$set=v=>{"files"in v&&t(6,o=v.files),"prompt"in v&&t(5,i=v.prompt)},s.$$.update=()=>{s.$$.dirty&544&&t(1,f=n.filter(v=>v.command.toLowerCase().includes(i.toLowerCase())).sort((v,y)=>v.title.localeCompare(y.title))),s.$$.dirty&32&&i&&t(0,a=0)},[a,f,l,r,p,i,o,c,d,n,g,D]}class oo extends $e{constructor(e){super(),et(this,e,ro,no,Xe,{files:6,prompt:5,selectUp:7,selectDown:8})}get selectUp(){return this.$$.ctx[7]}get selectDown(){return this.$$.ctx[8]}}function xn(s,e,t){const l=s.slice();return l[20]=e[t],l[22]=t,l}function Ln(s){let e,t,l,n='<div class="text-lg font-semibold mt-2">#</div>',r,o,i,a,f,c,d=bt(s[3]),p=[];for(let y=0;y<d.length;y+=1)p[y]=Bn(xn(s,d,y));function g(y,E){var k,V;if(E&1&&(f=null),E&1&&(c=null),f==null&&(f=!!y[0].split(" ").some(ho)),f)return fo;if(c==null&&(c=!!((V=(k=y[0].split(" "))==null?void 0:k.at(0))!=null&&V.substring(1).startsWith("http"))),c)return co}let D=g(s,-1),v=D&&D(s);return{c(){e=b("div"),t=b("div"),l=b("div"),l.innerHTML=n,r=j(),o=b("div"),i=b("div");for(let y=0;y<p.length;y+=1)p[y].c();a=j(),v&&v.c(),this.h()},l(y){e=w(y,"DIV",{class:!0});var E=_(e);t=w(E,"DIV",{class:!0});var k=_(t);l=w(k,"DIV",{class:!0,"data-svelte-h":!0}),ze(l)!=="svelte-1bz58rh"&&(l.innerHTML=n),r=P(k),o=w(k,"DIV",{class:!0});var V=_(o);i=w(V,"DIV",{class:!0});var C=_(i);for(let H=0;H<p.length;H+=1)p[H].l(C);a=P(C),v&&v.l(C),C.forEach(h),V.forEach(h),k.forEach(h),E.forEach(h),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5 scrollbar-hidden"),u(o,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(y,E){B(y,e,E),m(e,t),m(t,l),m(t,r),m(t,o),m(o,i);for(let k=0;k<p.length;k+=1)p[k]&&p[k].m(i,null);m(i,a),v&&v.m(i,null)},p(y,E){if(E&46){d=bt(y[3]);let k;for(k=0;k<d.length;k+=1){const V=xn(y,d,k);p[k]?p[k].p(V,E):(p[k]=Bn(V),p[k].c(),p[k].m(i,a))}for(;k<p.length;k+=1)p[k].d(1);p.length=d.length}D===(D=g(y,E))&&v?v.p(y,E):(v&&v.d(1),v=D&&D(y),v&&(v.c(),v.m(i,null)))},d(y){y&&h(e),Wt(p,y),v&&v.d()}}}function io(s){let e,t,l=s[20].name+"",n,r,o=s[20].filename+"",i,a,f,c,d=s[20].title+"",p;return{c(){e=b("div"),t=ae("#"),n=ae(l),r=ae(" ("),i=ae(o),a=ae(")"),f=j(),c=b("div"),p=ae(d),this.h()},l(g){e=w(g,"DIV",{class:!0});var D=_(e);t=ce(D,"#"),n=ce(D,l),r=ce(D," ("),i=ce(D,o),a=ce(D,")"),D.forEach(h),f=P(g),c=w(g,"DIV",{class:!0});var v=_(c);p=ce(v,d),v.forEach(h),this.h()},h(){u(e,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(c,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1")},m(g,D){B(g,e,D),m(e,t),m(e,n),m(e,r),m(e,i),m(e,a),B(g,f,D),B(g,c,D),m(c,p)},p(g,D){D&8&&l!==(l=g[20].name+"")&&ve(n,l),D&8&&o!==(o=g[20].filename+"")&&ve(i,o),D&8&&d!==(d=g[20].title+"")&&ve(p,d)},d(g){g&&(h(e),h(f),h(c))}}}function ao(s){var a;let e,t=(((a=s[20])==null?void 0:a.title)??`#${s[20].name}`)+"",l,n,r,o=s[1].t("Collection")+"",i;return{c(){e=b("div"),l=ae(t),n=j(),r=b("div"),i=ae(o),this.h()},l(f){e=w(f,"DIV",{class:!0});var c=_(e);l=ce(c,t),c.forEach(h),n=P(f),r=w(f,"DIV",{class:!0});var d=_(r);i=ce(d,o),d.forEach(h),this.h()},h(){u(e,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(r,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1")},m(f,c){B(f,e,c),m(e,l),B(f,n,c),B(f,r,c),m(r,i)},p(f,c){var d;c&8&&t!==(t=(((d=f[20])==null?void 0:d.title)??`#${f[20].name}`)+"")&&ve(l,t),c&2&&o!==(o=f[1].t("Collection")+"")&&ve(i,o)},d(f){f&&(h(e),h(n),h(r))}}}function Bn(s){let e,t,l,n;function r(c,d){return c[20].type==="collection"?ao:io}let o=r(s),i=o(s);function a(){return s[14](s[20])}function f(){return s[15](s[22])}return{c(){e=b("button"),i.c(),this.h()},l(c){e=w(c,"BUTTON",{class:!0,type:!0});var d=_(e);i.l(d),d.forEach(h),this.h()},h(){u(e,"class",t="px-3 py-1.5 rounded-xl w-full text-left "+(s[22]===s[2]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":"")),u(e,"type","button")},m(c,d){B(c,e,d),i.m(e,null),l||(n=[le(e,"click",a),le(e,"mousemove",f),le(e,"focus",mo)],l=!0)},p(c,d){s=c,o===(o=r(s))&&i?i.p(s,d):(i.d(1),i=o(s),i&&(i.c(),i.m(e,null))),d&4&&t!==(t="px-3 py-1.5 rounded-xl w-full text-left "+(s[22]===s[2]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":""))&&u(e,"class",t)},d(c){c&&h(e),i.d(),l=!1,Bt(n)}}}function co(s){var d,p;let e,t,l=((p=(d=s[0].split(" "))==null?void 0:d.at(0))==null?void 0:p.substring(1))+"",n,r,o,i=s[1].t("Web")+"",a,f,c;return{c(){e=b("button"),t=b("div"),n=ae(l),r=j(),o=b("div"),a=ae(i),this.h()},l(g){e=w(g,"BUTTON",{class:!0,type:!0});var D=_(e);t=w(D,"DIV",{class:!0});var v=_(t);n=ce(v,l),v.forEach(h),r=P(D),o=w(D,"DIV",{class:!0});var y=_(o);a=ce(y,i),y.forEach(h),D.forEach(h),this.h()},h(){u(t,"class","font-medium text-black line-clamp-1"),u(o,"class","text-xs text-gray-600 line-clamp-1"),u(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-100 selected-command-option-button"),u(e,"type","button")},m(g,D){B(g,e,D),m(e,t),m(t,n),m(e,r),m(e,o),m(o,a),f||(c=le(e,"click",s[17]),f=!0)},p(g,D){var v,y;D&1&&l!==(l=((y=(v=g[0].split(" "))==null?void 0:v.at(0))==null?void 0:y.substring(1))+"")&&ve(n,l),D&2&&i!==(i=g[1].t("Web")+"")&&ve(a,i)},d(g){g&&h(e),f=!1,c()}}}function fo(s){var d,p;let e,t,l=((p=(d=s[0].split(" "))==null?void 0:d.at(0))==null?void 0:p.substring(1))+"",n,r,o,i=s[1].t("Youtube")+"",a,f,c;return{c(){e=b("button"),t=b("div"),n=ae(l),r=j(),o=b("div"),a=ae(i),this.h()},l(g){e=w(g,"BUTTON",{class:!0,type:!0});var D=_(e);t=w(D,"DIV",{class:!0});var v=_(t);n=ce(v,l),v.forEach(h),r=P(D),o=w(D,"DIV",{class:!0});var y=_(o);a=ce(y,i),y.forEach(h),D.forEach(h),this.h()},h(){u(t,"class","font-medium text-black line-clamp-1"),u(o,"class","text-xs text-gray-600 line-clamp-1"),u(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-100 selected-command-option-button"),u(e,"type","button")},m(g,D){B(g,e,D),m(e,t),m(t,n),m(e,r),m(e,o),m(o,a),f||(c=le(e,"click",s[16]),f=!0)},p(g,D){var v,y;D&1&&l!==(l=((y=(v=g[0].split(" "))==null?void 0:v.at(0))==null?void 0:y.substring(1))+"")&&ve(n,l),D&2&&i!==(i=g[1].t("Youtube")+"")&&ve(a,i)},d(g){g&&h(e),f=!1,c()}}}function uo(s){var n,r;let e=s[3].length>0||((r=(n=s[0].split(" "))==null?void 0:n.at(0))==null?void 0:r.substring(1).startsWith("http")),t,l=e&&Ln(s);return{c(){l&&l.c(),t=Ke()},l(o){l&&l.l(o),t=Ke()},m(o,i){l&&l.m(o,i),B(o,t,i)},p(o,[i]){var a,f;i&9&&(e=o[3].length>0||((f=(a=o[0].split(" "))==null?void 0:a.at(0))==null?void 0:f.substring(1).startsWith("http"))),e?l?l.p(o,i):(l=Ln(o),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:ye,o:ye,d(o){o&&h(t),l&&l.d(o)}}}const ho=s=>s.substring(1).startsWith("https://www.youtube.com")||s.substring(1).startsWith("https://youtu.be"),mo=()=>{};function go(s,e,t){let l,n,r;ge(s,Ls,N=>t(13,n=N));const o=Et("i18n");ge(s,o,N=>t(1,r=N));let{prompt:i=""}=e;const a=rl();let f=0,c=[],d=[],p=[];const g=(N,M)=>{var R,U;return N.name.toLowerCase().includes(((U=(R=M.toLowerCase().split(" "))==null?void 0:R.at(0))==null?void 0:U.substring(1))??"")},D=()=>{t(2,f=Math.max(0,f-1))},v=()=>{t(2,f=Math.min(f+1,c.length-1))},y=async N=>{a("select",N),t(0,i=Nl(i));const M=document.getElementById("chat-textarea");await Te(),M==null||M.focus(),await Te()},E=async N=>{a("url",N),t(0,i=Nl(i));const M=document.getElementById("chat-textarea");await Te(),M==null||M.focus(),await Te()},k=async N=>{a("youtube",N),t(0,i=Nl(i));const M=document.getElementById("chat-textarea");await Te(),M==null||M.focus(),await Te()},V=N=>{console.log(N),y(N)},C=N=>{t(2,f=N)},H=()=>{var M,F;const N=(F=(M=i.split(" "))==null?void 0:M.at(0))==null?void 0:F.substring(1);an(N)?k(N):Se.error(r.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},A=()=>{var M,F;const N=(F=(M=i.split(" "))==null?void 0:M.at(0))==null?void 0:F.substring(1);an(N)?E(N):Se.error(r.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return s.$$set=N=>{"prompt"in N&&t(0,i=N.prompt)},s.$$.update=()=>{s.$$.dirty&8194&&t(11,p=[...n.length>0?[{name:"All Documents",type:"collection",title:r.t("All Documents"),collection_names:n.map(N=>N.collection_name)}]:[],...n.reduce((N,M,F,R)=>{var U;return[...new Set([...N,...(((U=M==null?void 0:M.content)==null?void 0:U.tags)??[]).map(z=>z.name)])]},[]).map(N=>({name:N,type:"collection",collection_names:n.filter(M=>{var F;return(((F=M==null?void 0:M.content)==null?void 0:F.tags)??[]).map(R=>R.name).includes(N)}).map(M=>M.collection_name)}))]),s.$$.dirty&2049&&t(12,l=p.filter(N=>g(N,i)).sort((N,M)=>N.name.localeCompare(M.name))),s.$$.dirty&8193&&t(10,d=n.filter(N=>g(N,i)).sort((N,M)=>N.title.localeCompare(M.title))),s.$$.dirty&5120&&t(3,c=[...l,...d]),s.$$.dirty&4097&&i&&(t(2,f=0),console.log(l))},[i,r,f,c,o,y,E,k,D,v,d,p,l,n,V,C,H,A]}class po extends $e{constructor(e){super(),et(this,e,go,uo,Xe,{prompt:0,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function Nn(s,e,t){const l=s.slice();return l[16]=e[t],l[18]=t,l}function zn(s){let e,t=s[2].length>0&&An(s);return{c(){t&&t.c(),e=Ke()},l(l){t&&t.l(l),e=Ke()},m(l,n){t&&t.m(l,n),B(l,e,n)},p(l,n){l[2].length>0?t?t.p(l,n):(t=An(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&h(e),t&&t.d(l)}}}function An(s){let e,t,l,n='<div class="text-lg font-semibold mt-2">@</div>',r,o,i,a=bt(s[2]),f=[];for(let c=0;c<a.length;c+=1)f[c]=On(Nn(s,a,c));return{c(){e=b("div"),t=b("div"),l=b("div"),l.innerHTML=n,r=j(),o=b("div"),i=b("div");for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){e=w(c,"DIV",{class:!0});var d=_(e);t=w(d,"DIV",{class:!0});var p=_(t);l=w(p,"DIV",{class:!0,"data-svelte-h":!0}),ze(l)!=="svelte-1wyzeqe"&&(l.innerHTML=n),r=P(p),o=w(p,"DIV",{class:!0});var g=_(o);i=w(g,"DIV",{class:!0});var D=_(i);for(let v=0;v<f.length;v+=1)f[v].l(D);D.forEach(h),g.forEach(h),p.forEach(h),d.forEach(h),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(i,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),u(o,"class","max-h-60 flex flex-col w-full rounded-r-lg bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(c,d){B(c,e,d),m(e,t),m(t,l),m(t,r),m(t,o),m(o,i);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(i,null)},p(c,d){if(d&22){a=bt(c[2]);let p;for(p=0;p<a.length;p+=1){const g=Nn(c,a,p);f[p]?f[p].p(g,d):(f[p]=On(g),f[p].c(),f[p].m(i,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=a.length}},d(c){c&&h(e),Wt(f,c)}}}function On(s){let e,t,l=s[16].name+"",n,r,o,i,a;function f(){return s[11](s[16])}function c(){return s[12](s[18])}return{c(){e=b("button"),t=b("div"),n=ae(l),r=j(),this.h()},l(d){e=w(d,"BUTTON",{class:!0,type:!0});var p=_(e);t=w(p,"DIV",{class:!0});var g=_(t);n=ce(g,l),g.forEach(h),r=P(p),p.forEach(h),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(e,"class",o="px-3 py-1.5 rounded-xl w-full text-left "+(s[18]===s[1]?"  bg-gray-50 dark:bg-gray-850  selected-command-option-button":"")),u(e,"type","button")},m(d,p){B(d,e,p),m(e,t),m(t,n),m(e,r),i||(a=[le(e,"click",f),le(e,"mousemove",c),le(e,"focus",vo)],i=!0)},p(d,p){s=d,p&4&&l!==(l=s[16].name+"")&&ve(n,l),p&2&&o!==(o="px-3 py-1.5 rounded-xl w-full text-left "+(s[18]===s[1]?"  bg-gray-50 dark:bg-gray-850  selected-command-option-button":""))&&u(e,"class",o)},d(d){d&&h(e),i=!1,Bt(a)}}}function _o(s){let e=s[0].charAt(0)==="@",t,l=e&&zn(s);return{c(){l&&l.c(),t=Ke()},l(n){l&&l.l(n),t=Ke()},m(n,r){l&&l.m(n,r),B(n,t,r)},p(n,[r]){r&1&&(e=n[0].charAt(0)==="@"),e?l?l.p(n,r):(l=zn(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:ye,o:ye,d(n){n&&h(t),l&&l.d(n)}}}const vo=()=>{};function bo(s,e,t){let l;ge(s,ol,E=>t(10,l=E));const n=Et("i18n");ge(s,n,E=>t(13,E));const r=rl();let{prompt:o=""}=e,{user:i=null}=e,{chatInputPlaceholder:a=""}=e,{messages:f=[]}=e,c=0,d=[];const p=()=>{t(1,c=Math.max(0,c-1))},g=()=>{t(1,c=Math.min(c+1,d.length-1))},D=async E=>{t(0,o=""),r("select",E)},v=E=>{D(E)},y=E=>{t(1,c=E)};return s.$$set=E=>{"prompt"in E&&t(0,o=E.prompt),"user"in E&&t(5,i=E.user),"chatInputPlaceholder"in E&&t(6,a=E.chatInputPlaceholder),"messages"in E&&t(7,f=E.messages)},s.$$.update=()=>{s.$$.dirty&1025&&t(2,d=l.filter(E=>{var k,V;return E.name.toLowerCase().includes(((V=(k=o.toLowerCase().split(" "))==null?void 0:k.at(0))==null?void 0:V.substring(1))??"")}).sort((E,k)=>E.name.localeCompare(k.name))),s.$$.dirty&1&&o&&t(1,c=0)},[o,c,d,n,D,i,a,f,p,g,l,v,y]}class wo extends $e{constructor(e){super(),et(this,e,bo,_o,Xe,{prompt:0,user:5,chatInputPlaceholder:6,messages:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function ko(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=_(e);t=ke(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(t).forEach(h),n.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M6 18 18 6M6 6l12 12"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",s[1]),u(e,"stroke","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&2&&u(e,"stroke-width",l[1]),n&1&&u(e,"class",l[0])},i:ye,o:ye,d(l){l&&h(e)}}}function yo(s,e,t){let{className:l="size-3.5"}=e,{strokeWidth:n="2"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class Eo extends $e{constructor(e){super(),et(this,e,yo,ko,Xe,{className:0,strokeWidth:1})}}function Io(s){let e,t,l;return{c(){e=we("svg"),t=we("path"),l=we("path"),this.h()},l(n){e=ke(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=_(e);t=ke(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(h),l=ke(r,"path",{d:!0}),_(l).forEach(h),r.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6.905 9.97a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72V18a.75.75 0 0 0 1.5 0v-4.19l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z"),u(t,"clip-rule","evenodd"),u(l,"d","M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",s[0])},m(n,r){B(n,e,r),m(e,t),m(e,l)},p(n,[r]){r&1&&u(e,"class",n[0])},i:ye,o:ye,d(n){n&&h(e)}}}function Do(s,e,t){let{className:l="size-4"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className)},[l]}class So extends $e{constructor(e){super(),et(this,e,Do,Io,Xe,{className:0})}}function Mo(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=_(e);t=ke(n,"path",{d:!0}),_(t).forEach(h),n.forEach(h),this.h()},h(){u(t,"d","M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&1&&u(e,"class",l[0])},i:ye,o:ye,d(l){l&&h(e)}}}function Co(s,e,t){let{className:l="size-4"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className)},[l]}class To extends $e{constructor(e){super(),et(this,e,Co,Mo,Xe,{className:0})}}function Vo(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=_(e);t=ke(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(h),n.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M12 6.75a5.25 5.25 0 0 1 6.775-5.025.75.75 0 0 1 .313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 0 1 1.248.313 5.25 5.25 0 0 1-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 1 1 2.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0 1 12 6.75ZM4.117 19.125a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&1&&u(e,"class",l[0])},i:ye,o:ye,d(l){l&&h(e)}}}function Ho(s,e,t){let{className:l="size-4"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className)},[l]}class xo extends $e{constructor(e){super(),et(this,e,Ho,Vo,Xe,{className:0})}}function Un(s,e,t){const l=s.slice();return l[17]=e[t],l[18]=e,l[19]=t,l}function Lo(s){let e;const t=s[9].default,l=Ct(t,s,s[16],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&65536)&&Tt(l,t,n,n[16],e?Ht(t,n[16],r,null):Vt(n[16]),null)},i(n){e||(L(l,n),e=!0)},o(n){O(l,n),e=!1},d(n){l&&l.d(n)}}}function Bo(s){let e,t;return e=new Ot({props:{content:s[7].t("More"),$$slots:{default:[Lo]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n&128&&(r.content=l[7].t("More")),n&65536&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function jn(s){let e,t,l,n,r=bt(Object.keys(s[1])),o=[];for(let a=0;a<r.length;a+=1)o[a]=Pn(Un(s,r,a));const i=a=>O(o[a],1,1,()=>{o[a]=null});return{c(){e=b("div");for(let a=0;a<o.length;a+=1)o[a].c();t=j(),l=b("hr"),this.h()},l(a){e=w(a,"DIV",{class:!0});var f=_(e);for(let c=0;c<o.length;c+=1)o[c].l(f);f.forEach(h),t=P(a),l=w(a,"HR",{class:!0}),this.h()},h(){u(e,"class","max-h-28 overflow-y-auto scrollbar-hidden"),u(l,"class","border-gray-100 dark:border-gray-800 my-1")},m(a,f){B(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);B(a,t,f),B(a,l,f),n=!0},p(a,f){if(f&3){r=bt(Object.keys(a[1]));let c;for(c=0;c<r.length;c+=1){const d=Un(a,r,c);o[c]?(o[c].p(d,f),L(o[c],1)):(o[c]=Pn(d),o[c].c(),L(o[c],1),o[c].m(e,null))}for(We(),c=r.length;c<o.length;c+=1)i(c);qe()}},i(a){if(!n){for(let f=0;f<r.length;f+=1)L(o[f]);n=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)O(o[f]);n=!1},d(a){a&&(h(e),h(t),h(l)),Wt(o,a)}}}function No(s){let e,t=s[1][s[17]].name+"",l;return{c(){e=b("div"),l=ae(t),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=_(e);l=ce(r,t),r.forEach(h),this.h()},h(){u(e,"class","line-clamp-1")},m(n,r){B(n,e,r),m(e,l)},p(n,r){r&2&&t!==(t=n[1][n[17]].name+"")&&ve(l,t)},d(n){n&&h(e)}}}function Pn(s){var D;let e,t,l,n,r,o,i,a,f,c;l=new xo({}),r=new Ot({props:{content:((D=s[1][s[17]])==null?void 0:D.description)??"",className:"flex-1",$$slots:{default:[No]},$$scope:{ctx:s}}});function d(v){s[10](v,s[17])}function p(...v){return s[11](s[17],...v)}let g={};return s[1][s[17]].enabled!==void 0&&(g.state=s[1][s[17]].enabled),i=new Is({props:g}),De.push(()=>Pe(i,"state",d)),i.$on("change",p),{c(){e=b("div"),t=b("div"),ne(l.$$.fragment),n=j(),ne(r.$$.fragment),o=j(),ne(i.$$.fragment),f=j(),this.h()},l(v){e=w(v,"DIV",{class:!0});var y=_(e);t=w(y,"DIV",{class:!0});var E=_(t);se(l.$$.fragment,E),n=P(E),se(r.$$.fragment,E),E.forEach(h),o=P(y),se(i.$$.fragment,y),f=P(y),y.forEach(h),this.h()},h(){u(t,"class","flex-1 flex items-center gap-2"),u(e,"class","flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(v,y){B(v,e,y),m(e,t),re(l,t,null),m(t,n),re(r,t,null),m(e,o),re(i,e,null),m(e,f),c=!0},p(v,y){var V;s=v;const E={};y&2&&(E.content=((V=s[1][s[17]])==null?void 0:V.description)??""),y&65538&&(E.$$scope={dirty:y,ctx:s}),r.$set(E);const k={};!a&&y&2&&(a=!0,k.state=s[1][s[17]].enabled,je(()=>a=!1)),i.$set(k)},i(v){c||(L(l.$$.fragment,v),L(r.$$.fragment,v),L(i.$$.fragment,v),c=!0)},o(v){O(l.$$.fragment,v),O(r.$$.fragment,v),O(i.$$.fragment,v),c=!1},d(v){v&&h(e),oe(l),oe(r),oe(i)}}}function Rn(s){let e,t,l,n,r,o=s[7].t("Web Search")+"",i,a,f,c,d,p,g;l=new To({});function D(y){s[12](y)}let v={};return s[2]!==void 0&&(v.state=s[2]),f=new Is({props:v}),De.push(()=>Pe(f,"state",D)),{c(){e=b("div"),t=b("div"),ne(l.$$.fragment),n=j(),r=b("div"),i=ae(o),a=j(),ne(f.$$.fragment),d=j(),p=b("hr"),this.h()},l(y){e=w(y,"DIV",{class:!0});var E=_(e);t=w(E,"DIV",{class:!0});var k=_(t);se(l.$$.fragment,k),n=P(k),r=w(k,"DIV",{class:!0});var V=_(r);i=ce(V,o),V.forEach(h),k.forEach(h),a=P(E),se(f.$$.fragment,E),E.forEach(h),d=P(y),p=w(y,"HR",{class:!0}),this.h()},h(){u(r,"class","line-clamp-1"),u(t,"class","flex-1 flex items-center gap-2"),u(e,"class","flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl"),u(p,"class","border-gray-100 dark:border-gray-800 my-1")},m(y,E){B(y,e,E),m(e,t),re(l,t,null),m(t,n),m(t,r),m(r,i),m(e,a),re(f,e,null),B(y,d,E),B(y,p,E),g=!0},p(y,E){(!g||E&128)&&o!==(o=y[7].t("Web Search")+"")&&ve(i,o);const k={};!c&&E&4&&(c=!0,k.state=y[2],je(()=>c=!1)),f.$set(k)},i(y){g||(L(l.$$.fragment,y),L(f.$$.fragment,y),g=!0)},o(y){O(l.$$.fragment,y),O(f.$$.fragment,y),g=!1},d(y){y&&(h(e),h(d),h(p)),oe(l),oe(f)}}}function zo(s){let e,t,l,n=s[7].t("Upload Files")+"",r,o;return e=new So({}),{c(){ne(e.$$.fragment),t=j(),l=b("div"),r=ae(n),this.h()},l(i){se(e.$$.fragment,i),t=P(i),l=w(i,"DIV",{class:!0});var a=_(l);r=ce(a,n),a.forEach(h),this.h()},h(){u(l,"class","line-clamp-1")},m(i,a){re(e,i,a),B(i,t,a),B(i,l,a),m(l,r),o=!0},p(i,a){(!o||a&128)&&n!==(n=i[7].t("Upload Files")+"")&&ve(r,n)},i(i){o||(L(e.$$.fragment,i),o=!0)},o(i){O(e.$$.fragment,i),o=!1},d(i){i&&(h(t),h(l)),oe(e,i)}}}function Ao(s){var a,f;let e=Object.keys(s[1]).length>0,t,l,n,r,o=e&&jn(s),i=((f=(a=s[6])==null?void 0:a.features)==null?void 0:f.enable_web_search)&&Rn(s);return n=new Jt({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$slots:{default:[zo]},$$scope:{ctx:s}}}),n.$on("click",s[13]),{c(){o&&o.c(),t=j(),i&&i.c(),l=j(),ne(n.$$.fragment)},l(c){o&&o.l(c),t=P(c),i&&i.l(c),l=P(c),se(n.$$.fragment,c)},m(c,d){o&&o.m(c,d),B(c,t,d),i&&i.m(c,d),B(c,l,d),re(n,c,d),r=!0},p(c,d){var g,D;d&2&&(e=Object.keys(c[1]).length>0),e?o?(o.p(c,d),d&2&&L(o,1)):(o=jn(c),o.c(),L(o,1),o.m(t.parentNode,t)):o&&(We(),O(o,1,1,()=>{o=null}),qe()),(D=(g=c[6])==null?void 0:g.features)!=null&&D.enable_web_search?i?(i.p(c,d),d&64&&L(i,1)):(i=Rn(c),i.c(),L(i,1),i.m(l.parentNode,l)):i&&(We(),O(i,1,1,()=>{i=null}),qe());const p={};d&65664&&(p.$$scope={dirty:d,ctx:c}),n.$set(p)},i(c){r||(L(o),L(i),L(n.$$.fragment,c),r=!0)},o(c){O(o),O(i),O(n.$$.fragment,c),r=!1},d(c){c&&(h(t),h(l)),o&&o.d(c),i&&i.d(c),oe(n,c)}}}function Oo(s){let e,t,l;return t=new Hl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:15,alignOffset:-8,side:"top",align:"start",transition:al,$$slots:{default:[Ao]},$$scope:{ctx:s}}}),{c(){e=b("div"),ne(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{slot:!0});var r=_(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){u(e,"slot","content")},m(n,r){B(n,e,r),re(t,e,null),l=!0},p(n,r){const o={};r&65743&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){O(t.$$.fragment,n),l=!1},d(n){n&&h(e),oe(t)}}}function Uo(s){let e,t,l;function n(o){s[14](o)}let r={$$slots:{content:[Oo],default:[Bo]},$$scope:{ctx:s}};return s[5]!==void 0&&(r.show=s[5]),e=new Vl({props:r}),De.push(()=>Pe(e,"show",n)),e.$on("change",s[15]),{c(){ne(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,i){re(e,o,i),l=!0},p(o,[i]){const a={};i&65743&&(a.$$scope={dirty:i,ctx:o}),!t&&i&32&&(t=!0,a.show=o[5],je(()=>t=!1)),e.$set(a)},i(o){l||(L(e.$$.fragment,o),l=!0)},o(o){O(e.$$.fragment,o),l=!1},d(o){oe(e,o)}}}function jo(s,e,t){let l,n;ge(s,il,C=>t(6,l=C));let{$$slots:r={},$$scope:o}=e;const i=Et("i18n");ge(s,i,C=>t(7,n=C));let{uploadFilesHandler:a}=e,{selectedToolIds:f=[]}=e,{webSearchEnabled:c}=e,{tools:d={}}=e,{onClose:p}=e,g=!1;function D(C,H){s.$$.not_equal(d[H].enabled,C)&&(d[H].enabled=C,t(1,d),t(0,f))}const v=(C,H)=>{t(0,f=H.detail?[...f,C]:f.filter(A=>A!==C))};function y(C){c=C,t(2,c)}const E=()=>{a()};function k(C){g=C,t(5,g)}const V=C=>{C.detail===!1&&p()};return s.$$set=C=>{"uploadFilesHandler"in C&&t(3,a=C.uploadFilesHandler),"selectedToolIds"in C&&t(0,f=C.selectedToolIds),"webSearchEnabled"in C&&t(2,c=C.webSearchEnabled),"tools"in C&&t(1,d=C.tools),"onClose"in C&&t(4,p=C.onClose),"$$scope"in C&&t(16,o=C.$$scope)},s.$$.update=()=>{s.$$.dirty&3&&t(1,d=Object.fromEntries(Object.keys(d).map(C=>[C,{...d[C],enabled:f.includes(C)}])))},[f,d,c,a,p,g,l,n,i,r,D,v,y,E,k,V,o]}class Po extends $e{constructor(e){super(),et(this,e,jo,Uo,Xe,{uploadFilesHandler:3,selectedToolIds:0,webSearchEnabled:2,tools:1,onClose:4})}}function Ro(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=_(e);t=ke(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(h),n.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M12 5a7 7 0 0 0-7 7v1.17c.313-.11.65-.17 1-.17h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H6a3 3 0 0 1-3-3v-6a9 9 0 0 1 18 0v6a3 3 0 0 1-3 3h-2a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2c.35 0 .687.06 1 .17V12a7 7 0 0 0-7-7Z"),u(t,"clip-rule","evenodd"),u(e,"aria-hidden","true"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",s[1]),u(e,"stroke","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&2&&u(e,"stroke-width",l[1]),n&1&&u(e,"class",l[0])},i:ye,o:ye,d(l){l&&h(e)}}}function Fo(s,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="0"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class Zo extends $e{constructor(e){super(),et(this,e,Fo,Ro,Xe,{className:0,strokeWidth:1})}}function Fn(s,e,t){const l=s.slice();return l[29]=e[t],l}function Zn(s){let e,t;return{c(){e=b("div"),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0}),_(e).forEach(h),this.h()},h(){u(e,"class",t="w-[2px] "+(s[0]?" bg-gray-500 dark:bg-gray-400   ":"bg-indigo-500 dark:bg-indigo-400  ")+" inline-block h-full"),It(e,"height",Math.min(100,Math.max(14,s[29]*100))+"%")},m(l,n){B(l,e,n)},p(l,n){n[0]&1&&t!==(t="w-[2px] "+(l[0]?" bg-gray-500 dark:bg-gray-400   ":"bg-indigo-500 dark:bg-indigo-400  ")+" inline-block h-full")&&u(e,"class",t),n[0]&4&&It(e,"height",Math.min(100,Math.max(14,l[29]*100))+"%")},d(l){l&&h(e)}}}function Wo(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"></path></svg>',l,n;return{c(){e=b("button"),e.innerHTML=t,this.h()},l(r){e=w(r,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-1qzkal"&&(e.innerHTML=t),this.h()},h(){u(e,"type","button"),u(e,"class","p-1.5 bg-indigo-500 text-white dark:bg-indigo-500 dark:text-blue-950 rounded-full")},m(r,o){B(r,e,o),l||(n=le(e,"click",s[10]),l=!0)},p:ye,d(r){r&&h(e),l=!1,n()}}}function qo(s){let e,t=`<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><style>.spinner_OSmW {
							transform-origin: center;
							animation: spinner_T6mA 0.75s step-end infinite;
						}
						@keyframes spinner_T6mA {
							8.3% {
								transform: rotate(30deg);
							}
							16.6% {
								transform: rotate(60deg);
							}
							25% {
								transform: rotate(90deg);
							}
							33.3% {
								transform: rotate(120deg);
							}
							41.6% {
								transform: rotate(150deg);
							}
							50% {
								transform: rotate(180deg);
							}
							58.3% {
								transform: rotate(210deg);
							}
							66.6% {
								transform: rotate(240deg);
							}
							75% {
								transform: rotate(270deg);
							}
							83.3% {
								transform: rotate(300deg);
							}
							91.6% {
								transform: rotate(330deg);
							}
							100% {
								transform: rotate(360deg);
							}
						}
					</style><g class="spinner_OSmW"><rect x="11" y="1" width="2" height="5" opacity=".14"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(30 12 12)" opacity=".29"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(60 12 12)" opacity=".43"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(90 12 12)" opacity=".57"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(120 12 12)" opacity=".71"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(150 12 12)" opacity=".86"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(180 12 12)"></rect></g></svg>`;return{c(){e=b("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-otpw2s"&&(e.innerHTML=t),this.h()},h(){u(e,"class","text-gray-500 rounded-full cursor-not-allowed")},m(l,n){B(l,e,n)},p:ye,d(l){l&&h(e)}}}function Go(s){let e,t,l,n,r,o,i,a,f,c,d,p,g=s[5](s[1])+"",D,v,y,E,k,V,C,H=bt(s[2].slice().reverse()),A=[];for(let R=0;R<H.length;R+=1)A[R]=Zn(Fn(s,H,R));function N(R,U){return R[0]?qo:Wo}let M=N(s),F=M(s);return{c(){e=b("div"),t=b("div"),l=b("button"),n=we("svg"),r=we("path"),i=j(),a=b("div"),f=b("div");for(let R=0;R<A.length;R+=1)A[R].c();c=j(),d=b("div"),p=b("div"),D=ae(g),y=j(),E=b("div"),F.c(),this.h()},l(R){e=w(R,"DIV",{class:!0});var U=_(e);t=w(U,"DIV",{class:!0});var z=_(t);l=w(z,"BUTTON",{type:!0,class:!0});var K=_(l);n=ke(K,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var te=_(n);r=ke(te,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(r).forEach(h),te.forEach(h),K.forEach(h),z.forEach(h),i=P(U),a=w(U,"DIV",{class:!0,dir:!0});var Y=_(a);f=w(Y,"DIV",{class:!0});var S=_(f);for(let de=0;de<A.length;de+=1)A[de].l(S);S.forEach(h),Y.forEach(h),c=P(U),d=w(U,"DIV",{class:!0});var T=_(d);p=w(T,"DIV",{class:!0});var J=_(p);D=ce(J,g),J.forEach(h),T.forEach(h),y=P(U),E=w(U,"DIV",{class:!0});var pe=_(E);F.l(pe),pe.forEach(h),U.forEach(h),this.h()},h(){u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"d","M6 18 18 6M6 6l12 12"),u(n,"xmlns","http://www.w3.org/2000/svg"),u(n,"fill","none"),u(n,"viewBox","0 0 24 24"),u(n,"stroke-width","3"),u(n,"stroke","currentColor"),u(n,"class","size-4"),u(l,"type","button"),u(l,"class",o="p-1.5 "+(s[0]?" bg-gray-200 dark:bg-gray-700/50":"bg-indigo-400/20 text-indigo-600 dark:text-indigo-300 ")+" rounded-full"),u(t,"class","flex items-center mr-1"),u(f,"class","flex-1 flex items-center gap-0.5 h-6"),u(a,"class","flex flex-1 self-center items-center justify-between ml-2 mx-1 overflow-hidden h-6"),u(a,"dir","rtl"),u(p,"class",v="text-sm "+(s[0]?" text-gray-500  dark:text-gray-400  ":" text-indigo-400 ")+" font-medium flex-1 mx-auto text-center"),u(d,"class","mx-1.5 pr-1 flex justify-center items-center"),u(E,"class","flex items-center mr-1"),u(e,"class",k=(s[0]?" bg-gray-100/50 dark:bg-gray-850/50":"bg-indigo-300/10 dark:bg-indigo-500/10 ")+" rounded-full flex p-2.5")},m(R,U){B(R,e,U),m(e,t),m(t,l),m(l,n),m(n,r),m(e,i),m(e,a),m(a,f);for(let z=0;z<A.length;z+=1)A[z]&&A[z].m(f,null);m(e,c),m(e,d),m(d,p),m(p,D),m(e,y),m(e,E),F.m(E,null),V||(C=le(l,"click",s[9]),V=!0)},p(R,U){if(U[0]&1&&o!==(o="p-1.5 "+(R[0]?" bg-gray-200 dark:bg-gray-700/50":"bg-indigo-400/20 text-indigo-600 dark:text-indigo-300 ")+" rounded-full")&&u(l,"class",o),U[0]&5){H=bt(R[2].slice().reverse());let z;for(z=0;z<H.length;z+=1){const K=Fn(R,H,z);A[z]?A[z].p(K,U):(A[z]=Zn(K),A[z].c(),A[z].m(f,null))}for(;z<A.length;z+=1)A[z].d(1);A.length=H.length}U[0]&2&&g!==(g=R[5](R[1])+"")&&ve(D,g),U[0]&1&&v!==(v="text-sm "+(R[0]?" text-gray-500  dark:text-gray-400  ":" text-indigo-400 ")+" font-medium flex-1 mx-auto text-center")&&u(p,"class",v),M===(M=N(R))&&F?F.p(R,U):(F.d(1),F=M(R),F&&(F.c(),F.m(E,null))),U[0]&1&&k!==(k=(R[0]?" bg-gray-100/50 dark:bg-gray-850/50":"bg-indigo-300/10 dark:bg-indigo-500/10 ")+" rounded-full flex p-2.5")&&u(e,"class",k)},i:ye,o:ye,d(R){R&&h(e),Wt(A,R),F.d(),V=!1,C()}}}const Wn=300;function Jo(s,e,t){let l,n,r;ge(s,At,Y=>t(18,n=Y)),ge(s,il,Y=>t(19,r=Y));const o=Et("i18n");ge(s,o,Y=>t(17,l=Y));const i=rl();let{recording:a=!1}=e,f=!1,c=!1,d=0,p=null,g="";const D=()=>{p=setInterval(()=>{t(1,d++,d)},1e3)},v=()=>{clearInterval(p),t(1,d=0)},y=Y=>{const S=Math.floor(Y/60),T=Y%60,J=T<10?`0${T}`:T;return`${S}:${J}`};let E,k,V=[];const C=-45;let H=Array(Wn).fill(0);const A=Y=>{let S=0;for(let T=0;T<Y.length;T++){const J=(Y[T]-128)/128;S+=J*J}return Math.sqrt(S/Y.length)},N=Y=>{Y=Y*10;const T=Math.pow(Y,1.5);return Math.min(1,Math.max(.01,T))},M=Y=>{const S=new AudioContext,T=S.createMediaStreamSource(Y),J=S.createAnalyser();J.minDecibels=C,T.connect(J);const pe=J.frequencyBinCount,de=new Uint8Array(pe),Me=new Uint8Array(J.fftSize);(()=>{const lt=()=>{if(!(!a||f)){if(a&&!f){J.getByteTimeDomainData(Me),J.getByteFrequencyData(de);const Ge=A(Me);H.push(N(Ge)),H.length>=Wn&&H.shift(),t(2,H)}window.requestAnimationFrame(lt)}};window.requestAnimationFrame(lt)})()},F=async Y=>{await Te();const S=Ul(Y,"recording.wav"),T=await jl(localStorage.token,S).catch(J=>(Se.error(J),null));T&&(console.log(T.text),i("confirm",T.text))},R=async()=>{var S,T;D();const Y=await navigator.mediaDevices.getUserMedia({audio:!0});if(k=new MediaRecorder(Y),k.onstart=()=>{console.log("Recording started"),V=[],M(Y)},k.ondataavailable=J=>V.push(J.data),k.onstop=async()=>{var J,pe;if(console.log("Recording stopped"),(((pe=(J=n==null?void 0:n.audio)==null?void 0:J.stt)==null?void 0:pe.engine)??"")==="web")V=[];else{if(c){const de=new Blob(V,{type:"audio/wav"});await F(de),c=!1,t(0,f=!1)}V=[],t(8,a=!1)}},k.start(),(r.audio.stt.engine==="web"||(((T=(S=n==null?void 0:n.audio)==null?void 0:S.stt)==null?void 0:T.engine)??"")==="web")&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){E=new(window.SpeechRecognition||window.webkitSpeechRecognition),E.continuous=!0;const J=2e3;let pe;E.start(),E.onresult=async de=>{var Le;clearTimeout(pe),console.log(de);const Me=de.results[Object.keys(de.results).length-1][0].transcript;g=`${g}${Me}`,await Te(),(Le=document.getElementById("chat-textarea"))==null||Le.focus(),pe=setTimeout(()=>{console.log("Speech recognition turned off due to inactivity."),E.stop()},J)},E.onend=function(){console.log("recognition ended"),z(),i("confirm",g),c=!1,t(0,f=!1)},E.onerror=function(de){console.log(de),Se.error(l.t("Speech recognition error: {{error}}",{error:de.error})),i("cancel"),U()}}},U=async()=>{a&&k&&await k.stop(),v(),V=[]},z=async()=>{t(0,f=!0),c=!0,a&&k&&await k.stop(),clearInterval(p)},K=async()=>{i("cancel"),U()},te=async()=>{await z()};return s.$$set=Y=>{"recording"in Y&&t(8,a=Y.recording)},s.$$.update=()=>{s.$$.dirty[0]&256&&(a?R():U())},[f,d,H,o,i,y,U,z,a,K,te]}class Qo extends $e{constructor(e){super(),et(this,e,Jo,Go,Xe,{recording:8},null,[-1,-1])}}function qn(s,e,t){const l=s.slice();return l[76]=e[t],l[78]=t,l}function Gn(s){let e,t,l,n,r,o,i;return r=new ar({}),{c(){e=b("div"),t=b("div"),l=b("div"),n=b("div"),ne(r.$$.fragment),this.h()},l(a){e=w(a,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=_(e);t=w(f,"DIV",{class:!0});var c=_(t);l=w(c,"DIV",{class:!0});var d=_(l);n=w(d,"DIV",{class:!0});var p=_(n);se(r.$$.fragment,p),p.forEach(h),d.forEach(h),c.forEach(h),f.forEach(h),this.h()},h(){u(n,"class","max-w-md"),u(l,"class","m-auto pt-64 flex flex-col justify-center"),u(t,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),u(e,"class",o="fixed "+(s[25]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),u(e,"id","dropzone"),u(e,"role","region"),u(e,"aria-label","Drag and Drop Container")},m(a,f){B(a,e,f),m(e,t),m(t,l),m(l,n),re(r,n,null),i=!0},p(a,f){(!i||f[0]&33554432&&o!==(o="fixed "+(a[25]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&u(e,"class",o)},i(a){i||(L(r.$$.fragment,a),i=!0)},o(a){O(r.$$.fragment,a),i=!1},d(a){a&&h(e),oe(r)}}}function Jn(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',n,r;return{c(){e=b("div"),t=b("button"),t.innerHTML=l,this.h()},l(o){e=w(o,"DIV",{class:!0});var i=_(e);t=w(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ze(t)!=="svelte-txgoc3"&&(t.innerHTML=l),i.forEach(h),this.h()},h(){u(t,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto"),u(e,"class","absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none")},m(o,i){B(o,e,i),m(e,t),n||(r=le(t,"click",s[36]),n=!0)},p:ye,d(o){o&&h(e),n=!1,r()}}}function Yo(s){let e,t,l;function n(o){s[41](o)}let r={};return s[1]!==void 0&&(r.prompt=s[1]),e=new po({props:r}),s[40](e),De.push(()=>Pe(e,"prompt",n)),e.$on("youtube",s[42]),e.$on("url",s[43]),e.$on("select",s[44]),{c(){ne(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,i){re(e,o,i),l=!0},p(o,i){const a={};!t&&i[0]&2&&(t=!0,a.prompt=o[1],je(()=>t=!1)),e.$set(a)},i(o){l||(L(e.$$.fragment,o),l=!0)},o(o){O(e.$$.fragment,o),l=!1},d(o){s[40](null),oe(e,o)}}}function Ko(s){let e,t,l,n;function r(a){s[38](a)}function o(a){s[39](a)}let i={};return s[1]!==void 0&&(i.prompt=s[1]),s[3]!==void 0&&(i.files=s[3]),e=new oo({props:i}),s[37](e),De.push(()=>Pe(e,"prompt",r)),De.push(()=>Pe(e,"files",o)),{c(){ne(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,f){re(e,a,f),n=!0},p(a,f){const c={};!t&&f[0]&2&&(t=!0,c.prompt=a[1],je(()=>t=!1)),!l&&f[0]&8&&(l=!0,c.files=a[3],je(()=>l=!1)),e.$set(c)},i(a){n||(L(e.$$.fragment,a),n=!0)},o(a){O(e.$$.fragment,a),n=!1},d(a){s[37](null),oe(e,a)}}}function Qn(s){let e,t,l,n,r,o,i,a,f=s[0].name+"",c,d,p,g,D,v,y,E;return D=new Eo({}),{c(){e=b("div"),t=b("div"),l=b("img"),r=j(),o=b("div"),i=ae("Talking to "),a=b("span"),c=ae(f),d=j(),p=b("div"),g=b("button"),ne(D.$$.fragment),this.h()},l(k){e=w(k,"DIV",{class:!0});var V=_(e);t=w(V,"DIV",{class:!0});var C=_(t);l=w(C,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),r=P(C),o=w(C,"DIV",{});var H=_(o);i=ce(H,"Talking to "),a=w(H,"SPAN",{class:!0});var A=_(a);c=ce(A,f),A.forEach(h),H.forEach(h),C.forEach(h),d=P(V),p=w(V,"DIV",{});var N=_(p);g=w(N,"BUTTON",{class:!0});var M=_(g);se(D.$$.fragment,M),M.forEach(h),N.forEach(h),V.forEach(h),this.h()},h(){var k,V,C;u(l,"crossorigin","anonymous"),u(l,"alt","model profile"),u(l,"class","size-5 max-w-[28px] object-cover rounded-full"),Kt(l.src,n=((C=(V=(k=s[13].find(s[49]))==null?void 0:k.info)==null?void 0:V.meta)==null?void 0:C.profile_image_url)??(s[24].language==="dg-DG"?"/doge.png":`${sl}/static/favicon.png`))||u(l,"src",n),u(a,"class","font-medium"),u(t,"class","flex items-center gap-2 text-sm dark:text-gray-500"),u(g,"class","flex items-center"),u(e,"class","px-3 py-2.5 text-left w-full flex justify-between items-center absolute bottom-0 left-0 right-0 bg-gradient-to-t from-50% from-white dark:from-gray-900")},m(k,V){B(k,e,V),m(e,t),m(t,l),m(t,r),m(t,o),m(o,i),m(o,a),m(a,c),m(e,d),m(e,p),m(p,g),re(D,g,null),v=!0,y||(E=le(g,"click",s[50]),y=!0)},p(k,V){var C,H,A;(!v||V[0]&16785409&&!Kt(l.src,n=((A=(H=(C=k[13].find(k[49]))==null?void 0:C.info)==null?void 0:H.meta)==null?void 0:A.profile_image_url)??(k[24].language==="dg-DG"?"/doge.png":`${sl}/static/favicon.png`)))&&u(l,"src",n),(!v||V[0]&1)&&f!==(f=k[0].name+"")&&ve(c,f)},i(k){v||(L(D.$$.fragment,k),v=!0)},o(k){O(D.$$.fragment,k),v=!1},d(k){k&&h(e),oe(D),y=!1,E()}}}function Xo(s){let e,t,l,n,r,o,i,a,f,c,d,p,g,D=s[11].length==0||s[11].at(-1).done==!0,v,y,E,k,V,C,H,A,N,M=s[3].length>0&&Yn(s);function F(S){s[62](S)}function R(S){s[63](S)}let U={tools:s[27].reduce(s[59],{}),uploadFilesHandler:s[60],onClose:s[61],$$slots:{default:[oi]},$$scope:{ctx:s}};s[5]!==void 0&&(U.webSearchEnabled=s[5]),s[4]!==void 0&&(U.selectedToolIds=s[4]),o=new Po({props:U}),De.push(()=>Pe(o,"webSearchEnabled",F)),De.push(()=>Pe(o,"selectedToolIds",R));let z=D&&$n(s);const K=[ci,ai],te=[];function Y(S,T){return T[0]&2048&&(k=null),k==null&&(k=S[11].length==0||S[11].at(-1).done==!0),k?0:1}return V=Y(s,[-1,-1,-1]),C=te[V]=K[V](s),{c(){e=b("form"),t=b("div"),M&&M.c(),l=j(),n=b("div"),r=b("div"),ne(o.$$.fragment),f=j(),c=b("textarea"),p=j(),g=b("div"),z&&z.c(),y=j(),E=b("div"),C.c(),this.h()},l(S){e=w(S,"FORM",{class:!0});var T=_(e);t=w(T,"DIV",{class:!0,dir:!0});var J=_(t);M&&M.l(J),l=P(J),n=w(J,"DIV",{class:!0});var pe=_(n);r=w(pe,"DIV",{class:!0});var de=_(r);se(o.$$.fragment,de),de.forEach(h),f=P(pe),c=w(pe,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),_(c).forEach(h),p=P(pe),g=w(pe,"DIV",{class:!0});var Me=_(g);z&&z.l(Me),Me.forEach(h),pe.forEach(h),J.forEach(h),y=P(T),E=w(T,"DIV",{class:!0});var Le=_(E);C.l(Le),Le.forEach(h),T.forEach(h),this.h()},h(){var S;u(r,"class","ml-0.5 self-end mb-1.5 flex space-x-1"),u(c,"id","chat-textarea"),u(c,"class","scrollbar-hidden bg-gray-50 dark:bg-gray-850 dark:text-gray-100 outline-none w-full py-3 px-1 rounded-xl resize-none h-[48px] svelte-141e0sl"),u(c,"placeholder",d=s[22]!==""?s[22]:s[24].t("Send a Message")),u(c,"rows","1"),u(g,"class","self-end mb-2 flex space-x-1 mr-1"),u(n,"class","flex"),u(t,"class","flex-1 flex flex-col relative w-full rounded-3xl px-1.5 bg-gray-50 dark:bg-gray-850 dark:text-gray-100"),u(t,"dir",v=((S=s[26])==null?void 0:S.chatDirection)??"LTR"),u(E,"class","flex items-end w-10"),u(e,"class","w-full flex gap-1.5")},m(S,T){B(S,e,T),m(e,t),M&&M.m(t,null),m(t,l),m(t,n),m(n,r),re(o,r,null),m(n,f),m(n,c),s[64](c),on(c,s[1]),m(n,p),m(n,g),z&&z.m(g,null),m(e,y),m(e,E),te[V].m(E,null),H=!0,A||(N=[le(c,"input",s[65]),le(c,"keypress",s[66]),le(c,"keydown",s[67]),le(c,"input",s[68]),le(c,"focus",s[69]),le(c,"paste",s[70]),le(e,"submit",Ss(s[74]))],A=!0)},p(S,T){var de;S[3].length>0?M?(M.p(S,T),T[0]&8&&L(M,1)):(M=Yn(S),M.c(),L(M,1),M.m(t,l)):M&&(We(),O(M,1,1,()=>{M=null}),qe());const J={};T[0]&402654208&&(J.tools=S[27].reduce(S[59],{})),T[0]&32768&&(J.uploadFilesHandler=S[60]),T[0]&4096&&(J.onClose=S[61]),T[2]&131072&&(J.$$scope={dirty:T,ctx:S}),!i&&T[0]&32&&(i=!0,J.webSearchEnabled=S[5],je(()=>i=!1)),!a&&T[0]&16&&(a=!0,J.selectedToolIds=S[4],je(()=>a=!1)),o.$set(J),(!H||T[0]&20971520&&d!==(d=S[22]!==""?S[22]:S[24].t("Send a Message")))&&u(c,"placeholder",d),T[0]&2&&on(c,S[1]),T[0]&2048&&(D=S[11].length==0||S[11].at(-1).done==!0),D?z?(z.p(S,T),T[0]&2048&&L(z,1)):(z=$n(S),z.c(),L(z,1),z.m(g,null)):z&&(We(),O(z,1,1,()=>{z=null}),qe()),(!H||T[0]&67108864&&v!==(v=((de=S[26])==null?void 0:de.chatDirection)??"LTR"))&&u(t,"dir",v);let pe=V;V=Y(S,T),V===pe?te[V].p(S,T):(We(),O(te[pe],1,1,()=>{te[pe]=null}),qe(),C=te[V],C?C.p(S,T):(C=te[V]=K[V](S),C.c()),L(C,1),C.m(E,null))},i(S){H||(L(M),L(o.$$.fragment,S),L(z),L(C),H=!0)},o(S){O(M),O(o.$$.fragment,S),O(z),O(C),H=!1},d(S){S&&h(e),M&&M.d(),oe(o),s[64](null),z&&z.d(),te[V].d(),A=!1,Bt(N)}}}function $o(s){let e,t,l;function n(o){s[54](o)}let r={};return s[14]!==void 0&&(r.recording=s[14]),e=new Qo({props:r}),De.push(()=>Pe(e,"recording",n)),e.$on("cancel",s[55]),e.$on("confirm",s[56]),{c(){ne(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,i){re(e,o,i),l=!0},p(o,i){const a={};!t&&i[0]&16384&&(t=!0,a.recording=o[14],je(()=>t=!1)),e.$set(a)},i(o){l||(L(e.$$.fragment,o),l=!0)},o(o){O(e.$$.fragment,o),l=!1},d(o){oe(e,o)}}}function Yn(s){let e,t,l=bt(s[3]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Xn(qn(s,l,o));const r=o=>O(n[o],1,1,()=>{n[o]=null});return{c(){e=b("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=w(o,"DIV",{class:!0});var i=_(e);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(h),this.h()},h(){u(e,"class","mx-2 mt-2 mb-1 flex flex-wrap gap-2")},m(o,i){B(o,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,i){if(i[0]&25166345){l=bt(o[3]);let a;for(a=0;a<l.length;a+=1){const f=qn(o,l,a);n[a]?(n[a].p(f,i),L(n[a],1)):(n[a]=Xn(f),n[a].c(),L(n[a],1),n[a].m(e,null))}for(We(),a=l.length;a<n.length;a+=1)r(a);qe()}},i(o){if(!t){for(let i=0;i<l.length;i+=1)L(n[i]);t=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)O(n[i]);t=!1},d(o){o&&h(e),Wt(n,o)}}}function ei(s){var g;let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"></path><path d="M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"></path></svg>',n,r,o,i=(((g=s[76])==null?void 0:g.title)??`#${s[76].name}`)+"",a,f,c,d=s[24].t("Collection")+"",p;return{c(){e=b("div"),t=b("div"),t.innerHTML=l,n=j(),r=b("div"),o=b("div"),a=ae(i),f=j(),c=b("div"),p=ae(d),this.h()},l(D){e=w(D,"DIV",{class:!0});var v=_(e);t=w(v,"DIV",{class:!0,"data-svelte-h":!0}),ze(t)!=="svelte-1kdy8bu"&&(t.innerHTML=l),n=P(v),r=w(v,"DIV",{class:!0});var y=_(r);o=w(y,"DIV",{class:!0});var E=_(o);a=ce(E,i),E.forEach(h),f=P(y),c=w(y,"DIV",{class:!0});var k=_(c);p=ce(k,d),k.forEach(h),y.forEach(h),v.forEach(h),this.h()},h(){u(t,"class","p-2.5 bg-red-400 text-white rounded-lg"),u(o,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),u(c,"class","text-gray-500 text-sm"),u(r,"class","flex flex-col justify-center -space-y-0.5"),u(e,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none")},m(D,v){B(D,e,v),m(e,t),m(e,n),m(e,r),m(r,o),m(o,a),m(r,f),m(r,c),m(c,p)},p(D,v){var y;v[0]&8&&i!==(i=(((y=D[76])==null?void 0:y.title)??`#${D[76].name}`)+"")&&ve(a,i),v[0]&16777216&&d!==(d=D[24].t("Collection")+"")&&ve(p,d)},i:ye,o:ye,d(D){D&&h(e)}}}function ti(s){let e,t,l,n,r,o=s[76].name+"",i,a,f,c=s[24].t("Document")+"",d;function p(v,y){return v[76].status==="processed"?si:ni}let g=p(s),D=g(s);return{c(){e=b("div"),t=b("div"),D.c(),l=j(),n=b("div"),r=b("div"),i=ae(o),a=j(),f=b("div"),d=ae(c),this.h()},l(v){e=w(v,"DIV",{class:!0});var y=_(e);t=w(y,"DIV",{class:!0});var E=_(t);D.l(E),E.forEach(h),l=P(y),n=w(y,"DIV",{class:!0});var k=_(n);r=w(k,"DIV",{class:!0});var V=_(r);i=ce(V,o),V.forEach(h),a=P(k),f=w(k,"DIV",{class:!0});var C=_(f);d=ce(C,c),C.forEach(h),k.forEach(h),y.forEach(h),this.h()},h(){u(t,"class","p-2.5 bg-red-400 text-white rounded-lg"),u(r,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),u(f,"class","text-gray-500 text-sm"),u(n,"class","flex flex-col justify-center -space-y-0.5"),u(e,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none")},m(v,y){B(v,e,y),m(e,t),D.m(t,null),m(e,l),m(e,n),m(n,r),m(r,i),m(n,a),m(n,f),m(f,d)},p(v,y){g!==(g=p(v))&&(D.d(1),D=g(v),D&&(D.c(),D.m(t,null))),y[0]&8&&o!==(o=v[76].name+"")&&ve(i,o),y[0]&16777216&&c!==(c=v[24].t("Document")+"")&&ve(d,c)},i:ye,o:ye,d(v){v&&h(e),D.d()}}}function li(s){let e,t,l,n,r,o=(s[0]?s[23].length===0:s[9].length!==s[23].length)&&Kn(s);return{c(){e=b("div"),t=b("img"),n=j(),o&&o.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var a=_(e);t=w(a,"IMG",{src:!0,alt:!0,class:!0}),n=P(a),o&&o.l(a),a.forEach(h),this.h()},h(){Kt(t.src,l=s[76].url)||u(t,"src",l),u(t,"alt","input"),u(t,"class","h-16 w-16 rounded-xl object-cover"),u(e,"class","relative")},m(i,a){B(i,e,a),m(e,t),m(e,n),o&&o.m(e,null),r=!0},p(i,a){(!r||a[0]&8&&!Kt(t.src,l=i[76].url))&&u(t,"src",l),(i[0]?i[23].length===0:i[9].length!==i[23].length)?o?(o.p(i,a),a[0]&8389121&&L(o,1)):(o=Kn(i),o.c(),L(o,1),o.m(e,null)):o&&(We(),O(o,1,1,()=>{o=null}),qe())},i(i){r||(L(o),r=!0)},o(i){O(o),r=!1},d(i){i&&h(e),o&&o.d()}}}function ni(s){let e,t,l,n,r,o;return{c(){e=we("svg"),t=we("style"),l=ae(`.spinner_qM83 {
																		animation: spinner_8HQG 1.05s infinite;
																	}
																	.spinner_oXPr {
																		animation-delay: 0.1s;
																	}
																	.spinner_ZTLf {
																		animation-delay: 0.2s;
																	}
																	@keyframes spinner_8HQG {
																		0%,
																		57.14% {
																			animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
																			transform: translate(0);
																		}
																		28.57% {
																			animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
																			transform: translateY(-6px);
																		}
																		100% {
																			transform: translate(0);
																		}
																	}
																`),n=we("circle"),r=we("circle"),o=we("circle"),this.h()},l(i){e=ke(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var a=_(e);t=ke(a,"style",{});var f=_(t);l=ce(f,`.spinner_qM83 {
																		animation: spinner_8HQG 1.05s infinite;
																	}
																	.spinner_oXPr {
																		animation-delay: 0.1s;
																	}
																	.spinner_ZTLf {
																		animation-delay: 0.2s;
																	}
																	@keyframes spinner_8HQG {
																		0%,
																		57.14% {
																			animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
																			transform: translate(0);
																		}
																		28.57% {
																			animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
																			transform: translateY(-6px);
																		}
																		100% {
																			transform: translate(0);
																		}
																	}
																`),f.forEach(h),n=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(n).forEach(h),r=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(r).forEach(h),o=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(o).forEach(h),a.forEach(h),this.h()},h(){u(n,"class","spinner_qM83"),u(n,"cx","4"),u(n,"cy","12"),u(n,"r","2.5"),u(r,"class","spinner_qM83 spinner_oXPr"),u(r,"cx","12"),u(r,"cy","12"),u(r,"r","2.5"),u(o,"class","spinner_qM83 spinner_ZTLf"),u(o,"cx","20"),u(o,"cy","12"),u(o,"r","2.5"),u(e,"class","w-6 h-6 translate-y-[0.5px]"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,e,a),m(e,t),m(t,l),m(e,n),m(e,r),m(e,o)},d(i){i&&h(e)}}}function si(s){let e,t,l;return{c(){e=we("svg"),t=we("path"),l=we("path"),this.h()},l(n){e=ke(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=_(e);t=ke(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(h),l=ke(r,"path",{d:!0}),_(l).forEach(h),r.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),u(t,"clip-rule","evenodd"),u(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","w-6 h-6")},m(n,r){B(n,e,r),m(e,t),m(e,l)},d(n){n&&h(e)}}}function Kn(s){let e,t;return e=new Ot({props:{className:" absolute top-1 left-1",content:s[24].t("{{ models }}",{models:[...s[0]?[s[0]]:s[9]].filter(s[57]).join(", ")}),$$slots:{default:[ri]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n[0]&25166337&&(r.content=l[24].t("{{ models }}",{models:[...l[0]?[l[0]]:l[9]].filter(l[57]).join(", ")})),n[2]&131072&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function ri(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=_(e);t=ke(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(h),n.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-4 fill-yellow-300")},m(l,n){B(l,e,n),m(e,t)},p:ye,d(l){l&&h(e)}}}function Xn(s){let e,t,l,n,r,o,i,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,c,d,p;const g=[li,ti,ei],D=[];function v(E,k){return k[0]&8&&(t=null),E[76].type==="image"?0:(t==null&&(t=!!["doc","file"].includes(E[76].type)),t?1:E[76].type==="collection"?2:-1)}~(l=v(s,[-1,-1,-1]))&&(n=D[l]=g[l](s));function y(){return s[58](s[78])}return{c(){e=b("div"),n&&n.c(),r=j(),o=b("div"),i=b("button"),i.innerHTML=a,f=j(),this.h()},l(E){e=w(E,"DIV",{class:!0});var k=_(e);n&&n.l(k),r=P(k),o=w(k,"DIV",{class:!0});var V=_(o);i=w(V,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ze(i)!=="svelte-6u4utr"&&(i.innerHTML=a),V.forEach(h),f=P(k),k.forEach(h),this.h()},h(){u(i,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),u(i,"type","button"),u(o,"class","absolute -top-1 -right-1"),u(e,"class","relative group")},m(E,k){B(E,e,k),~l&&D[l].m(e,null),m(e,r),m(e,o),m(o,i),m(e,f),c=!0,d||(p=le(i,"click",y),d=!0)},p(E,k){s=E;let V=l;l=v(s,k),l===V?~l&&D[l].p(s,k):(n&&(We(),O(D[V],1,1,()=>{D[V]=null}),qe()),~l?(n=D[l],n?n.p(s,k):(n=D[l]=g[l](s),n.c()),L(n,1),n.m(e,r)):n=null)},i(E){c||(L(n),c=!0)},o(E){O(n),c=!1},d(E){E&&h(e),~l&&D[l].d(),d=!1,p()}}}function oi(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-5"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>';return{c(){e=b("button"),e.innerHTML=t,this.h()},l(l){e=w(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ze(e)!=="svelte-1948p7i"&&(e.innerHTML=t),this.h()},h(){u(e,"class","bg-gray-50 hover:bg-gray-100 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-2 outline-none focus:outline-none"),u(e,"type","button")},m(l,n){B(l,e,n)},p:ye,d(l){l&&h(e)}}}function $n(s){let e,t;return e=new Ot({props:{content:s[24].t("Record voice"),$$slots:{default:[ii]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n[0]&16777216&&(r.content=l[24].t("Record voice")),n[0]&16793600|n[2]&131072&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function ii(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 translate-y-[0.5px]"><path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"></path><path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"></path></svg>',l,n;return{c(){e=b("button"),e.innerHTML=t,this.h()},l(r){e=w(r,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),ze(e)!=="svelte-47fjze"&&(e.innerHTML=t),this.h()},h(){u(e,"id","voice-input-button"),u(e,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-1.5 mr-0.5 self-center"),u(e,"type","button")},m(r,o){B(r,e,o),l||(n=le(e,"click",s[71]),l=!0)},p:ye,d(r){r&&h(e),l=!1,n()}}}function ai(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',n,r;return{c(){e=b("div"),t=b("button"),t.innerHTML=l,this.h()},l(o){e=w(o,"DIV",{class:!0});var i=_(e);t=w(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ze(t)!=="svelte-5uu99u"&&(t.innerHTML=l),i.forEach(h),this.h()},h(){u(t,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5"),u(e,"class","flex items-center mb-1.5")},m(o,i){B(o,e,i),m(e,t),n||(r=le(t,"click",s[73]),n=!0)},p:ye,i:ye,o:ye,d(o){o&&h(e),n=!1,r()}}}function ci(s){let e,t,l,n;const r=[ui,fi],o=[];function i(a,f){return a[1]===""?0:1}return e=i(s),t=o[e]=r[e](s),{c(){t.c(),l=Ke()},l(a){t.l(a),l=Ke()},m(a,f){o[e].m(a,f),B(a,l,f),n=!0},p(a,f){let c=e;e=i(a),e===c?o[e].p(a,f):(We(),O(o[c],1,1,()=>{o[c]=null}),qe(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),L(t,1),t.m(l.parentNode,l))},i(a){n||(L(t),n=!0)},o(a){O(t),n=!1},d(a){a&&h(l),o[e].d(a)}}}function fi(s){let e,t,l;return t=new Ot({props:{content:s[24].t("Send message"),$$slots:{default:[di]},$$scope:{ctx:s}}}),{c(){e=b("div"),ne(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=_(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){u(e,"class","flex items-center mb-1")},m(n,r){B(n,e,r),re(t,e,null),l=!0},p(n,r){const o={};r[0]&16777216&&(o.content=n[24].t("Send message")),r[0]&2|r[2]&131072&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){O(t.$$.fragment,n),l=!1},d(n){n&&h(e),oe(t)}}}function ui(s){let e,t,l;return t=new Ot({props:{content:s[24].t("Call"),$$slots:{default:[hi]},$$scope:{ctx:s}}}),{c(){e=b("div"),ne(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=_(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){u(e,"class","flex items-center mb-1")},m(n,r){B(n,e,r),re(t,e,null),l=!0},p(n,r){const o={};r[0]&16777216&&(o.content=n[24].t("Call")),r[0]&1090519552|r[2]&131072&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){O(t.$$.fragment,n),l=!1},d(n){n&&h(e),oe(t)}}}function di(s){let e,t,l,n,r;return{c(){e=b("button"),t=we("svg"),l=we("path"),this.h()},l(o){e=w(o,"BUTTON",{id:!0,class:!0,type:!0});var i=_(e);t=ke(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=_(t);l=ke(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(l).forEach(h),a.forEach(h),i.forEach(h),this.h()},h(){u(l,"fill-rule","evenodd"),u(l,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),u(l,"clip-rule","evenodd"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"viewBox","0 0 16 16"),u(t,"fill","currentColor"),u(t,"class","size-6"),u(e,"id","send-message-button"),u(e,"class",n=(s[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center"),u(e,"type","submit"),e.disabled=r=s[1]===""},m(o,i){B(o,e,i),m(e,t),m(t,l)},p(o,i){i[0]&2&&n!==(n=(o[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center")&&u(e,"class",n),i[0]&2&&r!==(r=o[1]==="")&&(e.disabled=r)},d(o){o&&h(e)}}}function hi(s){let e,t,l,n,r;return t=new Zo({props:{className:"size-6"}}),{c(){e=b("button"),ne(t.$$.fragment),this.h()},l(o){e=w(o,"BUTTON",{class:!0,type:!0});var i=_(e);se(t.$$.fragment,i),i.forEach(h),this.h()},h(){u(e,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-2 self-center"),u(e,"type","button")},m(o,i){B(o,e,i),re(t,e,null),l=!0,n||(r=le(e,"click",s[72]),n=!0)},p:ye,i(o){l||(L(t.$$.fragment,o),l=!0)},o(o){O(t.$$.fragment,o),l=!1},d(o){o&&h(e),oe(t),n=!1,r()}}}function mi(s){let e,t,l,n,r,o,i,a,f,c,d,p,g,D,v,y,E,k,V,C,H,A,N,M,F,R,U=s[24].t("LLMs can make mistakes. Verify important information.")+"",z,K,te,Y,S,T=s[20]&&Gn(s),J=s[2]===!1&&s[11].length>0&&Jn(s);const pe=[Ko,Yo],de=[];function Me(X,be){return be[0]&2&&(a=null),be[0]&2&&(f=null),a==null&&(a=X[1].charAt(0)==="/"),a?0:(f==null&&(f=X[1].charAt(0)==="#"),f?1:-1)}~(c=Me(s,[-1,-1,-1]))&&(d=de[c]=pe[c](s));function Le(X){s[46](X)}function lt(X){s[47](X)}let Ge={messages:s[11]};s[1]!==void 0&&(Ge.prompt=s[1]),s[22]!==void 0&&(Ge.chatInputPlaceholder=s[22]),g=new wo({props:Ge}),s[45](g),De.push(()=>Pe(g,"prompt",Le)),De.push(()=>Pe(g,"chatInputPlaceholder",lt)),g.$on("select",s[48]);let W=s[0]!==void 0&&Qn(s);const nt=[$o,Xo],tt=[];function kt(X,be){return X[14]?0:1}return N=kt(s),M=tt[N]=nt[N](s),{c(){T&&T.c(),e=j(),t=b("div"),l=b("div"),n=b("div"),r=b("div"),J&&J.c(),o=j(),i=b("div"),d&&d.c(),p=j(),ne(g.$$.fragment),y=j(),W&&W.c(),E=j(),k=b("div"),V=b("div"),C=b("div"),H=b("input"),A=j(),M.c(),F=j(),R=b("div"),z=ae(U),this.h()},l(X){T&&T.l(X),e=P(X),t=w(X,"DIV",{class:!0});var be=_(t);l=w(be,"DIV",{class:!0});var Je=_(l);n=w(Je,"DIV",{class:!0});var q=_(n);r=w(q,"DIV",{class:!0});var ie=_(r);J&&J.l(ie),ie.forEach(h),o=P(q),i=w(q,"DIV",{class:!0});var Ze=_(i);d&&d.l(Ze),p=P(Ze),se(g.$$.fragment,Ze),y=P(Ze),W&&W.l(Ze),Ze.forEach(h),q.forEach(h),Je.forEach(h),E=P(be),k=w(be,"DIV",{class:!0});var Ve=_(k);V=w(Ve,"DIV",{class:!0});var Qe=_(V);C=w(Qe,"DIV",{class:!0});var gt=_(C);H=w(gt,"INPUT",{type:!0}),A=P(gt),M.l(gt),F=P(gt),R=w(gt,"DIV",{class:!0});var ut=_(R);z=ce(ut,U),ut.forEach(h),gt.forEach(h),Qe.forEach(h),Ve.forEach(h),be.forEach(h),this.h()},h(){u(r,"class","relative"),u(i,"class","w-full relative"),u(n,"class","flex flex-col max-w-6xl px-2.5 md:px-6 w-full"),u(l,"class","-mb-0.5 mx-auto inset-x-0 bg-transparent flex justify-center"),u(H,"type","file"),H.hidden=!0,H.multiple=!0,u(R,"class","mt-1.5 text-xs text-gray-500 text-center line-clamp-1"),u(C,"class","pb-2"),u(V,"class","max-w-6xl px-2.5 md:px-6 mx-auto inset-x-0"),u(k,"class",K=s[6]?"bg-transparent":"bg-white dark:bg-gray-900"),u(t,"class","w-full")},m(X,be){T&&T.m(X,be),B(X,e,be),B(X,t,be),m(t,l),m(l,n),m(n,r),J&&J.m(r,null),m(n,o),m(n,i),~c&&de[c].m(i,null),m(i,p),re(g,i,null),m(i,y),W&&W.m(i,null),m(t,E),m(t,k),m(k,V),m(V,C),m(C,H),s[51](H),m(C,A),tt[N].m(C,null),m(C,F),m(C,R),m(R,z),te=!0,Y||(S=[le(H,"change",s[52]),le(H,"change",s[53])],Y=!0)},p(X,be){X[20]?T?(T.p(X,be),be[0]&1048576&&L(T,1)):(T=Gn(X),T.c(),L(T,1),T.m(e.parentNode,e)):T&&(We(),O(T,1,1,()=>{T=null}),qe()),X[2]===!1&&X[11].length>0?J?J.p(X,be):(J=Jn(X),J.c(),J.m(r,null)):J&&(J.d(1),J=null);let Je=c;c=Me(X,be),c===Je?~c&&de[c].p(X,be):(d&&(We(),O(de[Je],1,1,()=>{de[Je]=null}),qe()),~c?(d=de[c],d?d.p(X,be):(d=de[c]=pe[c](X),d.c()),L(d,1),d.m(i,p)):d=null);const q={};be[0]&2048&&(q.messages=X[11]),!D&&be[0]&2&&(D=!0,q.prompt=X[1],je(()=>D=!1)),!v&&be[0]&4194304&&(v=!0,q.chatInputPlaceholder=X[22],je(()=>v=!1)),g.$set(q),X[0]!==void 0?W?(W.p(X,be),be[0]&1&&L(W,1)):(W=Qn(X),W.c(),L(W,1),W.m(i,null)):W&&(We(),O(W,1,1,()=>{W=null}),qe());let ie=N;N=kt(X),N===ie?tt[N].p(X,be):(We(),O(tt[ie],1,1,()=>{tt[ie]=null}),qe(),M=tt[N],M?M.p(X,be):(M=tt[N]=nt[N](X),M.c()),L(M,1),M.m(C,F)),(!te||be[0]&16777216)&&U!==(U=X[24].t("LLMs can make mistakes. Verify important information.")+"")&&ve(z,U),(!te||be[0]&64&&K!==(K=X[6]?"bg-transparent":"bg-white dark:bg-gray-900"))&&u(k,"class",K)},i(X){te||(L(T),L(d),L(g.$$.fragment,X),L(W),L(M),te=!0)},o(X){O(T),O(d),O(g.$$.fragment,X),O(W),O(M),te=!1},d(X){X&&(h(e),h(t)),T&&T.d(X),J&&J.d(),~c&&de[c].d(),s[45](null),oe(g),W&&W.d(),s[51](null),tt[N].d(),Y=!1,Bt(S)}}}function gi(s,e,t){let l,n,r,o,i,a,f,c;ge(s,ol,I=>t(13,n=I)),ge(s,Sl,I=>t(25,r=I)),ge(s,At,I=>t(26,o=I)),ge(s,Bs,I=>t(27,i=I)),ge(s,Ol,I=>t(28,a=I)),ge(s,ws,I=>t(29,f=I)),ge(s,il,I=>t(30,c=I));const d=Et("i18n");ge(s,d,I=>t(24,l=I));let{transparentBackground:p=!1}=e,{submitPrompt:g}=e,{stopResponse:D}=e,{autoScroll:v=!0}=e,{atSelectedModel:y}=e,{selectedModels:E}=e,k=!1,V,C,H,A,N,M,F=!1,R=null,U="",{files:z=[]}=e,{availableToolIds:K=[]}=e,{selectedToolIds:te=[]}=e,{webSearchEnabled:Y=!1}=e,{prompt:S=""}=e,{messages:T=[]}=e,J=[];const pe=()=>{const I=document.getElementById("messages-container");I.scrollTop=I.scrollHeight},de=async I=>{if(console.log(I),["audio/mpeg","audio/wav"].includes(I.type)){const me=await jl(localStorage.token,I).catch(_e=>(Se.error(_e),null));if(me){console.log(me);const _e=new Blob([me.text],{type:"text/plain"});I=Ul(_e,`${I.name}.txt`)}}const ee=await ir(localStorage.token,I).catch(me=>(Se.error(me),null));if(ee){const me={type:"file",file:ee,id:ee.id,url:`${Ns}/files/${ee.id}`,name:I.name,collection_name:"",status:"uploaded",error:""};t(3,z=[...z,me]),zs.includes(I.type)||As.includes(I.name.split(".").at(-1))||Se.error(l.t("Unknown file type '{{file_type}}'. Proceeding with the file upload anyway.",{file_type:I.type})),Me(me)}},Me=async I=>{try{const ee=await Qs(localStorage.token,I.id);ee&&(I.status="processed",I.collection_name=ee.collection_name,t(3,z))}catch(ee){Se.error(ee),I.status="processed",t(3,z)}},Le=async I=>{console.log(I);const ee={type:"doc",name:I,collection_name:"",status:!1,url:I,error:""};try{t(3,z=[...z,ee]);const me=await Ys(localStorage.token,"",I);me&&(ee.status="processed",ee.collection_name=me.collection_name,t(3,z))}catch(me){t(3,z=z.filter(_e=>_e.name!==I)),Se.error(me)}},lt=async I=>{console.log(I);const ee={type:"doc",name:I,collection_name:"",status:!1,url:I,error:""};try{t(3,z=[...z,ee]);const me=await Ks(localStorage.token,I);me&&(ee.status="processed",ee.collection_name=me.collection_name,t(3,z))}catch(me){t(3,z=z.filter(_e=>_e.name!==I)),Se.error(me)}};Tl(()=>{window.setTimeout(()=>V==null?void 0:V.focus(),0);const I=document.querySelector("body"),ee=Ue=>{Ue.key==="Escape"&&(console.log("Escape"),t(20,F=!1))},me=Ue=>{Ue.preventDefault(),t(20,F=!0)},_e=()=>{t(20,F=!1)},He=async Ue=>{var ct,at;if(Ue.preventDefault(),console.log(Ue),(ct=Ue.dataTransfer)!=null&&ct.files){const pt=Array.from((at=Ue.dataTransfer)==null?void 0:at.files);pt&&pt.length>0?pt.forEach(ft=>{if(console.log(ft,ft.name.split(".").at(-1)),["image/gif","image/webp","image/jpeg","image/png"].includes(ft.type)){if(J.length===0){Se.error(l.t("Selected model(s) do not support image inputs"));return}let ht=new FileReader;ht.onload=vt=>{t(3,z=[...z,{type:"image",url:`${vt.target.result}`}])},ht.readAsDataURL(ft)}else de(ft)}):Se.error(l.t("File not found."))}t(20,F=!1)};return window.addEventListener("keydown",ee),I==null||I.addEventListener("dragover",me),I==null||I.addEventListener("drop",He),I==null||I.addEventListener("dragleave",_e),()=>{window.removeEventListener("keydown",ee),I==null||I.removeEventListener("dragover",me),I==null||I.removeEventListener("drop",He),I==null||I.removeEventListener("dragleave",_e)}});const Ge=()=>{t(2,v=!0),pe()};function W(I){De[I?"unshift":"push"](()=>{H=I,t(16,H)})}function nt(I){S=I,t(1,S)}function tt(I){z=I,t(3,z)}function kt(I){De[I?"unshift":"push"](()=>{A=I,t(17,A)})}function X(I){S=I,t(1,S)}const be=I=>{console.log(I),lt(I.detail)},Je=I=>{console.log(I),Le(I.detail)},q=I=>{var ee;console.log(I),t(3,z=[...z,{type:((ee=I==null?void 0:I.detail)==null?void 0:ee.type)??"file",...I.detail,status:"processed"}])};function ie(I){De[I?"unshift":"push"](()=>{N=I,t(18,N)})}function Ze(I){S=I,t(1,S)}function Ve(I){U=I,t(22,U)}const Qe=I=>{t(0,y=I.detail),V==null||V.focus()},gt=I=>I.id===y.id,ut=()=>{t(0,y=void 0)};function xt(I){De[I?"unshift":"push"](()=>{C=I,t(15,C)})}function Nt(){M=this.files,t(19,M)}const Ut=async()=>{M&&M.length>0?Array.from(M).forEach(ee=>{if(["image/gif","image/webp","image/jpeg","image/png"].includes(ee.type)){if(J.length===0){Se.error(l.t("Selected model(s) do not support image inputs"));return}let me=new FileReader;me.onload=_e=>{t(3,z=[...z,{type:"image",url:`${_e.target.result}`}])},me.readAsDataURL(ee)}else de(ee)}):Se.error(l.t("File not found.")),t(15,C.value="",C)};function Ft(I){k=I,t(14,k)}const Dt=async()=>{var I;t(14,k=!1),await Te(),(I=document.getElementById("chat-textarea"))==null||I.focus()},G=async I=>{var me;const ee=I.detail;t(1,S=`${S}${ee} `),t(14,k=!1),await Te(),(me=document.getElementById("chat-textarea"))==null||me.focus(),((o==null?void 0:o.speechAutoSend)??!1)&&g(S)},Ee=I=>!J.includes(I),fe=I=>{z.splice(I,1),t(3,z)},ue=(I,ee,me,_e)=>((K.includes(ee.id)||((a==null?void 0:a.role)??"user")==="admin")&&(I[ee.id]={name:ee.name,description:ee.meta.description,enabled:!1}),I),Be=()=>{C.click()},Re=async()=>{await Te(),V==null||V.focus()};function dt(I){Y=I,t(5,Y)}function it(I){te=I,t(4,te)}function jt(I){De[I?"unshift":"push"](()=>{V=I,t(12,V),t(1,S)})}function St(){S=this.value,t(1,S)}const x=I=>{(!f||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(I.key==="Enter"&&!I.shiftKey&&I.preventDefault(),S!==""&&I.key==="Enter"&&!I.shiftKey&&g(S))},Q=async I=>{var me;const ee=I.ctrlKey||I.metaKey;if(S===""&&ee&&I.key.toLowerCase()==="r"){I.preventDefault(),console.log("regenerate");const _e=[...document.getElementsByClassName("regenerate-response-button")].at(-1);_e==null||_e.click()}if(S===""&&I.key=="ArrowUp"){I.preventDefault();const _e=[...document.getElementsByClassName("user-message")].at(-1),He=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(_e),_e.scrollIntoView({block:"center"}),He==null||He.click()}if(["/","#","@"].includes(S.charAt(0))&&I.key==="ArrowUp"&&(I.preventDefault(),(H||A||N).selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(S.charAt(0))&&I.key==="ArrowDown"&&(I.preventDefault(),(H||A||N).selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(S.charAt(0))&&I.key==="Enter"){I.preventDefault();const _e=[...document.getElementsByClassName("selected-command-option-button")].at(-1);I.shiftKey?t(1,S=`${S}
`):_e?_e==null||_e.click():(me=document.getElementById("send-message-button"))==null||me.click()}if(["/","#","@"].includes(S.charAt(0))&&I.key==="Tab"){I.preventDefault();const _e=[...document.getElementsByClassName("selected-command-option-button")].at(-1);_e==null||_e.click()}else if(I.key==="Tab"){const _e=ys(S);if(_e.length>0){const He=_e.at(0),Ue=S;t(1,S=S.substring(0,(He==null?void 0:He.endIndex)+1)),await Te(),I.target.scrollTop=I.target.scrollHeight,t(1,S=Ue),await Te(),I.preventDefault(),I.target.setSelectionRange(He==null?void 0:He.startIndex,He.endIndex+1)}I.target.style.height="",I.target.style.height=Math.min(I.target.scrollHeight,200)+"px"}I.key==="Escape"&&(console.log("Escape"),t(0,y=void 0))},he=I=>{I.target.style.height="",I.target.style.height=Math.min(I.target.scrollHeight,200)+"px",t(21,R=null)},$=I=>{I.target.style.height="",I.target.style.height=Math.min(I.target.scrollHeight,200)+"px"},Ne=I=>{const ee=I.clipboardData||window.clipboardData;if(ee&&ee.items){for(const me of ee.items)if(me.type.indexOf("image")!==-1){const _e=me.getAsFile(),He=new FileReader;He.onload=function(Ue){t(3,z=[...z,{type:"image",url:`${Ue.target.result}`}])},He.readAsDataURL(_e)}}},Z=async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(ee){return Se.error(l.t("Permission denied when accessing microphone: {{error}}",{error:ee})),null})&&t(14,k=!0)}catch{Se.error(l.t("Permission denied when accessing microphone"))}},Fe=async()=>{if(E.length>1){Se.error(l.t("Select only one model to call"));return}if(c.audio.stt.engine==="web"){Se.error(l.t("Call feature is not supported when using Web STT engine"));return}try{await navigator.mediaDevices.getUserMedia({audio:!0}),Ml.set(!0)}catch{Se.error(l.t("Permission denied when accessing media devices"))}},Ye=()=>{D()},Ae=()=>{g(S)};return s.$$set=I=>{"transparentBackground"in I&&t(6,p=I.transparentBackground),"submitPrompt"in I&&t(7,g=I.submitPrompt),"stopResponse"in I&&t(8,D=I.stopResponse),"autoScroll"in I&&t(2,v=I.autoScroll),"atSelectedModel"in I&&t(0,y=I.atSelectedModel),"selectedModels"in I&&t(9,E=I.selectedModels),"files"in I&&t(3,z=I.files),"availableToolIds"in I&&t(10,K=I.availableToolIds),"selectedToolIds"in I&&t(4,te=I.selectedToolIds),"webSearchEnabled"in I&&t(5,Y=I.webSearchEnabled),"prompt"in I&&t(1,S=I.prompt),"messages"in I&&t(11,T=I.messages)},s.$$.update=()=>{s.$$.dirty[0]&8705&&t(23,J=[...y?[y]:E].filter(I=>{var ee,me,_e,He;return((He=(_e=(me=(ee=n.find(Ue=>Ue.id===I))==null?void 0:ee.info)==null?void 0:me.meta)==null?void 0:_e.capabilities)==null?void 0:He.vision)??!0})),s.$$.dirty[0]&4098&&S&&V&&(t(12,V.style.height="",V),t(12,V.style.height=Math.min(V.scrollHeight,200)+"px",V))},[y,S,v,z,te,Y,p,g,D,E,K,T,V,n,k,C,H,A,N,M,F,R,U,J,l,r,o,i,a,f,c,d,pe,de,Le,lt,Ge,W,nt,tt,kt,X,be,Je,q,ie,Ze,Ve,Qe,gt,ut,xt,Nt,Ut,Ft,Dt,G,Ee,fe,ue,Be,Re,dt,it,jt,St,x,Q,he,$,Ne,Z,Fe,Ye,Ae]}class pi extends $e{constructor(e){super(),et(this,e,gi,mi,Xe,{transparentBackground:6,submitPrompt:7,stopResponse:8,autoScroll:2,atSelectedModel:0,selectedModels:9,files:3,availableToolIds:10,selectedToolIds:4,webSearchEnabled:5,prompt:1,messages:11},null,[-1,-1,-1])}}function es(s,e,t){const l=s.slice();return l[12]=e[t],l[13]=e,l[14]=t,l}function _i(s){let e,t,l;return t=new Ot({props:{content:s[4].t("Remove Model"),$$slots:{default:[bi]},$$scope:{ctx:s}}}),{c(){e=b("div"),ne(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=_(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){u(e,"class","self-center disabled:text-gray-600 disabled:hover:text-gray-600 mr-2")},m(n,r){B(n,e,r),re(t,e,null),l=!0},p(n,r){const o={};r&16&&(o.content=n[4].t("Remove Model")),r&32771&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){O(t.$$.fragment,n),l=!1},d(n){n&&h(e),oe(t)}}}function vi(s){let e,t,l;return t=new Ot({props:{content:s[4].t("Add Model"),$$slots:{default:[wi]},$$scope:{ctx:s}}}),{c(){e=b("div"),ne(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=_(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){u(e,"class","self-center mr-2 disabled:text-gray-600 disabled:hover:text-gray-600")},m(n,r){B(n,e,r),re(t,e,null),l=!0},p(n,r){const o={};r&16&&(o.content=n[4].t("Add Model")),r&32771&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){O(t.$$.fragment,n),l=!1},d(n){n&&h(e),oe(t)}}}function bi(s){let e,t,l,n,r;function o(){return s[10](s[14])}return{c(){e=b("button"),t=we("svg"),l=we("path"),this.h()},l(i){e=w(i,"BUTTON",{});var a=_(e);t=ke(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var f=_(t);l=ke(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(l).forEach(h),f.forEach(h),a.forEach(h),this.h()},h(){u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M19.5 12h-15"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","2"),u(t,"stroke","currentColor"),u(t,"class","size-3.5"),e.disabled=s[1]},m(i,a){B(i,e,a),m(e,t),m(t,l),n||(r=le(e,"click",o),n=!0)},p(i,a){s=i,a&2&&(e.disabled=s[1])},d(i){i&&h(e),n=!1,r()}}}function wi(s){let e,t,l,n,r;return{c(){e=b("button"),t=we("svg"),l=we("path"),this.h()},l(o){e=w(o,"BUTTON",{class:!0});var i=_(e);t=ke(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=_(t);l=ke(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(l).forEach(h),a.forEach(h),i.forEach(h),this.h()},h(){u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M12 6v12m6-6H6"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","2"),u(t,"stroke","currentColor"),u(t,"class","size-3.5"),u(e,"class",""),e.disabled=s[1]},m(o,i){B(o,e,i),m(e,t),m(t,l),n||(r=le(e,"click",s[9]),n=!0)},p(o,i){i&2&&(e.disabled=o[1])},d(o){o&&h(e),n=!1,r()}}}function ts(s){let e,t,l,n,r,o,i,a,f,c;function d(y){s[8](y,s[12],s[13],s[14])}let p={placeholder:s[4].t("Select a model"),items:s[3].map(ns)};s[12]!==void 0&&(p.value=s[12]),n=new gr({props:p}),De.push(()=>Pe(n,"value",d));const g=[vi,_i],D=[];function v(y,E){return y[14]===0?0:1}return i=v(s),a=D[i]=g[i](s),{c(){e=b("div"),t=b("div"),l=b("div"),ne(n.$$.fragment),o=j(),a.c(),f=j(),this.h()},l(y){e=w(y,"DIV",{class:!0});var E=_(e);t=w(E,"DIV",{class:!0});var k=_(t);l=w(k,"DIV",{class:!0});var V=_(l);se(n.$$.fragment,V),V.forEach(h),k.forEach(h),o=P(E),a.l(E),f=P(E),E.forEach(h),this.h()},h(){u(l,"class","mr-1 max-w-full"),u(t,"class","overflow-hidden w-full"),u(e,"class","flex w-full max-w-fit")},m(y,E){B(y,e,E),m(e,t),m(t,l),re(n,l,null),m(e,o),D[i].m(e,null),m(e,f),c=!0},p(y,E){s=y;const k={};E&16&&(k.placeholder=s[4].t("Select a model")),E&8&&(k.items=s[3].map(ns)),!r&&E&1&&(r=!0,k.value=s[12],je(()=>r=!1)),n.$set(k),a.p(s,E)},i(y){c||(L(n.$$.fragment,y),L(a),c=!0)},o(y){O(n.$$.fragment,y),O(a),c=!1},d(y){y&&h(e),oe(n),D[i].d()}}}function ls(s){let e,t,l=s[4].t("Set as default")+"",n,r,o;return{c(){e=b("div"),t=b("button"),n=ae(l),this.h()},l(i){e=w(i,"DIV",{class:!0});var a=_(e);t=w(a,"BUTTON",{});var f=_(t);n=ce(f,l),f.forEach(h),a.forEach(h),this.h()},h(){u(e,"class","text-left mt-0.5 ml-1 text-[0.7rem] text-gray-500")},m(i,a){B(i,e,a),m(e,t),m(t,n),r||(o=le(t,"click",s[7]),r=!0)},p(i,a){a&16&&l!==(l=i[4].t("Set as default")+"")&&ve(n,l)},d(i){i&&h(e),r=!1,o()}}}function ki(s){let e,t,l,n,r=bt(s[0]),o=[];for(let f=0;f<r.length;f+=1)o[f]=ts(es(s,r,f));const i=f=>O(o[f],1,1,()=>{o[f]=null});let a=s[2]&&!s[5]&&ls(s);return{c(){e=b("div");for(let f=0;f<o.length;f+=1)o[f].c();t=j(),a&&a.c(),l=Ke(),this.h()},l(f){e=w(f,"DIV",{class:!0});var c=_(e);for(let d=0;d<o.length;d+=1)o[d].l(c);c.forEach(h),t=P(f),a&&a.l(f),l=Ke(),this.h()},h(){u(e,"class","flex flex-col w-full items-center md:items-start")},m(f,c){B(f,e,c);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);B(f,t,c),a&&a.m(f,c),B(f,l,c),n=!0},p(f,[c]){if(c&27){r=bt(f[0]);let d;for(d=0;d<r.length;d+=1){const p=es(f,r,d);o[d]?(o[d].p(p,c),L(o[d],1)):(o[d]=ts(p),o[d].c(),L(o[d],1),o[d].m(e,null))}for(We(),d=r.length;d<o.length;d+=1)i(d);qe()}f[2]&&!f[5]?a?a.p(f,c):(a=ls(f),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},i(f){if(!n){for(let c=0;c<r.length;c+=1)L(o[c]);n=!0}},o(f){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)O(o[c]);n=!1},d(f){f&&(h(e),h(t),h(l)),Wt(o,f),a&&a.d(f)}}}const ns=s=>({value:s.id,label:s.name,model:s});function yi(s,e,t){let l,n,r,o;ge(s,ol,v=>t(3,l=v)),ge(s,At,v=>t(11,r=v)),ge(s,ws,v=>t(5,o=v));const i=Et("i18n");ge(s,i,v=>t(4,n=v));let{selectedModels:a=[""]}=e,{disabled:f=!1}=e,{showSetDefault:c=!0}=e;const d=async()=>{if(a.filter(y=>y==="").length){Se.error(n.t("Choose a model before saving..."));return}At.set({...r,models:a}),await Zs(localStorage.token,{ui:r}),Se.success(n.t("Default model updated"))};function p(v,y,E,k){E[k]=v,t(0,a),t(3,l)}const g=()=>{t(0,a=[...a,""])},D=v=>{a.splice(v,1),t(0,a),t(3,l)};return s.$$set=v=>{"selectedModels"in v&&t(0,a=v.selectedModels),"disabled"in v&&t(1,f=v.disabled),"showSetDefault"in v&&t(2,c=v.showSetDefault)},s.$$.update=()=>{s.$$.dirty&9&&a.length>0&&l.length>0&&t(0,a=a.map(v=>l.map(y=>y.id).includes(v)?v:""))},[a,f,c,l,n,o,i,d,p,g,D]}class Ei extends $e{constructor(e){super(),et(this,e,yi,ki,Xe,{selectedModels:0,disabled:1,showSetDefault:2})}}function Ii(s){let e;const t=s[10].default,l=Ct(t,s,s[16],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&65536)&&Tt(l,t,n,n[16],e?Ht(t,n[16],r,null):Vt(n[16]),null)},i(n){e||(L(l,n),e=!0)},o(n){O(l,n),e=!1},d(n){l&&l.d(n)}}}function Di(s){let e,t,l,n,r=s[3].t("Share")+"",o;return{c(){e=we("svg"),t=we("path"),l=j(),n=b("div"),o=ae(r),this.h()},l(i){e=ke(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=_(e);t=ke(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(h),a.forEach(h),l=P(i),n=w(i,"DIV",{class:!0});var f=_(n);o=ce(f,r),f.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-4"),u(n,"class","flex items-center")},m(i,a){B(i,e,a),m(e,t),B(i,l,a),B(i,n,a),m(n,o)},p(i,a){a&8&&r!==(r=i[3].t("Share")+"")&&ve(o,r)},d(i){i&&(h(e),h(l),h(n))}}}function Si(s){let e,t,l,n,r=s[3].t("Download")+"",o;return{c(){e=we("svg"),t=we("path"),l=j(),n=b("div"),o=ae(r),this.h()},l(i){e=ke(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=_(e);t=ke(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(t).forEach(h),a.forEach(h),l=P(i),n=w(i,"DIV",{class:!0});var f=_(n);o=ce(f,r),f.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","size-4"),u(n,"class","flex items-center")},m(i,a){B(i,e,a),m(e,t),B(i,l,a),B(i,n,a),m(n,o)},p(i,a){a&8&&r!==(r=i[3].t("Download")+"")&&ve(o,r)},d(i){i&&(h(e),h(l),h(n))}}}function Mi(s){let e,t=s[3].t("Export chat (.json)")+"",l;return{c(){e=b("div"),l=ae(t),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=_(e);l=ce(r,t),r.forEach(h),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(n,r){B(n,e,r),m(e,l)},p(n,r){r&8&&t!==(t=n[3].t("Export chat (.json)")+"")&&ve(l,t)},d(n){n&&h(e)}}}function Ci(s){let e,t=s[3].t("Plain text (.txt)")+"",l;return{c(){e=b("div"),l=ae(t),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=_(e);l=ce(r,t),r.forEach(h),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(n,r){B(n,e,r),m(e,l)},p(n,r){r&8&&t!==(t=n[3].t("Plain text (.txt)")+"")&&ve(l,t)},d(n){n&&h(e)}}}function Ti(s){let e,t=s[3].t("PDF document (.pdf)")+"",l;return{c(){e=b("div"),l=ae(t),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=_(e);l=ce(r,t),r.forEach(h),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(n,r){B(n,e,r),m(e,l)},p(n,r){r&8&&t!==(t=n[3].t("PDF document (.pdf)")+"")&&ve(l,t)},d(n){n&&h(e)}}}function Vi(s){let e,t,l,n,r,o;return e=new Jt({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Mi]},$$scope:{ctx:s}}}),e.$on("click",s[12]),l=new Jt({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ci]},$$scope:{ctx:s}}}),l.$on("click",s[13]),r=new Jt({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ti]},$$scope:{ctx:s}}}),r.$on("click",s[14]),{c(){ne(e.$$.fragment),t=j(),ne(l.$$.fragment),n=j(),ne(r.$$.fragment)},l(i){se(e.$$.fragment,i),t=P(i),se(l.$$.fragment,i),n=P(i),se(r.$$.fragment,i)},m(i,a){re(e,i,a),B(i,t,a),re(l,i,a),B(i,n,a),re(r,i,a),o=!0},p(i,a){const f={};a&65544&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&65544&&(c.$$scope={dirty:a,ctx:i}),l.$set(c);const d={};a&65544&&(d.$$scope={dirty:a,ctx:i}),r.$set(d)},i(i){o||(L(e.$$.fragment,i),L(l.$$.fragment,i),L(r.$$.fragment,i),o=!0)},o(i){O(e.$$.fragment,i),O(l.$$.fragment,i),O(r.$$.fragment,i),o=!1},d(i){i&&(h(t),h(n)),oe(e,i),oe(l,i),oe(r,i)}}}function Hi(s){let e,t,l,n;return e=new qr({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Si]},$$scope:{ctx:s}}}),l=new Ur({props:{class:"w-full rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",transition:al,sideOffset:8,$$slots:{default:[Vi]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment),t=j(),ne(l.$$.fragment)},l(r){se(e.$$.fragment,r),t=P(r),se(l.$$.fragment,r)},m(r,o){re(e,r,o),B(r,t,o),re(l,r,o),n=!0},p(r,o){const i={};o&65544&&(i.$$scope={dirty:o,ctx:r}),e.$set(i);const a={};o&65544&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){n||(L(e.$$.fragment,r),L(l.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),O(l.$$.fragment,r),n=!1},d(r){r&&h(t),oe(e,r),oe(l,r)}}}function xi(s){let e,t,l,n,r,o,i,a,f;return e=new Jt({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Di]},$$scope:{ctx:s}}}),e.$on("click",s[11]),l=new Ir({props:{$$slots:{default:[Hi]},$$scope:{ctx:s}}}),a=new $s({props:{chatId:s[1].id}}),{c(){ne(e.$$.fragment),t=j(),ne(l.$$.fragment),n=j(),r=b("hr"),o=j(),i=b("div"),ne(a.$$.fragment),this.h()},l(c){se(e.$$.fragment,c),t=P(c),se(l.$$.fragment,c),n=P(c),r=w(c,"HR",{class:!0}),o=P(c),i=w(c,"DIV",{class:!0});var d=_(i);se(a.$$.fragment,d),d.forEach(h),this.h()},h(){u(r,"class","border-gray-100 dark:border-gray-800 mt-2.5 mb-1.5"),u(i,"class","flex p-1")},m(c,d){re(e,c,d),B(c,t,d),re(l,c,d),B(c,n,d),B(c,r,d),B(c,o,d),B(c,i,d),re(a,i,null),f=!0},p(c,d){const p={};d&65544&&(p.$$scope={dirty:d,ctx:c}),e.$set(p);const g={};d&65544&&(g.$$scope={dirty:d,ctx:c}),l.$set(g);const D={};d&2&&(D.chatId=c[1].id),a.$set(D)},i(c){f||(L(e.$$.fragment,c),L(l.$$.fragment,c),L(a.$$.fragment,c),f=!0)},o(c){O(e.$$.fragment,c),O(l.$$.fragment,c),O(a.$$.fragment,c),f=!1},d(c){c&&(h(t),h(n),h(r),h(o),h(i)),oe(e,c),oe(l,c),oe(a)}}}function Li(s){let e,t,l;return t=new Hl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:al,$$slots:{default:[xi]},$$scope:{ctx:s}}}),{c(){e=b("div"),ne(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{slot:!0});var r=_(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){u(e,"slot","content")},m(n,r){B(n,e,r),re(t,e,null),l=!0},p(n,r){const o={};r&65547&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){O(t.$$.fragment,n),l=!1},d(n){n&&h(e),oe(t)}}}function Bi(s){let e,t;return e=new Vl({props:{$$slots:{content:[Li],default:[Ii]},$$scope:{ctx:s}}}),e.$on("change",s[15]),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,[n]){const r={};n&65547&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Ni(s,e,t){let l,{$$slots:n={},$$scope:r}=e;const{saveAs:o}=_r,i=Et("i18n");ge(s,i,H=>t(3,l=H));let{shareEnabled:a=!1}=e,{shareHandler:f}=e,{downloadHandler:c}=e,{chat:d}=e,{onClose:p=()=>{}}=e;const g=async()=>{const H=d.chat;console.log("download",d);const A=H.messages.reduce((M,F,R,U)=>`${M}### ${F.role.toUpperCase()}
${F.content}

`,"");let N=new Blob([A],{type:"text/plain"});o(N,`chat-${H.title}.txt`)},D=async()=>{const H=d.chat;console.log("download",d);const A=await vr(H),N=window.URL.createObjectURL(A),M=document.createElement("a");M.href=N,M.download=`chat-${H.title}.pdf`,document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(N)},v=async()=>{let H=new Blob([JSON.stringify([d])],{type:"application/json"});o(H,`chat-export-${Date.now()}.json`)},y=()=>{f()},E=()=>{v()},k=()=>{g()},V=()=>{D()},C=H=>{H.detail===!1&&p()};return s.$$set=H=>{"shareEnabled"in H&&t(8,a=H.shareEnabled),"shareHandler"in H&&t(0,f=H.shareHandler),"downloadHandler"in H&&t(9,c=H.downloadHandler),"chat"in H&&t(1,d=H.chat),"onClose"in H&&t(2,p=H.onClose),"$$scope"in H&&t(16,r=H.$$scope)},[f,d,p,l,i,g,D,v,a,c,n,y,E,k,V,C,r]}class zi extends $e{constructor(e){super(),et(this,e,Ni,Bi,Xe,{shareEnabled:8,shareHandler:0,downloadHandler:9,chat:1,onClose:2})}}function ss(s){let e,t,l;function n(o){s[15](o)}let r={showSetDefault:!s[2]};return s[0]!==void 0&&(r.selectedModels=s[0]),e=new Ei({props:r}),De.push(()=>Pe(e,"selectedModels",n)),{c(){ne(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,i){re(e,o,i),l=!0},p(o,i){const a={};i&4&&(a.showSetDefault=!o[2]),!t&&i&1&&(t=!0,a.selectedModels=o[0],je(()=>t=!1)),e.$set(a)},i(o){l||(L(e.$$.fragment,o),l=!0)},o(o){O(e.$$.fragment,o),l=!1},d(o){oe(e,o)}}}function rs(s){let e,t;return e=new zi({props:{chat:s[3],shareEnabled:s[2],shareHandler:s[16],downloadHandler:s[17],$$slots:{default:[Ai]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n&8&&(r.chat=l[3]),n&4&&(r.shareEnabled=l[2]),n&32&&(r.shareHandler=l[16]),n&64&&(r.downloadHandler=l[17]),n&2097152&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Ai(s){let e,t='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){e=b("button"),e.innerHTML=t,this.h()},l(l){e=w(l,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),ze(e)!=="svelte-9m6068"&&(e.innerHTML=t),this.h()},h(){u(e,"class","hidden md:flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition"),u(e,"id","chat-context-menu-button")},m(l,n){B(l,e,n)},p:ye,d(l){l&&h(e)}}}function Oi(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"></path><path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"></path></svg>',n,r,o;return{c(){e=b("button"),t=b("div"),t.innerHTML=l,this.h()},l(i){e=w(i,"BUTTON",{id:!0,class:!0});var a=_(e);t=w(a,"DIV",{class:!0,"data-svelte-h":!0}),ze(t)!=="svelte-1fcii9y"&&(t.innerHTML=l),a.forEach(h),this.h()},h(){u(t,"class","m-auto self-center"),u(e,"id","new-chat-button"),u(e,"class",n="flex "+(s[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition")},m(i,a){B(i,e,a),m(e,t),r||(o=le(e,"click",s[18]),r=!0)},p(i,a){a&256&&n!==(n="flex "+(i[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition")&&u(e,"class",n)},d(i){i&&h(e),r=!1,o()}}}function os(s){let e,t;return e=new tr({props:{className:"max-w-[200px]",role:s[10].role,$$slots:{default:[Ui]},$$scope:{ctx:s}}}),e.$on("show",s[19]),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n&1024&&(r.role=l[10].role),n&2098176&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Ui(s){let e,t,l,n;return{c(){e=b("button"),t=b("div"),l=b("img"),this.h()},l(r){e=w(r,"BUTTON",{class:!0,"aria-label":!0});var o=_(e);t=w(o,"DIV",{class:!0});var i=_(t);l=w(i,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),i.forEach(h),o.forEach(h),this.h()},h(){Kt(l.src,n=s[10].profile_image_url)||u(l,"src",n),u(l,"class","size-6 object-cover rounded-full"),u(l,"alt","User profile"),u(l,"draggable","false"),u(t,"class","self-center"),u(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-100 dark:hover:bg-gray-850 transition"),u(e,"aria-label","User Menu")},m(r,o){B(r,e,o),m(e,t),m(t,l)},p(r,o){o&1024&&!Kt(l.src,n=r[10].profile_image_url)&&u(l,"src",n)},d(r){r&&h(e)}}}function ji(s){let e,t,l,n,r,o,i,a,f,c,d,p,g,D,v,y,E,k,V,C,H;function A(U){s[13](U)}let N={chatId:s[7]};s[5]!==void 0&&(N.show=s[5]),e=new er({props:N}),De.push(()=>Pe(e,"show",A)),c=new br({});let M=s[4]&&ss(s),F=s[2]&&s[3]&&s[3].id&&rs(s);E=new Ot({props:{content:s[9].t("New Chat"),$$slots:{default:[Oi]},$$scope:{ctx:s}}});let R=s[10]!==void 0&&os(s);return{c(){ne(e.$$.fragment),l=j(),n=b("nav"),r=b("div"),o=b("div"),i=b("div"),a=b("button"),f=b("div"),ne(c.$$.fragment),p=j(),g=b("div"),M&&M.c(),D=j(),v=b("div"),F&&F.c(),y=j(),ne(E.$$.fragment),k=j(),R&&R.c(),this.h()},l(U){se(e.$$.fragment,U),l=P(U),n=w(U,"NAV",{id:!0,class:!0});var z=_(n);r=w(z,"DIV",{class:!0});var K=_(r);o=w(K,"DIV",{class:!0});var te=_(o);i=w(te,"DIV",{class:!0});var Y=_(i);a=w(Y,"BUTTON",{id:!0,class:!0});var S=_(a);f=w(S,"DIV",{class:!0});var T=_(f);se(c.$$.fragment,T),T.forEach(h),S.forEach(h),Y.forEach(h),p=P(te),g=w(te,"DIV",{class:!0});var J=_(g);M&&M.l(J),J.forEach(h),D=P(te),v=w(te,"DIV",{class:!0});var pe=_(v);F&&F.l(pe),y=P(pe),se(E.$$.fragment,pe),k=P(pe),R&&R.l(pe),pe.forEach(h),te.forEach(h),K.forEach(h),z.forEach(h),this.h()},h(){u(f,"class","m-auto self-center"),u(a,"id","sidebar-toggle-button"),u(a,"class","cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition"),u(i,"class",d=(s[8]?"md:hidden":"")+" mr-3 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),u(g,"class","flex-1 overflow-hidden max-w-full"),u(v,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),u(o,"class","flex items-center w-full max-w-full"),u(r,"class","flex max-w-full w-full mx-auto px-5 pt-0.5 md:px-[1rem]"),u(n,"id","nav"),u(n,"class","sticky py-2.5 top-0 flex flex-row justify-center z-10")},m(U,z){re(e,U,z),B(U,l,z),B(U,n,z),m(n,r),m(r,o),m(o,i),m(i,a),m(a,f),re(c,f,null),m(o,p),m(o,g),M&&M.m(g,null),m(o,D),m(o,v),F&&F.m(v,null),m(v,y),re(E,v,null),m(v,k),R&&R.m(v,null),V=!0,C||(H=le(a,"click",s[14]),C=!0)},p(U,[z]){const K={};z&128&&(K.chatId=U[7]),!t&&z&32&&(t=!0,K.show=U[5],je(()=>t=!1)),e.$set(K),(!V||z&256&&d!==(d=(U[8]?"md:hidden":"")+" mr-3 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"))&&u(i,"class",d),U[4]?M?(M.p(U,z),z&16&&L(M,1)):(M=ss(U),M.c(),L(M,1),M.m(g,null)):M&&(We(),O(M,1,1,()=>{M=null}),qe()),U[2]&&U[3]&&U[3].id?F?(F.p(U,z),z&12&&L(F,1)):(F=rs(U),F.c(),L(F,1),F.m(v,y)):F&&(We(),O(F,1,1,()=>{F=null}),qe());const te={};z&512&&(te.content=U[9].t("New Chat")),z&2097410&&(te.$$scope={dirty:z,ctx:U}),E.$set(te),U[10]!==void 0?R?(R.p(U,z),z&1024&&L(R,1)):(R=os(U),R.c(),L(R,1),R.m(v,null)):R&&(We(),O(R,1,1,()=>{R=null}),qe())},i(U){V||(L(e.$$.fragment,U),L(c.$$.fragment,U),L(M),L(F),L(E.$$.fragment,U),L(R),V=!0)},o(U){O(e.$$.fragment,U),O(c.$$.fragment,U),O(M),O(F),O(E.$$.fragment,U),O(R),V=!1},d(U){U&&(h(l),h(n)),oe(e,U),oe(c),M&&M.d(),F&&F.d(),oe(E),R&&R.d(),C=!1,H()}}}function Pi(s,e,t){let l,n,r,o,i;ge(s,ks,M=>t(20,l=M)),ge(s,Yt,M=>t(7,n=M)),ge(s,Sl,M=>t(8,r=M)),ge(s,Ol,M=>t(10,i=M));const a=Et("i18n");ge(s,a,M=>t(9,o=M));let{initNewChat:f}=e,{title:c=l}=e,{shareEnabled:d=!1}=e,{chat:p}=e,{selectedModels:g}=e,{showModelSelector:D=!0}=e,v=!1,y=!1;function E(M){v=M,t(5,v)}const k=()=>{Sl.set(!r)};function V(M){g=M,t(0,g)}const C=()=>{t(5,v=!v)},H=()=>{t(6,y=!y)},A=()=>{f()},N=M=>{M.detail==="archived-chat"&&Os.set(!0)};return s.$$set=M=>{"initNewChat"in M&&t(1,f=M.initNewChat),"title"in M&&t(12,c=M.title),"shareEnabled"in M&&t(2,d=M.shareEnabled),"chat"in M&&t(3,p=M.chat),"selectedModels"in M&&t(0,g=M.selectedModels),"showModelSelector"in M&&t(4,D=M.showModelSelector)},[g,f,d,p,D,v,y,n,r,o,i,a,c,E,k,V,C,H,A,N]}class Ri extends $e{constructor(e){super(),et(this,e,Pi,ji,Xe,{initNewChat:1,title:12,shareEnabled:2,chat:3,selectedModels:0,showModelSelector:4})}}function is(s,e,t){const l=s.slice();return l[10]=e[t],l}function Fi(s){let e;const t=s[4].default,l=Ct(t,s,s[8],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&256)&&Tt(l,t,n,n[8],e?Ht(t,n[8],r,null):Vt(n[8]),null)},i(n){e||(L(l,n),e=!0)},o(n){O(l,n),e=!1},d(n){l&&l.d(n)}}}function Zi(s){var o;let e,t,l=(((o=s[10])==null?void 0:o.label)??"Camera")+"",n,r;return{c(){e=b("div"),t=b("div"),n=ae(l),r=j(),this.h()},l(i){e=w(i,"DIV",{class:!0});var a=_(e);t=w(a,"DIV",{class:!0});var f=_(t);n=ce(f,l),f.forEach(h),a.forEach(h),r=P(i),this.h()},h(){u(t,"class","line-clamp-1"),u(e,"class","flex items-center")},m(i,a){B(i,e,a),m(e,t),m(t,n),B(i,r,a)},p(i,a){var f;a&2&&l!==(l=(((f=i[10])==null?void 0:f.label)??"Camera")+"")&&ve(n,l)},d(i){i&&(h(e),h(r))}}}function as(s){let e,t;function l(){return s[5](s[10])}return e=new Jt({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Zi]},$$scope:{ctx:s}}}),e.$on("click",l),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,r){re(e,n,r),t=!0},p(n,r){s=n;const o={};r&258&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Wi(s){let e,t,l=bt(s[1]),n=[];for(let o=0;o<l.length;o+=1)n[o]=as(is(s,l,o));const r=o=>O(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ke()},l(o){for(let i=0;i<n.length;i+=1)n[i].l(o);e=Ke()},m(o,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,i);B(o,e,i),t=!0},p(o,i){if(i&10){l=bt(o[1]);let a;for(a=0;a<l.length;a+=1){const f=is(o,l,a);n[a]?(n[a].p(f,i),L(n[a],1)):(n[a]=as(f),n[a].c(),L(n[a],1),n[a].m(e.parentNode,e))}for(We(),a=l.length;a<n.length;a+=1)r(a);qe()}},i(o){if(!t){for(let i=0;i<l.length;i+=1)L(n[i]);t=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)O(n[i]);t=!1},d(o){o&&h(e),Wt(n,o)}}}function qi(s){let e,t,l;return t=new Hl({props:{class:"w-full max-w-[180px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-[9999] bg-white dark:bg-gray-900 dark:text-white shadow-sm",sideOffset:6,side:"top",align:"start",transition:al,$$slots:{default:[Wi]},$$scope:{ctx:s}}}),{c(){e=b("div"),ne(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{slot:!0});var r=_(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){u(e,"slot","content")},m(n,r){B(n,e,r),re(t,e,null),l=!0},p(n,r){const o={};r&258&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){O(t.$$.fragment,n),l=!1},d(n){n&&h(e),oe(t)}}}function Gi(s){let e,t,l;function n(o){s[6](o)}let r={$$slots:{content:[qi],default:[Fi]},$$scope:{ctx:s}};return s[2]!==void 0&&(r.show=s[2]),e=new Vl({props:r}),De.push(()=>Pe(e,"show",n)),e.$on("change",s[7]),{c(){ne(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,i){re(e,o,i),l=!0},p(o,[i]){const a={};i&258&&(a.$$scope={dirty:i,ctx:o}),!t&&i&4&&(t=!0,a.show=o[2],je(()=>t=!1)),e.$set(a)},i(o){l||(L(e.$$.fragment,o),l=!0)},o(o){O(e.$$.fragment,o),l=!1},d(o){oe(e,o)}}}function Ji(s,e,t){let{$$slots:l={},$$scope:n}=e;Et("i18n");const r=rl();let{onClose:o=()=>{}}=e,{devices:i}=e,a=!1;const f=p=>{r("change",p.deviceId)};function c(p){a=p,t(2,a)}const d=p=>{p.detail===!1&&o()};return s.$$set=p=>{"onClose"in p&&t(0,o=p.onClose),"devices"in p&&t(1,i=p.devices),"$$scope"in p&&t(8,n=p.$$scope)},[o,i,a,r,l,f,c,d,n]}class Qi extends $e{constructor(e){super(),et(this,e,Ji,Gi,Xe,{onClose:0,devices:1})}}function cs(s){let e,t,l,n,r,o,i,a,f,c,d,p,g,D,v,y,E,k='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path></svg>',V,C,H,A=s[4]&&fs(s);function N(S,T){return S[4]?$i:ea}let M=N(s),F=M(s);const R=[ra,sa],U=[];function z(S,T){return S[4]?0:1}f=z(s),c=U[f]=R[f](s);function K(S,T){return S[1]?fa:S[2]?ca:aa}let te=K(s),Y=te(s);return{c(){e=b("div"),t=b("div"),l=b("div"),A&&A.c(),n=j(),r=b("div"),F.c(),o=j(),i=b("div"),a=b("div"),c.c(),d=j(),p=b("div"),g=b("button"),D=b("div"),Y.c(),v=j(),y=b("div"),E=b("button"),E.innerHTML=k,this.h()},l(S){e=w(S,"DIV",{class:!0});var T=_(e);t=w(T,"DIV",{class:!0});var J=_(t);l=w(J,"DIV",{class:!0});var pe=_(l);A&&A.l(pe),n=P(pe),r=w(pe,"DIV",{class:!0});var de=_(r);F.l(de),de.forEach(h),o=P(pe),i=w(pe,"DIV",{class:!0});var Me=_(i);a=w(Me,"DIV",{});var Le=_(a);c.l(Le),Le.forEach(h),d=P(Me),p=w(Me,"DIV",{});var lt=_(p);g=w(lt,"BUTTON",{type:!0});var Ge=_(g);D=w(Ge,"DIV",{class:!0});var W=_(D);Y.l(W),W.forEach(h),Ge.forEach(h),lt.forEach(h),v=P(Me),y=w(Me,"DIV",{});var nt=_(y);E=w(nt,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ze(E)!=="svelte-khrbnh"&&(E.innerHTML=k),nt.forEach(h),Me.forEach(h),pe.forEach(h),J.forEach(h),T.forEach(h),this.h()},h(){u(r,"class","flex justify-center items-center flex-1 h-full w-full max-h-full"),u(D,"class","line-clamp-1 text-sm font-medium"),u(g,"type","button"),u(E,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(E,"type","button"),u(i,"class","flex justify-between items-center pb-2 w-full"),u(l,"class","max-w-lg w-full h-screen max-h-[100dvh] flex flex-col justify-between p-3 md:p-6"),u(t,"class","absolute w-full h-screen max-h-[100dvh] bg-white text-gray-700 dark:bg-black dark:text-gray-300 flex justify-center"),u(e,"class","absolute w-full h-screen max-h-[100dvh] flex z-[999] overflow-hidden")},m(S,T){B(S,e,T),m(e,t),m(t,l),A&&A.m(l,null),m(l,n),m(l,r),F.m(r,null),m(l,o),m(l,i),m(i,a),U[f].m(a,null),m(i,d),m(i,p),m(p,g),m(g,D),Y.m(D,null),m(i,v),m(i,y),m(y,E),V=!0,C||(H=[le(g,"click",s[27]),le(E,"click",s[28])],C=!0)},p(S,T){S[4]?A?A.p(S,T):(A=fs(S),A.c(),A.m(l,n)):A&&(A.d(1),A=null),M===(M=N(S))&&F?F.p(S,T):(F.d(1),F=M(S),F&&(F.c(),F.m(r,null)));let J=f;f=z(S),f===J?U[f].p(S,T):(We(),O(U[J],1,1,()=>{U[J]=null}),qe(),c=U[f],c?c.p(S,T):(c=U[f]=R[f](S),c.c()),L(c,1),c.m(a,null)),te===(te=K(S))&&Y?Y.p(S,T):(Y.d(1),Y=te(S),Y&&(Y.c(),Y.m(D,null)))},i(S){V||(L(c),V=!0)},o(S){O(c),V=!1},d(S){S&&h(e),A&&A.d(),F.d(),U[f].d(),Y.d(),C=!1,Bt(H)}}}function fs(s){let e,t,l;function n(i,a){return i[3]?Xi:i[1]||i[2]?Ki:Yi}let r=n(s),o=r(s);return{c(){e=b("button"),o.c(),this.h()},l(i){e=w(i,"BUTTON",{type:!0,class:!0});var a=_(e);o.l(a),a.forEach(h),this.h()},h(){u(e,"type","button"),u(e,"class","flex justify-center items-center w-full h-20 min-h-20")},m(i,a){B(i,e,a),o.m(e,null),t||(l=le(e,"click",s[22]),t=!0)},p(i,a){r===(r=n(i))&&o?o.p(i,a):(o.d(1),o=r(i),o&&(o.c(),o.m(e,null)))},d(i){i&&h(e),o.d(),t=!1,l()}}}function Yi(s){let e,t,l;return{c(){e=b("div"),this.h()},l(n){e=w(n,"DIV",{class:!0,style:!0}),_(e).forEach(h),this.h()},h(){var n,r,o,i,a,f,c,d,p;u(e,"class",t=(s[5]*100>4?" size-[4.5rem]":s[5]*100>2?" size-16":s[5]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((o=(r=(n=s[0])==null?void 0:n.info)==null?void 0:r.meta)==null?void 0:o.profile_image_url)??"/favicon.png")!=="/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white"),u(e,"style",l=(((f=(a=(i=s[0])==null?void 0:i.info)==null?void 0:a.meta)==null?void 0:f.profile_image_url)??"/favicon.png")!=="/favicon.png"?`background-image: url('${(p=(d=(c=s[0])==null?void 0:c.info)==null?void 0:d.meta)==null?void 0:p.profile_image_url}');`:"")},m(n,r){B(n,e,r)},p(n,r){var o,i,a,f,c,d,p,g,D;r[0]&33&&t!==(t=(n[5]*100>4?" size-[4.5rem]":n[5]*100>2?" size-16":n[5]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((a=(i=(o=n[0])==null?void 0:o.info)==null?void 0:i.meta)==null?void 0:a.profile_image_url)??"/favicon.png")!=="/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white")&&u(e,"class",t),r[0]&1&&l!==(l=(((d=(c=(f=n[0])==null?void 0:f.info)==null?void 0:c.meta)==null?void 0:d.profile_image_url)??"/favicon.png")!=="/favicon.png"?`background-image: url('${(D=(g=(p=n[0])==null?void 0:p.info)==null?void 0:g.meta)==null?void 0:D.profile_image_url}');`:"")&&u(e,"style",l)},d(n){n&&h(e)}}}function Ki(s){let e,t,l,n,r,o;return{c(){e=we("svg"),t=we("style"),l=ae(`.spinner_qM83 {
										animation: spinner_8HQG 1.05s infinite;
									}
									.spinner_oXPr {
										animation-delay: 0.1s;
									}
									.spinner_ZTLf {
										animation-delay: 0.2s;
									}
									@keyframes spinner_8HQG {
										0%,
										57.14% {
											animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
											transform: translate(0);
										}
										28.57% {
											animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
											transform: translateY(-6px);
										}
										100% {
											transform: translate(0);
										}
									}
								`),n=we("circle"),r=we("circle"),o=we("circle"),this.h()},l(i){e=ke(i,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=_(e);t=ke(a,"style",{});var f=_(t);l=ce(f,`.spinner_qM83 {
										animation: spinner_8HQG 1.05s infinite;
									}
									.spinner_oXPr {
										animation-delay: 0.1s;
									}
									.spinner_ZTLf {
										animation-delay: 0.2s;
									}
									@keyframes spinner_8HQG {
										0%,
										57.14% {
											animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
											transform: translate(0);
										}
										28.57% {
											animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
											transform: translateY(-6px);
										}
										100% {
											transform: translate(0);
										}
									}
								`),f.forEach(h),n=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(n).forEach(h),r=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(r).forEach(h),o=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(o).forEach(h),a.forEach(h),this.h()},h(){u(n,"class","spinner_qM83"),u(n,"cx","4"),u(n,"cy","12"),u(n,"r","3"),u(r,"class","spinner_qM83 spinner_oXPr"),u(r,"cx","12"),u(r,"cy","12"),u(r,"r","3"),u(o,"class","spinner_qM83 spinner_ZTLf"),u(o,"cx","20"),u(o,"cy","12"),u(o,"r","3"),u(e,"class","size-12 text-gray-900 dark:text-gray-400"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,e,a),m(e,t),m(t,l),m(e,n),m(e,r),m(e,o)},p:ye,d(i){i&&h(e)}}}function Xi(s){let e,t;return{c(){e=b("div"),t=ae(s[3]),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0});var n=_(e);t=ce(n,s[3]),n.forEach(h),this.h()},h(){u(e,"class","transition-all rounded-full"),It(e,"font-size",(s[5]*100>4?"4.5":s[5]*100>2?"4.25":s[5]*100>1?"3.75":"3.5")+"rem"),It(e,"width","100%"),It(e,"text-align","center")},m(l,n){B(l,e,n),m(e,t)},p(l,n){n[0]&8&&ve(t,l[3]),n[0]&32&&It(e,"font-size",(l[5]*100>4?"4.5":l[5]*100>2?"4.25":l[5]*100>1?"3.75":"3.5")+"rem")},d(l){l&&h(e)}}}function $i(s){let e,t,l,n,r,o,i,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-6"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"></path></svg>',f,c;return{c(){e=b("div"),t=b("video"),l=j(),n=b("canvas"),r=j(),o=b("div"),i=b("button"),i.innerHTML=a,this.h()},l(d){e=w(d,"DIV",{class:!0});var p=_(e);t=w(p,"VIDEO",{id:!0,class:!0}),_(t).forEach(h),l=P(p),n=w(p,"CANVAS",{id:!0,style:!0}),_(n).forEach(h),r=P(p),o=w(p,"DIV",{class:!0});var g=_(o);i=w(g,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ze(i)!=="svelte-zfg1vd"&&(i.innerHTML=a),g.forEach(h),p.forEach(h),this.h()},h(){u(t,"id","camera-feed"),t.autoplay=!0,u(t,"class","rounded-2xl h-full min-w-full object-cover object-center"),t.playsInline=!0,u(n,"id","camera-canvas"),It(n,"display","none"),u(i,"type","button"),u(i,"class","p-1.5 text-white cursor-pointer backdrop-blur-xl bg-black/10 rounded-full"),u(o,"class","absolute top-4 md:top-8 left-4"),u(e,"class","relative flex video-container w-full max-h-full pt-2 pb-4 md:py-6 px-2 h-full")},m(d,p){B(d,e,p),m(e,t),m(e,l),m(e,n),m(e,r),m(e,o),m(o,i),f||(c=le(i,"click",s[24]),f=!0)},p:ye,d(d){d&&h(e),f=!1,c()}}}function ea(s){let e,t,l;function n(i,a){return i[3]?na:i[1]||i[2]?la:ta}let r=n(s),o=r(s);return{c(){e=b("button"),o.c(),this.h()},l(i){e=w(i,"BUTTON",{type:!0});var a=_(e);o.l(a),a.forEach(h),this.h()},h(){u(e,"type","button")},m(i,a){B(i,e,a),o.m(e,null),t||(l=le(e,"click",s[23]),t=!0)},p(i,a){r===(r=n(i))&&o?o.p(i,a):(o.d(1),o=r(i),o&&(o.c(),o.m(e,null)))},d(i){i&&h(e),o.d(),t=!1,l()}}}function ta(s){let e,t,l;return{c(){e=b("div"),this.h()},l(n){e=w(n,"DIV",{class:!0,style:!0}),_(e).forEach(h),this.h()},h(){var n,r,o,i,a,f,c,d,p;u(e,"class",t=(s[5]*100>4?" size-52":s[5]*100>2?"size-48":s[5]*100>1?"size-[11.5rem]":"size-44")+" transition-all rounded-full "+((((o=(r=(n=s[0])==null?void 0:n.info)==null?void 0:r.meta)==null?void 0:o.profile_image_url)??"/favicon.png")!=="/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")),u(e,"style",l=(((f=(a=(i=s[0])==null?void 0:i.info)==null?void 0:a.meta)==null?void 0:f.profile_image_url)??"/favicon.png")!=="/favicon.png"?`background-image: url('${(p=(d=(c=s[0])==null?void 0:c.info)==null?void 0:d.meta)==null?void 0:p.profile_image_url}');`:"")},m(n,r){B(n,e,r)},p(n,r){var o,i,a,f,c,d,p,g,D;r[0]&33&&t!==(t=(n[5]*100>4?" size-52":n[5]*100>2?"size-48":n[5]*100>1?"size-[11.5rem]":"size-44")+" transition-all rounded-full "+((((a=(i=(o=n[0])==null?void 0:o.info)==null?void 0:i.meta)==null?void 0:a.profile_image_url)??"/favicon.png")!=="/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white"))&&u(e,"class",t),r[0]&1&&l!==(l=(((d=(c=(f=n[0])==null?void 0:f.info)==null?void 0:c.meta)==null?void 0:d.profile_image_url)??"/favicon.png")!=="/favicon.png"?`background-image: url('${(D=(g=(p=n[0])==null?void 0:p.info)==null?void 0:g.meta)==null?void 0:D.profile_image_url}');`:"")&&u(e,"style",l)},d(n){n&&h(e)}}}function la(s){let e,t,l,n,r,o;return{c(){e=we("svg"),t=we("style"),l=ae(`.spinner_qM83 {
											animation: spinner_8HQG 1.05s infinite;
										}
										.spinner_oXPr {
											animation-delay: 0.1s;
										}
										.spinner_ZTLf {
											animation-delay: 0.2s;
										}
										@keyframes spinner_8HQG {
											0%,
											57.14% {
												animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
												transform: translate(0);
											}
											28.57% {
												animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
												transform: translateY(-6px);
											}
											100% {
												transform: translate(0);
											}
										}
									`),n=we("circle"),r=we("circle"),o=we("circle"),this.h()},l(i){e=ke(i,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=_(e);t=ke(a,"style",{});var f=_(t);l=ce(f,`.spinner_qM83 {
											animation: spinner_8HQG 1.05s infinite;
										}
										.spinner_oXPr {
											animation-delay: 0.1s;
										}
										.spinner_ZTLf {
											animation-delay: 0.2s;
										}
										@keyframes spinner_8HQG {
											0%,
											57.14% {
												animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
												transform: translate(0);
											}
											28.57% {
												animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
												transform: translateY(-6px);
											}
											100% {
												transform: translate(0);
											}
										}
									`),f.forEach(h),n=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(n).forEach(h),r=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(r).forEach(h),o=ke(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),_(o).forEach(h),a.forEach(h),this.h()},h(){u(n,"class","spinner_qM83"),u(n,"cx","4"),u(n,"cy","12"),u(n,"r","3"),u(r,"class","spinner_qM83 spinner_oXPr"),u(r,"cx","12"),u(r,"cy","12"),u(r,"r","3"),u(o,"class","spinner_qM83 spinner_ZTLf"),u(o,"cx","20"),u(o,"cy","12"),u(o,"r","3"),u(e,"class","size-44 text-gray-900 dark:text-gray-400"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,e,a),m(e,t),m(t,l),m(e,n),m(e,r),m(e,o)},p:ye,d(i){i&&h(e)}}}function na(s){let e,t;return{c(){e=b("div"),t=ae(s[3]),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0});var n=_(e);t=ce(n,s[3]),n.forEach(h),this.h()},h(){u(e,"class","transition-all rounded-full"),It(e,"font-size",(s[5]*100>4?"13":s[5]*100>2?"12":s[5]*100>1?"11.5":"11")+"rem"),It(e,"width","100%"),It(e,"text-align","center")},m(l,n){B(l,e,n),m(e,t)},p(l,n){n[0]&8&&ve(t,l[3]),n[0]&32&&It(e,"font-size",(l[5]*100>4?"13":l[5]*100>2?"12":l[5]*100>1?"11.5":"11")+"rem")},d(l){l&&h(e)}}}function sa(s){let e,t;return e=new Ot({props:{content:s[9].t("Camera"),$$slots:{default:[oa]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n[0]&512&&(r.content=l[9].t("Camera")),n[1]&134217728&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function ra(s){let e,t;return e=new Qi({props:{devices:s[6],$$slots:{default:[ia]},$$scope:{ctx:s}}}),e.$on("change",s[25]),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n[0]&64&&(r.devices=l[6]),n[1]&134217728&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function oa(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"></path></svg>',l,n;return{c(){e=b("button"),e.innerHTML=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ze(e)!=="svelte-ehdlsa"&&(e.innerHTML=t),this.h()},h(){u(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(e,"type","button")},m(r,o){B(r,e,o),l||(n=le(e,"click",s[26]),l=!0)},p:ye,d(r){r&&h(e),l=!1,n()}}}function ia(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"></path></svg>';return{c(){e=b("button"),e.innerHTML=t,this.h()},l(l){e=w(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ze(e)!=="svelte-t977tc"&&(e.innerHTML=t),this.h()},h(){u(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(e,"type","button")},m(l,n){B(l,e,n)},p:ye,d(l){l&&h(e)}}}function aa(s){let e=s[9].t("Listening...")+"",t;return{c(){t=ae(e)},l(l){t=ce(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&512&&e!==(e=l[9].t("Listening...")+"")&&ve(t,e)},d(l){l&&h(t)}}}function ca(s){let e=s[9].t("Tap to interrupt")+"",t;return{c(){t=ae(e)},l(l){t=ce(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&512&&e!==(e=l[9].t("Tap to interrupt")+"")&&ve(t,e)},d(l){l&&h(t)}}}function fa(s){let e=s[9].t("Thinking...")+"",t;return{c(){t=ae(e)},l(l){t=ce(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&512&&e!==(e=l[9].t("Thinking...")+"")&&ve(t,e)},d(l){l&&h(t)}}}function ua(s){let e,t,l=s[8]&&cs(s);return{c(){l&&l.c(),e=Ke()},l(n){l&&l.l(n),e=Ke()},m(n,r){l&&l.m(n,r),B(n,e,r),t=!0},p(n,r){n[8]?l?(l.p(n,r),r[0]&256&&L(l,1)):(l=cs(n),l.c(),L(l,1),l.m(e.parentNode,e)):l&&(We(),O(l,1,1,()=>{l=null}),qe())},i(n){t||(L(l),t=!0)},o(n){O(l),t=!1},d(n){n&&h(e),l&&l.d(n)}}}function da(s,e,t){let l,n,r,o,i;ge(s,ol,G=>t(41,l=G)),ge(s,il,G=>t(42,n=G)),ge(s,At,G=>t(43,r=G)),ge(s,Ml,G=>t(8,o=G));const a=Et("i18n");ge(s,a,G=>t(9,i=G));let{eventTarget:f}=e,{submitPrompt:c}=e,{stopResponse:d}=e,{files:p}=e,{chatId:g}=e,{modelId:D}=e,v=null,y=!1,E=!1,k=!1,V=null,C=!1,H=null,A=!1,N=0,M=!1,F,R=[],U=[],z=null;const K=async()=>{const G=await navigator.mediaDevices.enumerateDevices();t(6,U=G.filter(Ee=>Ee.kind==="videoinput")),navigator.mediaDevices.getDisplayMedia&&t(6,U=[...U,{deviceId:"screen",label:"Screen Share"}]),console.log(U),z===null&&U.length>0&&t(7,z=U[0].deviceId)},te=async()=>{if(await K(),H===null){t(4,C=!0),await Te();try{await Y()}catch(G){console.error("Error accessing webcam: ",G)}}},Y=async()=>{const G=document.getElementById("camera-feed");G&&(z==="screen"?H=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1}):H=await navigator.mediaDevices.getUserMedia({video:{deviceId:z?{exact:z}:void 0}}),H&&(await K(),G.srcObject=H,await G.play()))},S=async()=>{H&&H.getTracks().forEach(Ee=>Ee.stop()),H=null},T=()=>{const G=document.getElementById("camera-feed"),Ee=document.getElementById("camera-canvas");if(!Ee)return;const fe=Ee.getContext("2d");Ee.width=G.videoWidth,Ee.height=G.videoHeight,fe.drawImage(G,0,0,G.videoWidth,G.videoHeight);const ue=Ee.toDataURL("image/png");return console.log(ue),ue},J=async()=>{await S(),t(4,C=!1)},pe=-55,de=async G=>{await Te();const Ee=Ul(G,"recording.wav"),fe=await jl(localStorage.token,Ee).catch(ue=>(Se.error(ue),null));if(fe&&(console.log(fe.text),fe.text!=="")){const ue=await c(fe.text,{_raw:!0});console.log(ue)}},Me=async(G=!0)=>{if(o){console.log("%c%s","color: red; font-size: 20px;","🚨 stopRecordingCallback 🚨");const Ee=R.slice(0);if(R=[],F=!1,G&&Le(),E){if(t(1,y=!0),t(3,V=null),H){const ue=T();t(16,p=[{type:"image",url:ue}])}const fe=new Blob(Ee,{type:"audio/wav"});await de(fe),E=!1,t(1,y=!1)}}else R=[],F=!1},Le=async()=>{const G=await navigator.mediaDevices.getUserMedia({audio:!0});F=new MediaRecorder(G),F.onstart=()=>{console.log("Recording started"),R=[],Ge(G)},F.ondataavailable=Ee=>{M&&R.push(Ee.data)},F.onstop=Ee=>{console.log("Recording stopped",Ee),Me()},F.start()},lt=G=>{let Ee=0;for(let fe=0;fe<G.length;fe++){const ue=(G[fe]-128)/128;Ee+=ue*ue}return Math.sqrt(Ee/G.length)},Ge=G=>{const Ee=new AudioContext,fe=Ee.createMediaStreamSource(G),ue=Ee.createAnalyser();ue.minDecibels=pe,fe.connect(ue);const Be=ue.frequencyBinCount,Re=new Uint8Array(Be),dt=new Uint8Array(ue.fftSize);let it=Date.now();M=!1,console.log("🔊 Sound detection started",it,M),(()=>{const St=()=>{if(!F||!o)return;if(k&&!((r==null?void 0:r.voiceInterruption)??!1)?(ue.maxDecibels=0,ue.minDecibels=-1):(ue.minDecibels=pe,ue.maxDecibels=-30),ue.getByteTimeDomainData(dt),ue.getByteFrequencyData(Re),t(5,N=lt(dt)),Re.some(Q=>Q>0)&&(console.log("%c%s","color: red; font-size: 20px;","🔊 Sound detected"),M||(M=!0,be()),it=Date.now()),M&&Date.now()-it>2e3&&(E=!0,F)){console.log("%c%s","color: red; font-size: 20px;","🔇 Silence detected"),F.stop();return}window.requestAnimationFrame(St)};window.requestAnimationFrame(St)})()};let W={},nt=null,tt=null;const kt=G=>o?new Promise(Ee=>{let fe=[];const ue=setInterval(async()=>{var Be;if(fe=await speechSynthesis.getVoices(),fe.length>0){clearInterval(ue);const Re=((Be=fe==null?void 0:fe.filter(dt=>{var it,jt,St,x;return dt.voiceURI===(((jt=(it=r==null?void 0:r.audio)==null?void 0:it.tts)==null?void 0:jt.voice)??((x=(St=n==null?void 0:n.audio)==null?void 0:St.tts)==null?void 0:x.voice))}))==null?void 0:Be.at(0))??void 0;tt=new SpeechSynthesisUtterance(G),Re&&(tt.voice=Re),speechSynthesis.speak(tt),tt.onend=async dt=>{await new Promise(it=>setTimeout(it,200)),Ee(dt)}}},100)}):Promise.resolve(),X=G=>o?new Promise(Ee=>{const fe=document.getElementById("audioElement");fe&&(fe.src=G.src,fe.muted=!0,fe.play().then(()=>{fe.muted=!1}).catch(ue=>{console.error(ue)}),fe.onended=async ue=>{await new Promise(Be=>setTimeout(Be,100)),Ee(ue)})}):Promise.resolve(),be=async()=>{t(2,k=!1),A&&d(),tt&&(speechSynthesis.cancel(),tt=null);const G=document.getElementById("audioElement");G&&(G.muted=!0,G.pause(),G.currentTime=0)};let Je=new AbortController;const q=new Map,ie=new Map,Ze=async G=>{var Ee,fe,ue,Be;if(!q.has(G))try{if((r==null?void 0:r.showEmojiInCall)??!1){const Re=await nr(localStorage.token,D,G,g);Re&&ie.set(G,Re)}if(n.audio.tts.engine!==""){const Re=await mr(localStorage.token,((fe=(Ee=r==null?void 0:r.audio)==null?void 0:Ee.tts)==null?void 0:fe.voice)??((Be=(ue=n==null?void 0:n.audio)==null?void 0:ue.tts)==null?void 0:Be.voice),G).catch(dt=>(console.error(dt),null));if(Re){const dt=await Re.blob(),it=URL.createObjectURL(dt);q.set(G,new Audio(it))}}else q.set(G,!0)}catch(Re){console.error("Error synthesizing speech:",Re)}return q.get(G)};let Ve={};const Qe=async(G,Ee)=>{for(;!Ee.aborted;)if(Ve[G]&&Ve[G].length>0){const fe=Ve[G].shift();if(q.has(fe))if(((r==null?void 0:r.showEmojiInCall)??!1)&&ie.has(fe)?t(3,V=ie.get(fe)):t(3,V=null),n.audio.tts.engine!=="")try{console.log("%c%s","color: red; font-size: 20px;",`Playing audio for content: ${fe}`);const ue=q.get(fe);await X(ue),console.log(`Played audio for content: ${fe}`),await new Promise(Be=>setTimeout(Be,200))}catch(ue){console.error("Error playing audio:",ue)}else await kt(fe);else Ve[G].unshift(fe),console.log(`Audio for "${fe}" not yet available in the cache, re-queued...`),await new Promise(ue=>setTimeout(ue,200))}else if(W[G]&&Ve[G]&&Ve[G].length===0){t(2,k=!1);break}else await new Promise(fe=>setTimeout(fe,200));console.log(`Audio monitoring and playing stopped for message ID ${G}`)};Tl(async()=>{t(0,v=l.find(ue=>ue.id===D)),Le();const G=async ue=>{const{id:Be}=ue.detail;A=!0,nt!==Be&&(console.log(`Received chat start event for message ID ${Be}`),nt=Be,Je&&Je.abort(),Je=new AbortController,t(2,k=!0),Qe(Be,Je.signal))},Ee=async ue=>{const{id:Be,content:Re}=ue.detail;if(nt===Be){console.log(`Received chat event for message ID ${Be}: ${Re}`);try{Ve[Be]===void 0?Ve[Be]=[Re]:Ve[Be].push(Re),console.log(Re),Ze(Re)}catch(dt){console.error("Failed to fetch or play audio:",dt)}}},fe=async ue=>{const{id:Be,content:Re}=ue.detail;W[Be]=!0,A=!1};return f.addEventListener("chat:start",G),f.addEventListener("chat",Ee),f.addEventListener("chat:finish",fe),async()=>{f.removeEventListener("chat:start",G),f.removeEventListener("chat",Ee),f.removeEventListener("chat:finish",fe),Je.abort(),await Te(),await be(),await Me(!1),await J()}});const gt=()=>{k&&be()},ut=()=>{k&&be()},xt=()=>{J()},Nt=async G=>{console.log(G.detail),t(7,z=G.detail),await S(),await Y()},Ut=async()=>{await navigator.mediaDevices.getUserMedia({video:!0}),te()},Ft=()=>{k&&be()},Dt=async()=>{Ml.set(!1)};return s.$$set=G=>{"eventTarget"in G&&t(17,f=G.eventTarget),"submitPrompt"in G&&t(18,c=G.submitPrompt),"stopResponse"in G&&t(19,d=G.stopResponse),"files"in G&&t(16,p=G.files),"chatId"in G&&t(20,g=G.chatId),"modelId"in G&&t(21,D=G.modelId)},[v,y,k,V,C,N,U,z,o,i,a,te,Y,S,J,be,p,f,c,d,g,D,gt,ut,xt,Nt,Ut,Ft,Dt]}class ha extends $e{constructor(e){super(),et(this,e,da,ua,Xe,{eventTarget:17,submitPrompt:18,stopResponse:19,files:16,chatId:20,modelId:21},null,[-1,-1])}}const{document:Al}=Cs;function us(s,e,t){const l=s.slice();return l[68]=e[t],l}function ds(s){var o;let e,t,l;function n(i){s[31](i)}let r={submitPrompt:s[26],stopResponse:s[28],modelId:((o=s[8])==null?void 0:o.at(0))??null,chatId:s[16],eventTarget:s[24]};return s[14]!==void 0&&(r.files=s[14]),e=new ha({props:r}),De.push(()=>Pe(e,"files",n)),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,a){re(e,i,a),l=!0},p(i,a){var c;const f={};a[0]&256&&(f.modelId=((c=i[8])==null?void 0:c.at(0))??null),a[0]&65536&&(f.chatId=i[16]),!t&&a[0]&16384&&(t=!0,f.files=i[14],je(()=>t=!1)),e.$set(f)},i(i){l||(L(e.$$.fragment,i),l=!0)},o(i){O(e.$$.fragment,i),l=!1},d(i){oe(e,i)}}}function hs(s){var be,Je;let e,t,l,n,r,o,i,a,f,c,d,p,g,D,v,y,E,k,V,C,H,A,N,M,F,R,U,z,K=(((be=s[17])==null?void 0:be.backgroundImageUrl)??null)&&ms(s);function te(q){s[32](q)}function Y(q){s[33](q)}let S={title:s[12],shareEnabled:s[15].length>0,chat:s[11],initNewChat:s[25]};s[1]!==void 0&&(S.selectedModels=s[1]),s[7]!==void 0&&(S.showModelSelector=s[7]),l=new Ri({props:S}),De.push(()=>Pe(l,"selectedModels",te)),De.push(()=>Pe(l,"showModelSelector",Y));let T=s[22].length>0&&s[15].length===0&&!s[16]&&s[1].length<=1&&gs(s);function J(q){s[36](q)}function pe(q){s[37](q)}function de(q){s[38](q)}function Me(q){s[39](q)}let Le={chatId:s[16],selectedModels:s[1],processing:ga,bottomPadding:s[14].length>0,sendPrompt:s[27],continueGeneration:s[30],regenerateResponse:s[29]};s[3]!==void 0&&(Le.history=s[3]),s[15]!==void 0&&(Le.messages=s[15]),s[5]!==void 0&&(Le.autoScroll=s[5]),s[13]!==void 0&&(Le.prompt=s[13]),d=new Ts({props:Le}),De.push(()=>Pe(d,"history",J)),De.push(()=>Pe(d,"messages",pe)),De.push(()=>Pe(d,"autoScroll",de)),De.push(()=>Pe(d,"prompt",Me));function lt(q){s[43](q)}function Ge(q){s[44](q)}function W(q){s[45](q)}function nt(q){s[46](q)}function tt(q){s[47](q)}function kt(q){s[48](q)}let X={availableToolIds:s[8].reduce(s[42],[]),transparentBackground:((Je=s[17])==null?void 0:Je.backgroundImageUrl)??!1,selectedModels:s[1],messages:s[15],submitPrompt:s[26],stopResponse:s[28]};return s[14]!==void 0&&(X.files=s[14]),s[13]!==void 0&&(X.prompt=s[13]),s[5]!==void 0&&(X.autoScroll=s[5]),s[9]!==void 0&&(X.selectedToolIds=s[9]),s[10]!==void 0&&(X.webSearchEnabled=s[10]),s[2]!==void 0&&(X.atSelectedModel=s[2]),k=new pi({props:X}),De.push(()=>Pe(k,"files",lt)),De.push(()=>Pe(k,"prompt",Ge)),De.push(()=>Pe(k,"autoScroll",W)),De.push(()=>Pe(k,"selectedToolIds",nt)),De.push(()=>Pe(k,"webSearchEnabled",tt)),De.push(()=>Pe(k,"atSelectedModel",kt)),{c(){e=b("div"),K&&K.c(),t=j(),ne(l.$$.fragment),o=j(),T&&T.c(),i=j(),a=b("div"),f=b("div"),c=b("div"),ne(d.$$.fragment),E=j(),ne(k.$$.fragment),this.h()},l(q){e=w(q,"DIV",{class:!0});var ie=_(e);K&&K.l(ie),t=P(ie),se(l.$$.fragment,ie),o=P(ie),T&&T.l(ie),i=P(ie),a=w(ie,"DIV",{class:!0});var Ze=_(a);f=w(Ze,"DIV",{class:!0,id:!0});var Ve=_(f);c=w(Ve,"DIV",{class:!0});var Qe=_(c);se(d.$$.fragment,Qe),Qe.forEach(h),Ve.forEach(h),E=P(Ze),se(k.$$.fragment,Ze),Ze.forEach(h),ie.forEach(h),this.h()},h(){u(c,"class",y="h-full w-full flex flex-col "+(s[0]?"py-4":"pt-2 pb-4")),u(f,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10"),u(f,"id","messages-container"),u(a,"class","flex flex-col flex-auto z-10"),u(e,"class",F="h-screen max-h-[100dvh] "+(s[21]?"md:max-w-[calc(100%-260px)]":"")+" w-full max-w-full flex flex-col")},m(q,ie){B(q,e,ie),K&&K.m(e,null),m(e,t),re(l,e,null),m(e,o),T&&T.m(e,null),m(e,i),m(e,a),m(a,f),m(f,c),re(d,c,null),s[40](f),m(a,E),re(k,a,null),R=!0,U||(z=le(f,"scroll",s[41]),U=!0)},p(q,ie){var gt,ut;((gt=q[17])==null?void 0:gt.backgroundImageUrl)??null?K?K.p(q,ie):(K=ms(q),K.c(),K.m(e,t)):K&&(K.d(1),K=null);const Ze={};ie[0]&4096&&(Ze.title=q[12]),ie[0]&32768&&(Ze.shareEnabled=q[15].length>0),ie[0]&2048&&(Ze.chat=q[11]),!n&&ie[0]&2&&(n=!0,Ze.selectedModels=q[1],je(()=>n=!1)),!r&&ie[0]&128&&(r=!0,Ze.showModelSelector=q[7],je(()=>r=!1)),l.$set(Ze),q[22].length>0&&q[15].length===0&&!q[16]&&q[1].length<=1?T?(T.p(q,ie),ie[0]&4292610&&L(T,1)):(T=gs(q),T.c(),L(T,1),T.m(e,i)):T&&(We(),O(T,1,1,()=>{T=null}),qe());const Ve={};ie[0]&65536&&(Ve.chatId=q[16]),ie[0]&2&&(Ve.selectedModels=q[1]),ie[0]&16384&&(Ve.bottomPadding=q[14].length>0),!p&&ie[0]&8&&(p=!0,Ve.history=q[3],je(()=>p=!1)),!g&&ie[0]&32768&&(g=!0,Ve.messages=q[15],je(()=>g=!1)),!D&&ie[0]&32&&(D=!0,Ve.autoScroll=q[5],je(()=>D=!1)),!v&&ie[0]&8192&&(v=!0,Ve.prompt=q[13],je(()=>v=!1)),d.$set(Ve),(!R||ie[0]&1&&y!==(y="h-full w-full flex flex-col "+(q[0]?"py-4":"pt-2 pb-4")))&&u(c,"class",y);const Qe={};ie[0]&262400&&(Qe.availableToolIds=q[8].reduce(q[42],[])),ie[0]&131072&&(Qe.transparentBackground=((ut=q[17])==null?void 0:ut.backgroundImageUrl)??!1),ie[0]&2&&(Qe.selectedModels=q[1]),ie[0]&32768&&(Qe.messages=q[15]),!V&&ie[0]&16384&&(V=!0,Qe.files=q[14],je(()=>V=!1)),!C&&ie[0]&8192&&(C=!0,Qe.prompt=q[13],je(()=>C=!1)),!H&&ie[0]&32&&(H=!0,Qe.autoScroll=q[5],je(()=>H=!1)),!A&&ie[0]&512&&(A=!0,Qe.selectedToolIds=q[9],je(()=>A=!1)),!N&&ie[0]&1024&&(N=!0,Qe.webSearchEnabled=q[10],je(()=>N=!1)),!M&&ie[0]&4&&(M=!0,Qe.atSelectedModel=q[2],je(()=>M=!1)),k.$set(Qe),(!R||ie[0]&2097152&&F!==(F="h-screen max-h-[100dvh] "+(q[21]?"md:max-w-[calc(100%-260px)]":"")+" w-full max-w-full flex flex-col"))&&u(e,"class",F)},i(q){R||(L(l.$$.fragment,q),L(T),L(d.$$.fragment,q),L(k.$$.fragment,q),R=!0)},o(q){O(l.$$.fragment,q),O(T),O(d.$$.fragment,q),O(k.$$.fragment,q),R=!1},d(q){q&&h(e),K&&K.d(),oe(l),T&&T.d(),oe(d),s[40](null),oe(k),U=!1,z()}}}function ms(s){let e,t,l,n;return{c(){e=b("div"),l=j(),n=b("div"),this.h()},l(r){e=w(r,"DIV",{class:!0,style:!0}),_(e).forEach(h),l=P(r),n=w(r,"DIV",{class:!0}),_(n).forEach(h),this.h()},h(){u(e,"class",t="absolute "+(s[21]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),It(e,"background-image","url("+s[17].backgroundImageUrl+")"),u(n,"class","absolute top-0 left-0 w-full h-full bg-gradient-to-t from-white to-white/85 dark:from-gray-900 dark:to-[#171717]/90 z-0")},m(r,o){B(r,e,o),B(r,l,o),B(r,n,o)},p(r,o){o[0]&2097152&&t!==(t="absolute "+(r[21]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&u(e,"class",t),o[0]&131072&&It(e,"background-image","url("+r[17].backgroundImageUrl+")")},d(r){r&&(h(e),h(l),h(n))}}}function gs(s){let e,t,l,n,r=bt(s[22].filter(s[34])),o=[];for(let a=0;a<r.length;a+=1)o[a]=ps(us(s,r,a));const i=a=>O(o[a],1,1,()=>{o[a]=null});return{c(){e=b("div"),t=b("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var f=_(e);t=w(f,"DIV",{class:!0});var c=_(t);for(let d=0;d<o.length;d+=1)o[d].l(c);c.forEach(h),f.forEach(h),this.h()},h(){u(t,"class","flex flex-col gap-1 w-full"),u(e,"class",l="absolute top-[4.25rem] w-full "+(s[21]?"md:max-w-[calc(100%-260px)]":"")+" z-20")},m(a,f){B(a,e,f),m(e,t);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(t,null);n=!0},p(a,f){if(f[0]&4194304){r=bt(a[22].filter(a[34]));let c;for(c=0;c<r.length;c+=1){const d=us(a,r,c);o[c]?(o[c].p(d,f),L(o[c],1)):(o[c]=ps(d),o[c].c(),L(o[c],1),o[c].m(t,null))}for(We(),c=r.length;c<o.length;c+=1)i(c);qe()}(!n||f[0]&2097152&&l!==(l="absolute top-[4.25rem] w-full "+(a[21]?"md:max-w-[calc(100%-260px)]":"")+" z-20"))&&u(e,"class",l)},i(a){if(!n){for(let f=0;f<r.length;f+=1)L(o[f]);n=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)O(o[f]);n=!1},d(a){a&&h(e),Wt(o,a)}}}function ps(s){let e,t;return e=new lo({props:{banner:s[68]}}),e.$on("dismiss",s[35]),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n[0]&4194304&&(r.banner=l[68]),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function ma(s){let e,t,l,n,r,o,i,a;Al.title=e=`
		`+(s[12]?`${s[12].length>30?`${s[12].slice(0,30)}...`:s[12]} | ${s[20]}`:`${s[20]}`)+`
	`;let f=s[19]&&ds(s),c=(!s[0]||s[4]&&s[0])&&hs(s);return{c(){t=j(),l=b("audio"),r=j(),f&&f.c(),o=j(),c&&c.c(),i=Ke(),this.h()},l(d){Ms("svelte-1123lr8",Al.head).forEach(h),t=P(d),l=w(d,"AUDIO",{id:!0,src:!0,style:!0}),_(l).forEach(h),r=P(d),f&&f.l(d),o=P(d),c&&c.l(d),i=Ke(),this.h()},h(){u(l,"id","audioElement"),Kt(l.src,n="")||u(l,"src",n),It(l,"display","none")},m(d,p){B(d,t,p),B(d,l,p),B(d,r,p),f&&f.m(d,p),B(d,o,p),c&&c.m(d,p),B(d,i,p),a=!0},p(d,p){(!a||p[0]&1052672)&&e!==(e=`
		`+(d[12]?`${d[12].length>30?`${d[12].slice(0,30)}...`:d[12]} | ${d[20]}`:`${d[20]}`)+`
	`)&&(Al.title=e),d[19]?f?(f.p(d,p),p[0]&524288&&L(f,1)):(f=ds(d),f.c(),L(f,1),f.m(o.parentNode,o)):f&&(We(),O(f,1,1,()=>{f=null}),qe()),!d[0]||d[4]&&d[0]?c?(c.p(d,p),p[0]&17&&L(c,1)):(c=hs(d),c.c(),L(c,1),c.m(i.parentNode,i)):c&&(We(),O(c,1,1,()=>{c=null}),qe())},i(d){a||(L(f),L(c),a=!0)},o(d){O(f),O(c),a=!1},d(d){d&&(h(t),h(l),h(r),h(o),h(i)),f&&f.d(d),c&&c.d(d)}}}let ga="";function pa(s,e,t){let l,n,r,o,i,a,f,c,d,p,g,D;ge(s,Yt,x=>t(16,l=x)),ge(s,At,x=>t(17,r=x)),ge(s,ol,x=>t(18,o=x)),ge(s,Ml,x=>t(19,i=x)),ge(s,Ol,x=>t(52,a=x)),ge(s,Us,x=>t(53,f=x)),ge(s,Hs,x=>t(54,c=x)),ge(s,il,x=>t(55,d=x)),ge(s,ks,x=>t(20,p=x)),ge(s,Sl,x=>t(21,g=x)),ge(s,js,x=>t(22,D=x));const v=Et("i18n");ge(s,v,x=>t(51,n=x));let{chatIdProp:y=""}=e,E=!1;const k=new EventTarget;let V=!1,C=!0,H,A=!0,N=[""],M,F=[],R=[],U=!1,z=null,K="",te="",Y=[],S=[],T={messages:{},currentId:null};Tl(async()=>{const x=async Q=>{if(Q.origin===window.origin){if(console.log("Message received from iframe:",Q.data),Q.data.type==="input:prompt"){console.log(Q.data.text);const he=document.getElementById("chat-textarea");he&&(t(13,te=Q.data.text),he.focus())}Q.data.type==="action:submit"&&(console.log(Q.data.text),te!==""&&(await Te(),Ge(te))),Q.data.type==="input:prompt:submit"&&(console.log(Q.data.text),te!==""&&(await Te(),Ge(Q.data.text)))}};return window.addEventListener("message",x),l?(r.saveChatHistory??!0)||await Bl("/"):Yt.subscribe(async Q=>{Q||await J()}),()=>{window.removeEventListener("message",x)}});const J=async()=>{var he;window.history.replaceState(T.state,"","/"),await Yt.set(""),t(5,C=!0),t(12,K=""),t(15,S=[]),t(3,T={messages:{},currentId:null}),c.url.searchParams.get("models")?t(1,N=(he=c.url.searchParams.get("models"))==null?void 0:he.split(",")):r!=null&&r.models?t(1,N=r==null?void 0:r.models):d!=null&&d.default_models?(console.log((d==null?void 0:d.default_models.split(","))??""),t(1,N=d==null?void 0:d.default_models.split(","))):t(1,N=[""]),c.url.searchParams.get("q")&&(t(13,te=c.url.searchParams.get("q")??""),te&&(await Te(),Ge(te))),t(1,N=N.map($=>o.map(Ne=>Ne.id).includes($)?$:""));const x=await dn(localStorage.token);x?At.set(x.ui):At.set(JSON.parse(localStorage.getItem("settings")??"{}"));const Q=document.getElementById("chat-textarea");setTimeout(()=>Q==null?void 0:Q.focus(),0)},pe=async()=>{if(Yt.set(y),t(11,z=await qs(localStorage.token,l).catch(async x=>(await Bl("/"),null))),z){await Ve();const x=z.chat;if(x){console.log(x),t(1,N=((x==null?void 0:x.models)??void 0)!==void 0?x.models:[x.models??""]),t(3,T=((x==null?void 0:x.history)??void 0)!==void 0?x.history:Rs(x.messages)),t(12,K=x.title);const Q=await dn(localStorage.token);return Q?await At.set(Q.ui):await At.set(JSON.parse(localStorage.getItem("settings")??"{}")),await At.set({...r,system:x.system??r.system,params:x.options??r.params}),t(5,C=!0),await Te(),S.length>0&&t(3,T.messages[S.at(-1).id].done=!0,T),await Te(),!0}else return null}},de=async()=>{await Te(),H&&t(6,H.scrollTop=H.scrollHeight,H)},Me=x=>{const Q=T.messages[x];return Q.parentId?[...Me(Q.parentId),Q]:[Q]},Le=async(x,Q)=>{await Vs.run({querySelector:".mermaid"});const he=await rr(localStorage.token,{model:x,messages:Q.map($=>({id:$.id,role:$.role,content:$.content,info:$.info?$.info:void 0,timestamp:$.timestamp})),chat_id:l}).catch($=>(Se.error($),Q.at(-1).error={content:$},null));if(he!==null)for(const $ of he.messages)t(3,T.messages[$.id]={...T.messages[$.id],...T.messages[$.id].content!==$.content?{originalContent:T.messages[$.id].content}:{},...$},T)},lt=async(x,Q="")=>setInterval(()=>{f==null||f.emit("usage",{action:"chat",model:x,chat_id:Q})},1e3),Ge=async(x,{_raw:Q=!1}={})=>{let he=[];if(console.log("submitPrompt",l),t(1,N=N.map($=>o.map(Ne=>Ne.id).includes($)?$:"")),N.includes(""))Se.error(n.t("Model not selected"));else if(S.length!=0&&S.at(-1).done!=!0)console.log("wait");else if(S.length!=0&&S.at(-1).error)Se.error(n.t("Oops! There was an error in the previous response. Please try again or contact admin."));else if(Y.length>0&&Y.filter($=>$.type!=="image"&&$.status!=="processed").length>0)Se.error(n.t("Oops! Hold tight! Your files are still in the processing oven. We're cooking them up to perfection. Please be patient and we'll let you know once they're ready."));else{const $=document.getElementById("chat-textarea");$&&($.value="",$.style.height="");const Ne=JSON.parse(JSON.stringify(Y));t(14,Y=[]),t(13,te="");let Z=cn(),Fe={id:Z,parentId:S.length!==0?S.at(-1).id:null,childrenIds:[],role:"user",content:x,files:Ne.length>0?Ne:void 0,timestamp:Math.floor(Date.now()/1e3),models:N.filter((Ye,Ae)=>N.indexOf(Ye)===Ae)};t(3,T.messages[Z]=Fe,T),t(3,T.currentId=Z,T),S.length!==0&&T.messages[S.at(-1).id].childrenIds.push(Z),await Te(),he=await W(x,Z,{newChat:!0})}return he},W=async(x,Q,{modelId:he=null,newChat:$=!1}={})=>{let Ne=[],Z=he?[he]:M!==void 0?[M.id]:N;const Fe={};for(const Ae of Z){const I=o.filter(ee=>ee.id===Ae).at(0);if(I){let ee=cn(),me={parentId:Q,id:ee,childrenIds:[],role:"assistant",content:"",model:I.id,modelName:I.name??I.id,userContext:null,timestamp:Math.floor(Date.now()/1e3)};t(3,T.messages[ee]=me,T),t(3,T.currentId=ee,T),Q!==null&&t(3,T.messages[Q].childrenIds=[...T.messages[Q].childrenIds,ee],T),Fe[Ae]=ee}}await Te(),$&&S.length==2&&(r.saveChatHistory??!0?(t(11,z=await Ws(localStorage.token,{id:l,title:n.t("New Chat"),models:N,system:r.system??void 0,options:{...r.params??{}},messages:S,history:T,tags:[],timestamp:Date.now()})),await ll.set(await nl(localStorage.token)),await Yt.set(z.id)):await Yt.set("local"),await Te());const Ye=JSON.parse(JSON.stringify(l));return await Promise.all(Z.map(async Ae=>{var ee,me,_e;console.log("modelId",Ae);const I=o.filter(He=>He.id===Ae).at(0);if(I){S.some(ht=>{var vt;return(vt=ht.files)==null?void 0:vt.some(wt=>wt.type==="image")})&&!(((_e=(me=(ee=I.info)==null?void 0:ee.meta)==null?void 0:me.capabilities)==null?void 0:_e.vision)??!0)&&Se.error(n.t("Model {{modelName}} is not vision capable",{modelName:I.name??I.id}));let Ue=Fe[Ae],ct=T.messages[Ue],at=null;if(((r==null?void 0:r.memory)??!1)&&at===null){const ht=await lr(localStorage.token,x).catch(vt=>(Se.error(vt),null));ht&&(ht.documents[0].length>0&&(at=ht.documents[0].reduce((vt,wt,Ie)=>{const mt=ht.metadatas[0][Ie].created_at,Oe=new Date(mt*1e3).toISOString().split("T")[0];return`${vt}${Ie+1}. [${Oe}]. ${wt}
`},"")),console.log(at))}ct.userContext=at;const pt=await lt(I.id,Ye);U&&await Ze(I.id,Q,Ue);let ft=null;(I==null?void 0:I.owned_by)==="openai"?ft=await tt(I,x,Ue,Ye):I&&(ft=await nt(I,x,Ue,Ye)),Ne.push(ft),pt&&clearInterval(pt)}else Se.error(n.t("Model {{modelId}} not found",{modelId:Ae}))})),await ll.set(await nl(localStorage.token)),Ne},nt=async(x,Q,he,$)=>{var He,Ue,ct,at,pt,ft,ht,vt,wt;let Ne=null;const Z=T.messages[he];await Te(),de();const Fe=[r.system||((Z==null?void 0:Z.userContext)??null)?{role:"system",content:`${fn((r==null?void 0:r.system)??"",a.name,r!=null&&r.userLocation?await hn(localStorage.token):void 0)}${(Z==null?void 0:Z.userContext)??null?`

User Context:
${(Z==null?void 0:Z.userContext)??""}`:""}`}:void 0,...S].filter(Ie=>{var mt;return(mt=Ie==null?void 0:Ie.content)==null?void 0:mt.trim()}).map((Ie,mt,Oe)=>{var xe;const ot={role:Ie.role,content:Ie.content},Ce=(xe=Ie.files)==null?void 0:xe.filter(st=>st.type==="image").map(st=>st.url.slice(st.url.indexOf(",")+1));return Ce&&Ce.length>0&&Ie.role==="user"&&(ot.images=Ce),ot});let Ye=-1;Fe.forEach((Ie,mt)=>{Ie.images&&(Ye=mt)}),Fe.forEach((Ie,mt)=>{mt!==Ye&&delete Ie.images});let Ae=[];(((Ue=(He=x==null?void 0:x.info)==null?void 0:He.meta)==null?void 0:Ue.knowledge)??!1)&&(Ae=x.info.meta.knowledge);const I=S.filter(Ie=>Ie.role==="user").at(-1);Ae=[...Ae,...((ct=I==null?void 0:I.files)==null?void 0:ct.filter(Ie=>["doc","file","collection","web_search_results"].includes(Ie.type)))??[],...((at=Z==null?void 0:Z.files)==null?void 0:at.filter(Ie=>["doc","file","collection","web_search_results"].includes(Ie.type)))??[]].filter((Ie,mt,Oe)=>Oe.findIndex(ot=>JSON.stringify(ot)===JSON.stringify(Ie))===mt),k.dispatchEvent(new CustomEvent("chat:start",{detail:{id:he}})),await Te();const[ee,me]=await Fs(localStorage.token,{model:x.id,messages:Fe,options:{...r.params??{},stop:((pt=r==null?void 0:r.params)==null?void 0:pt.stop)??void 0?r.params.stop.map(Ie=>decodeURIComponent(JSON.parse('"'+Ie.replace(/\"/g,'\\"')+'"'))):void 0,num_predict:((ft=r==null?void 0:r.params)==null?void 0:ft.max_tokens)??void 0,repeat_penalty:((ht=r==null?void 0:r.params)==null?void 0:ht.frequency_penalty)??void 0},format:r.requestFormat??void 0,keep_alive:r.keepAlive??void 0,tool_ids:R.length>0?R:void 0,files:Ae.length>0?Ae:void 0,citations:Ae.length>0?!0:void 0,chat_id:l});if(ee&&ee.ok){console.log("controller",me);const Ie=ee.body.pipeThrough(new TextDecoderStream).pipeThrough(Ps(`
`)).getReader();for(;;){const{value:mt,done:Oe}=await Ie.read();if(Oe||V||$!==l){if(Z.done=!0,t(15,S),t(3,T),V)me.abort("User: Stop Response");else{const ot=Me(he);await Le(x.id,ot)}Ne=Z.content;break}try{let ot=mt.split(`
`);for(const Ce of ot)if(Ce!==""){console.log(Ce);let xe=JSON.parse(Ce);if("citations"in xe){Z.citations=xe.citations;continue}if("detail"in xe)throw xe;if(xe.done==!1){if(Z.content==""&&xe.message.content==`
`)continue;{Z.content+=xe.message.content;const st=El(Z.content);st.pop(),st.length>0&&st[st.length-1]!==Z.lastSentence&&(Z.lastSentence=st[st.length-1],k.dispatchEvent(new CustomEvent("chat",{detail:{id:he,content:st[st.length-1]}}))),t(15,S),t(3,T)}}else{if(Z.done=!0,Z.content==""&&(Z.error={code:400,content:"Oops! No text generated from Ollama, Please try again."}),Z.context=xe.context??null,Z.info={total_duration:xe.total_duration,load_duration:xe.load_duration,sample_count:xe.sample_count,sample_duration:xe.sample_duration,prompt_eval_count:xe.prompt_eval_count,prompt_eval_duration:xe.prompt_eval_duration,eval_count:xe.eval_count,eval_duration:xe.eval_duration},t(15,S),t(3,T),r.notificationEnabled&&!document.hasFocus()){const st=new Notification(`${x.id}`,{body:Z.content,icon:`${sl}/static/favicon.png`})}((r==null?void 0:r.responseAutoCopy)??!1)&&un(Z.content),r.responseAutoPlayback&&!i&&(await Te(),(vt=document.getElementById(`speak-button-${Z.id}`))==null||vt.click())}}}catch(ot){console.log(ot),"detail"in ot&&Se.error(ot.detail);break}C&&de()}l==$&&(r.saveChatHistory??!0)&&(t(11,z=await zl(localStorage.token,$,{messages:S,history:T,models:N})),await ll.set(await nl(localStorage.token)))}else{if(ee!==null){const Ie=await ee.json();console.log(Ie),"detail"in Ie?(Se.error(Ie.detail),Z.error={content:Ie.detail}):(Se.error(Ie.error),Z.error={content:Ie.error})}else Se.error(n.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"Ollama"})),Z.error={content:n.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"Ollama"})};Z.done=!0,t(15,S),t(3,T)}V=!1,await Te();let _e=((wt=El(Z.content))==null?void 0:wt.at(-1))??"";if(_e&&k.dispatchEvent(new CustomEvent("chat",{detail:{id:he,content:_e}})),k.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:he,content:Z.content}})),C&&de(),S.length==2&&S.at(1).content!==""){window.history.replaceState(T.state,"",`/c/${$}`);const Ie=await q(Q);await ie($,Ie)}return Ne},tt=async(x,Q,he,$)=>{var I,ee,me,_e,He,Ue,ct,at,pt,ft,ht,vt,wt,Ie,mt;let Ne=null;const Z=T.messages[he];let Fe=[];(((ee=(I=x==null?void 0:x.info)==null?void 0:I.meta)==null?void 0:ee.knowledge)??!1)&&(Fe=x.info.meta.knowledge);const Ye=S.filter(Oe=>Oe.role==="user").at(-1);Fe=[...Fe,...((me=Ye==null?void 0:Ye.files)==null?void 0:me.filter(Oe=>["doc","file","collection","web_search_results"].includes(Oe.type)))??[],...((_e=Z==null?void 0:Z.files)==null?void 0:_e.filter(Oe=>["doc","file","collection","web_search_results"].includes(Oe.type)))??[]].filter((Oe,ot,Ce)=>Ce.findIndex(xe=>JSON.stringify(xe)===JSON.stringify(Oe))===ot),de(),k.dispatchEvent(new CustomEvent("chat:start",{detail:{id:he}})),await Te();try{const[Oe,ot]=await Js(localStorage.token,{model:x.id,stream:!0,stream_options:((ct=(Ue=(He=x.info)==null?void 0:He.meta)==null?void 0:Ue.capabilities)==null?void 0:ct.usage)??!1?{include_usage:!0}:void 0,messages:[r.system||((Z==null?void 0:Z.userContext)??null)?{role:"system",content:`${fn((r==null?void 0:r.system)??"",a.name,r!=null&&r.userLocation?await hn(localStorage.token):void 0)}${(Z==null?void 0:Z.userContext)??null?`

User Context:
${(Z==null?void 0:Z.userContext)??""}`:""}`}:void 0,...S].filter(Ce=>{var xe;return(xe=Ce==null?void 0:Ce.content)==null?void 0:xe.trim()}).map((Ce,xe,st)=>{var Mt;return{role:Ce.role,...((Mt=Ce.files)==null?void 0:Mt.filter(Pt=>Pt.type==="image").length)>0&&Ce.role==="user"?{content:[{type:"text",text:st.length-1!==xe?Ce.content:(Ce==null?void 0:Ce.raContent)??Ce.content},...Ce.files.filter(Pt=>Pt.type==="image").map(Pt=>({type:"image_url",image_url:{url:Pt.url}}))]}:{content:st.length-1!==xe?Ce.content:(Ce==null?void 0:Ce.raContent)??Ce.content}}}),seed:((at=r==null?void 0:r.params)==null?void 0:at.seed)??void 0,stop:((pt=r==null?void 0:r.params)==null?void 0:pt.stop)??void 0?r.params.stop.map(Ce=>decodeURIComponent(JSON.parse('"'+Ce.replace(/\"/g,'\\"')+'"'))):void 0,temperature:((ft=r==null?void 0:r.params)==null?void 0:ft.temperature)??void 0,top_p:((ht=r==null?void 0:r.params)==null?void 0:ht.top_p)??void 0,frequency_penalty:((vt=r==null?void 0:r.params)==null?void 0:vt.frequency_penalty)??void 0,max_tokens:((wt=r==null?void 0:r.params)==null?void 0:wt.max_tokens)??void 0,tool_ids:R.length>0?R:void 0,files:Fe.length>0?Fe:void 0,citations:Fe.length>0?!0:void 0,chat_id:l},`${sl}/api`);if(await Te(),de(),Oe&&Oe.ok&&Oe.body){const Ce=await Yr(Oe.body,r.splitLargeChunks);let xe=null;for await(const st of Ce){const{value:Mt,done:Pt,citations:Xt,error:zt,usage:Zt}=st;if(zt){await kt(zt,null,x,Z);break}if(Pt||V||$!==l){if(Z.done=!0,t(15,S),t(3,T),V)ot.abort("User: Stop Response");else{const yt=Me(he);await Le(x.id,yt)}Ne=Z.content;break}if(Zt&&(xe=Zt),Xt){Z.citations=Xt;continue}if(!(Z.content==""&&Mt==`
`)){{Z.content+=Mt;const yt=El(Z.content);yt.pop(),yt.length>0&&yt[yt.length-1]!==Z.lastSentence&&(Z.lastSentence=yt[yt.length-1],k.dispatchEvent(new CustomEvent("chat",{detail:{id:he,content:yt[yt.length-1]}}))),t(15,S),t(3,T)}C&&de()}}if(r.notificationEnabled&&!document.hasFocus()){const st=new Notification(`${x.id}`,{body:Z.content,icon:`${sl}/static/favicon.png`})}r.responseAutoCopy&&un(Z.content),r.responseAutoPlayback&&!i&&(await Te(),(Ie=document.getElementById(`speak-button-${Z.id}`))==null||Ie.click()),xe&&(Z.info={...xe,openai:!0}),l==$&&(r.saveChatHistory??!0)&&(t(11,z=await zl(localStorage.token,$,{models:N,messages:S,history:T})),await ll.set(await nl(localStorage.token)))}else await kt(null,Oe,x,Z)}catch(Oe){await kt(Oe,null,x,Z)}t(15,S),t(3,T),V=!1,await Te();let Ae=((mt=El(Z.content))==null?void 0:mt.at(-1))??"";if(Ae&&k.dispatchEvent(new CustomEvent("chat",{detail:{id:he,content:Ae}})),k.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:he,content:Z.content}})),C&&de(),S.length==2){window.history.replaceState(T.state,"",`/c/${$}`);const Oe=await q(Q);await ie($,Oe)}return Ne},kt=async(x,Q,he,$)=>{let Ne="",Z;x?Z=x:Q!==null&&(Z=await Q.json()),console.error(Z),"detail"in Z?(Se.error(Z.detail),Ne=Z.detail):"error"in Z?"message"in Z.error?(Se.error(Z.error.message),Ne=Z.error.message):(Se.error(Z.error),Ne=Z.error):"message"in Z&&(Se.error(Z.message),Ne=Z.message),$.error={content:n.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:he.name??he.id})+`
`+Ne},$.done=!0,t(15,S),t(3,T)},X=()=>{V=!0,console.log("stopResponse")},be=async x=>{if(console.log("regenerateResponse"),S.length!=0){let Q=T.messages[x.parentId],he=Q.content;((Q==null?void 0:Q.models)??[...N]).length==1?await W(he,Q.id):await W(he,Q.id,{modelId:x.model})}},Je=async()=>{console.log("continueGeneration");const x=JSON.parse(JSON.stringify(l));if(S.length!=0&&S.at(-1).done==!0){const Q=T.messages[T.currentId];Q.done=!1,await Te();const he=o.filter($=>$.id===Q.model).at(0);he&&((he==null?void 0:he.owned_by)==="openai"?await tt(he,T.messages[Q.parentId].content,Q.id,x):await nt(he,T.messages[Q.parentId].content,Q.id,x))}else Se.error(n.t("Model {{modelId}} not found",{modelId}))},q=async x=>{var Q;return((Q=r==null?void 0:r.title)==null?void 0:Q.auto)??!0?await sr(localStorage.token,N[0],x,l).catch($=>(console.error($),"New Chat")):`${x}`},ie=async(x,Q)=>{x===l&&t(12,K=Q),(r.saveChatHistory??!0)&&(t(11,z=await zl(localStorage.token,x,{title:Q})),await ll.set(await nl(localStorage.token)))},Ze=async(x,Q,he)=>{const $=T.messages[he],Ne=T.messages[Q];$.statusHistory=[{done:!1,action:"web_search",description:n.t("Generating search query")}],t(15,S),t(3,T);const Z=Ne.content;let Fe=await or(localStorage.token,x,S,Z).catch(Ae=>(console.log(Ae),Z));Fe||(Se.warning(n.t("No search query generated")),$.statusHistory.push({done:!0,error:!0,action:"web_search",description:"No search query generated"}),t(15,S),t(3,T)),$.statusHistory.push({done:!1,action:"web_search",description:n.t('Searching "{{searchQuery}}"',{searchQuery:Fe})}),t(15,S),t(3,T);const Ye=await Xs(localStorage.token,Fe).catch(Ae=>(console.log(Ae),Se.error(Ae),null));Ye?($.statusHistory.push({done:!0,action:"web_search",description:n.t("Searched {{count}} sites",{count:Ye.filenames.length}),query:Fe,urls:Ye.filenames}),(($==null?void 0:$.files)??!0)&&($.files=[]),$.files.push({collection_name:Ye.collection_name,name:Fe,type:"web_search_results",urls:Ye.filenames}),t(15,S),t(3,T)):($.statusHistory.push({done:!0,error:!0,action:"web_search",description:"No search results found"}),t(15,S),t(3,T))},Ve=async()=>await Gs(localStorage.token,l).catch(async x=>[]);function Qe(x){Y=x,t(14,Y)}function gt(x){N=x,t(1,N)}function ut(x){A=x,t(7,A)}const xt=x=>x.dismissible?!JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]").includes(x.id):!0,Nt=x=>{const Q=x.detail;localStorage.setItem("dismissedBannerIds",JSON.stringify([Q,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(he=>D.find($=>$.id===he))))};function Ut(x){T=x,t(3,T)}function Ft(x){S=x,t(15,S),t(3,T)}function Dt(x){C=x,t(5,C)}function G(x){te=x,t(13,te)}function Ee(x){De[x?"unshift":"push"](()=>{H=x,t(6,H)})}const fe=x=>{t(5,C=H.scrollHeight-H.scrollTop<=H.clientHeight+5)},ue=(x,Q,he,$)=>{var Z,Fe;const Ne=o.find(Ye=>Ye.id===Q);return((Fe=(Z=Ne==null?void 0:Ne.info)==null?void 0:Z.meta)==null?void 0:Fe.toolIds)??!1?[...new Set([...x,...Ne.info.meta.toolIds])]:x};function Be(x){Y=x,t(14,Y)}function Re(x){te=x,t(13,te)}function dt(x){C=x,t(5,C)}function it(x){R=x,t(9,R)}function jt(x){U=x,t(10,U)}function St(x){M=x,t(2,M)}return s.$$set=x=>{"chatIdProp"in x&&t(0,y=x.chatIdProp)},s.$$.update=()=>{if(s.$$.dirty[0]&6&&t(8,F=M!==void 0?[M.id]:N),s.$$.dirty[0]&8)if(T.currentId!==null){let x=[],Q=T.messages[T.currentId];for(;Q!==null;)x.unshift({...Q}),Q=Q.parentId!==null?T.messages[Q.parentId]:null;t(15,S=x)}else t(15,S=[]);s.$$.dirty[0]&1&&y&&(async()=>{if(console.log(y),y&&await pe()){await Te(),t(4,E=!0),window.setTimeout(()=>de(),0);const x=document.getElementById("chat-textarea");x==null||x.focus()}else await Bl("/")})()},[y,N,M,T,E,C,H,A,F,R,U,z,K,te,Y,S,l,r,o,i,p,g,D,v,k,J,Ge,W,X,be,Je,Qe,gt,ut,xt,Nt,Ut,Ft,Dt,G,Ee,fe,ue,Be,Re,dt,it,jt,St]}class kc extends $e{constructor(e){super(),et(this,e,pa,ma,Xe,{chatIdProp:0},null,[-1,-1,-1])}}function _a(s){let e,t,l,n=s[1].t("Keyboard shortcuts")+"",r,o,i,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,c,d,p,g,D,v=s[1].t("Open new chat")+"",y,E,k,V='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">O</div>',C,H,A,N=s[1].t("Focus chat input")+"",M,F,R,U='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Esc</div>',z,K,te,Y=s[1].t("Copy last code block")+"",S,T,J,pe='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">;</div>',de,Me,Le,lt=s[1].t("Copy last response")+"",Ge,W,nt,tt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">C</div>',kt,X,be,Je,q=s[1].t("Toggle settings")+"",ie,Ze,Ve,Qe='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">.</div>',gt,ut,xt,Nt=s[1].t("Toggle sidebar")+"",Ut,Ft,Dt,G='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">S</div>',Ee,fe,ue,Be=s[1].t("Delete chat")+"",Re,dt,it,jt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">⌫</div>',St,x,Q,he=s[1].t("Show shortcuts")+"",$,Ne,Z,Fe='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',Ye,Ae,I,ee=s[1].t("Input commands")+"",me,_e,He,Ue,ct,at,pt,ft=s[1].t("Attach file")+"",ht,vt,wt,Ie='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">#</div>',mt,Oe,ot,Ce=s[1].t("Add custom prompt")+"",xe,st,Mt,Pt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',Xt,zt,Zt,yt=s[1].t("Select model")+"",cl,xl,Qt,Pl='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">@</div>',Ll,Rl;return{c(){e=b("div"),t=b("div"),l=b("div"),r=ae(n),o=j(),i=b("button"),i.innerHTML=a,f=j(),c=b("div"),d=b("div"),p=b("div"),g=b("div"),D=b("div"),y=ae(v),E=j(),k=b("div"),k.innerHTML=V,C=j(),H=b("div"),A=b("div"),M=ae(N),F=j(),R=b("div"),R.innerHTML=U,z=j(),K=b("div"),te=b("div"),S=ae(Y),T=j(),J=b("div"),J.innerHTML=pe,de=j(),Me=b("div"),Le=b("div"),Ge=ae(lt),W=j(),nt=b("div"),nt.innerHTML=tt,kt=j(),X=b("div"),be=b("div"),Je=b("div"),ie=ae(q),Ze=j(),Ve=b("div"),Ve.innerHTML=Qe,gt=j(),ut=b("div"),xt=b("div"),Ut=ae(Nt),Ft=j(),Dt=b("div"),Dt.innerHTML=G,Ee=j(),fe=b("div"),ue=b("div"),Re=ae(Be),dt=j(),it=b("div"),it.innerHTML=jt,St=j(),x=b("div"),Q=b("div"),$=ae(he),Ne=j(),Z=b("div"),Z.innerHTML=Fe,Ye=j(),Ae=b("div"),I=b("div"),me=ae(ee),_e=j(),He=b("div"),Ue=b("div"),ct=b("div"),at=b("div"),pt=b("div"),ht=ae(ft),vt=j(),wt=b("div"),wt.innerHTML=Ie,mt=j(),Oe=b("div"),ot=b("div"),xe=ae(Ce),st=j(),Mt=b("div"),Mt.innerHTML=Pt,Xt=j(),zt=b("div"),Zt=b("div"),cl=ae(yt),xl=j(),Qt=b("div"),Qt.innerHTML=Pl,this.h()},l(_t){e=w(_t,"DIV",{class:!0});var rt=_(e);t=w(rt,"DIV",{class:!0});var fl=_(t);l=w(fl,"DIV",{class:!0});var Fl=_(l);r=ce(Fl,n),Fl.forEach(h),o=P(fl),i=w(fl,"BUTTON",{class:!0,"data-svelte-h":!0}),ze(i)!=="svelte-745w2y"&&(i.innerHTML=a),fl.forEach(h),f=P(rt),c=w(rt,"DIV",{class:!0});var Zl=_(c);d=w(Zl,"DIV",{class:!0});var ul=_(d);p=w(ul,"DIV",{class:!0});var qt=_(p);g=w(qt,"DIV",{class:!0});var dl=_(g);D=w(dl,"DIV",{class:!0});var Wl=_(D);y=ce(Wl,v),Wl.forEach(h),E=P(dl),k=w(dl,"DIV",{class:!0,"data-svelte-h":!0}),ze(k)!=="svelte-lcmjz9"&&(k.innerHTML=V),dl.forEach(h),C=P(qt),H=w(qt,"DIV",{class:!0});var hl=_(H);A=w(hl,"DIV",{class:!0});var ql=_(A);M=ce(ql,N),ql.forEach(h),F=P(hl),R=w(hl,"DIV",{class:!0,"data-svelte-h":!0}),ze(R)!=="svelte-1c7wvdz"&&(R.innerHTML=U),hl.forEach(h),z=P(qt),K=w(qt,"DIV",{class:!0});var ml=_(K);te=w(ml,"DIV",{class:!0});var Gl=_(te);S=ce(Gl,Y),Gl.forEach(h),T=P(ml),J=w(ml,"DIV",{class:!0,"data-svelte-h":!0}),ze(J)!=="svelte-1vgtrzt"&&(J.innerHTML=pe),ml.forEach(h),de=P(qt),Me=w(qt,"DIV",{class:!0});var gl=_(Me);Le=w(gl,"DIV",{class:!0});var Jl=_(Le);Ge=ce(Jl,lt),Jl.forEach(h),W=P(gl),nt=w(gl,"DIV",{class:!0,"data-svelte-h":!0}),ze(nt)!=="svelte-m149u9"&&(nt.innerHTML=tt),gl.forEach(h),qt.forEach(h),kt=P(ul),X=w(ul,"DIV",{class:!0});var Gt=_(X);be=w(Gt,"DIV",{class:!0});var pl=_(be);Je=w(pl,"DIV",{class:!0});var Ql=_(Je);ie=ce(Ql,q),Ql.forEach(h),Ze=P(pl),Ve=w(pl,"DIV",{class:!0,"data-svelte-h":!0}),ze(Ve)!=="svelte-1lfzi34"&&(Ve.innerHTML=Qe),pl.forEach(h),gt=P(Gt),ut=w(Gt,"DIV",{class:!0});var _l=_(ut);xt=w(_l,"DIV",{class:!0});var Yl=_(xt);Ut=ce(Yl,Nt),Yl.forEach(h),Ft=P(_l),Dt=w(_l,"DIV",{class:!0,"data-svelte-h":!0}),ze(Dt)!=="svelte-1egz3pd"&&(Dt.innerHTML=G),_l.forEach(h),Ee=P(Gt),fe=w(Gt,"DIV",{class:!0});var vl=_(fe);ue=w(vl,"DIV",{class:!0});var Kl=_(ue);Re=ce(Kl,Be),Kl.forEach(h),dt=P(vl),it=w(vl,"DIV",{class:!0,"data-svelte-h":!0}),ze(it)!=="svelte-1b065vn"&&(it.innerHTML=jt),vl.forEach(h),St=P(Gt),x=w(Gt,"DIV",{class:!0});var bl=_(x);Q=w(bl,"DIV",{class:!0});var Xl=_(Q);$=ce(Xl,he),Xl.forEach(h),Ne=P(bl),Z=w(bl,"DIV",{class:!0,"data-svelte-h":!0}),ze(Z)!=="svelte-714lzr"&&(Z.innerHTML=Fe),bl.forEach(h),Gt.forEach(h),ul.forEach(h),Zl.forEach(h),Ye=P(rt),Ae=w(rt,"DIV",{class:!0});var $l=_(Ae);I=w($l,"DIV",{class:!0});var en=_(I);me=ce(en,ee),en.forEach(h),$l.forEach(h),_e=P(rt),He=w(rt,"DIV",{class:!0});var tn=_(He);Ue=w(tn,"DIV",{class:!0});var ln=_(Ue);ct=w(ln,"DIV",{class:!0});var $t=_(ct);at=w($t,"DIV",{class:!0});var wl=_(at);pt=w(wl,"DIV",{class:!0});var nn=_(pt);ht=ce(nn,ft),nn.forEach(h),vt=P(wl),wt=w(wl,"DIV",{class:!0,"data-svelte-h":!0}),ze(wt)!=="svelte-11t0lmd"&&(wt.innerHTML=Ie),wl.forEach(h),mt=P($t),Oe=w($t,"DIV",{class:!0});var kl=_(Oe);ot=w(kl,"DIV",{class:!0});var sn=_(ot);xe=ce(sn,Ce),sn.forEach(h),st=P(kl),Mt=w(kl,"DIV",{class:!0,"data-svelte-h":!0}),ze(Mt)!=="svelte-1s9pky1"&&(Mt.innerHTML=Pt),kl.forEach(h),Xt=P($t),zt=w($t,"DIV",{class:!0});var yl=_(zt);Zt=w(yl,"DIV",{class:!0});var rn=_(Zt);cl=ce(rn,yt),rn.forEach(h),xl=P(yl),Qt=w(yl,"DIV",{class:!0,"data-svelte-h":!0}),ze(Qt)!=="svelte-oivy56"&&(Qt.innerHTML=Pl),yl.forEach(h),$t.forEach(h),ln.forEach(h),tn.forEach(h),rt.forEach(h),this.h()},h(){u(l,"class","text-lg font-medium self-center"),u(i,"class","self-center"),u(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),u(D,"class","text-sm"),u(k,"class","flex space-x-1 text-xs"),u(g,"class","w-full flex justify-between items-center"),u(A,"class","text-sm"),u(R,"class","flex space-x-1 text-xs"),u(H,"class","w-full flex justify-between items-center"),u(te,"class","text-sm"),u(J,"class","flex space-x-1 text-xs"),u(K,"class","w-full flex justify-between items-center"),u(Le,"class","text-sm"),u(nt,"class","flex space-x-1 text-xs"),u(Me,"class","w-full flex justify-between items-center"),u(p,"class","flex flex-col space-y-3 w-full self-start"),u(Je,"class","text-sm"),u(Ve,"class","flex space-x-1 text-xs"),u(be,"class","w-full flex justify-between items-center"),u(xt,"class","text-sm"),u(Dt,"class","flex space-x-1 text-xs"),u(ut,"class","w-full flex justify-between items-center"),u(ue,"class","text-sm"),u(it,"class","flex space-x-1 text-xs"),u(fe,"class","w-full flex justify-between items-center"),u(Q,"class","text-sm"),u(Z,"class","flex space-x-1 text-xs"),u(x,"class","w-full flex justify-between items-center"),u(X,"class","flex flex-col space-y-3 w-full self-start"),u(d,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),u(c,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),u(I,"class","text-lg font-medium self-center"),u(Ae,"class","flex justify-between dark:text-gray-300 px-5"),u(pt,"class","text-sm"),u(wt,"class","flex space-x-1 text-xs"),u(at,"class","w-full flex justify-between items-center"),u(ot,"class","text-sm"),u(Mt,"class","flex space-x-1 text-xs"),u(Oe,"class","w-full flex justify-between items-center"),u(Zt,"class","text-sm"),u(Qt,"class","flex space-x-1 text-xs"),u(zt,"class","w-full flex justify-between items-center"),u(ct,"class","flex flex-col space-y-3 w-full self-start"),u(Ue,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),u(He,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),u(e,"class","text-gray-700 dark:text-gray-100")},m(_t,rt){B(_t,e,rt),m(e,t),m(t,l),m(l,r),m(t,o),m(t,i),m(e,f),m(e,c),m(c,d),m(d,p),m(p,g),m(g,D),m(D,y),m(g,E),m(g,k),m(p,C),m(p,H),m(H,A),m(A,M),m(H,F),m(H,R),m(p,z),m(p,K),m(K,te),m(te,S),m(K,T),m(K,J),m(p,de),m(p,Me),m(Me,Le),m(Le,Ge),m(Me,W),m(Me,nt),m(d,kt),m(d,X),m(X,be),m(be,Je),m(Je,ie),m(be,Ze),m(be,Ve),m(X,gt),m(X,ut),m(ut,xt),m(xt,Ut),m(ut,Ft),m(ut,Dt),m(X,Ee),m(X,fe),m(fe,ue),m(ue,Re),m(fe,dt),m(fe,it),m(X,St),m(X,x),m(x,Q),m(Q,$),m(x,Ne),m(x,Z),m(e,Ye),m(e,Ae),m(Ae,I),m(I,me),m(e,_e),m(e,He),m(He,Ue),m(Ue,ct),m(ct,at),m(at,pt),m(pt,ht),m(at,vt),m(at,wt),m(ct,mt),m(ct,Oe),m(Oe,ot),m(ot,xe),m(Oe,st),m(Oe,Mt),m(ct,Xt),m(ct,zt),m(zt,Zt),m(Zt,cl),m(zt,xl),m(zt,Qt),Ll||(Rl=le(i,"click",s[3]),Ll=!0)},p(_t,rt){rt&2&&n!==(n=_t[1].t("Keyboard shortcuts")+"")&&ve(r,n),rt&2&&v!==(v=_t[1].t("Open new chat")+"")&&ve(y,v),rt&2&&N!==(N=_t[1].t("Focus chat input")+"")&&ve(M,N),rt&2&&Y!==(Y=_t[1].t("Copy last code block")+"")&&ve(S,Y),rt&2&&lt!==(lt=_t[1].t("Copy last response")+"")&&ve(Ge,lt),rt&2&&q!==(q=_t[1].t("Toggle settings")+"")&&ve(ie,q),rt&2&&Nt!==(Nt=_t[1].t("Toggle sidebar")+"")&&ve(Ut,Nt),rt&2&&Be!==(Be=_t[1].t("Delete chat")+"")&&ve(Re,Be),rt&2&&he!==(he=_t[1].t("Show shortcuts")+"")&&ve($,he),rt&2&&ee!==(ee=_t[1].t("Input commands")+"")&&ve(me,ee),rt&2&&ft!==(ft=_t[1].t("Attach file")+"")&&ve(ht,ft),rt&2&&Ce!==(Ce=_t[1].t("Add custom prompt")+"")&&ve(xe,Ce),rt&2&&yt!==(yt=_t[1].t("Select model")+"")&&ve(cl,yt)},d(_t){_t&&h(e),Ll=!1,Rl()}}}function va(s){let e,t,l;function n(o){s[4](o)}let r={$$slots:{default:[_a]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.show=s[0]),e=new wr({props:r}),De.push(()=>Pe(e,"show",n)),{c(){ne(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,i){re(e,o,i),l=!0},p(o,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:o}),!t&&i&1&&(t=!0,a.show=o[0],je(()=>t=!1)),e.$set(a)},i(o){l||(L(e.$$.fragment,o),l=!0)},o(o){O(e.$$.fragment,o),l=!1},d(o){oe(e,o)}}}function ba(s,e,t){let l;const n=Et("i18n");ge(s,n,a=>t(1,l=a));let{show:r=!1}=e;const o=()=>{t(0,r=!1)};function i(a){r=a,t(0,r)}return s.$$set=a=>{"show"in a&&t(0,r=a.show)},[r,l,n,o,i]}class wa extends $e{constructor(e){super(),et(this,e,ba,va,Xe,{show:0})}}function ka(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=_(e);t=ke(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(t).forEach(h),n.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",s[1]),u(e,"stroke","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&2&&u(e,"stroke-width",l[1]),n&1&&u(e,"class",l[0])},i:ye,o:ye,d(l){l&&h(e)}}}function ya(s,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="2"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class Ea extends $e{constructor(e){super(),et(this,e,ya,ka,Xe,{className:0,strokeWidth:1})}}function Ia(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var n=_(e);t=ke(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(h),n.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Zm5.01 1H5v2.01h2.01V8Zm3 0H8v2.01h2.01V8Zm3 0H11v2.01h2.01V8Zm3 0H14v2.01h2.01V8Zm3 0H17v2.01h2.01V8Zm-12 3H5v2.01h2.01V11Zm3 0H8v2.01h2.01V11Zm3 0H11v2.01h2.01V11Zm3 0H14v2.01h2.01V11Zm3 0H17v2.01h2.01V11Zm-12 3H5v2.01h2.01V14ZM8 14l-.001 2 8.011.01V14H8Zm11.01 0H17v2.01h2.01V14Z"),u(t,"clip-rule","evenodd"),u(e,"aria-hidden","true"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",s[1]),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&2&&u(e,"stroke-width",l[1]),n&1&&u(e,"class",l[0])},i:ye,o:ye,d(l){l&&h(e)}}}function Da(s,e,t){let{className:l="size-4"}=e,{strokeWidth:n="2"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class Sa extends $e{constructor(e){super(),et(this,e,Da,Ia,Xe,{className:0,strokeWidth:1})}}function Ma(s){let e;const t=s[5].default,l=Ct(t,s,s[9],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&512)&&Tt(l,t,n,n[9],e?Ht(t,n[9],r,null):Vt(n[9]),null)},i(n){e||(L(l,n),e=!0)},o(n){O(l,n),e=!1},d(n){l&&l.d(n)}}}function Ca(s){let e,t,l,n=s[2].t("Documentation")+"",r,o;return e=new Ea({props:{className:"size-5"}}),{c(){ne(e.$$.fragment),t=j(),l=b("div"),r=ae(n),this.h()},l(i){se(e.$$.fragment,i),t=P(i),l=w(i,"DIV",{class:!0});var a=_(l);r=ce(a,n),a.forEach(h),this.h()},h(){u(l,"class","flex items-center")},m(i,a){re(e,i,a),B(i,t,a),B(i,l,a),m(l,r),o=!0},p(i,a){(!o||a&4)&&n!==(n=i[2].t("Documentation")+"")&&ve(r,n)},i(i){o||(L(e.$$.fragment,i),o=!0)},o(i){O(e.$$.fragment,i),o=!1},d(i){i&&(h(t),h(l)),oe(e,i)}}}function Ta(s){let e,t,l,n=s[2].t("Keyboard shortcuts")+"",r,o;return e=new Sa({props:{className:"size-5"}}),{c(){ne(e.$$.fragment),t=j(),l=b("div"),r=ae(n),this.h()},l(i){se(e.$$.fragment,i),t=P(i),l=w(i,"DIV",{class:!0});var a=_(l);r=ce(a,n),a.forEach(h),this.h()},h(){u(l,"class","flex items-center")},m(i,a){re(e,i,a),B(i,t,a),B(i,l,a),m(l,r),o=!0},p(i,a){(!o||a&4)&&n!==(n=i[2].t("Keyboard shortcuts")+"")&&ve(r,n)},i(i){o||(L(e.$$.fragment,i),o=!0)},o(i){O(e.$$.fragment,i),o=!1},d(i){i&&(h(t),h(l)),oe(e,i)}}}function Va(s){let e,t,l,n;return e=new Jt({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Ca]},$$scope:{ctx:s}}}),e.$on("click",s[6]),l=new Jt({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Ta]},$$scope:{ctx:s}}}),l.$on("click",s[7]),{c(){ne(e.$$.fragment),t=j(),ne(l.$$.fragment)},l(r){se(e.$$.fragment,r),t=P(r),se(l.$$.fragment,r)},m(r,o){re(e,r,o),B(r,t,o),re(l,r,o),n=!0},p(r,o){const i={};o&516&&(i.$$scope={dirty:o,ctx:r}),e.$set(i);const a={};o&516&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){n||(L(e.$$.fragment,r),L(l.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),O(l.$$.fragment,r),n=!1},d(r){r&&h(t),oe(e,r),oe(l,r)}}}function Ha(s){let e,t,l;return t=new Hl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:4,side:"top",align:"end",transition:al,$$slots:{default:[Va]},$$scope:{ctx:s}}}),{c(){e=b("div"),ne(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{slot:!0});var r=_(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){u(e,"slot","content")},m(n,r){B(n,e,r),re(t,e,null),l=!0},p(n,r){const o={};r&517&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){O(t.$$.fragment,n),l=!1},d(n){n&&h(e),oe(t)}}}function xa(s){let e,t;return e=new Vl({props:{$$slots:{content:[Ha],default:[Ma]},$$scope:{ctx:s}}}),e.$on("change",s[8]),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,[n]){const r={};n&517&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function La(s,e,t){let l,{$$slots:n={},$$scope:r}=e;const o=Et("i18n");ge(s,o,g=>t(2,l=g));let{showDocsHandler:i}=e,{showShortcutsHandler:a}=e,{onClose:f=()=>{}}=e;const c=()=>{window.open("https://docs.openwebui.com","_blank")},d=()=>{a()},p=g=>{g.detail===!1&&f()};return s.$$set=g=>{"showDocsHandler"in g&&t(4,i=g.showDocsHandler),"showShortcutsHandler"in g&&t(0,a=g.showShortcutsHandler),"onClose"in g&&t(1,f=g.onClose),"$$scope"in g&&t(9,r=g.$$scope)},[a,f,l,o,i,n,c,d,p,r]}class Ba extends $e{constructor(e){super(),et(this,e,La,xa,Xe,{showDocsHandler:4,showShortcutsHandler:0,onClose:1})}}function Na(s){let e,t="?";return{c(){e=b("button"),e.textContent=t,this.h()},l(l){e=w(l,"BUTTON",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-oq3opr"&&(e.textContent=t),this.h()},h(){u(e,"class","text-gray-600 dark:text-gray-300 bg-gray-300/20 size-5 flex items-center justify-center text-[0.7rem] rounded-full")},m(l,n){B(l,e,n)},p:ye,d(l){l&&h(e)}}}function za(s){let e,t;return e=new Ot({props:{content:s[1].t("Help"),placement:"left",$$slots:{default:[Na]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,n){re(e,l,n),t=!0},p(l,n){const r={};n&2&&(r.content=l[1].t("Help")),n&128&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Aa(s){let e,t,l,n,r,o,i,a,f,c;n=new Ba({props:{showDocsHandler:s[4],showShortcutsHandler:s[5],$$slots:{default:[za]},$$scope:{ctx:s}}});function d(g){s[6](g)}let p={};return s[0]!==void 0&&(p.show=s[0]),o=new wa({props:p}),De.push(()=>Pe(o,"show",d)),{c(){e=b("div"),t=b("button"),l=j(),ne(n.$$.fragment),r=j(),ne(o.$$.fragment),this.h()},l(g){e=w(g,"DIV",{class:!0});var D=_(e);t=w(D,"BUTTON",{id:!0,class:!0}),_(t).forEach(h),l=P(D),se(n.$$.fragment,D),D.forEach(h),r=P(g),se(o.$$.fragment,g),this.h()},h(){u(t,"id","show-shortcuts-button"),u(t,"class","hidden"),u(e,"class","hidden lg:flex fixed bottom-0 right-0 px-2 py-2 z-20")},m(g,D){B(g,e,D),m(e,t),m(e,l),re(n,e,null),B(g,r,D),re(o,g,D),a=!0,f||(c=le(t,"click",s[3]),f=!0)},p(g,[D]){const v={};D&1&&(v.showDocsHandler=g[4]),D&1&&(v.showShortcutsHandler=g[5]),D&130&&(v.$$scope={dirty:D,ctx:g}),n.$set(v);const y={};!i&&D&1&&(i=!0,y.show=g[0],je(()=>i=!1)),o.$set(y)},i(g){a||(L(n.$$.fragment,g),L(o.$$.fragment,g),a=!0)},o(g){O(n.$$.fragment,g),O(o.$$.fragment,g),a=!1},d(g){g&&(h(e),h(r)),oe(n),oe(o,g),f=!1,c()}}}function Oa(s,e,t){let l;const n=Et("i18n");ge(s,n,c=>t(1,l=c));let r=!1;const o=()=>{t(0,r=!r)},i=()=>{t(0,r=!r)},a=()=>{t(0,r=!r)};function f(c){r=c,t(0,r)}return[r,l,n,o,i,a,f]}class yc extends $e{constructor(e){super(),et(this,e,Oa,Aa,Xe,{})}}export{kc as C,yc as H};
//# sourceMappingURL=Help.16301b8b.js.map
