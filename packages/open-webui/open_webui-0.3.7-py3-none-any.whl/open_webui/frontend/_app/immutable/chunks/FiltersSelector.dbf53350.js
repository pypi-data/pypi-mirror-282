import{s as te,w as X,P as le,o as oe,E as De,F as Ve,G as Ie,H as ye,f as w,g as $,h as p,d,j as h,i as x,e as fe,K as se,l as B,m as Z,r as v,n as j,C as de,a as M,c as H,z as O,A as S,p as xe,W as Ae,R as Te,u as Ce}from"./scheduler.8ceb707f.js";import{S as re,i as ne,b as q,d as U,m as G,a as I,t as C,e as P,g as R,c as W,f as Me}from"./index.07e72a31.js";import{e as K}from"./each.0e379b97.js";import{T as He}from"./updater.8432fa66.js";import{D as Be,M as Ze}from"./Dropdown.c8bca6dd.js";import{M as je}from"./menu-trigger.e06dd104.js";import{v as Fe}from"./index.30f324e9.js";import{f as Oe}from"./index.e8e699b3.js";import{C as Ee}from"./Checkbox.3d101069.js";function ue(a,e,s){const l=a.slice();return l[10]=e[s],l}function Se(a){let e;const s=a[5].default,l=De(s,a,a[8],null);return{c(){l&&l.c()},l(t){l&&l.l(t)},m(t,o){l&&l.m(t,o),e=!0},p(t,o){l&&l.p&&(!e||o&256)&&Ve(l,s,t,t[8],e?ye(s,t[8],o,null):Ie(t[8]),null)},i(t){e||(I(l,t),e=!0)},o(t){C(l,t),e=!1},d(t){l&&l.d(t)}}}function ze(a){let e,s,l=K(a[2]),t=[];for(let r=0;r<l.length;r+=1)t[r]=he(ue(a,l,r));const o=r=>C(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=fe()},l(r){for(let c=0;c<t.length;c+=1)t[c].l(r);e=fe()},m(r,c){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(r,c);x(r,e,c),s=!0},p(r,c){if(c&5){l=K(r[2]);let n;for(n=0;n<l.length;n+=1){const f=ue(r,l,n);t[n]?(t[n].p(f,c),I(t[n],1)):(t[n]=he(f),t[n].c(),I(t[n],1),t[n].m(e.parentNode,e))}for(R(),n=l.length;n<t.length;n+=1)o(n);W()}},i(r){if(!s){for(let c=0;c<l.length;c+=1)I(t[c]);s=!0}},o(r){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)C(t[c]);s=!1},d(r){r&&d(e),se(t,r)}}}function Le(a){let e,s=a[3].t("No documents found")+"",l;return{c(){e=w("div"),l=B(s),this.h()},l(t){e=$(t,"DIV",{class:!0});var o=p(e);l=Z(o,s),o.forEach(d),this.h()},h(){h(e,"class","text-center text-sm text-gray-500 dark:text-gray-400")},m(t,o){x(t,e,o),v(e,l)},p(t,o){o&8&&s!==(s=t[3].t("No documents found")+"")&&j(l,s)},i:de,o:de,d(t){t&&d(e)}}}function Ke(a){let e,s,l;return{c(){e=O("svg"),s=O("path"),l=O("path"),this.h()},l(t){e=S(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=p(e);s=S(o,"path",{d:!0}),p(s).forEach(d),l=S(o,"path",{d:!0}),p(l).forEach(d),o.forEach(d),this.h()},h(){h(s,"d","M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"),h(l,"d","M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 24 24"),h(e,"fill","currentColor"),h(e,"class","size-4")},m(t,o){x(t,e,o),v(e,s),v(e,l)},d(t){t&&d(e)}}}function Ne(a){let e,s,l;return{c(){e=O("svg"),s=O("path"),l=O("path"),this.h()},l(t){e=S(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=p(e);s=S(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(s).forEach(d),l=S(o,"path",{d:!0}),p(l).forEach(d),o.forEach(d),this.h()},h(){h(s,"fill-rule","evenodd"),h(s,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),h(s,"clip-rule","evenodd"),h(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 24 24"),h(e,"fill","currentColor"),h(e,"class","w-4")},m(t,o){x(t,e,o),v(e,s),v(e,l)},d(t){t&&d(e)}}}function qe(a){var A;let e,s,l,t,o,r=(((A=a[10])==null?void 0:A.type)??"Document")+"",c,n,f,g=a[10].name+"",u,b;function i(k,D){var T;if((((T=k[10])==null?void 0:T.type)??"doc")==="doc")return Ne;if(k[10].type==="collection")return Ke}let m=i(a),_=m&&m(a);return{c(){e=w("div"),_&&_.c(),s=M(),l=w("div"),t=w("div"),o=w("div"),c=B(r),n=M(),f=w("div"),u=B(g),b=M(),this.h()},l(k){e=$(k,"DIV",{class:!0});var D=p(e);_&&_.l(D),D.forEach(d),s=H(k),l=$(k,"DIV",{class:!0});var T=p(l);t=$(T,"DIV",{class:!0});var E=p(t);o=$(E,"DIV",{class:!0});var V=p(o);c=Z(V,r),V.forEach(d),n=H(E),f=$(E,"DIV",{class:!0});var y=p(f);u=Z(y,g),y.forEach(d),E.forEach(d),T.forEach(d),b=H(k),this.h()},h(){h(e,"class","flex self-start"),h(o,"class","w-fit text-xs font-black px-1 rounded uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200"),h(f,"class","line-clamp-1 font-medium pr-0.5"),h(t,"class","flex flex-col"),h(l,"class","flex items-center")},m(k,D){x(k,e,D),_&&_.m(e,null),x(k,s,D),x(k,l,D),v(l,t),v(t,o),v(o,c),v(t,n),v(t,f),v(f,u),x(k,b,D)},p(k,D){var T;m!==(m=i(k))&&(_&&_.d(1),_=m&&m(k),_&&(_.c(),_.m(e,null))),D&4&&r!==(r=(((T=k[10])==null?void 0:T.type)??"Document")+"")&&j(c,r),D&4&&g!==(g=k[10].name+"")&&j(u,g)},d(k){k&&(d(e),d(s),d(l),d(b)),_&&_.d()}}}function he(a){let e,s;function l(){return a[6](a[10])}return e=new Ze({props:{class:"flex gap-2.5 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[qe]},$$scope:{ctx:a}}}),e.$on("click",l),{c(){q(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,o){G(e,t,o),s=!0},p(t,o){a=t;const r={};o&260&&(r.$$scope={dirty:o,ctx:a}),e.$set(r)},i(t){s||(I(e.$$.fragment,t),s=!0)},o(t){C(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Ue(a){let e,s,l,t;const o=[Le,ze],r=[];function c(n,f){return n[2].length===0?0:1}return s=c(a),l=r[s]=o[s](a),{c(){e=w("div"),l.c(),this.h()},l(n){e=$(n,"DIV",{class:!0});var f=p(e);l.l(f),f.forEach(d),this.h()},h(){h(e,"class","max-h-[10rem] overflow-y-scroll")},m(n,f){x(n,e,f),r[s].m(e,null),t=!0},p(n,f){let g=s;s=c(n),s===g?r[s].p(n,f):(R(),C(r[g],1,1,()=>{r[g]=null}),W(),l=r[s],l?l.p(n,f):(l=r[s]=o[s](n),l.c()),I(l,1),l.m(e,null))},i(n){t||(I(l),t=!0)},o(n){C(l),t=!1},d(n){n&&d(e),r[s].d()}}}function Ge(a){let e,s,l;return s=new je({props:{class:"w-full max-w-[300px]  rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"start",transition:Oe,$$slots:{default:[Ue]},$$scope:{ctx:a}}}),{c(){e=w("div"),q(s.$$.fragment),this.h()},l(t){e=$(t,"DIV",{slot:!0});var o=p(e);U(s.$$.fragment,o),o.forEach(d),this.h()},h(){h(e,"slot","content")},m(t,o){x(t,e,o),G(s,e,null),l=!0},p(t,o){const r={};o&269&&(r.$$scope={dirty:o,ctx:t}),s.$set(r)},i(t){l||(I(s.$$.fragment,t),l=!0)},o(t){C(s.$$.fragment,t),l=!1},d(t){t&&d(e),P(s)}}}function Pe(a){let e,s;return e=new Be({props:{$$slots:{content:[Ge],default:[Se]},$$scope:{ctx:a}}}),e.$on("change",a[7]),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,t){G(e,l,t),s=!0},p(l,[t]){const o={};t&269&&(o.$$scope={dirty:t,ctx:l}),e.$set(o)},i(l){s||(I(e.$$.fragment,l),s=!0)},o(l){C(e.$$.fragment,l),s=!1},d(l){P(e,l)}}}function Re(a,e,s){let l,t;X(a,Fe,i=>s(9,l=i));let{$$slots:o={},$$scope:r}=e;const c=le("i18n");X(a,c,i=>s(3,t=i));let{onClose:n=()=>{}}=e,{knowledge:f=[]}=e,g=[];oe(()=>{let i=[...l.length>0?[{name:"All Documents",type:"collection",title:t.t("All Documents"),collection_names:l.map(m=>m.collection_name)}]:[],...l.reduce((m,_,A,k)=>{var D;return[...new Set([...m,...(((D=_==null?void 0:_.content)==null?void 0:D.tags)??[]).map(T=>T.name)])]},[]).map(m=>({name:m,type:"collection",collection_names:l.filter(_=>{var A;return(((A=_==null?void 0:_.content)==null?void 0:A.tags)??[]).map(k=>k.name).includes(m)}).map(_=>_.collection_name)}))];s(2,g=[...i,...l])});const u=i=>{f.find(m=>m.name===i.name)||s(0,f=[...f,{...i,type:(i==null?void 0:i.type)??"doc"}])},b=i=>{i.detail===!1&&n()};return a.$$set=i=>{"onClose"in i&&s(1,n=i.onClose),"knowledge"in i&&s(0,f=i.knowledge),"$$scope"in i&&s(8,r=i.$$scope)},[f,n,g,t,c,o,u,b,r]}class We extends re{constructor(e){super(),ne(this,e,Re,Pe,te,{onClose:1,knowledge:0})}}function _e(a,e,s){const l=a.slice();return l[5]=e[s],l[7]=s,l}function ve(a){let e,s=K(a[0]),l=[];for(let t=0;t<s.length;t+=1)l[t]=me(_e(a,s,t));return{c(){e=w("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=$(t,"DIV",{class:!0});var o=p(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(d),this.h()},h(){h(e,"class","flex items-center gap-2 mt-2")},m(t,o){x(t,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(t,o){if(o&3){s=K(t[0]);let r;for(r=0;r<s.length;r+=1){const c=_e(t,s,r);l[r]?l[r].p(c,o):(l[r]=me(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=s.length}},d(t){t&&d(e),se(l,t)}}}function Je(a){let e,s,l;return{c(){e=O("svg"),s=O("path"),l=O("path"),this.h()},l(t){e=S(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=p(e);s=S(o,"path",{d:!0}),p(s).forEach(d),l=S(o,"path",{d:!0}),p(l).forEach(d),o.forEach(d),this.h()},h(){h(s,"d","M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"),h(l,"d","M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 24 24"),h(e,"fill","currentColor"),h(e,"class","size-6")},m(t,o){x(t,e,o),v(e,s),v(e,l)},d(t){t&&d(e)}}}function Qe(a){let e,s,l;return{c(){e=O("svg"),s=O("path"),l=O("path"),this.h()},l(t){e=S(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=p(e);s=S(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(s).forEach(d),l=S(o,"path",{d:!0}),p(l).forEach(d),o.forEach(d),this.h()},h(){h(s,"fill-rule","evenodd"),h(s,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),h(s,"clip-rule","evenodd"),h(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 24 24"),h(e,"fill","currentColor"),h(e,"class","size-6")},m(t,o){x(t,e,o),v(e,s),v(e,l)},d(t){t&&d(e)}}}function me(a){var J,N;let e,s,l,t,o,r,c=(((J=a[5])==null?void 0:J.title)??`#${a[5].name}`)+"",n,f,g,u=a[1].t(((N=a[5])==null?void 0:N.type)??"Document")+"",b,i,m,_,A='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',k,D,T;function E(F,z){var L;if((((L=F[5])==null?void 0:L.type)??"doc")==="doc")return Qe;if(F[5].type==="collection")return Je}let V=E(a),y=V&&V(a);function Y(){return a[3](a[7])}return{c(){e=w("div"),s=w("div"),l=w("div"),y&&y.c(),t=M(),o=w("div"),r=w("div"),n=B(c),f=M(),g=w("div"),b=B(u),i=M(),m=w("div"),_=w("button"),_.innerHTML=A,k=M(),this.h()},l(F){e=$(F,"DIV",{class:!0});var z=p(e);s=$(z,"DIV",{class:!0});var L=p(s);l=$(L,"DIV",{class:!0});var Q=p(l);y&&y.l(Q),Q.forEach(d),t=H(L),o=$(L,"DIV",{class:!0});var ee=p(o);r=$(ee,"DIV",{class:!0});var ae=p(r);n=Z(ae,c),ae.forEach(d),f=H(ee),g=$(ee,"DIV",{class:!0});var ce=p(g);b=Z(ce,u),ce.forEach(d),ee.forEach(d),L.forEach(d),i=H(z),m=$(z,"DIV",{class:!0});var ie=p(m);_=$(ie,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Te(_)!=="svelte-v6mhqq"&&(_.innerHTML=A),ie.forEach(d),k=H(z),z.forEach(d),this.h()},h(){h(l,"class","p-2.5 bg-red-400 text-white rounded-lg"),h(r,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),h(g,"class","text-gray-500 text-sm"),h(o,"class","flex flex-col justify-center -space-y-0.5"),h(s,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none"),h(_,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),h(_,"type","button"),h(m,"class","absolute -top-1 -right-1"),h(e,"class","relative group")},m(F,z){x(F,e,z),v(e,s),v(s,l),y&&y.m(l,null),v(s,t),v(s,o),v(o,r),v(r,n),v(o,f),v(o,g),v(g,b),v(e,i),v(e,m),v(m,_),v(e,k),D||(T=Ce(_,"click",Y),D=!0)},p(F,z){var L,Q;a=F,V!==(V=E(a))&&(y&&y.d(1),y=V&&V(a),y&&(y.c(),y.m(l,null))),z&1&&c!==(c=(((L=a[5])==null?void 0:L.title)??`#${a[5].name}`)+"")&&j(n,c),z&3&&u!==(u=a[1].t(((Q=a[5])==null?void 0:Q.type)??"Document")+"")&&j(b,u)},d(F){F&&d(e),y&&y.d(),D=!1,T()}}}function Xe(a){let e,s=a[1].t("Select Documents")+"",l;return{c(){e=w("button"),l=B(s),this.h()},l(t){e=$(t,"BUTTON",{class:!0,type:!0});var o=p(e);l=Z(o,s),o.forEach(d),this.h()},h(){h(e,"class","px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl"),h(e,"type","button")},m(t,o){x(t,e,o),v(e,l)},p(t,o){o&2&&s!==(s=t[1].t("Select Documents")+"")&&j(l,s)},d(t){t&&d(e)}}}function Ye(a){let e,s,l,t=a[1].t("Knowledge")+"",o,r,c,n=a[1].t('To add documents here, upload them to the "Documents" workspace first.')+"",f,g,u,b,i,m,_,A,k=a[0].length>0&&ve(a);function D(E){a[4](E)}let T={$$slots:{default:[Xe]},$$scope:{ctx:a}};return a[0]!==void 0&&(T.knowledge=a[0]),m=new We({props:T}),xe.push(()=>Me(m,"knowledge",D)),{c(){e=w("div"),s=w("div"),l=w("div"),o=B(t),r=M(),c=w("div"),f=B(n),g=M(),u=w("div"),k&&k.c(),b=M(),i=w("div"),q(m.$$.fragment),this.h()},l(E){e=$(E,"DIV",{});var V=p(e);s=$(V,"DIV",{class:!0});var y=p(s);l=$(y,"DIV",{class:!0});var Y=p(l);o=Z(Y,t),Y.forEach(d),y.forEach(d),r=H(V),c=$(V,"DIV",{class:!0});var J=p(c);f=Z(J,n),J.forEach(d),g=H(V),u=$(V,"DIV",{class:!0});var N=p(u);k&&k.l(N),b=H(N),i=$(N,"DIV",{class:!0});var F=p(i);U(m.$$.fragment,F),F.forEach(d),N.forEach(d),V.forEach(d),this.h()},h(){h(l,"class","self-center text-sm font-semibold"),h(s,"class","flex w-full justify-between mb-1"),h(c,"class","text-xs dark:text-gray-500"),h(i,"class","flex flex-wrap text-sm font-medium gap-1.5 mt-2"),h(u,"class","flex flex-col")},m(E,V){x(E,e,V),v(e,s),v(s,l),v(l,o),v(e,r),v(e,c),v(c,f),v(e,g),v(e,u),k&&k.m(u,null),v(u,b),v(u,i),G(m,i,null),A=!0},p(E,[V]){(!A||V&2)&&t!==(t=E[1].t("Knowledge")+"")&&j(o,t),(!A||V&2)&&n!==(n=E[1].t('To add documents here, upload them to the "Documents" workspace first.')+"")&&j(f,n),E[0].length>0?k?k.p(E,V):(k=ve(E),k.c(),k.m(u,b)):k&&(k.d(1),k=null);const y={};V&258&&(y.$$scope={dirty:V,ctx:E}),!_&&V&1&&(_=!0,y.knowledge=E[0],Ae(()=>_=!1)),m.$set(y)},i(E){A||(I(m.$$.fragment,E),A=!0)},o(E){C(m.$$.fragment,E),A=!1},d(E){E&&d(e),k&&k.d(),P(m)}}}function et(a,e,s){let l,{knowledge:t=[]}=e;const o=le("i18n");X(a,o,n=>s(1,l=n));const r=n=>{t.splice(n,1),s(0,t)};function c(n){t=n,s(0,t)}return a.$$set=n=>{"knowledge"in n&&s(0,t=n.knowledge)},[t,l,o,r,c]}class vt extends re{constructor(e){super(),ne(this,e,et,Ye,te,{knowledge:0})}}function ge(a,e,s){const l=a.slice();return l[6]=e[s],l[8]=s,l}function pe(a){let e,s,l=K(Object.keys(a[2])),t=[];for(let r=0;r<l.length;r+=1)t[r]=ke(ge(a,l,r));const o=r=>C(t[r],1,1,()=>{t[r]=null});return{c(){e=w("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=$(r,"DIV",{class:!0});var c=p(e);for(let n=0;n<t.length;n+=1)t[n].l(c);c.forEach(d),this.h()},h(){h(e,"class","flex items-center mt-2 flex-wrap")},m(r,c){x(r,e,c);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null);s=!0},p(r,c){if(c&5){l=K(Object.keys(r[2]));let n;for(n=0;n<l.length;n+=1){const f=ge(r,l,n);t[n]?(t[n].p(f,c),I(t[n],1)):(t[n]=ke(f),t[n].c(),I(t[n],1),t[n].m(e,null))}for(R(),n=l.length;n<t.length;n+=1)o(n);W()}},i(r){if(!s){for(let c=0;c<l.length;c+=1)I(t[c]);s=!0}},o(r){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)C(t[c]);s=!1},d(r){r&&d(e),se(t,r)}}}function ke(a){let e,s,l,t,o,r=a[2][a[6]].name+"",c,n,f;function g(...u){return a[5](a[6],...u)}return l=new Ee({props:{state:a[2][a[6]].selected?"checked":"unchecked"}}),l.$on("change",g),{c(){e=w("div"),s=w("div"),q(l.$$.fragment),t=M(),o=w("div"),c=B(r),n=M(),this.h()},l(u){e=$(u,"DIV",{class:!0});var b=p(e);s=$(b,"DIV",{class:!0});var i=p(s);U(l.$$.fragment,i),i.forEach(d),t=H(b),o=$(b,"DIV",{class:!0});var m=p(o);c=Z(m,r),m.forEach(d),n=H(b),b.forEach(d),this.h()},h(){h(s,"class","self-center flex items-center"),h(o,"class","py-0.5 text-sm w-full capitalize font-medium"),h(e,"class","flex items-center gap-2 mr-3")},m(u,b){x(u,e,b),v(e,s),G(l,s,null),v(e,t),v(e,o),v(o,c),v(e,n),f=!0},p(u,b){a=u;const i={};b&4&&(i.state=a[2][a[6]].selected?"checked":"unchecked"),l.$set(i),(!f||b&4)&&r!==(r=a[2][a[6]].name+"")&&j(c,r)},i(u){f||(I(l.$$.fragment,u),f=!0)},o(u){C(l.$$.fragment,u),f=!1},d(u){u&&d(e),P(l)}}}function tt(a){let e,s,l,t=a[3].t("Tools")+"",o,r,c,n=a[3].t('To select toolkits here, add them to the "Tools" workspace first.')+"",f,g,u,b,i=a[1].length>0&&pe(a);return{c(){e=w("div"),s=w("div"),l=w("div"),o=B(t),r=M(),c=w("div"),f=B(n),g=M(),u=w("div"),i&&i.c(),this.h()},l(m){e=$(m,"DIV",{});var _=p(e);s=$(_,"DIV",{class:!0});var A=p(s);l=$(A,"DIV",{class:!0});var k=p(l);o=Z(k,t),k.forEach(d),A.forEach(d),r=H(_),c=$(_,"DIV",{class:!0});var D=p(c);f=Z(D,n),D.forEach(d),g=H(_),u=$(_,"DIV",{class:!0});var T=p(u);i&&i.l(T),T.forEach(d),_.forEach(d),this.h()},h(){h(l,"class","self-center text-sm font-semibold"),h(s,"class","flex w-full justify-between mb-1"),h(c,"class","text-xs dark:text-gray-500"),h(u,"class","flex flex-col")},m(m,_){x(m,e,_),v(e,s),v(s,l),v(l,o),v(e,r),v(e,c),v(c,f),v(e,g),v(e,u),i&&i.m(u,null),b=!0},p(m,[_]){(!b||_&8)&&t!==(t=m[3].t("Tools")+"")&&j(o,t),(!b||_&8)&&n!==(n=m[3].t('To select toolkits here, add them to the "Tools" workspace first.')+"")&&j(f,n),m[1].length>0?i?(i.p(m,_),_&2&&I(i,1)):(i=pe(m),i.c(),I(i,1),i.m(u,null)):i&&(R(),C(i,1,1,()=>{i=null}),W())},i(m){b||(I(i),b=!0)},o(m){C(i),b=!1},d(m){m&&d(e),i&&i.d()}}}function lt(a,e,s){let l,{tools:t=[]}=e,o={},{selectedToolIds:r=[]}=e;const c=le("i18n");X(a,c,f=>s(3,l=f)),oe(()=>{s(2,o=t.reduce((f,g)=>(f[g.id]={...g,selected:r.includes(g.id)},f),{}))});const n=(f,g)=>{s(2,o[f].selected=g.detail==="checked",o),s(0,r=Object.keys(o).filter(u=>o[u].selected))};return a.$$set=f=>{"tools"in f&&s(1,t=f.tools),"selectedToolIds"in f&&s(0,r=f.selectedToolIds)},[r,t,o,l,c,n]}class mt extends re{constructor(e){super(),ne(this,e,lt,tt,te,{tools:1,selectedToolIds:0})}}function be(a,e,s){const l=a.slice();return l[6]=e[s],l[8]=s,l}function we(a){let e,s,l=K(Object.keys(a[2])),t=[];for(let r=0;r<l.length;r+=1)t[r]=$e(be(a,l,r));const o=r=>C(t[r],1,1,()=>{t[r]=null});return{c(){e=w("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=$(r,"DIV",{class:!0});var c=p(e);for(let n=0;n<t.length;n+=1)t[n].l(c);c.forEach(d),this.h()},h(){h(e,"class","flex items-center mt-2 flex-wrap")},m(r,c){x(r,e,c);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null);s=!0},p(r,c){if(c&5){l=K(Object.keys(r[2]));let n;for(n=0;n<l.length;n+=1){const f=be(r,l,n);t[n]?(t[n].p(f,c),I(t[n],1)):(t[n]=$e(f),t[n].c(),I(t[n],1),t[n].m(e,null))}for(R(),n=l.length;n<t.length;n+=1)o(n);W()}},i(r){if(!s){for(let c=0;c<l.length;c+=1)I(t[c]);s=!0}},o(r){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)C(t[c]);s=!1},d(r){r&&d(e),se(t,r)}}}function st(a){let e=a[2][a[6]].name+"",s;return{c(){s=B(e)},l(l){s=Z(l,e)},m(l,t){x(l,s,t)},p(l,t){t&4&&e!==(e=l[2][l[6]].name+"")&&j(s,e)},d(l){l&&d(s)}}}function $e(a){let e,s,l,t,o,r,c,n;function f(...g){return a[5](a[6],...g)}return l=new Ee({props:{state:a[2][a[6]].selected?"checked":"unchecked"}}),l.$on("change",f),r=new He({props:{content:a[2][a[6]].meta.description,$$slots:{default:[st]},$$scope:{ctx:a}}}),{c(){e=w("div"),s=w("div"),q(l.$$.fragment),t=M(),o=w("div"),q(r.$$.fragment),c=M(),this.h()},l(g){e=$(g,"DIV",{class:!0});var u=p(e);s=$(u,"DIV",{class:!0});var b=p(s);U(l.$$.fragment,b),b.forEach(d),t=H(u),o=$(u,"DIV",{class:!0});var i=p(o);U(r.$$.fragment,i),i.forEach(d),c=H(u),u.forEach(d),this.h()},h(){h(s,"class","self-center flex items-center"),h(o,"class","py-0.5 text-sm w-full capitalize font-medium"),h(e,"class","flex items-center gap-2 mr-3")},m(g,u){x(g,e,u),v(e,s),G(l,s,null),v(e,t),v(e,o),G(r,o,null),v(e,c),n=!0},p(g,u){a=g;const b={};u&4&&(b.state=a[2][a[6]].selected?"checked":"unchecked"),l.$set(b);const i={};u&4&&(i.content=a[2][a[6]].meta.description),u&516&&(i.$$scope={dirty:u,ctx:a}),r.$set(i)},i(g){n||(I(l.$$.fragment,g),I(r.$$.fragment,g),n=!0)},o(g){C(l.$$.fragment,g),C(r.$$.fragment,g),n=!1},d(g){g&&d(e),P(l),P(r)}}}function rt(a){let e,s,l,t=a[3].t("Filters")+"",o,r,c,n=a[3].t('To select filters here, add them to the "Functions" workspace first.')+"",f,g,u,b,i=a[1].length>0&&we(a);return{c(){e=w("div"),s=w("div"),l=w("div"),o=B(t),r=M(),c=w("div"),f=B(n),g=M(),u=w("div"),i&&i.c(),this.h()},l(m){e=$(m,"DIV",{});var _=p(e);s=$(_,"DIV",{class:!0});var A=p(s);l=$(A,"DIV",{class:!0});var k=p(l);o=Z(k,t),k.forEach(d),A.forEach(d),r=H(_),c=$(_,"DIV",{class:!0});var D=p(c);f=Z(D,n),D.forEach(d),g=H(_),u=$(_,"DIV",{class:!0});var T=p(u);i&&i.l(T),T.forEach(d),_.forEach(d),this.h()},h(){h(l,"class","self-center text-sm font-semibold"),h(s,"class","flex w-full justify-between mb-1"),h(c,"class","text-xs dark:text-gray-500"),h(u,"class","flex flex-col")},m(m,_){x(m,e,_),v(e,s),v(s,l),v(l,o),v(e,r),v(e,c),v(c,f),v(e,g),v(e,u),i&&i.m(u,null),b=!0},p(m,[_]){(!b||_&8)&&t!==(t=m[3].t("Filters")+"")&&j(o,t),(!b||_&8)&&n!==(n=m[3].t('To select filters here, add them to the "Functions" workspace first.')+"")&&j(f,n),m[1].length>0?i?(i.p(m,_),_&2&&I(i,1)):(i=we(m),i.c(),I(i,1),i.m(u,null)):i&&(R(),C(i,1,1,()=>{i=null}),W())},i(m){b||(I(i),b=!0)},o(m){C(i),b=!1},d(m){m&&d(e),i&&i.d()}}}function nt(a,e,s){let l;const t=le("i18n");X(a,t,f=>s(3,l=f));let{filters:o=[]}=e,{selectedFilterIds:r=[]}=e,c={};oe(()=>{s(2,c=o.reduce((f,g)=>(f[g.id]={...g,selected:r.includes(g.id)},f),{}))});const n=(f,g)=>{s(2,c[f].selected=g.detail==="checked",c),s(0,r=Object.keys(c).filter(u=>c[u].selected))};return a.$$set=f=>{"filters"in f&&s(1,o=f.filters),"selectedFilterIds"in f&&s(0,r=f.selectedFilterIds)},[r,o,c,l,t,n]}class gt extends re{constructor(e){super(),ne(this,e,nt,rt,te,{filters:1,selectedFilterIds:0})}}export{gt as F,vt as K,mt as T};
//# sourceMappingURL=FiltersSelector.dbf53350.js.map
