import{s as h,e as _,i as S,d as F,P as y,w as v,o as C,C as M}from"../chunks/scheduler.8ceb707f.js";import{S as E,i as J,a as m,t as u,c as N,g as $,b as O,d as P,m as q,e as H}from"../chunks/index.07e72a31.js";import{a as w}from"../chunks/Toaster.svelte_svelte_type_style_lang.a1b53f72.js";import{g as I}from"../chunks/navigation.89ef0947.js";import{k as L,h as j}from"../chunks/index.30f324e9.js";import{h as z,b as A}from"../chunks/index.3629b38b.js";import{F as B}from"../chunks/FunctionEditor.9fb94b82.js";import{b as D}from"../chunks/index.5bae366a.js";function k(a){var c;let t=(c=a[2])==null?void 0:c.content,s,o,e=b(a);return{c(){e.c(),s=_()},l(r){e.l(r),s=_()},m(r,n){e.m(r,n),S(r,s,n),o=!0},p(r,n){var l;n&4&&h(t,t=(l=r[2])==null?void 0:l.content)?($(),u(e,1,1,M),N(),e=b(r),e.c(),m(e,1),e.m(s.parentNode,s)):e.p(r,n)},i(r){o||(m(e),o=!0)},o(r){u(e),o=!1},d(r){r&&F(s),e.d(r)}}}function b(a){var o,e,c,r;let t,s;return t=new B({props:{id:((o=a[2])==null?void 0:o.id)??"",name:((e=a[2])==null?void 0:e.name)??"",meta:((c=a[2])==null?void 0:c.meta)??{description:""},content:((r=a[2])==null?void 0:r.content)??"",clone:a[1]}}),t.$on("save",a[5]),{c(){O(t.$$.fragment)},l(n){P(t.$$.fragment,n)},m(n,l){q(t,n,l),s=!0},p(n,l){var i,d,p,g;const f={};l&4&&(f.id=((i=n[2])==null?void 0:i.id)??""),l&4&&(f.name=((d=n[2])==null?void 0:d.name)??""),l&4&&(f.meta=((p=n[2])==null?void 0:p.meta)??{description:""}),l&4&&(f.content=((g=n[2])==null?void 0:g.content)??""),l&2&&(f.clone=n[1]),t.$set(f)},i(n){s||(m(t.$$.fragment,n),s=!0)},o(n){u(t.$$.fragment,n),s=!1},d(n){H(t,n)}}}function G(a){let t,s,o=a[0]&&k(a);return{c(){o&&o.c(),t=_()},l(e){o&&o.l(e),t=_()},m(e,c){o&&o.m(e,c),S(e,t,c),s=!0},p(e,[c]){e[0]?o?(o.p(e,c),c&1&&m(o,1)):(o=k(e),o.c(),m(o,1),o.m(t.parentNode,t)):o&&($(),u(o,1,1,()=>{o=null}),N())},i(e){s||(m(o),s=!0)},o(e){u(o),s=!1},d(e){e&&F(t),o&&o.d(e)}}}function K(a,t,s){let o;const e=y("i18n");v(a,e,i=>s(6,o=i));let c=!1,r=!1,n=null;const l=async i=>{console.log(i),await z(localStorage.token,{id:i.id,name:i.name,meta:i.meta,content:i.content}).catch(p=>(w.error(p),null))&&(w.success(o.t("Function created successfully")),L.set(await A(localStorage.token)),j.set(await D(localStorage.token)),await I("/workspace/functions"))};return C(()=>{window.addEventListener("message",async i=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(i.origin)&&(s(2,n=JSON.parse(i.data)),console.log(n))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.function&&(s(2,n=JSON.parse(sessionStorage.function)),sessionStorage.removeItem("function"),console.log(n),s(1,r=!0)),s(0,c=!0)}),[c,r,n,e,l,i=>{l(i.detail)}]}class Z extends E{constructor(t){super(),J(this,t,K,G,h,{})}}export{Z as component};
//# sourceMappingURL=14.6c7f7a62.js.map
