import{s as h,e as _,i as S,d as N,P as y,w as v,o as C,C as E}from"../chunks/scheduler.8ceb707f.js";import{S as J,i as M,a as f,t as u,c as T,g as $,b as O,d as P,m as j,e as q}from"../chunks/index.07e72a31.js";import{g as H}from"../chunks/navigation.89ef0947.js";import{f as I,b as L}from"../chunks/index.7a7876c2.js";import{T as z}from"../chunks/ToolkitEditor.d3284143.js";import{j as A}from"../chunks/index.30f324e9.js";import{a as w}from"../chunks/Toaster.svelte_svelte_type_style_lang.a1b53f72.js";function k(a){var i;let n=(i=a[2])==null?void 0:i.content,s,o,e=b(a);return{c(){e.c(),s=_()},l(r){e.l(r),s=_()},m(r,t){e.m(r,t),S(r,s,t),o=!0},p(r,t){var c;t&4&&h(n,n=(c=r[2])==null?void 0:c.content)?($(),u(e,1,1,E),T(),e=b(r),e.c(),f(e,1),e.m(s.parentNode,s)):e.p(r,t)},i(r){o||(f(e),o=!0)},o(r){u(e),o=!1},d(r){r&&N(s),e.d(r)}}}function b(a){var o,e,i,r;let n,s;return n=new z({props:{id:((o=a[2])==null?void 0:o.id)??"",name:((e=a[2])==null?void 0:e.name)??"",meta:((i=a[2])==null?void 0:i.meta)??{description:""},content:((r=a[2])==null?void 0:r.content)??"",clone:a[1]}}),n.$on("save",a[5]),{c(){O(n.$$.fragment)},l(t){P(n.$$.fragment,t)},m(t,c){j(n,t,c),s=!0},p(t,c){var l,d,p,g;const m={};c&4&&(m.id=((l=t[2])==null?void 0:l.id)??""),c&4&&(m.name=((d=t[2])==null?void 0:d.name)??""),c&4&&(m.meta=((p=t[2])==null?void 0:p.meta)??{description:""}),c&4&&(m.content=((g=t[2])==null?void 0:g.content)??""),c&2&&(m.clone=t[1]),n.$set(m)},i(t){s||(f(n.$$.fragment,t),s=!0)},o(t){u(n.$$.fragment,t),s=!1},d(t){q(n,t)}}}function B(a){let n,s,o=a[0]&&k(a);return{c(){o&&o.c(),n=_()},l(e){o&&o.l(e),n=_()},m(e,i){o&&o.m(e,i),S(e,n,i),s=!0},p(e,[i]){e[0]?o?(o.p(e,i),i&1&&f(o,1)):(o=k(e),o.c(),f(o,1),o.m(n.parentNode,n)):o&&($(),u(o,1,1,()=>{o=null}),T())},i(e){s||(f(o),s=!0)},o(e){u(o),s=!1},d(e){e&&N(n),o&&o.d(e)}}}function D(a,n,s){let o;const e=y("i18n");v(a,e,l=>s(6,o=l));let i=!1,r=!1,t=null;const c=async l=>{console.log(l),await I(localStorage.token,{id:l.id,name:l.name,meta:l.meta,content:l.content}).catch(p=>(w.error(p),null))&&(w.success(o.t("Tool created successfully")),A.set(await L(localStorage.token)),await H("/workspace/tools"))};return C(()=>{window.addEventListener("message",async l=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(l.origin)&&(s(2,t=JSON.parse(l.data)),console.log(t))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.tool&&(s(2,t=JSON.parse(sessionStorage.tool)),sessionStorage.removeItem("tool"),console.log(t),s(1,r=!0)),s(0,i=!0)}),[i,r,t,e,c,l=>{c(l.detail)}]}class W extends J{constructor(n){super(),M(this,n,D,B,h,{})}}export{W as component};
//# sourceMappingURL=23.3b2e121e.js.map
