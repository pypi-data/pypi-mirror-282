{"version":3,"file":"24.fdbc276a.js","sources":["../../../../../../src/routes/(app)/workspace/tools/edit/+page.svelte"],"sourcesContent":["<script>\n\timport { goto } from '$app/navigation';\n\timport { page } from '$app/stores';\n\timport { getToolById, getTools, updateToolById } from '$lib/apis/tools';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport ToolkitEditor from '$lib/components/workspace/Tools/ToolkitEditor.svelte';\n\timport { tools } from '$lib/stores';\n\timport { onMount, getContext } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\tconst i18n = getContext('i18n');\n\n\tlet tool = null;\n\n\tconst saveHandler = async (data) => {\n\t\tconsole.log(data);\n\t\tconst res = await updateToolById(localStorage.token, tool.id, {\n\t\t\tid: data.id,\n\t\t\tname: data.name,\n\t\t\tmeta: data.meta,\n\t\t\tcontent: data.content\n\t\t}).catch((error) => {\n\t\t\ttoast.error(error);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Tool updated successfully'));\n\t\t\ttools.set(await getTools(localStorage.token));\n\n\t\t\t// await goto('/workspace/tools');\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\tconsole.log('mounted');\n\t\tconst id = $page.url.searchParams.get('id');\n\n\t\tif (id) {\n\t\t\ttool = await getToolById(localStorage.token, id).catch((error) => {\n\t\t\t\ttoast.error(error);\n\t\t\t\tgoto('/workspace/tools');\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tconsole.log(tool);\n\t\t}\n\t});\n</script>\n\n{#if tool}\n\t<ToolkitEditor\n\t\tedit={true}\n\t\tid={tool.id}\n\t\tname={tool.name}\n\t\tmeta={tool.meta}\n\t\tcontent={tool.content}\n\t\ton:save={(e) => {\n\t\t\tsaveHandler(e.detail);\n\t\t}}\n\t/>\n{:else}\n\t<div class=\"flex items-center justify-center h-full\">\n\t\t<div class=\" pb-16\">\n\t\t\t<Spinner />\n\t\t</div>\n\t</div>\n{/if}\n"],"names":["insert_hydration","target","div1","anchor","append_hydration","div0","ctx","dirty","toolkiteditor_changes","i18n","getContext","tool","saveHandler","data","updateToolById","error","toast","$i18n","tools","getTools","onMount","id","$page","getToolById","goto","e"],"mappings":"k8BA8DCA,EAIKC,EAAAC,EAAAC,CAAA,EAHJC,EAEKF,EAAAG,CAAA,+JAbC,GACF,GAAAC,KAAK,GACH,KAAAA,KAAK,KACL,KAAAA,KAAK,KACF,QAAAA,KAAK,sHAHVC,EAAA,IAAAC,EAAA,GAAAF,KAAK,IACHC,EAAA,IAAAC,EAAA,KAAAF,KAAK,MACLC,EAAA,IAAAC,EAAA,KAAAF,KAAK,MACFC,EAAA,IAAAC,EAAA,QAAAF,KAAK,uKANXA,EAAI,CAAA,EAAA,8WAxCFG,EAAOC,EAAW,MAAM,qBAE1B,IAAAC,EAAO,KAEL,MAAAC,QAAqBC,GAAI,CAC9B,QAAQ,IAAIA,CAAI,EACP,MAASC,EAAe,aAAa,MAAOH,EAAK,GAAE,CAC3D,GAAIE,EAAK,GACT,KAAMA,EAAK,KACX,KAAMA,EAAK,KACX,QAASA,EAAK,OACZ,CAAA,EAAA,MAAOE,IACTC,EAAM,MAAMD,CAAK,EACV,SAIPC,EAAM,QAAQC,EAAM,EAAE,2BAA2B,CAAA,EACjDC,EAAM,IAAG,MAAOC,EAAS,aAAa,KAAK,CAAA,IAM7C,OAAAC,EAAO,SAAA,CACN,QAAQ,IAAI,SAAS,QACfC,EAAKC,EAAM,IAAI,aAAa,IAAI,IAAI,EAEtCD,QACHV,EAAI,MAASY,EAAY,aAAa,MAAOF,CAAE,EAAE,MAAON,IACvDC,EAAM,MAAMD,CAAK,EACjBS,EAAK,kBAAkB,EAChB,QAGR,QAAQ,IAAIb,CAAI,YAYPc,GAAC,CACVb,EAAYa,EAAE,MAAM"}