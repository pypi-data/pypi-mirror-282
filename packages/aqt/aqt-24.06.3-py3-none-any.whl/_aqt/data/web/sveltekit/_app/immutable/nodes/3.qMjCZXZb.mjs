var De=Object.defineProperty;var Fe=(a,e,r)=>e in a?De(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r;var E=(a,e,r)=>(Fe(a,typeof e!="symbol"?e+"":e,r),r);import{w as ve,x as Te,p as Ee}from"../chunks/backend.dXWO455a.mjs";import{al as Ve,aP as Oe,aQ as Be,aR as ze,aS as Le,aT as je,aU as Pe,aV as Ae,aW as Re,aX as We,aY as qe}from"../chunks/ftl.IxHLS1AB.mjs";import{r as re}from"../chunks/index.YmSRfxF3.mjs";import{i as se,S as Z}from"../chunks/Select.c0X91UPX.mjs";import{S as j,i as P,s as A,e as N,c as I,b as k,f as m,F as z,h as _,n as V,B as g,C as h,D as b,v as c,r as p,E as v,l as X,a as D,g as F,t as O,d as B,k as H,N as w,W,q as G,u as U,a3 as we,j as T,V as He,$ as Me,a0 as Ge,G as Ue,a9 as Qe,aa as Xe,P as le,A as Ye,y as Je,z as ye,a1 as Ke,a2 as Ze}from"../chunks/Component.C0CSGRj9.mjs";import"../chunks/index.HrFqG6o2.mjs";import{a as xe}from"../chunks/helpers.Gx5FBjbA.mjs";import{C as x}from"../chunks/Container.gOvVoQ_U.mjs";import{R as q}from"../chunks/Row.xEM4s8hj.mjs";import{S as et}from"../chunks/StickyContainer.oBu6HC1z.mjs";import{T as Ne}from"../chunks/TitledContainer._EA_hSs6.mjs";import{e as Y}from"../chunks/each.AJyTDN0I.mjs";import{C as J}from"../chunks/Col.CsBfgooU.mjs";import{B as tt}from"../chunks/ButtonToolbar.590ag9iy.mjs";import{b as nt,S as rt,I as ee,c as st,d as lt,p as at,o as ae,m as ot}from"../chunks/Shortcut.FTojhkHY.mjs";import{B as it}from"../chunks/ButtonGroup.UaERT0qk.mjs";import{L as ft}from"../chunks/LabelButton.S5BYDB1K.mjs";import{s as oe}from"../chunks/index.IuGsAnL9.mjs";import{B as ut}from"../chunks/Badge.nHU7HYX0.mjs";function ie(a){return a.map(e=>e??-1)}function fe(a){return a.map(e=>e===-1?null:e)}class ue{constructor(e){E(this,"fields");E(this,"templates");E(this,"oldNotetypeName");E(this,"isCloze");E(this,"info");var t,n,s;this.info=e;const r=((t=e.input)==null?void 0:t.newTemplates)??[];this.isCloze=((n=e.input)==null?void 0:n.isCloze)??!1,r.length>0&&(this.templates=fe(r)),this.fields=fe(((s=e.input)==null?void 0:s.newFields)??[]),this.oldNotetypeName=e.oldNotetypeName}mapForContext(e){return e==1?this.templates??[]:this.fields}getOldIndex(e,r){return this.mapForContext(e)[r]??this.getOldNamesIncludingNothing(e).length-1}getOldNamesIncludingNothing(e){return[...this.getOldNames(e),Ve()]}getOldNames(e){return e==1?this.info.oldTemplateNames:this.info.oldFieldNames}getOldNotetypeName(){return this.info.oldNotetypeName}getNewName(e,r){return(e==1?this.info.newTemplateNames:this.info.newFieldNames)[r]}unusedItems(e){const r=new Set(this.mapForContext(e).filter(l=>l!==null)),t=this.getOldNames(e);return[...Array(t.length).keys()].filter(l=>!r.has(l)).map(l=>t[l])}unchanged(){var e;return this.input().newNotetypeId===this.input().oldNotetypeId&&se(this.fields,[...Array(this.fields.length).keys()])&&se(this.templates,[...Array(((e=this.templates)==null?void 0:e.length)??0).keys()])}input(){return this.info.input}intoInput(){const e=this.info.input;return e.newFields=ie(this.fields),this.templates&&(e.newTemplates=ie(this.templates)),e}}var L=(a=>(a[a.Field=0]="Field",a[a.Template=1]="Template",a))(L||{});class ct{constructor(e,r){E(this,"info");E(this,"notetypes");E(this,"info_");E(this,"infoSetter");E(this,"notetypeNames");E(this,"notetypesSetter");this.info_=new ue(r),this.info=re(this.info_,t=>{this.infoSetter=t}),this.notetypeNames=e,this.notetypes=re(this.buildNotetypeList(),t=>{this.notetypesSetter=t})}async setTargetNotetypeIndex(e){this.info_.input().newNotetypeId=this.notetypeNames.entries[e].id,this.notetypesSetter(this.buildNotetypeList());const{oldNotetypeId:r,newNotetypeId:t}=this.info_.input(),n=await ve({oldNotetypeId:r,newNotetypeId:t});this.info_=new ue(n),this.info_.unusedItems(0),this.infoSetter(this.info_)}setOldIndex(e,r,t){const n=this.info_.mapForContext(e),s=this.info_.getOldNames(e),l=t<s.length?t:null;if(!(e==0)&&l!==null)for(let i=0;i<n.length;i++)n[i]===l&&(n[i]=null);n[r]=l,this.infoSetter(this.info_)}dataForSaving(){return this.info_.intoInput()}async save(){if(this.info_.unchanged()){alert("No changes to save");return}await Te(this.dataForSaving())}buildNotetypeList(){const e=this.info_.input().newNotetypeId;return this.notetypeNames.entries.map((r,t)=>({idx:t,name:r.name,current:r.id===e}))}}const $t=async({params:a})=>{const[e,r]=a.notetypeIds.split("/"),t=BigInt(e),n=r?BigInt(r):t,s=Ee({}),l=ve({oldNotetypeId:t,newNotetypeId:n}),[o,i]=await Promise.all([s,l]);return{state:new ct(o,i)}},Fn=Object.freeze(Object.defineProperty({__proto__:null,load:$t},Symbol.toStringTag,{value:"Module"}));function mt(a){let e;return{c(){e=N("div"),this.h()},l(r){e=I(r,"DIV",{class:!0}),k(e).forEach(m),this.h()},h(){z(e,"class","svelte-1xardfc")},m(r,t){_(r,e,t)},p:V,i:V,o:V,d(r){r&&m(e)}}}class pt extends j{constructor(e){super(),P(this,e,null,mt,A,{})}}function dt(a){let e,r;return e=new Z({props:{value:a[2],label:a[4],list:a[3].getOldNamesIncludingNothing(a[0])}}),e.$on("change",a[6]),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&4&&(s.value=t[2]),n&16&&(s.label=t[4]),n&9&&(s.list=t[3].getOldNamesIncludingNothing(t[0])),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function _t(a){let e=a[3].getNewName(a[0],a[1])+"",r;return{c(){r=O(e)},l(t){r=B(t,e)},m(t,n){_(t,r,n)},p(t,n){n&11&&e!==(e=t[3].getNewName(t[0],t[1])+"")&&H(r,e)},d(t){t&&m(r)}}}function gt(a){let e,r,t,n;return e=new J({props:{$$slots:{default:[dt]},$$scope:{ctx:a}}}),t=new J({props:{$$slots:{default:[_t]},$$scope:{ctx:a}}}),{c(){g(e.$$.fragment),r=D(),g(t.$$.fragment)},l(s){h(e.$$.fragment,s),r=F(s),h(t.$$.fragment,s)},m(s,l){b(e,s,l),_(s,r,l),b(t,s,l),n=!0},p(s,l){const o={};l&285&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const i={};l&267&&(i.$$scope={dirty:l,ctx:s}),t.$set(i)},i(s){n||(c(e.$$.fragment,s),c(t.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),n=!1},d(s){s&&m(r),v(e,s),v(t,s)}}}function ht(a){let e,r;return e=new q({props:{$$slots:{default:[gt]},$$scope:{ctx:a}}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&287&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function bt(a,e,r){let t,n,s,{state:l}=e,{ctx:o}=e,{newIndex:i}=e;const u=l.info;X(a,u,$=>r(3,s=$));function f($){r(2,t=$.detail.value),l.setOldIndex(o,i,t)}return a.$$set=$=>{"state"in $&&r(7,l=$.state),"ctx"in $&&r(0,o=$.ctx),"newIndex"in $&&r(1,i=$.newIndex)},a.$$.update=()=>{a.$$.dirty&11&&r(2,t=s.getOldIndex(o,i)),a.$$.dirty&13&&r(4,n=s.getOldNamesIncludingNothing(o)[t])},[o,i,t,s,n,u,f,l]}class vt extends j{constructor(e){super(),P(this,e,bt,ht,A,{state:7,ctx:0,newIndex:1})}}function ce(a,e,r){const t=a.slice();return t[4]=e[r],t[6]=r,t}function $e(a){let e,r;return e=new vt({props:{state:a[0],ctx:a[1],newIndex:a[6]}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.state=t[0]),n&2&&(s.ctx=t[1]),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function wt(a){let e,r,t=Y(a[2].mapForContext(a[1])),n=[];for(let l=0;l<t.length;l+=1)n[l]=$e(ce(a,t,l));const s=l=>p(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=W()},l(l){for(let o=0;o<n.length;o+=1)n[o].l(l);e=W()},m(l,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(l,o);_(l,e,o),r=!0},p(l,o){if(o&7){t=Y(l[2].mapForContext(l[1]));let i;for(i=0;i<t.length;i+=1){const u=ce(l,t,i);n[i]?(n[i].p(u,o),c(n[i],1)):(n[i]=$e(u),n[i].c(),c(n[i],1),n[i].m(e.parentNode,e))}for(G(),i=t.length;i<n.length;i+=1)s(i);U()}},i(l){if(!r){for(let o=0;o<t.length;o+=1)c(n[o]);r=!0}},o(l){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)p(n[o]);r=!1},d(l){l&&m(e),we(n,l)}}}function yt(a){let e,r,t,n,s,l;return e=new pt({}),n=new x({props:{$$slots:{default:[wt]},$$scope:{ctx:a}}}),{c(){r=N("div"),g(e.$$.fragment),t=D(),s=N("div"),g(n.$$.fragment),this.h()},l(o){r=I(o,"DIV",{style:!0});var i=k(r);h(e.$$.fragment,i),t=F(o),s=I(o,"DIV",{style:!0});var u=k(s);h(n.$$.fragment,u),this.h()},h(){w(r,"display","contents"),w(r,"--height","0.5rem"),w(s,"display","contents"),w(s,"--gutter-inline","0.5rem"),w(s,"--gutter-block","0.15rem")},m(o,i){_(o,r,i),b(e,r,null),_(o,t,i),_(o,s,i),b(n,s,null),l=!0},p(o,[i]){const u={};i&135&&(u.$$scope={dirty:i,ctx:o}),n.$set(u)},i(o){l||(c(e.$$.fragment,o),c(n.$$.fragment,o),l=!0)},o(o){p(e.$$.fragment,o),p(n.$$.fragment,o),l=!1},d(o){o&&m(t),o&&e&&m(r),v(e,o),o&&n&&m(s),v(n,o)}}}function Nt(a,e,r){let t,{state:n}=e,{ctx:s}=e;const l=n.info;return X(a,l,o=>r(2,t=o)),a.$$set=o=>{"state"in o&&r(0,n=o.state),"ctx"in o&&r(1,s=o.ctx)},[n,s,t,l]}class Ie extends j{constructor(e){super(),P(this,e,Nt,yt,A,{state:0,ctx:1})}}function It(a){let e,r=Oe()+"",t;return{c(){e=N("div"),t=O(r),this.h()},l(n){e=I(n,"DIV",{class:!0});var s=k(e);t=B(s,r),s.forEach(m),this.h()},h(){z(e,"class","save svelte-1polrdz")},m(n,s){_(n,e,s),T(e,t)},p:V,d(n){n&&m(e)}}}function kt(a){let e,r,t,n,s;return e=new ft({props:{primary:!0,tooltip:nt(me),$$slots:{default:[It]},$$scope:{ctx:a}}}),e.$on("click",a[0]),n=new rt({props:{keyCombination:me}}),n.$on("action",a[0]),{c(){r=N("div"),g(e.$$.fragment),t=D(),g(n.$$.fragment),this.h()},l(l){r=I(l,"DIV",{style:!0});var o=k(r);h(e.$$.fragment,o),t=F(l),h(n.$$.fragment,l),this.h()},h(){w(r,"display","contents"),w(r,"--border-left-radius","5px"),w(r,"--border-right-radius","5px")},m(l,o){_(l,r,o),b(e,r,null),_(l,t,o),b(n,l,o),s=!0},p(l,o){const i={};o&4&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){s||(c(e.$$.fragment,l),c(n.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),s=!1},d(l){l&&m(t),l&&e&&m(r),v(e,l),v(n,l)}}}function St(a){let e,r;return e=new it({props:{$$slots:{default:[kt]},$$scope:{ctx:a}}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&4&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}const me="Control+Enter";function Ct(a,e,r){let{state:t}=e;function n(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),t.save()}return a.$$set=s=>{"state"in s&&r(1,t=s.state)},[n,t]}class Dt extends j{constructor(e){super(),P(this,e,Ct,St,A,{state:1})}}function Ft(a){let e,r;return e=new ee({props:{icon:st}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Tt(a){let e,r;return e=new ee({props:{icon:lt}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Et(a){let e,r,t,n,s,l,o,i,u,f,$,d;r=new Z({props:{label:a[4].oldNotetypeName,value:1,list:[1],disabled:!0}});const S=[Tt,Ft],K=[];function Se(y,C){return window.getComputedStyle(document.body).direction=="rtl"?0:1}s=Se(),l=K[s]=S[s](a);function Ce(y){a[8](y)}let te={list:a[2],label:a[3]};return a[1]!==void 0&&(te.value=a[1]),i=new Z({props:te}),He.push(()=>Me(i,"value",Ce)),$=new Dt({props:{state:a[0]}}),{c(){e=N("div"),g(r.$$.fragment),t=D(),n=N("div"),l.c(),o=D(),g(i.$$.fragment),f=D(),g($.$$.fragment),this.h()},l(y){e=I(y,"DIV",{class:!0});var C=k(e);h(r.$$.fragment,C),t=F(C),n=I(C,"DIV",{class:!0});var M=k(n);l.l(M),M.forEach(m),o=F(C),h(i.$$.fragment,C),C.forEach(m),f=F(y),h($.$$.fragment,y),this.h()},h(){z(n,"class","arrow-container svelte-ng49hq"),z(e,"class","d-flex flex-row w-100")},m(y,C){_(y,e,C),b(r,e,null),T(e,t),T(e,n),K[s].m(n,null),T(e,o),b(i,e,null),_(y,f,C),b($,y,C),d=!0},p(y,C){const M={};C&16&&(M.label=y[4].oldNotetypeName),r.$set(M);const Q={};C&4&&(Q.list=y[2]),C&8&&(Q.label=y[3]),!u&&C&2&&(u=!0,Q.value=y[1],Ge(()=>u=!1)),i.$set(Q);const ne={};C&1&&(ne.state=y[0]),$.$set(ne)},i(y){d||(c(r.$$.fragment,y),c(l),c(i.$$.fragment,y),c($.$$.fragment,y),d=!0)},o(y){p(r.$$.fragment,y),p(l),p(i.$$.fragment,y),p($.$$.fragment,y),d=!1},d(y){y&&(m(e),m(f)),v(r),K[s].d(),v(i),v($,y)}}}function Vt(a){let e,r;return e=new tt({props:{class:"justify-content-between",wrap:!1,$$slots:{default:[Et]},$$scope:{ctx:a}}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&543&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ot(a,e,r){let t,n,s,l,{state:o}=e;const i=o.notetypes;X(a,i,d=>r(7,s=d));const u=o.info;X(a,u,d=>r(4,l=d));let f=s.findIndex(d=>d.current);function $(d){f=d,r(1,f)}return a.$$set=d=>{"state"in d&&r(0,o=d.state)},a.$$.update=()=>{a.$$.dirty&128&&r(2,t=Array.from(s,d=>d.name)),a.$$.dirty&6&&r(3,n=t[f]),a.$$.dirty&3&&o.setTargetNotetypeIndex(f)},[o,f,t,n,l,i,u,s,$]}class Bt extends j{constructor(e){super(),P(this,e,Ot,Vt,A,{state:0})}}function pe(a,e,r){const t=a.slice();return t[8]=e[r],t}function de(a){let e,r,t,n,s,l,o,i;return r=new ut({props:{iconSize:80,$$slots:{default:[zt]},$$scope:{ctx:a}}}),{c(){e=N("div"),g(r.$$.fragment),t=D(),n=O(a[4]),this.h()},l(u){e=I(u,"DIV",{class:!0,role:!0,tabindex:!0,"aria-expanded":!0});var f=k(e);h(r.$$.fragment,f),t=F(f),n=B(f,a[4]),f.forEach(m),this.h()},h(){z(e,"class","clickable svelte-18ivrjn"),z(e,"role","button"),z(e,"tabindex","0"),z(e,"aria-expanded",s=!a[1])},m(u,f){_(u,e,f),b(r,e,null),T(e,t),T(e,n),l=!0,o||(i=[le(e,"click",a[6]),le(e,"keydown",function(){Ye(ae(a[7]))&&ae(a[7]).apply(this,arguments)})],o=!0)},p(u,f){a=u;const $={};f&2056&&($.$$scope={dirty:f,ctx:a}),r.$set($),(!l||f&16)&&H(n,a[4]),(!l||f&2&&s!==(s=!a[1]))&&z(e,"aria-expanded",s)},i(u){l||(c(r.$$.fragment,u),l=!0)},o(u){p(r.$$.fragment,u),l=!1},d(u){u&&m(e),v(r),o=!1,Je(i)}}}function zt(a){let e,r;return e=new ee({props:{icon:a[3]}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&8&&(s.icon=t[3]),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Lt(a){let e,r=Y(a[0]),t=[];for(let n=0;n<r.length;n+=1)t[n]=_e(pe(a,r,n));return{c(){e=N("ul");for(let n=0;n<t.length;n+=1)t[n].c()},l(n){e=I(n,"UL",{});var s=k(e);for(let l=0;l<t.length;l+=1)t[l].l(s);s.forEach(m)},m(n,s){_(n,e,s);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(n,s){if(s&1){r=Y(n[0]);let l;for(l=0;l<r.length;l+=1){const o=pe(n,r,l);t[l]?t[l].p(o,s):(t[l]=_e(o),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=r.length}},d(n){n&&m(e),we(t,n)}}}function jt(a){let e,r=a[0].slice(0,R).join(", ")+"",t,n,s=a[0].length>R&&ge(a);return{c(){e=N("div"),t=O(r),n=D(),s&&s.c()},l(l){e=I(l,"DIV",{});var o=k(e);t=B(o,r),n=F(o),s&&s.l(o),o.forEach(m)},m(l,o){_(l,e,o),T(e,t),T(e,n),s&&s.m(e,null)},p(l,o){o&1&&r!==(r=l[0].slice(0,R).join(", ")+"")&&H(t,r),l[0].length>R?s?s.p(l,o):(s=ge(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(l){l&&m(e),s&&s.d()}}}function _e(a){let e,r=a[8]+"",t;return{c(){e=N("li"),t=O(r)},l(n){e=I(n,"LI",{});var s=k(e);t=B(s,r),s.forEach(m)},m(n,s){_(n,e,s),T(e,t)},p(n,s){s&1&&r!==(r=n[8]+"")&&H(t,r)},d(n){n&&m(e)}}}function ge(a){let e,r=a[0].length-R+"",t,n;return{c(){e=O("... (+"),t=O(r),n=O(")")},l(s){e=B(s,"... (+"),t=B(s,r),n=B(s,")")},m(s,l){_(s,e,l),_(s,t,l),_(s,n,l)},p(s,l){l&1&&r!==(r=s[0].length-R+"")&&H(t,r)},d(s){s&&(m(e),m(t),m(n))}}}function Pt(a){let e,r,t,n,s,l,o,i=a[0].length>R&&de(a);function u(d,S){return d[1]?jt:Lt}let f=u(a),$=f(a);return{c(){e=N("div"),i&&i.c(),r=D(),t=O(a[2]),n=D(),$.c(),this.h()},l(d){e=I(d,"DIV",{class:!0});var S=k(e);i&&i.l(S),r=F(S),t=B(S,a[2]),n=F(S),$.l(S),S.forEach(m),this.h()},h(){z(e,"class","alert alert-warning")},m(d,S){_(d,e,S),i&&i.m(e,null),T(e,r),T(e,t),T(e,n),$.m(e,null),o=!0},p(d,[S]){d[0].length>R?i?(i.p(d,S),S&1&&c(i,1)):(i=de(d),i.c(),c(i,1),i.m(e,r)):i&&(G(),p(i,1,1,()=>{i=null}),U()),(!o||S&4)&&H(t,d[2]),f===(f=u(d))&&$?$.p(d,S):($.d(1),$=f(d),$&&($.c(),$.m(e,null)))},i(d){o||(c(i),d&&Ue(()=>{o&&(l&&l.end(1),s=Qe(e,oe,{}),s.start())}),o=!0)},o(d){p(i),s&&s.invalidate(),d&&(l=Xe(e,oe,{})),o=!1},d(d){d&&m(e),i&&i.d(),$.d(),d&&l&&l.end()}}}const R=3;function At(a,e,r){let t,n,{unused:s}=e,{ctx:l}=e,o,i=!0;const u=()=>r(1,i=!i),f=()=>r(1,i=!i);return a.$$set=$=>{"unused"in $&&r(0,s=$.unused),"ctx"in $&&r(5,l=$.ctx)},a.$$.update=()=>{a.$$.dirty&32&&r(2,o=l===L.Field?Be():ze()),a.$$.dirty&2&&r(4,t=i?Le():je()),a.$$.dirty&2&&r(3,n=i?at:ot)},[s,i,o,n,t,l,u,f]}class Rt extends j{constructor(e){super(),P(this,e,At,Pt,A,{unused:0,ctx:5})}}function he(a){let e,r;return e=new Rt({props:{unused:a[2],ctx:a[0]}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&4&&(s.unused=t[2]),n&1&&(s.ctx=t[0]),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function be(a){let e,r,t;return e=new x({props:{$$slots:{default:[Mt]},$$scope:{ctx:a}}}),{c(){r=N("div"),g(e.$$.fragment),this.h()},l(n){r=I(n,"DIV",{style:!0});var s=k(r);h(e.$$.fragment,s),this.h()},h(){w(r,"display","contents"),w(r,"--gutter-inline","0.5rem"),w(r,"--gutter-block","0.2rem")},m(n,s){_(n,r,s),b(e,r,null),t=!0},i(n){t||(c(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){n&&e&&m(r),v(e,n)}}}function Wt(a){let e,r=Pe()+"",t;return{c(){e=N("b"),t=O(r)},l(n){e=I(n,"B",{});var s=k(e);t=B(s,r),s.forEach(m)},m(n,s){_(n,e,s),T(e,t)},p:V,d(n){n&&m(e)}}}function qt(a){let e,r=Ae()+"",t;return{c(){e=N("b"),t=O(r)},l(n){e=I(n,"B",{});var s=k(e);t=B(s,r),s.forEach(m)},m(n,s){_(n,e,s),T(e,t)},p:V,d(n){n&&m(e)}}}function Ht(a){let e,r,t,n,s,l;return e=new J({props:{$$slots:{default:[Wt]},$$scope:{ctx:a}}}),n=new J({props:{$$slots:{default:[qt]},$$scope:{ctx:a}}}),{c(){r=N("div"),g(e.$$.fragment),t=D(),s=N("div"),g(n.$$.fragment),this.h()},l(o){r=I(o,"DIV",{style:!0});var i=k(r);h(e.$$.fragment,i),t=F(o),s=I(o,"DIV",{style:!0});var u=k(s);h(n.$$.fragment,u),this.h()},h(){w(r,"display","contents"),w(r,"--col-size",1),w(s,"display","contents"),w(s,"--col-size",1)},m(o,i){_(o,r,i),b(e,r,null),_(o,t,i),_(o,s,i),b(n,s,null),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const f={};i&32&&(f.$$scope={dirty:i,ctx:o}),n.$set(f)},i(o){l||(c(e.$$.fragment,o),c(n.$$.fragment,o),l=!0)},o(o){p(e.$$.fragment,o),p(n.$$.fragment,o),l=!1},d(o){o&&m(t),o&&e&&m(r),v(e,o),o&&n&&m(s),v(n,o)}}}function Mt(a){let e,r,t;return e=new q({props:{$$slots:{default:[Ht]},$$scope:{ctx:a}}}),{c(){r=N("div"),g(e.$$.fragment),this.h()},l(n){r=I(n,"DIV",{style:!0});var s=k(r);h(e.$$.fragment,s),this.h()},h(){w(r,"display","contents"),w(r,"--cols",2)},m(n,s){_(n,r,s),b(e,r,null),t=!0},p(n,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(c(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){n&&e&&m(r),v(e,n)}}}function Gt(a){let e,r,t,n=a[2].length>0&&he(a),s=(a[1].templates||a[0]===L.Field)&&be(a);return{c(){n&&n.c(),e=D(),s&&s.c(),r=W()},l(l){n&&n.l(l),e=F(l),s&&s.l(l),r=W()},m(l,o){n&&n.m(l,o),_(l,e,o),s&&s.m(l,o),_(l,r,o),t=!0},p(l,[o]){l[2].length>0?n?(n.p(l,o),o&4&&c(n,1)):(n=he(l),n.c(),c(n,1),n.m(e.parentNode,e)):n&&(G(),p(n,1,1,()=>{n=null}),U()),l[1].templates||l[0]===L.Field?s?o&3&&c(s,1):(s=be(l),s.c(),c(s,1),s.m(r.parentNode,r)):s&&(G(),p(s,1,1,()=>{s=null}),U())},i(l){t||(c(n),c(s),t=!0)},o(l){p(n),p(s),t=!1},d(l){l&&(m(e),m(r)),n&&n.d(l),s&&s.d(l)}}}function Ut(a,e,r){let t,n,s,l=V,o=()=>(l(),l=ye(t,f=>r(1,s=f)),t);a.$$.on_destroy.push(()=>l());let{state:i}=e,{ctx:u}=e;return a.$$set=f=>{"state"in f&&r(4,i=f.state),"ctx"in f&&r(0,u=f.ctx)},a.$$.update=()=>{a.$$.dirty&16&&o(r(3,t=i.info)),a.$$.dirty&3&&r(2,n=s.isCloze&&u===L.Template?[]:s.unusedItems(u))},[u,s,n,t,i]}class ke extends j{constructor(e){super(),P(this,e,Ut,Gt,A,{state:4,ctx:0})}}function Qt(a){let e,r;return e=new Bt({props:{state:a[0]}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.state=t[0]),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Xt(a){let e,r,t,n;return e=new ke({props:{state:a[0],ctx:L.Field}}),t=new Ie({props:{state:a[0],ctx:L.Field}}),{c(){g(e.$$.fragment),r=D(),g(t.$$.fragment)},l(s){h(e.$$.fragment,s),r=F(s),h(t.$$.fragment,s)},m(s,l){b(e,s,l),_(s,r,l),b(t,s,l),n=!0},p(s,l){const o={};l&1&&(o.state=s[0]),e.$set(o);const i={};l&1&&(i.state=s[0]),t.$set(i)},i(s){n||(c(e.$$.fragment,s),c(t.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),n=!1},d(s){s&&m(r),v(e,s),v(t,s)}}}function Yt(a){let e,r;return e=new q({props:{$$slots:{default:[Xt]},$$scope:{ctx:a}}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&9&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Jt(a){let e,r;return e=new Ne({props:{title:Re(),$$slots:{default:[Yt]},$$scope:{ctx:a}}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&9&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Kt(a){let e,r,t=xe(qe())+"";return{c(){e=N("div"),r=new Ke(!1),this.h()},l(n){e=I(n,"DIV",{});var s=k(e);r=Ze(s,!1),s.forEach(m),this.h()},h(){r.a=null},m(n,s){_(n,e,s),r.m(t,e)},p:V,i:V,o:V,d(n){n&&m(e)}}}function Zt(a){let e,r;return e=new Ie({props:{state:a[0],ctx:L.Template}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.state=t[0]),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function xt(a){let e,r,t,n,s,l;e=new ke({props:{state:a[0],ctx:L.Template}});const o=[Zt,Kt],i=[];function u(f,$){return f[2].templates?0:1}return t=u(a),n=i[t]=o[t](a),{c(){g(e.$$.fragment),r=D(),n.c(),s=W()},l(f){h(e.$$.fragment,f),r=F(f),n.l(f),s=W()},m(f,$){b(e,f,$),_(f,r,$),i[t].m(f,$),_(f,s,$),l=!0},p(f,$){const d={};$&1&&(d.state=f[0]),e.$set(d);let S=t;t=u(f),t===S?i[t].p(f,$):(G(),p(i[S],1,1,()=>{i[S]=null}),U(),n=i[t],n?n.p(f,$):(n=i[t]=o[t](f),n.c()),c(n,1),n.m(s.parentNode,s))},i(f){l||(c(e.$$.fragment,f),c(n),l=!0)},o(f){p(e.$$.fragment,f),p(n),l=!1},d(f){f&&(m(r),m(s)),v(e,f),i[t].d(f)}}}function en(a){let e,r;return e=new q({props:{$$slots:{default:[xt]},$$scope:{ctx:a}}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&13&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function tn(a){let e,r;return e=new Ne({props:{title:We(),$$slots:{default:[en]},$$scope:{ctx:a}}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&13&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function nn(a){let e,r,t,n,s,l;return e=new q({props:{$$slots:{default:[Jt]},$$scope:{ctx:a}}}),n=new q({props:{$$slots:{default:[tn]},$$scope:{ctx:a}}}),{c(){r=N("div"),g(e.$$.fragment),t=D(),s=N("div"),g(n.$$.fragment),this.h()},l(o){r=I(o,"DIV",{style:!0});var i=k(r);h(e.$$.fragment,i),t=F(o),s=I(o,"DIV",{style:!0});var u=k(s);h(n.$$.fragment,u),this.h()},h(){w(r,"display","contents"),w(r,"--cols",2),w(s,"display","contents"),w(s,"--cols",2)},m(o,i){_(o,r,i),b(e,r,null),_(o,t,i),_(o,s,i),b(n,s,null),l=!0},p(o,i){const u={};i&9&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const f={};i&13&&(f.$$scope={dirty:i,ctx:o}),n.$set(f)},i(o){l||(c(e.$$.fragment,o),c(n.$$.fragment,o),l=!0)},o(o){p(e.$$.fragment,o),p(n.$$.fragment,o),l=!1},d(o){o&&m(t),o&&e&&m(r),v(e,o),o&&n&&m(s),v(n,o)}}}function rn(a){let e,r,t,n,s,l;return e=new et({props:{breakpoint:"sm",$$slots:{default:[Qt]},$$scope:{ctx:a}}}),n=new x({props:{breakpoint:"sm",$$slots:{default:[nn]},$$scope:{ctx:a}}}),{c(){r=N("div"),g(e.$$.fragment),t=D(),s=N("div"),g(n.$$.fragment),this.h()},l(o){r=I(o,"DIV",{style:!0});var i=k(r);h(e.$$.fragment,i),t=F(o),s=I(o,"DIV",{style:!0});var u=k(s);h(n.$$.fragment,u),this.h()},h(){w(r,"display","contents"),w(r,"--gutter-block","0.5rem"),w(r,"--gutter-inline","0.25rem"),w(r,"--sticky-borders","0 0 1px"),w(s,"display","contents"),w(s,"--gutter-inline","0.25rem"),w(s,"--gutter-block","0.75rem")},m(o,i){_(o,r,i),b(e,r,null),_(o,t,i),_(o,s,i),b(n,s,null),l=!0},p(o,[i]){const u={};i&9&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const f={};i&13&&(f.$$scope={dirty:i,ctx:o}),n.$set(f)},i(o){l||(c(e.$$.fragment,o),c(n.$$.fragment,o),l=!0)},o(o){p(e.$$.fragment,o),p(n.$$.fragment,o),l=!1},d(o){o&&m(t),o&&e&&m(r),v(e,o),o&&n&&m(s),v(n,o)}}}function sn(a,e,r){let t,n,s=V,l=()=>(s(),s=ye(t,i=>r(2,n=i)),t);a.$$.on_destroy.push(()=>s());let{state:o}=e;return a.$$set=i=>{"state"in i&&r(0,o=i.state)},a.$$.update=()=>{a.$$.dirty&1&&l(r(1,t=o.info))},[o,t,n]}class ln extends j{constructor(e){super(),P(this,e,sn,rn,A,{state:0})}}function an(a){let e,r;return e=new ln({props:{state:a[0].state}}),{c(){g(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.state=t[0].state),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function on(a,e,r){let{data:t}=e;return a.$$set=n=>{"data"in n&&r(0,t=n.data)},[t]}class Tn extends j{constructor(e){super(),P(this,e,on,an,A,{data:0})}}export{Tn as component,Fn as universal};
