var Xe=Object.defineProperty;var Ze=(s,e,l)=>e in s?Xe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[e]=l;var S=(s,e,l)=>(Ze(s,typeof e!="symbol"?e+"":e,l),l);import{k as Ce,m as xe,n as Be,o as et,p as tt,C as Q,q as ve,r as Oe}from"../chunks/backend.pzQSPd-R.mjs";import{ai as lt,aj as ke,ak as Ke,al as nt,am as st,an as at,ao as ot,ap as rt,aq as it,ar as ut,as as ft,at as ct,au as pt,av as mt,aw as $t,ax as Je,ay as gt,az as _t,aA as dt,aB as ht,E as We,aC as bt,aD as vt,aE as wt,aF as kt,aG as It,aH as Nt,aI as Ct,aJ as Ot,aK as Tt,aL as Dt}from"../chunks/ftl.cKofWsqB.mjs";import{w as ue,r as Te}from"../chunks/index.grcEGtIt.mjs";import{c as Z}from"../chunks/cloneDeep.8E2eT3Ku.mjs";import{i as ie,S as St}from"../chunks/Select.R1roNBxL.mjs";import{S as z,i as B,s as K,e as q,B as d,c as A,b as y,C as h,N as E,h as C,F as b,v as p,r as m,f as w,H as v,a as H,g as M,t as F,d as L,k as Ie,U as R,_ as P,$ as V,l as j,q as fe,u as ce,V as pe,n as D,a3 as me,D as te,j as le,I as Ht,J as Mt,K as Et,L as Rt}from"../chunks/Component.-XTVY6ph.mjs";import"../chunks/index.HrFqG6o2.mjs";import{R as ee}from"../chunks/Row.9I620FT8.mjs";import{I as Pt}from"../chunks/ImportPage.Ru8SBaMG.mjs";import{h as De,u as Vt}from"../chunks/await_block.5NvcH_hP.mjs";import{e as U}from"../chunks/each.mrBeHWFK.mjs";import{T as Ne}from"../chunks/TitledContainer.hh0V9Qqi.mjs";import{C as $e}from"../chunks/Col.0MgQrJqK.mjs";import{H as G,E as ne,S as jt,a as Ye,b as J,C as qt,R as At}from"../chunks/EnumSelectorRow._-wvplcD.mjs";import{T as yt}from"../chunks/TagEditor.WwIHJlIr.mjs";function Se(){}function W(s){return s.notetype.case==="globalNotetype"?s.notetype.value:null}function we(s){return s.deck.case==="deckId"?s.deck.value:null}class Ft{constructor(e,l,t,n){S(this,"path");S(this,"deckNameIds");S(this,"notetypeNameIds");S(this,"defaultDelimiter");S(this,"defaultIsHtml");S(this,"defaultNotetypeId");S(this,"defaultDeckId");S(this,"metadata");S(this,"globalNotetype");S(this,"deckId");S(this,"fieldNames");S(this,"columnOptions");S(this,"lastMetadata");S(this,"lastGlobalNotetype");S(this,"lastDeckId");S(this,"fieldNamesSetter",Se);S(this,"columnOptionsSetter",Se);var r;this.path=e,this.deckNameIds=t.entries,this.notetypeNameIds=l.entries,this.lastMetadata=Z(n),this.metadata=ue(n),this.metadata.subscribe(this.onMetadataChanged.bind(this));const a=W(n);this.lastGlobalNotetype=Z(W(n)),this.globalNotetype=ue(Z(a)),this.globalNotetype.subscribe(this.onGlobalNotetypeChanged.bind(this)),this.lastDeckId=we(n),this.deckId=ue(we(n)),this.deckId.subscribe(this.onDeckIdChanged.bind(this)),this.fieldNames=Te(a===null?Promise.resolve([]):Ce({ntid:a.id}).then(o=>o.vals),o=>{this.fieldNamesSetter=o}),this.columnOptions=Te(He(n),o=>{this.columnOptionsSetter=o}),this.defaultDelimiter=n.delimiter,this.defaultIsHtml=n.isHtml,this.defaultNotetypeId=((r=this.lastGlobalNotetype)==null?void 0:r.id)||null,this.defaultDeckId=this.lastDeckId}doImport(){return xe({path:this.path,metadata:{...this.lastMetadata,preview:[]}},{alertOnError:!1})}async onMetadataChanged(e){var n,a;if(ie(e,this.lastMetadata))return;const l=this.shouldRefetchMetadata(e);l&&(e=await Be({path:this.path,delimiter:e.delimiter,notetypeId:(n=W(e))==null?void 0:n.id,deckId:we(e)??void 0,isHtml:e.isHtml}));const t=W(e);this.globalNotetype.set(t),t!==null&&t.id!==((a=W(this.lastMetadata))==null?void 0:a.id)&&this.fieldNamesSetter(Ce({ntid:t.id}).then(r=>r.vals)),this.shouldRebuildColumnOptions(e)&&this.columnOptionsSetter(He(e)),this.lastMetadata=Z(e),l&&this.metadata.set(e)}shouldRefetchMetadata(e){var l,t;return e.delimiter!==this.lastMetadata.delimiter||e.isHtml!==this.lastMetadata.isHtml||((l=W(e))==null?void 0:l.id)!==((t=W(this.lastMetadata))==null?void 0:t.id)}shouldRebuildColumnOptions(e){return!ie(e.columnLabels,this.lastMetadata.columnLabels)||!ie(e.preview[0],this.lastMetadata.preview[0])}onGlobalNotetypeChanged(e){ie(e,this.lastGlobalNotetype)||(this.lastGlobalNotetype=Z(e),e!==null&&this.metadata.update(l=>(l.notetype.value=e,l)))}onDeckIdChanged(e){e!==this.lastDeckId&&(this.lastDeckId=e,e!==null&&this.metadata.update(l=>(l.deck.value=e,l)))}}function He(s){const e=Gt(s),l=Lt(s);return[{label:lt(),value:0,disabled:!1}].concat(s.columnLabels.map((t,n)=>(n+=1,n===e?x(ke(),!0,n):n===l?x(Ke(),!0,n):n===s.guidColumn?x("GUID",!0,n):t===""?x(s.preview[0].vals[n-1],!1,n,!0):x(t,!1,n))))}function x(s,e,l,t){return{label:s?`${l}: ${s}`:l.toString(),shortLabel:t?l.toString():void 0,value:l,disabled:e}}function Lt(s){return s.deck.case==="deckColumn"?s.deck.value:null}function Gt(s){return s.notetype.case==="notetypeColumn"?s.notetype.value:null}const Ut=async({params:s})=>{const[e,l,t]=await Promise.all([et({}),tt({skipEmptyDefault:!1,includeFiltered:!1}),Be({path:s.path},{alertOnError:!1})]);return{state:new Ft(s.path,e,l,t)}},$n=Object.freeze(Object.defineProperty({__proto__:null,load:Ut},Symbol.toStringTag,{value:"Module"}));function zt(s){let e;return{c(){e=F(s[1])},l(l){e=L(l,s[1])},m(l,t){C(l,e,t)},p(l,t){t&2&&Ie(e,l[1])},d(l){l&&w(e)}}}function Bt(s){let e,l,t;function n(r){s[4](r)}let a={label:s[3],list:s[2],parser:Wt};return s[0]!==void 0&&(a.value=s[0]),e=new St({props:a}),R.push(()=>P(e,"value",n)),{c(){d(e.$$.fragment)},l(r){h(e.$$.fragment,r)},m(r,o){b(e,r,o),t=!0},p(r,o){const i={};o&8&&(i.label=r[3]),o&4&&(i.list=r[2]),!l&&o&1&&(l=!0,i.value=r[0],V(()=>l=!1)),e.$set(i)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){m(e.$$.fragment,r),t=!1},d(r){v(e,r)}}}function Kt(s){let e,l,t,n,a,r;return e=new $e({props:{$$slots:{default:[zt]},$$scope:{ctx:s}}}),n=new $e({props:{$$slots:{default:[Bt]},$$scope:{ctx:s}}}),{c(){l=q("div"),d(e.$$.fragment),t=H(),a=q("div"),d(n.$$.fragment),this.h()},l(o){l=A(o,"DIV",{style:!0});var i=y(l);h(e.$$.fragment,i),t=M(o),a=A(o,"DIV",{style:!0});var c=y(a);h(n.$$.fragment,c),this.h()},h(){E(l,"display","contents"),E(l,"--col-size",1),E(a,"display","contents"),E(a,"--col-size",1)},m(o,i){C(o,l,i),b(e,l,null),C(o,t,i),C(o,a,i),b(n,a,null),r=!0},p(o,i){const c={};i&34&&(c.$$scope={dirty:i,ctx:o}),e.$set(c);const u={};i&45&&(u.$$scope={dirty:i,ctx:o}),n.$set(u)},i(o){r||(p(e.$$.fragment,o),p(n.$$.fragment,o),r=!0)},o(o){m(e.$$.fragment,o),m(n.$$.fragment,o),r=!1},d(o){o&&w(t),o&&e&&w(l),v(e,o),o&&n&&w(a),v(n,o)}}}function Jt(s){let e,l,t;return e=new ee({props:{$$slots:{default:[Kt]},$$scope:{ctx:s}}}),{c(){l=q("div"),d(e.$$.fragment),this.h()},l(n){l=A(n,"DIV",{style:!0});var a=y(l);h(e.$$.fragment,a),this.h()},h(){E(l,"display","contents"),E(l,"--cols",2)},m(n,a){C(n,l,a),b(e,l,null),t=!0},p(n,[a]){const r={};a&47&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){n&&e&&w(l),v(e,n)}}}const Wt=s=>({content:s.label,value:s.value,disabled:s.disabled});function Yt(s,e,l){let t,{label:n}=e,{columnOptions:a}=e,{value:r}=e;function o(i){r=i,l(0,r)}return s.$$set=i=>{"label"in i&&l(1,n=i.label),"columnOptions"in i&&l(2,a=i.columnOptions),"value"in i&&l(0,r=i.value)},s.$$.update=()=>{var i;s.$$.dirty&5&&l(3,t=(i=a.find(c=>c.value===r))==null?void 0:i.label)},[r,n,a,t,o]}class Qe extends z{constructor(e){super(),B(this,e,Yt,Jt,K,{label:1,columnOptions:2,value:0})}}function Me(s,e,l){const t=s.slice();return t[12]=e[l],t[13]=e,t[14]=l,t}function Ee(s){let e,l,t,n={ctx:s,current:null,token:null,hasCatch:!1,pending:Zt,then:Xt,catch:Qt,value:11,blocks:[,,,]};return De(l=s[1],n),{c(){e=pe(),n.block.c()},l(a){e=pe(),n.block.l(a)},m(a,r){C(a,e,r),n.block.m(a,n.anchor=r),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(a,r){s=a,n.ctx=s,r&2&&l!==(l=s[1])&&De(l,n)||Vt(n,s,r)},i(a){t||(p(n.block),t=!0)},o(a){for(let r=0;r<3;r+=1){const o=n.blocks[r];m(o)}t=!1},d(a){a&&w(e),n.block.d(a),n.token=null,n=null}}}function Qt(s){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function Xt(s){let e,l,t=U(s[11]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Re(Me(s,t,r));const a=r=>m(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=pe()},l(r){for(let o=0;o<n.length;o+=1)n[o].l(r);e=pe()},m(r,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(r,o);C(r,e,o),l=!0},p(r,o){if(o&7){t=U(r[11]);let i;for(i=0;i<t.length;i+=1){const c=Me(r,t,i);n[i]?(n[i].p(c,o),p(n[i],1)):(n[i]=Re(c),n[i].c(),p(n[i],1),n[i].m(e.parentNode,e))}for(fe(),i=t.length;i<n.length;i+=1)a(i);ce()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)p(n[o]);l=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)m(n[o]);l=!1},d(r){r&&w(e),me(n,r)}}}function Re(s){let e,l,t;function n(r){s[9](r,s[14])}let a={label:s[12],columnOptions:s[14]===0?s[2].slice(1):s[2]};return s[0].fieldColumns[s[14]]!==void 0&&(a.value=s[0].fieldColumns[s[14]]),e=new Qe({props:a}),R.push(()=>P(e,"value",n)),{c(){d(e.$$.fragment)},l(r){h(e.$$.fragment,r)},m(r,o){b(e,r,o),t=!0},p(r,o){s=r;const i={};o&2&&(i.label=s[12]),o&4&&(i.columnOptions=s[14]===0?s[2].slice(1):s[2]),!l&&o&1&&(l=!0,i.value=s[0].fieldColumns[s[14]],V(()=>l=!1)),e.$set(i)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){m(e.$$.fragment,r),t=!1},d(r){v(e,r)}}}function Zt(s){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function xt(s){let e,l,t,n,a=s[0]!==null&&Ee(s);function r(i){s[10](i)}let o={label:st(),columnOptions:s[2]};return s[3].tagsColumn!==void 0&&(o.value=s[3].tagsColumn),l=new Qe({props:o}),R.push(()=>P(l,"value",r)),{c(){a&&a.c(),e=H(),d(l.$$.fragment)},l(i){a&&a.l(i),e=M(i),h(l.$$.fragment,i)},m(i,c){a&&a.m(i,c),C(i,e,c),b(l,i,c),n=!0},p(i,c){i[0]!==null?a?(a.p(i,c),c&1&&p(a,1)):(a=Ee(i),a.c(),p(a,1),a.m(e.parentNode,e)):a&&(fe(),m(a,1,1,()=>{a=null}),ce());const u={};c&4&&(u.columnOptions=i[2]),!t&&c&8&&(t=!0,u.value=i[3].tagsColumn,V(()=>t=!1)),l.$set(u)},i(i){n||(p(a),p(l.$$.fragment,i),n=!0)},o(i){m(a),m(l.$$.fragment,i),n=!1},d(i){i&&w(e),a&&a.d(i),v(l,i)}}}function el(s){let e,l;return e=new Ne({props:{title:nt(),$$slots:{default:[xt]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const a={};n&32783&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function tl(s,e,l){let t,n,a,r,{state:o}=e;const i=o.metadata;j(s,i,g=>l(3,r=g));const c=o.globalNotetype;j(s,c,g=>l(0,t=g));const u=o.fieldNames;j(s,u,g=>l(1,n=g));const O=o.columnOptions;j(s,O,g=>l(2,a=g));function k(g,N){s.$$.not_equal(t.fieldColumns[N],g)&&(t.fieldColumns[N]=g,c.set(t))}function $(g){s.$$.not_equal(r.tagsColumn,g)&&(r.tagsColumn=g,i.set(r))}return s.$$set=g=>{"state"in g&&l(8,o=g.state)},[t,n,a,r,i,c,u,O,o,k,$]}class ll extends z{constructor(e){super(),B(this,e,tl,el,K,{state:8})}}function nl(){return[{label:at(),value:Q.TAB},{label:ot(),value:Q.PIPE},{label:rt(),value:Q.SEMICOLON},{label:it(),value:Q.COLON},{label:ut(),value:Q.COMMA},{label:ft(),value:Q.SPACE}]}function sl(){return[{label:ct(),value:ve.UPDATE},{label:pt(),value:ve.PRESERVE},{label:mt(),value:ve.DUPLICATE}]}function al(){return[{label:ke(),value:Oe.NOTETYPE},{label:$t(),value:Oe.NOTETYPE_AND_DECK}]}function Pe(s,e,l){const t=s.slice();return t[5]=e[l],t}function Ve(s,e,l){const t=s.slice();return t[8]=e[l],t}function je(s,e,l){const t=s.slice();return t[11]=e[l].label,t[12]=e[l].shortLabel,t}function qe(s){let e,l=(s[12]||s[11])+"",t;return{c(){e=q("th"),t=F(l),this.h()},l(n){e=A(n,"TH",{class:!0});var a=y(e);t=L(a,l),a.forEach(w),this.h()},h(){te(e,"class","svelte-1lcjqc3")},m(n,a){C(n,e,a),le(e,t)},p(n,a){a&1&&l!==(l=(n[12]||n[11])+"")&&Ie(t,l)},d(n){n&&w(e)}}}function Ae(s){let e,l=s[8]+"",t;return{c(){e=q("td"),t=F(l),this.h()},l(n){e=A(n,"TD",{class:!0});var a=y(e);t=L(a,l),a.forEach(w),this.h()},h(){te(e,"class","svelte-1lcjqc3")},m(n,a){C(n,e,a),le(e,t)},p(n,a){a&2&&l!==(l=n[8]+"")&&Ie(t,l)},d(n){n&&w(e)}}}function ye(s){let e,l,t=U(s[5].vals),n=[];for(let a=0;a<t.length;a+=1)n[a]=Ae(Ve(s,t,a));return{c(){e=q("tr");for(let a=0;a<n.length;a+=1)n[a].c();l=H(),this.h()},l(a){e=A(a,"TR",{class:!0});var r=y(e);for(let o=0;o<n.length;o+=1)n[o].l(r);l=M(r),r.forEach(w),this.h()},h(){te(e,"class","svelte-1lcjqc3")},m(a,r){C(a,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);le(e,l)},p(a,r){if(r&2){t=U(a[5].vals);let o;for(o=0;o<t.length;o+=1){const i=Ve(a,t,o);n[o]?n[o].p(i,r):(n[o]=Ae(i),n[o].c(),n[o].m(e,l))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(a){a&&w(e),me(n,a)}}}function ol(s){let e,l,t,n=U(s[0].slice(1)),a=[];for(let i=0;i<n.length;i+=1)a[i]=qe(je(s,n,i));let r=U(s[1].preview),o=[];for(let i=0;i<r.length;i+=1)o[i]=ye(Pe(s,r,i));return{c(){e=q("div"),l=q("table");for(let i=0;i<a.length;i+=1)a[i].c();t=H();for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=A(i,"DIV",{class:!0});var c=y(e);l=A(c,"TABLE",{class:!0});var u=y(l);for(let O=0;O<a.length;O+=1)a[O].l(u);t=M(u);for(let O=0;O<o.length;O+=1)o[O].l(u);u.forEach(w),c.forEach(w),this.h()},h(){te(l,"class","preview svelte-1lcjqc3"),te(e,"class","outer svelte-1lcjqc3")},m(i,c){C(i,e,c),le(e,l);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(l,null);le(l,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(l,null)},p(i,[c]){if(c&1){n=U(i[0].slice(1));let u;for(u=0;u<n.length;u+=1){const O=je(i,n,u);a[u]?a[u].p(O,c):(a[u]=qe(O),a[u].c(),a[u].m(l,t))}for(;u<a.length;u+=1)a[u].d(1);a.length=n.length}if(c&2){r=U(i[1].preview);let u;for(u=0;u<r.length;u+=1){const O=Pe(i,r,u);o[u]?o[u].p(O,c):(o[u]=ye(O),o[u].c(),o[u].m(l,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},i:D,o:D,d(i){i&&w(e),me(a,i),me(o,i)}}}function rl(s,e,l){let t,n,{state:a}=e;const r=a.metadata;j(s,r,i=>l(1,n=i));const o=a.columnOptions;return j(s,o,i=>l(0,t=i)),s.$$set=i=>{"state"in i&&l(4,a=i.state)},[t,n,r,o,a]}class il extends z{constructor(e){super(),B(this,e,rl,ol,K,{state:4})}}function ul(s){let e=s[5].delimiter.title+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,n){C(t,l,n)},p:D,d(t){t&&w(l)}}}function fl(s){let e,l;return e=new J({props:{$$slots:{default:[ul]},$$scope:{ctx:s}}}),e.$on("click",s[9]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&8192&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function cl(s){let e=s[5].isHtml.title+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,n){C(t,l,n)},p:D,d(t){t&&w(l)}}}function pl(s){let e,l;return e=new J({props:{$$slots:{default:[cl]},$$scope:{ctx:s}}}),e.$on("click",s[11]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&8192&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ml(s){let e,l,t,n,a,r,o,i;function c($){s[10]($)}let u={defaultValue:s[0].defaultDelimiter,choices:nl(),disabled:s[3].forceDelimiter,$$slots:{default:[fl]},$$scope:{ctx:s}};s[3].delimiter!==void 0&&(u.value=s[3].delimiter),e=new ne({props:u}),R.push(()=>P(e,"value",c));function O($){s[12]($)}let k={defaultValue:s[0].defaultIsHtml,disabled:s[3].forceIsHtml,$$slots:{default:[pl]},$$scope:{ctx:s}};return s[3].isHtml!==void 0&&(k.value=s[3].isHtml),n=new jt({props:k}),R.push(()=>P(n,"value",O)),o=new il({props:{state:s[0]}}),{c(){d(e.$$.fragment),t=H(),d(n.$$.fragment),r=H(),d(o.$$.fragment)},l($){h(e.$$.fragment,$),t=M($),h(n.$$.fragment,$),r=M($),h(o.$$.fragment,$)},m($,g){b(e,$,g),C($,t,g),b(n,$,g),C($,r,g),b(o,$,g),i=!0},p($,g){const N={};g&1&&(N.defaultValue=$[0].defaultDelimiter),g&8&&(N.disabled=$[3].forceDelimiter),g&8192&&(N.$$scope={dirty:g,ctx:$}),!l&&g&8&&(l=!0,N.value=$[3].delimiter,V(()=>l=!1)),e.$set(N);const _={};g&1&&(_.defaultValue=$[0].defaultIsHtml),g&8&&(_.disabled=$[3].forceIsHtml),g&8192&&(_.$$scope={dirty:g,ctx:$}),!a&&g&8&&(a=!0,_.value=$[3].isHtml,V(()=>a=!1)),n.$set(_);const Y={};g&1&&(Y.state=$[0]),o.$set(Y)},i($){i||(p(e.$$.fragment,$),p(n.$$.fragment,$),p(o.$$.fragment,$),i=!0)},o($){m(e.$$.fragment,$),m(n.$$.fragment,$),m(o.$$.fragment,$),i=!1},d($){$&&(w(t),w(r)),v(e,$),v(n,$),v(o,$)}}}function $l(s){let e,l;return e=new Ye({props:{title:Je(),url:G.TextImporting.root,slot:"tooltip",helpSections:s[6]}}),e.$on("mount",s[8]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p:D,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gl(s){let e,l;return e=new Ne({props:{title:Je(),$$slots:{tooltip:[$l],default:[ml]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const a={};n&8207&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _l(s,e,l){let t,{state:n}=e;const a=n.metadata;j(s,a,_=>l(3,t=_));const r={delimiter:{title:gt(),help:_t(),url:G.TextImporting.root},isHtml:{title:dt(),help:ht(),url:G.TextImporting.html}},o=Object.values(r);let i,c;function u(_){i.show(),c.to(_)}const O=_=>{l(1,i=_.detail.modal),l(2,c=_.detail.carousel)},k=()=>u(Object.keys(r).indexOf("delimiter"));function $(_){s.$$.not_equal(t.delimiter,_)&&(t.delimiter=_,a.set(t))}const g=()=>u(Object.keys(r).indexOf("isHtml"));function N(_){s.$$.not_equal(t.isHtml,_)&&(t.isHtml=_,a.set(t))}return s.$$set=_=>{"state"in _&&l(0,n=_.state)},[n,i,c,t,a,r,o,u,O,k,$,g,N]}class dl extends z{constructor(e){super(),B(this,e,_l,gl,K,{state:0})}}function hl(s){let e;const l=s[5].default,t=Ht(l,s,s[8],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),e=!0},p(n,a){t&&t.p&&(!e||a&256)&&Mt(t,l,n,n[8],e?Rt(l,n[8],a,null):Et(n[8]),null)},i(n){e||(p(t,n),e=!0)},o(n){m(t,n),e=!1},d(n){t&&t.d(n)}}}function bl(s){let e,l;return e=new yt({props:{tags:s[4],keyCombination:s[1]}}),e.$on("tagsupdate",s[7]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.keyCombination=t[1]),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function vl(s){let e,l,t;function n(r){s[6](r)}let a={slot:"revert",defaultValue:[]};return s[3]!==void 0&&(a.value=s[3]),e=new At({props:a}),R.push(()=>P(e,"value",n)),{c(){d(e.$$.fragment)},l(r){h(e.$$.fragment,r)},m(r,o){b(e,r,o),t=!0},p(r,o){const i={};!l&&o&8&&(l=!0,i.value=r[3],V(()=>l=!1)),e.$set(i)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){m(e.$$.fragment,r),t=!1},d(r){v(e,r)}}}function wl(s){let e,l;return e=new qt({props:{$$slots:{revert:[vl],default:[bl]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&267&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function kl(s){let e,l,t,n,a,r;return e=new $e({props:{breakpoint:s[2],$$slots:{default:[hl]},$$scope:{ctx:s}}}),n=new $e({props:{breakpoint:s[2],$$slots:{default:[wl]},$$scope:{ctx:s}}}),{c(){l=q("div"),d(e.$$.fragment),t=H(),a=q("div"),d(n.$$.fragment),this.h()},l(o){l=A(o,"DIV",{style:!0});var i=y(l);h(e.$$.fragment,i),t=M(o),a=A(o,"DIV",{style:!0});var c=y(a);h(n.$$.fragment,c),this.h()},h(){E(l,"display","contents"),E(l,"--col-size",7),E(a,"display","contents"),E(a,"--col-size",6)},m(o,i){C(o,l,i),b(e,l,null),C(o,t,i),C(o,a,i),b(n,a,null),r=!0},p(o,i){const c={};i&4&&(c.breakpoint=o[2]),i&256&&(c.$$scope={dirty:i,ctx:o}),e.$set(c);const u={};i&4&&(u.breakpoint=o[2]),i&267&&(u.$$scope={dirty:i,ctx:o}),n.$set(u)},i(o){r||(p(e.$$.fragment,o),p(n.$$.fragment,o),r=!0)},o(o){m(e.$$.fragment,o),m(n.$$.fragment,o),r=!1},d(o){o&&w(t),o&&e&&w(l),v(e,o),o&&n&&w(a),v(n,o)}}}function Il(s){let e,l,t;return e=new ee({props:{$$slots:{default:[kl]},$$scope:{ctx:s}}}),{c(){l=q("div"),d(e.$$.fragment),this.h()},l(n){l=A(n,"DIV",{style:!0});var a=y(l);h(e.$$.fragment,a),this.h()},h(){E(l,"display","contents"),E(l,"--cols",13)},m(n,a){C(n,l,a),b(e,l,null),t=!0},p(n,[a]){const r={};a&271&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){n&&e&&w(l),v(e,n)}}}function Nl(s,e,l){let t,{$$slots:n={},$$scope:a}=e,{tags:r}=e,{keyCombination:o=void 0}=e,{breakpoint:i="md"}=e;const c=ue(r);j(s,c,k=>l(3,t=k));function u(k){t=k,c.set(t)}const O=({detail:k})=>l(0,r=k.tags);return s.$$set=k=>{"tags"in k&&l(0,r=k.tags),"keyCombination"in k&&l(1,o=k.keyCombination),"breakpoint"in k&&l(2,i=k.breakpoint),"$$scope"in k&&l(8,a=k.$$scope)},[r,o,i,t,c,n,u,O,a]}class Fe extends z{constructor(e){super(),B(this,e,Nl,Il,K,{tags:0,keyCombination:1,breakpoint:2})}}function Le(s){let e,l,t;function n(r){s[14](r)}let a={defaultValue:s[0].defaultNotetypeId,choices:s[0].notetypeNameIds.map(Ue),$$slots:{default:[Ol]},$$scope:{ctx:s}};return s[3].id!==void 0&&(a.value=s[3].id),e=new ne({props:a}),R.push(()=>P(e,"value",n)),{c(){d(e.$$.fragment)},l(r){h(e.$$.fragment,r)},m(r,o){b(e,r,o),t=!0},p(r,o){const i={};o&1&&(i.defaultValue=r[0].defaultNotetypeId),o&1&&(i.choices=r[0].notetypeNameIds.map(Ue)),o&33554432&&(i.$$scope={dirty:o,ctx:r}),!l&&o&8&&(l=!0,i.value=r[3].id,V(()=>l=!1)),e.$set(i)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){m(e.$$.fragment,r),t=!1},d(r){v(e,r)}}}function Cl(s){let e=s[9].notetype.title+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,n){C(t,l,n)},p:D,d(t){t&&w(l)}}}function Ol(s){let e,l;return e=new J({props:{$$slots:{default:[Cl]},$$scope:{ctx:s}}}),e.$on("click",s[13]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&33554432&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ge(s){let e,l,t;function n(r){s[16](r)}let a={defaultValue:s[0].defaultDeckId,choices:s[0].deckNameIds.map(ze),$$slots:{default:[Dl]},$$scope:{ctx:s}};return s[4]!==void 0&&(a.value=s[4]),e=new ne({props:a}),R.push(()=>P(e,"value",n)),{c(){d(e.$$.fragment)},l(r){h(e.$$.fragment,r)},m(r,o){b(e,r,o),t=!0},p(r,o){const i={};o&1&&(i.defaultValue=r[0].defaultDeckId),o&1&&(i.choices=r[0].deckNameIds.map(ze)),o&33554432&&(i.$$scope={dirty:o,ctx:r}),!l&&o&16&&(l=!0,i.value=r[4],V(()=>l=!1)),e.$set(i)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){m(e.$$.fragment,r),t=!1},d(r){v(e,r)}}}function Tl(s){let e=s[9].deck.title+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,n){C(t,l,n)},p:D,d(t){t&&w(l)}}}function Dl(s){let e,l;return e=new J({props:{$$slots:{default:[Tl]},$$scope:{ctx:s}}}),e.$on("click",s[15]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&33554432&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sl(s){let e=s[9].dupeResolution.title+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,n){C(t,l,n)},p:D,d(t){t&&w(l)}}}function Hl(s){let e,l;return e=new J({props:{$$slots:{default:[Sl]},$$scope:{ctx:s}}}),e.$on("click",s[17]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&33554432&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ml(s){let e=s[9].matchScope.title+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,n){C(t,l,n)},p:D,d(t){t&&w(l)}}}function El(s){let e,l;return e=new J({props:{$$slots:{default:[Ml]},$$scope:{ctx:s}}}),e.$on("click",s[19]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&33554432&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Rl(s){let e=s[9].globalTags.title+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,n){C(t,l,n)},p:D,d(t){t&&w(l)}}}function Pl(s){let e,l;return e=new J({props:{$$slots:{default:[Rl]},$$scope:{ctx:s}}}),e.$on("click",s[21]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&33554432&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vl(s){let e=s[9].updatedTags.title+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,n){C(t,l,n)},p:D,d(t){t&&w(l)}}}function jl(s){let e,l;return e=new J({props:{$$slots:{default:[Vl]},$$scope:{ctx:s}}}),e.$on("click",s[23]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&33554432&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ql(s){let e,l,t,n,a,r,o,i,c,u,O,k,$,g,N=s[3]!==null&&Le(s),_=s[4]!==null&&Ge(s);function Y(f){s[18](f)}let se={defaultValue:0,choices:sl(),$$slots:{default:[Hl]},$$scope:{ctx:s}};s[5].dupeResolution!==void 0&&(se.value=s[5].dupeResolution),t=new ne({props:se}),R.push(()=>P(t,"value",Y));function ge(f){s[20](f)}let ae={defaultValue:0,choices:al(),$$slots:{default:[El]},$$scope:{ctx:s}};s[5].matchScope!==void 0&&(ae.value=s[5].matchScope),r=new ne({props:ae}),R.push(()=>P(r,"value",ge));function _e(f){s[22](f)}let oe={keyCombination:"Control+T",$$slots:{default:[Pl]},$$scope:{ctx:s}};s[5].globalTags!==void 0&&(oe.tags=s[5].globalTags),c=new Fe({props:oe}),R.push(()=>P(c,"tags",_e));function de(f){s[24](f)}let re={keyCombination:"Control+Shift+T",$$slots:{default:[jl]},$$scope:{ctx:s}};return s[5].updatedTags!==void 0&&(re.tags=s[5].updatedTags),k=new Fe({props:re}),R.push(()=>P(k,"tags",de)),{c(){N&&N.c(),e=H(),_&&_.c(),l=H(),d(t.$$.fragment),a=H(),d(r.$$.fragment),i=H(),d(c.$$.fragment),O=H(),d(k.$$.fragment)},l(f){N&&N.l(f),e=M(f),_&&_.l(f),l=M(f),h(t.$$.fragment,f),a=M(f),h(r.$$.fragment,f),i=M(f),h(c.$$.fragment,f),O=M(f),h(k.$$.fragment,f)},m(f,T){N&&N.m(f,T),C(f,e,T),_&&_.m(f,T),C(f,l,T),b(t,f,T),C(f,a,T),b(r,f,T),C(f,i,T),b(c,f,T),C(f,O,T),b(k,f,T),g=!0},p(f,T){f[3]!==null?N?(N.p(f,T),T&8&&p(N,1)):(N=Le(f),N.c(),p(N,1),N.m(e.parentNode,e)):N&&(fe(),m(N,1,1,()=>{N=null}),ce()),f[4]!==null?_?(_.p(f,T),T&16&&p(_,1)):(_=Ge(f),_.c(),p(_,1),_.m(l.parentNode,l)):_&&(fe(),m(_,1,1,()=>{_=null}),ce());const X={};T&33554432&&(X.$$scope={dirty:T,ctx:f}),!n&&T&32&&(n=!0,X.value=f[5].dupeResolution,V(()=>n=!1)),t.$set(X);const I={};T&33554432&&(I.$$scope={dirty:T,ctx:f}),!o&&T&32&&(o=!0,I.value=f[5].matchScope,V(()=>o=!1)),r.$set(I);const he={};T&33554432&&(he.$$scope={dirty:T,ctx:f}),!u&&T&32&&(u=!0,he.tags=f[5].globalTags,V(()=>u=!1)),c.$set(he);const be={};T&33554432&&(be.$$scope={dirty:T,ctx:f}),!$&&T&32&&($=!0,be.tags=f[5].updatedTags,V(()=>$=!1)),k.$set(be)},i(f){g||(p(N),p(_),p(t.$$.fragment,f),p(r.$$.fragment,f),p(c.$$.fragment,f),p(k.$$.fragment,f),g=!0)},o(f){m(N),m(_),m(t.$$.fragment,f),m(r.$$.fragment,f),m(c.$$.fragment,f),m(k.$$.fragment,f),g=!1},d(f){f&&(w(e),w(l),w(a),w(i),w(O)),N&&N.d(f),_&&_.d(f),v(t,f),v(r,f),v(c,f),v(k,f)}}}function Al(s){let e,l;return e=new Ye({props:{title:We(),url:G.TextImporting.root,slot:"tooltip",helpSections:s[10]}}),e.$on("mount",s[12]),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p:D,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function yl(s){let e,l;return e=new Ne({props:{title:We(),$$slots:{tooltip:[Al],default:[ql]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const a={};n&33554495&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}const Ue=({id:s,name:e})=>({label:e,value:s}),ze=({id:s,name:e})=>({label:e,value:s});function Fl(s,e,l){let t,n,a,{state:r}=e;const o=r.metadata;j(s,o,I=>l(5,a=I));const i=r.globalNotetype;j(s,i,I=>l(3,t=I));const c=r.deckId;j(s,c,I=>l(4,n=I));const u={notetype:{title:ke(),help:bt(),url:G.TextImporting.root},deck:{title:Ke(),help:vt(),url:G.TextImporting.root},dupeResolution:{title:wt(),help:kt(),url:G.TextImporting.updating},matchScope:{title:It(),help:Nt(),url:G.TextImporting.updating},globalTags:{title:Ct(),help:Ot(),url:G.TextImporting.root},updatedTags:{title:Tt(),help:Dt(),url:G.TextImporting.root}},O=Object.values(u);let k,$;function g(I){k.show(),$.to(I)}const N=I=>{l(1,k=I.detail.modal),l(2,$=I.detail.carousel)},_=()=>g(Object.keys(u).indexOf("notetype"));function Y(I){s.$$.not_equal(t.id,I)&&(t.id=I,i.set(t))}const se=()=>g(Object.keys(u).indexOf("deck"));function ge(I){n=I,c.set(n)}const ae=()=>g(Object.keys(u).indexOf("dupeResolution"));function _e(I){s.$$.not_equal(a.dupeResolution,I)&&(a.dupeResolution=I,o.set(a))}const oe=()=>g(Object.keys(u).indexOf("matchScope"));function de(I){s.$$.not_equal(a.matchScope,I)&&(a.matchScope=I,o.set(a))}const re=()=>g(Object.keys(u).indexOf("globalTags"));function f(I){s.$$.not_equal(a.globalTags,I)&&(a.globalTags=I,o.set(a))}const T=()=>g(Object.keys(u).indexOf("updatedTags"));function X(I){s.$$.not_equal(a.updatedTags,I)&&(a.updatedTags=I,o.set(a))}return s.$$set=I=>{"state"in I&&l(0,r=I.state)},[r,k,$,t,n,a,o,i,c,u,O,g,N,_,Y,se,ge,ae,_e,oe,de,re,f,T,X]}class Ll extends z{constructor(e){super(),B(this,e,Fl,yl,K,{state:0})}}function Gl(s){let e,l;return e=new dl({props:{state:s[0]}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.state=t[0]),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ul(s){let e,l;return e=new Ll({props:{state:s[0]}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.state=t[0]),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function zl(s){let e,l;return e=new ll({props:{state:s[0]}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.state=t[0]),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Bl(s){let e,l,t,n,a,r;return e=new ee({props:{$$slots:{default:[Gl]},$$scope:{ctx:s}}}),t=new ee({props:{$$slots:{default:[Ul]},$$scope:{ctx:s}}}),a=new ee({props:{$$slots:{default:[zl]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment),l=H(),d(t.$$.fragment),n=H(),d(a.$$.fragment)},l(o){h(e.$$.fragment,o),l=M(o),h(t.$$.fragment,o),n=M(o),h(a.$$.fragment,o)},m(o,i){b(e,o,i),C(o,l,i),b(t,o,i),C(o,n,i),b(a,o,i),r=!0},p(o,i){const c={};i&3&&(c.$$scope={dirty:i,ctx:o}),e.$set(c);const u={};i&3&&(u.$$scope={dirty:i,ctx:o}),t.$set(u);const O={};i&3&&(O.$$scope={dirty:i,ctx:o}),a.$set(O)},i(o){r||(p(e.$$.fragment,o),p(t.$$.fragment,o),p(a.$$.fragment,o),r=!0)},o(o){m(e.$$.fragment,o),m(t.$$.fragment,o),m(a.$$.fragment,o),r=!1},d(o){o&&(w(l),w(n)),v(e,o),v(t,o),v(a,o)}}}function Kl(s){let e,l;return e=new Pt({props:{path:s[0].path,importer:s[0],$$slots:{default:[Bl]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const a={};n&1&&(a.path=t[0].path),n&1&&(a.importer=t[0]),n&3&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Jl(s,e,l){let{state:t}=e;return s.$$set=n=>{"state"in n&&l(0,t=n.state)},[t]}class Wl extends z{constructor(e){super(),B(this,e,Jl,Kl,K,{state:0})}}function Yl(s){let e,l;return e=new Wl({props:{state:s[0].state}}),{c(){d(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const a={};n&1&&(a.state=t[0].state),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ql(s,e,l){let{data:t}=e;return s.$$set=n=>{"data"in n&&l(0,t=n.data)},[t]}class gn extends z{constructor(e){super(),B(this,e,Ql,Yl,K,{data:0})}}export{gn as component,$n as universal};
