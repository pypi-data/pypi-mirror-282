import{S as J,i as tt,s as et,v as L,w as O,x as I,m as C,k as S,y as Y,F as yr,z as R,J as q,A as F,B,K as U,d as $,C as E,a as A,N as M,G as vr,H as $r,I as wr,t as Q,c as W,b as Yt,aU as Te,Z as at,ad as dt,P as nt,n as G,r as Ce,ag as lt,ah as ut,a1 as us,a2 as cs,M as Nt,$ as fs,V as Tt,a3 as je,T as Qt,q as kt,X as Ze,Y as Ke,ab as ye,ac as Qi,j as Ot,l as qt,L as Gr,e as Qr,a0 as yn}from"../chunks/Component.XCUzfIB4.mjs";import"../chunks/index.HrFqG6o2.mjs";import{fP as kr,fQ as jn,fR as Wi,fS as hs,fT as Ln,fU as xr,fV as gs,fW as ds,fX as ms,fY as Mr,fZ as Ar,f_ as Dr,f$ as ps,g0 as _s,g1 as bs,g2 as ys,g3 as vs,dE as He,g4 as $s,g5 as ws,g6 as ks,g7 as ji,g8 as xs,g9 as Ms,ga as As,gb as Ds,gc as Ts,gd as Cs,ge as Ns,gf as Ss,gg as Es,gh as Rs,gi as Fs,gj as Bs,gk as ar,gl as Ps,gm as Ls,gn as Is,go as Ys,gp as Os,gq as qs,gr as Us,gs as Hs,gt as zs,gu as Vs,gv as Xs,gw as Gs,gx as Qs,gy as Ws,gz as js,gA as Zs,gB as Ks,gC as Js,gD as to,gE as eo,gF as no,gG as ro,gH as io,gI as ao,gJ as so,gK as oo,gL as lo,gM as Wr,gN as uo,gO as co,gP as fo,gQ as ho,gR as go,gS as mo,gT as po,gU as _o,gV as bo,gW as yo,gX as vo,gY as $o,gZ as wo,g_ as ko,g$ as xo,h0 as Mo,h1 as Ao,h2 as Do,h3 as To}from"../chunks/ftl.kZuA-e76.mjs";import{e as Tr,t as Vt,M as vn,Y as Co,s as No}from"../chunks/time.2JMbvRJ8.mjs";import{T as So}from"../chunks/TitledContainer.EN_ruWEJ.mjs";import{c as gt,d as Eo,e as Ro,f as Fo}from"../chunks/utils.ZaeNchUW.mjs";import{i as Bo,b as Po,a as $n,r as Lo}from"../chunks/isObject.u1V2KUQz.mjs";import{e as Xt}from"../chunks/each.W4AIRH3O.mjs";import{k as Io,a5 as oe,a6 as Yo,a7 as Oo,a8 as qo}from"../chunks/backend.WLkVIN8Y.mjs";import{c as Uo}from"../chunks/bridgecommand.3r5IZHQW.mjs";import{w as sr}from"../chunks/index.JQ1vVYlZ.mjs";import{p as Ho}from"../chunks/theme.-tUCBGca.mjs";import{h as zo,u as Vo}from"../chunks/await_block.ihxlq41T.mjs";var Xo="[object Symbol]";function Go(t){return typeof t=="symbol"||Bo(t)&&Po(t)==Xo}var Qo=/\s/;function Wo(t){for(var e=t.length;e--&&Qo.test(t.charAt(e)););return e}var jo=/^\s+/;function Zo(t){return t&&t.slice(0,Wo(t)+1).replace(jo,"")}var jr=NaN,Ko=/^[-+]0x[0-9a-f]+$/i,Jo=/^0b[01]+$/i,tl=/^0o[0-7]+$/i,el=parseInt;function Zr(t){if(typeof t=="number")return t;if(Go(t))return jr;if($n(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$n(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Zo(t);var n=Jo.test(t);return n||tl.test(t)?el(t.slice(2),n?2:8):Ko.test(t)?jr:+t}var Zn=function(){return Lo.Date.now()},nl="Expected a function",rl=Math.max,il=Math.min;function al(t,e,n){var r,i,a,o,s,l,u=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(nl);e=Zr(e)||0,$n(n)&&(c=!!n.leading,f="maxWait"in n,a=f?rl(Zr(n.maxWait)||0,e):a,h="trailing"in n?!!n.trailing:h);function g(w){var x=r,T=i;return r=i=void 0,u=w,o=t.apply(T,x),o}function d(w){return u=w,s=setTimeout(b,e),c?g(w):o}function p(w){var x=w-l,T=w-u,P=e-x;return f?il(P,a-T):P}function m(w){var x=w-l,T=w-u;return l===void 0||x>=e||x<0||f&&T>=a}function b(){var w=Zn();if(m(w))return _(w);s=setTimeout(b,p(w))}function _(w){return s=void 0,h&&r?g(w):(r=i=void 0,o)}function v(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function k(){return s===void 0?o:_(Zn())}function y(){var w=Zn(),x=m(w);if(r=arguments,i=this,l=w,x){if(s===void 0)return d(l);if(f)return clearTimeout(s),s=setTimeout(b,e),g(l)}return s===void 0&&(s=setTimeout(b,e)),o}return y.cancel=v,y.flush=k,y}var sl="Expected a function";function ol(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(sl);return $n(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),al(t,e,{leading:r,maxWait:e,trailing:i})}function $e(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ll(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zi(t){let e,n,r;t.length!==2?(e=$e,n=(s,l)=>$e(t(s),l),r=(s,l)=>t(s)-l):(e=t===$e||t===ll?t:ul,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function ul(){return 0}function cl(t){return t===null?NaN:+t}function*fl(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const hl=Zi($e),Ki=hl.right;Zi(cl).center;function gl(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function Cr(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function we(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Kr extends Map{constructor(e,n=pl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Jr(this,e))}has(e){return super.has(Jr(this,e))}set(e,n){return super.set(dl(this,e),n)}delete(e){return super.delete(ml(this,e))}}function Jr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function dl({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ml({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function pl(t){return t!==null&&typeof t=="object"?t.valueOf():t}function _l(t){return t}function bl(t=$e){if(t===$e)return Ji;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Ji(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var yl=Array.prototype,vl=yl.slice;function Kn(t){return()=>t}const $l=Math.sqrt(50),wl=Math.sqrt(10),kl=Math.sqrt(2);function wn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=$l?10:a>=wl?5:a>=kl?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?wn(t,e,n*2):[s,l,u]}function ta(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?wn(e,t,n):wn(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function xe(t,e,n){return e=+e,t=+t,n=+n,wn(t,e,n)[2]}function xl(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?xe(e,t,n):xe(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Ml(t,e,n){let r;for(;;){const i=xe(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function Al(t){return Math.max(1,Math.ceil(Math.log(gl(t))/Math.LN2)+1)}function jt(){var t=_l,e=we,n=Al;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var c=e(u),f=c[0],h=c[1],g=n(u,f,h);if(!Array.isArray(g)){const v=h,k=+g;if(e===we&&([f,h]=Ml(f,h,k)),g=ta(f,h,k),g[0]<=f&&(l=xe(f,h,k)),g[g.length-1]>=h)if(v>=h&&e===we){const y=xe(f,h,k);isFinite(y)&&(y>0?h=(Math.floor(h/y)+1)*y:y<0&&(h=(Math.ceil(h*-y)+1)/-y))}else g.pop()}for(var d=g.length,p=0,m=d;g[p]<=f;)++p;for(;g[m-1]>h;)--m;(p||m<d)&&(g=g.slice(p,m),d=m-p);var b=new Array(d+1),_;for(a=0;a<=d;++a)_=b[a]=[],_.x0=a>0?g[a-1]:f,_.x1=a<d?g[a]:h;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=h&&b[Math.min(d,Math.floor((s-f)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=u[a])!=null&&f<=s&&s<=h){const v=Math.floor((f-s)*l);b[Math.min(d,v+(g[v]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=h&&b[Ki(g,s,0,d)].push(i[a]);return b}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Kn(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Kn([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Kn(Array.isArray(i)?vl.call(i):i),r):n},r}function kn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function xn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ea(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Ji:bl(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*f/l+h)),d=Math.min(r,Math.floor(e+(l-u)*f/l+h));ea(t,e,g,d,i)}const a=t[e];let o=n,s=r;for(Pe(t,n,e),i(t[r],a)>0&&Pe(t,n,r);o<s;){for(Pe(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?Pe(t,n,s):(++s,Pe(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Pe(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ti(t,e,n){if(t=Float64Array.from(fl(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return xn(t);if(e>=1)return kn(t);var r,i=(r-1)*e,a=Math.floor(i),o=kn(ea(t,a).subarray(0,a+1)),s=xn(t.subarray(a+1));return o+(s-o)*(i-a)}}function Dl(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function Tl(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function ot(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Cl(t){return t}var Jn=1,dn=2,or=3,Ye=4,ei=1e-6;function Nl(t){return"translate("+t+",0)"}function Sl(t){return"translate(0,"+t+")"}function El(t){return e=>+t(e)}function Rl(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Fl(){return!this.__axis}function Nr(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Jn||t===Ye?-1:1,c=t===Ye||t===dn?"x":"y",f=t===Jn||t===or?Nl:Sl;function h(g){var d=r==null?e.ticks?e.ticks.apply(e,n):e.domain():r,p=i==null?e.tickFormat?e.tickFormat.apply(e,n):Cl:i,m=Math.max(a,0)+s,b=e.range(),_=+b[0]+l,v=+b[b.length-1]+l,k=(e.bandwidth?Rl:El)(e.copy(),l),y=g.selection?g.selection():g,w=y.selectAll(".domain").data([null]),x=y.selectAll(".tick").data(d,e).order(),T=x.exit(),P=x.enter().append("g").attr("class","tick"),z=x.select("line"),D=x.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(P),z=z.merge(P.append("line").attr("stroke","currentColor").attr(c+"2",u*a)),D=D.merge(P.append("text").attr("fill","currentColor").attr(c,u*m).attr("dy",t===Jn?"0em":t===or?"0.71em":"0.32em")),g!==y&&(w=w.transition(g),x=x.transition(g),z=z.transition(g),D=D.transition(g),T=T.transition(g).attr("opacity",ei).attr("transform",function(V){return isFinite(V=k(V))?f(V+l):this.getAttribute("transform")}),P.attr("opacity",ei).attr("transform",function(V){var N=this.parentNode.__axis;return f((N&&isFinite(N=N(V))?N:k(V))+l)})),T.remove(),w.attr("d",t===Ye||t===dn?o?"M"+u*o+","+_+"H"+l+"V"+v+"H"+u*o:"M"+l+","+_+"V"+v:o?"M"+_+","+u*o+"V"+l+"H"+v+"V"+u*o:"M"+_+","+l+"H"+v),x.attr("opacity",1).attr("transform",function(V){return f(k(V)+l)}),z.attr(c+"2",u*a),D.attr(c,u*m).text(p),y.filter(Fl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===dn?"start":t===Ye?"end":"middle"),y.each(function(){this.__axis=k})}return h.scale=function(g){return arguments.length?(e=g,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(a=o=+g,h):a},h.tickSizeInner=function(g){return arguments.length?(a=+g,h):a},h.tickSizeOuter=function(g){return arguments.length?(o=+g,h):o},h.tickPadding=function(g){return arguments.length?(s=+g,h):s},h.offset=function(g){return arguments.length?(l=+g,h):l},h}function Sr(t){return Nr(dn,t)}function In(t){return Nr(or,t)}function Yn(t){return Nr(Ye,t)}var Bl={value:()=>{}};function na(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mn(n)}function mn(t){this._=t}function Pl(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mn.prototype=na.prototype={constructor:mn,on:function(t,e){var n=this._,r=Pl(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Ll(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=ni(n[i],t.name,e);else if(e==null)for(i in n)n[i]=ni(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new mn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Ll(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function ni(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Bl,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var lr="http://www.w3.org/1999/xhtml";const ri={svg:"http://www.w3.org/2000/svg",xhtml:lr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function On(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ri.hasOwnProperty(e)?{space:ri[e],local:t}:t}function Il(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===lr&&e.documentElement.namespaceURI===lr?e.createElement(t):e.createElementNS(n,t)}}function Yl(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ra(t){var e=On(t);return(e.local?Yl:Il)(e)}function Ol(){}function Er(t){return t==null?Ol:function(){return this.querySelector(t)}}function ql(t){typeof t!="function"&&(t=Er(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=t.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new xt(r,this._parents)}function Ul(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Hl(){return[]}function ia(t){return t==null?Hl:function(){return this.querySelectorAll(t)}}function zl(t){return function(){return Ul(t.apply(this,arguments))}}function Vl(t){typeof t=="function"?t=zl(t):t=ia(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new xt(r,i)}function aa(t){return function(){return this.matches(t)}}function sa(t){return function(e){return e.matches(t)}}var Xl=Array.prototype.find;function Gl(t){return function(){return Xl.call(this.children,t)}}function Ql(){return this.firstElementChild}function Wl(t){return this.select(t==null?Ql:Gl(typeof t=="function"?t:sa(t)))}var jl=Array.prototype.filter;function Zl(){return Array.from(this.children)}function Kl(t){return function(){return jl.call(this.children,t)}}function Jl(t){return this.selectAll(t==null?Zl:Kl(typeof t=="function"?t:sa(t)))}function tu(t){typeof t!="function"&&(t=aa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new xt(r,this._parents)}function oa(t){return new Array(t.length)}function eu(){return new xt(this._enter||this._groups.map(oa),this._parents)}function Mn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Mn.prototype={constructor:Mn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function nu(t){return function(){return t}}function ru(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new Mn(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function iu(t,e,n,r,i,a,o){var s,l,u=new Map,c=e.length,f=a.length,h=new Array(c),g;for(s=0;s<c;++s)(l=e[s])&&(h[s]=g=o.call(l,l.__data__,s,e)+"",u.has(g)?i[s]=l:u.set(g,l));for(s=0;s<f;++s)g=o.call(t,a[s],s,a)+"",(l=u.get(g))?(r[s]=l,l.__data__=a[s],u.delete(g)):n[s]=new Mn(t,a[s]);for(s=0;s<c;++s)(l=e[s])&&u.get(h[s])===l&&(i[s]=l)}function au(t){return t.__data__}function su(t,e){if(!arguments.length)return Array.from(this,au);var n=e?iu:ru,r=this._parents,i=this._groups;typeof t!="function"&&(t=nu(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],f=i[u],h=f.length,g=ou(t.call(c,c&&c.__data__,u,r)),d=g.length,p=s[u]=new Array(d),m=o[u]=new Array(d),b=l[u]=new Array(h);n(c,f,p,m,b,g,e);for(var _=0,v=0,k,y;_<d;++_)if(k=p[_]){for(_>=v&&(v=_+1);!(y=m[v])&&++v<d;);k._next=y||null}}return o=new xt(o,r),o._enter=s,o._exit=l,o}function ou(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lu(){return new xt(this._exit||this._groups.map(oa),this._parents)}function uu(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function cu(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],f=u.length,h=s[l]=new Array(f),g,d=0;d<f;++d)(g=u[d]||c[d])&&(h[d]=g);for(;l<i;++l)s[l]=n[l];return new xt(s,this._parents)}function fu(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function hu(t){t||(t=gu);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new xt(i,this._parents).order()}function gu(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function du(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function mu(){return Array.from(this)}function pu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function _u(){let t=0;for(const e of this)++t;return t}function bu(){return!this.node()}function yu(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function vu(t){return function(){this.removeAttribute(t)}}function $u(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wu(t,e){return function(){this.setAttribute(t,e)}}function ku(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function xu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Mu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Au(t,e){var n=On(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?$u:vu:typeof e=="function"?n.local?Mu:xu:n.local?ku:wu)(n,e))}function la(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Du(t){return function(){this.style.removeProperty(t)}}function Tu(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Cu(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Nu(t,e,n){return arguments.length>1?this.each((e==null?Du:typeof e=="function"?Cu:Tu)(t,e,n==null?"":n)):Me(this.node(),t)}function Me(t,e){return t.style.getPropertyValue(e)||la(t).getComputedStyle(t,null).getPropertyValue(e)}function Su(t){return function(){delete this[t]}}function Eu(t,e){return function(){this[t]=e}}function Ru(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Fu(t,e){return arguments.length>1?this.each((e==null?Su:typeof e=="function"?Ru:Eu)(t,e)):this.node()[t]}function ua(t){return t.trim().split(/^|\s+/)}function Rr(t){return t.classList||new ca(t)}function ca(t){this._node=t,this._names=ua(t.getAttribute("class")||"")}ca.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function fa(t,e){for(var n=Rr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ha(t,e){for(var n=Rr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Bu(t){return function(){fa(this,t)}}function Pu(t){return function(){ha(this,t)}}function Lu(t,e){return function(){(e.apply(this,arguments)?fa:ha)(this,t)}}function Iu(t,e){var n=ua(t+"");if(arguments.length<2){for(var r=Rr(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Lu:e?Bu:Pu)(n,e))}function Yu(){this.textContent=""}function Ou(t){return function(){this.textContent=t}}function qu(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Uu(t){return arguments.length?this.each(t==null?Yu:(typeof t=="function"?qu:Ou)(t)):this.node().textContent}function Hu(){this.innerHTML=""}function zu(t){return function(){this.innerHTML=t}}function Vu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Xu(t){return arguments.length?this.each(t==null?Hu:(typeof t=="function"?Vu:zu)(t)):this.node().innerHTML}function Gu(){this.nextSibling&&this.parentNode.appendChild(this)}function Qu(){return this.each(Gu)}function Wu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ju(){return this.each(Wu)}function Zu(t){var e=typeof t=="function"?t:ra(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ku(){return null}function Ju(t,e){var n=typeof t=="function"?t:ra(t),r=e==null?Ku:typeof e=="function"?e:Er(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tc(){var t=this.parentNode;t&&t.removeChild(this)}function ec(){return this.each(tc)}function nc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ic(t){return this.select(t?rc:nc)}function ac(t){return arguments.length?this.property("__data__",t):this.node().__data__}function sc(t){return function(e){t.call(this,e,this.__data__)}}function oc(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function lc(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function uc(t,e,n){return function(){var r=this.__on,i,a=sc(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function cc(t,e,n){var r=oc(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?uc:lc,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function ga(t,e,n){var r=la(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function fc(t,e){return function(){return ga(this,t,e)}}function hc(t,e){return function(){return ga(this,t,e.apply(this,arguments))}}function gc(t,e){return this.each((typeof e=="function"?hc:fc)(t,e))}function*dc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var da=[null];function xt(t,e){this._groups=t,this._parents=e}function Je(){return new xt([[document.documentElement]],da)}function mc(){return this}xt.prototype=Je.prototype={constructor:xt,select:ql,selectAll:Vl,selectChild:Wl,selectChildren:Jl,filter:tu,data:su,enter:eu,exit:lu,join:uu,merge:cu,selection:mc,order:fu,sort:hu,call:du,nodes:mu,node:pu,size:_u,empty:bu,each:yu,attr:Au,style:Nu,property:Fu,classed:Iu,text:Uu,html:Xu,raise:Qu,lower:ju,append:Zu,insert:Ju,remove:ec,clone:ic,datum:ac,on:cc,dispatch:gc,[Symbol.iterator]:dc};function Ne(t){return typeof t=="string"?new xt([[document.querySelector(t)]],[document.documentElement]):new xt([[t]],da)}function pc(t){let e;for(;e=t.sourceEvent;)t=e;return t}function tn(t,e){if(t=pc(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Fr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ma(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function en(){}var ze=.7,An=1/ze,ke="\\s*([+-]?\\d+)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",It="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_c=/^#([0-9a-f]{3,8})$/,bc=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),yc=new RegExp(`^rgb\\(${It},${It},${It}\\)$`),vc=new RegExp(`^rgba\\(${ke},${ke},${ke},${Ve}\\)$`),$c=new RegExp(`^rgba\\(${It},${It},${It},${Ve}\\)$`),wc=new RegExp(`^hsl\\(${Ve},${It},${It}\\)$`),kc=new RegExp(`^hsla\\(${Ve},${It},${It},${Ve}\\)$`),ii={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fr(en,ce,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ai,formatHex:ai,formatHex8:xc,formatHsl:Mc,formatRgb:si,toString:si});function ai(){return this.rgb().formatHex()}function xc(){return this.rgb().formatHex8()}function Mc(){return pa(this).formatHsl()}function si(){return this.rgb().formatRgb()}function ce(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_c.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?oi(e):n===3?new vt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ln(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ln(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bc.exec(t))?new vt(e[1],e[2],e[3],1):(e=yc.exec(t))?new vt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vc.exec(t))?ln(e[1],e[2],e[3],e[4]):(e=$c.exec(t))?ln(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wc.exec(t))?ci(e[1],e[2]/100,e[3]/100,1):(e=kc.exec(t))?ci(e[1],e[2]/100,e[3]/100,e[4]):ii.hasOwnProperty(t)?oi(ii[t]):t==="transparent"?new vt(NaN,NaN,NaN,0):null}function oi(t){return new vt(t>>16&255,t>>8&255,t&255,1)}function ln(t,e,n,r){return r<=0&&(t=e=n=NaN),new vt(t,e,n,r)}function Ac(t){return t instanceof en||(t=ce(t)),t?(t=t.rgb(),new vt(t.r,t.g,t.b,t.opacity)):new vt}function Dn(t,e,n,r){return arguments.length===1?Ac(t):new vt(t,e,n,r==null?1:r)}function vt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Fr(vt,Dn,ma(en,{brighter(t){return t=t==null?An:Math.pow(An,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ze:Math.pow(ze,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vt(ue(this.r),ue(this.g),ue(this.b),Tn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:li,formatHex:li,formatHex8:Dc,formatRgb:ui,toString:ui}));function li(){return`#${le(this.r)}${le(this.g)}${le(this.b)}`}function Dc(){return`#${le(this.r)}${le(this.g)}${le(this.b)}${le((isNaN(this.opacity)?1:this.opacity)*255)}`}function ui(){const t=Tn(this.opacity);return`${t===1?"rgb(":"rgba("}${ue(this.r)}, ${ue(this.g)}, ${ue(this.b)}${t===1?")":`, ${t})`}`}function Tn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ue(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function le(t){return t=ue(t),(t<16?"0":"")+t.toString(16)}function ci(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Et(t,e,n,r)}function pa(t){if(t instanceof Et)return new Et(t.h,t.s,t.l,t.opacity);if(t instanceof en||(t=ce(t)),!t)return new Et;if(t instanceof Et)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Et(o,s,l,t.opacity)}function Tc(t,e,n,r){return arguments.length===1?pa(t):new Et(t,e,n,r==null?1:r)}function Et(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Fr(Et,Tc,ma(en,{brighter(t){return t=t==null?An:Math.pow(An,t),new Et(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ze:Math.pow(ze,t),new Et(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new vt(tr(t>=240?t-240:t+120,i,r),tr(t,i,r),tr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Et(fi(this.h),un(this.s),un(this.l),Tn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Tn(this.opacity);return`${t===1?"hsl(":"hsla("}${fi(this.h)}, ${un(this.s)*100}%, ${un(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fi(t){return t=(t||0)%360,t<0?t+360:t}function un(t){return Math.max(0,Math.min(1,t||0))}function tr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Cc(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function Nc(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return Cc((n-r/e)*e,o,i,a,s)}}const Br=t=>()=>t;function Sc(t,e){return function(n){return t+n*e}}function Ec(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Rc(t){return(t=+t)==1?_a:function(e,n){return n-e?Ec(e,n,t):Br(isNaN(e)?n:e)}}function _a(t,e){var n=e-t;return n?Sc(t,n):Br(isNaN(t)?e:t)}const Cn=function t(e){var n=Rc(e);function r(i,a){var o=n((i=Dn(i)).r,(a=Dn(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=_a(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Fc(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=Dn(e[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var Bc=Fc(Nc);function Pc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Lc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ic(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=nn(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Yc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function St(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Oc(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=nn(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var ur=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,er=new RegExp(ur.source,"g");function qc(t){return function(){return t}}function Uc(t){return function(e){return t(e)+""}}function ba(t,e){var n=ur.lastIndex=er.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=ur.exec(t))&&(i=er.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:St(r,i)})),n=er.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Uc(l[0].x):qc(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function nn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Br(e):(n==="number"?St:n==="string"?(r=ce(e))?(e=r,Cn):ba:e instanceof ce?Cn:e instanceof Date?Yc:Lc(e)?Pc:Array.isArray(e)?Ic:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Oc:St)(t,e)}function ya(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var hi=180/Math.PI,cr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function va(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*hi,skewX:Math.atan(l)*hi,scaleX:o,scaleY:s}}var cn;function Hc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?cr:va(e.a,e.b,e.c,e.d,e.e,e.f)}function zc(t){return t==null||(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",t),!(t=cn.transform.baseVal.consolidate()))?cr:(t=t.matrix,va(t.a,t.b,t.c,t.d,t.e,t.f))}function $a(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,f,h,g,d){if(u!==f||c!==h){var p=g.push("translate(",null,e,null,n);d.push({i:p-4,x:St(u,f)},{i:p-2,x:St(c,h)})}else(f||h)&&g.push("translate("+f+e+h+n)}function o(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:St(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:St(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,g,d){if(u!==f||c!==h){var p=g.push(i(g)+"scale(",null,",",null,")");d.push({i:p-4,x:St(u,f)},{i:p-2,x:St(c,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=t(u),c=t(c),a(u.translateX,u.translateY,c.translateX,c.translateY,f,h),o(u.rotate,c.rotate,f,h),s(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(g){for(var d=-1,p=h.length,m;++d<p;)f[(m=h[d]).i]=m.x(g);return f.join("")}}}var Vc=$a(Hc,"px, ","px)","deg)"),Xc=$a(zc,", ",")",")"),Ae=0,Oe=0,Le=0,wa=1e3,Nn,qe,Sn=0,fe=0,qn=0,Xe=typeof performance=="object"&&performance.now?performance:Date,ka=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pr(){return fe||(ka(Gc),fe=Xe.now()+qn)}function Gc(){fe=0}function En(){this._call=this._time=this._next=null}En.prototype=xa.prototype={constructor:En,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Pr():+n)+(e==null?0:+e),!this._next&&qe!==this&&(qe?qe._next=this:Nn=this,qe=this),this._call=t,this._time=n,fr()},stop:function(){this._call&&(this._call=null,this._time=1/0,fr())}};function xa(t,e,n){var r=new En;return r.restart(t,e,n),r}function Qc(){Pr(),++Ae;for(var t=Nn,e;t;)(e=fe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ae}function gi(){fe=(Sn=Xe.now())+qn,Ae=Oe=0;try{Qc()}finally{Ae=0,jc(),fe=0}}function Wc(){var t=Xe.now(),e=t-Sn;e>wa&&(qn-=e,Sn=t)}function jc(){for(var t,e=Nn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Nn=n);qe=t,fr(r)}function fr(t){if(!Ae){Oe&&(Oe=clearTimeout(Oe));var e=t-fe;e>24?(t<1/0&&(Oe=setTimeout(gi,t-Xe.now()-qn)),Le&&(Le=clearInterval(Le))):(Le||(Sn=Xe.now(),Le=setInterval(Wc,wa)),Ae=1,ka(gi))}}function di(t,e,n){var r=new En;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Zc=na("start","end","cancel","interrupt"),Kc=[],Ma=0,mi=1,hr=2,pn=3,pi=4,gr=5,_n=6;function Un(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Jc(t,n,{name:e,index:r,group:i,on:Zc,tween:Kc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ma})}function Lr(t,e){var n=Bt(t,e);if(n.state>Ma)throw new Error("too late; already scheduled");return n}function Ht(t,e){var n=Bt(t,e);if(n.state>pn)throw new Error("too late; already running");return n}function Bt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Jc(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=xa(a,0,n.time);function a(u){n.state=mi,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,f,h,g;if(n.state!==mi)return l();for(c in r)if(g=r[c],g.name===n.name){if(g.state===pn)return di(o);g.state===pi?(g.state=_n,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[c]):+c<e&&(g.state=_n,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[c])}if(di(function(){n.state===pn&&(n.state=pi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=hr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===hr){for(n.state=pn,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(g=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=gr,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===gr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=_n,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function tf(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>hr&&r.state<gr,r.state=_n,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function ef(t){return this.each(function(){tf(this,t)})}function nf(t,e){var n,r;return function(){var i=Ht(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function rf(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Ht(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function af(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Bt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?nf:rf)(n,t,e))}function Ir(t,e,n){var r=t._id;return t.each(function(){var i=Ht(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Bt(i,r).value[e]}}function Aa(t,e){var n;return(typeof e=="number"?St:e instanceof ce?Cn:(n=ce(e))?(e=n,Cn):ba)(t,e)}function sf(t){return function(){this.removeAttribute(t)}}function of(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lf(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function uf(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function cf(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function ff(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function hf(t,e){var n=On(t),r=n==="transform"?Xc:Aa;return this.attrTween(t,typeof e=="function"?(n.local?ff:cf)(n,r,Ir(this,"attr."+t,e)):e==null?(n.local?of:sf)(n):(n.local?uf:lf)(n,r,e))}function gf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function df(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function mf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&df(t,a)),n}return i._value=e,i}function pf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&gf(t,a)),n}return i._value=e,i}function _f(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=On(t);return this.tween(n,(r.local?mf:pf)(r,e))}function bf(t,e){return function(){Lr(this,t).delay=+e.apply(this,arguments)}}function yf(t,e){return e=+e,function(){Lr(this,t).delay=e}}function vf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bf:yf)(e,t)):Bt(this.node(),e).delay}function $f(t,e){return function(){Ht(this,t).duration=+e.apply(this,arguments)}}function wf(t,e){return e=+e,function(){Ht(this,t).duration=e}}function kf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$f:wf)(e,t)):Bt(this.node(),e).duration}function xf(t,e){if(typeof e!="function")throw new Error;return function(){Ht(this,t).ease=e}}function Mf(t){var e=this._id;return arguments.length?this.each(xf(e,t)):Bt(this.node(),e).ease}function Af(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ht(this,t).ease=n}}function Df(t){if(typeof t!="function")throw new Error;return this.each(Af(this._id,t))}function Tf(t){typeof t!="function"&&(t=aa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new Gt(r,this._parents,this._name,this._id)}function Cf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],c=l.length,f=o[s]=new Array(c),h,g=0;g<c;++g)(h=l[g]||u[g])&&(f[g]=h);for(;s<r;++s)o[s]=e[s];return new Gt(o,this._parents,this._name,this._id)}function Nf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Sf(t,e,n){var r,i,a=Nf(e)?Lr:Ht;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function Ef(t,e){var n=this._id;return arguments.length<2?Bt(this.node(),n).on.on(t):this.each(Sf(n,t,e))}function Rf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ff(){return this.on("end.remove",Rf(this._id))}function Bf(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Er(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),c,f,h=0;h<l;++h)(c=s[h])&&(f=t.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,Un(u[h],e,n,h,u,Bt(c,n)));return new Gt(a,this._parents,e,n)}function Pf(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ia(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=t.call(c,c.__data__,f,l),g,d=Bt(c,n),p=0,m=h.length;p<m;++p)(g=h[p])&&Un(g,e,n,p,h,d);a.push(h),o.push(c)}return new Gt(a,o,e,n)}var Lf=Je.prototype.constructor;function If(){return new Lf(this._groups,this._parents)}function Yf(t,e){var n,r,i;return function(){var a=Me(this,t),o=(this.style.removeProperty(t),Me(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Da(t){return function(){this.style.removeProperty(t)}}function Of(t,e,n){var r,i=n+"",a;return function(){var o=Me(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function qf(t,e,n){var r,i,a;return function(){var o=Me(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Me(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function Uf(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=Ht(this,t),u=l.on,c=l.value[a]==null?s||(s=Da(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function Hf(t,e,n){var r=(t+="")=="transform"?Vc:Aa;return e==null?this.styleTween(t,Yf(t,r)).on("end.style."+t,Da(t)):typeof e=="function"?this.styleTween(t,qf(t,r,Ir(this,"style."+t,e))).each(Uf(this._id,t)):this.styleTween(t,Of(t,r,e),n).on("end.style."+t,null)}function zf(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Vf(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&zf(t,o,n)),r}return a._value=e,a}function Xf(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Vf(t,e,n==null?"":n))}function Gf(t){return function(){this.textContent=t}}function Qf(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Wf(t){return this.tween("text",typeof t=="function"?Qf(Ir(this,"text",t)):Gf(t==null?"":t+""))}function jf(t){return function(e){this.textContent=t.call(this,e)}}function Zf(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&jf(i)),e}return r._value=t,r}function Kf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Zf(t))}function Jf(){for(var t=this._name,e=this._id,n=Ta(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=Bt(l,e);Un(l,t,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Gt(r,this._parents,t,n)}function th(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=Ht(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&a()})}var eh=0;function Gt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ta(){return++eh}var zt=Je.prototype;Gt.prototype={constructor:Gt,select:Bf,selectAll:Pf,selectChild:zt.selectChild,selectChildren:zt.selectChildren,filter:Tf,merge:Cf,selection:If,transition:Jf,call:zt.call,nodes:zt.nodes,node:zt.node,size:zt.size,empty:zt.empty,each:zt.each,on:Ef,attr:hf,attrTween:_f,style:Hf,styleTween:Xf,text:Wf,textTween:Kf,remove:Ff,tween:af,delay:vf,duration:kf,ease:Mf,easeVarying:Df,end:th,[Symbol.iterator]:zt[Symbol.iterator]};function nh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var rh={time:null,delay:0,duration:250,ease:nh};function ih(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ah(t){var e,n;t instanceof Gt?(e=t._id,t=t._name):(e=Ta(),(n=rh).time=Pr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&Un(l,t,e,u,o,n||ih(l,e));return new Gt(r,this._parents,t,e)}Je.prototype.interrupt=ef;Je.prototype.transition=ah;const dr=Math.PI,mr=2*dr,ie=1e-6,sh=mr-ie;function Ca(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function oh(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ca;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class lh{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ca:oh(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,u=i-n,c=o-e,f=s-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ie)if(!(Math.abs(f*l-u*c)>ie)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,d=i-s,p=l*l+u*u,m=g*g+d*d,b=Math.sqrt(p),_=Math.sqrt(h),v=a*Math.tan((dr-Math.acos((p+h-m)/(2*b*_)))/2),k=v/_,y=v/b;Math.abs(k-1)>ie&&this._append`L${e+k*c},${n+k*f}`,this._append`A${a},${a},0,0,${+(f*g>c*d)},${this._x1=e+y*l},${this._y1=n+y*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,c=n+l,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>ie||Math.abs(this._y1-c)>ie)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%mr+mr),h>sh?this._append`A${r},${r},0,1,${f},${e-s},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:h>ie&&this._append`A${r},${r},0,${+(h>=dr)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function uh(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Rn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function De(t){return t=Rn(Math.abs(t)),t?t[1]:NaN}function ch(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function fh(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var hh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fn(t){if(!(e=hh.exec(t)))throw new Error("invalid format: "+t);var e;return new Yr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fn.prototype=Yr.prototype;function Yr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Yr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gh(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Na;function dh(t,e){var n=Rn(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Na=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Rn(t,Math.max(0,e+a-1))[0]}function _i(t,e){var n=Rn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const bi={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uh,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>_i(t*100,e),r:_i,s:dh,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function yi(t){return t}var vi=Array.prototype.map,$i=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mh(t){var e=t.grouping===void 0||t.thousands===void 0?yi:ch(vi.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?yi:fh(vi.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Fn(f);var h=f.fill,g=f.align,d=f.sign,p=f.symbol,m=f.zero,b=f.width,_=f.comma,v=f.precision,k=f.trim,y=f.type;y==="n"?(_=!0,y="g"):bi[y]||(v===void 0&&(v=12),k=!0,y="g"),(m||h==="0"&&g==="=")&&(m=!0,h="0",g="=");var w=p==="$"?n:p==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x=p==="$"?r:/[%p]/.test(y)?o:"",T=bi[y],P=/[defgprs%]/.test(y);v=v===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function z(D){var V=w,N=x,X,ct,mt;if(y==="c")N=T(D)+N,D="";else{D=+D;var ft=D<0||1/D<0;if(D=isNaN(D)?l:T(Math.abs(D),v),k&&(D=gh(D)),ft&&+D==0&&d!=="+"&&(ft=!1),V=(ft?d==="("?d:s:d==="-"||d==="("?"":d)+V,N=(y==="s"?$i[8+Na/3]:"")+N+(ft&&d==="("?")":""),P){for(X=-1,ct=D.length;++X<ct;)if(mt=D.charCodeAt(X),48>mt||mt>57){N=(mt===46?i+D.slice(X+1):D.slice(X))+N,D=D.slice(0,X);break}}}_&&!m&&(D=e(D,1/0));var ht=V.length+D.length+N.length,st=ht<b?new Array(b-ht+1).join(h):"";switch(_&&m&&(D=e(st+D,st.length?b-N.length:1/0),st=""),g){case"<":D=V+D+N+st;break;case"=":D=V+st+D+N;break;case"^":D=st.slice(0,ht=st.length>>1)+V+D+N+st.slice(ht);break;default:D=st+V+D+N;break}return a(D)}return z.toString=function(){return f+""},z}function c(f,h){var g=u((f=Fn(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(De(h)/3)))*3,p=Math.pow(10,-d),m=$i[8+d/3];return function(b){return g(p*b)+m}}return{format:u,formatPrefix:c}}var fn,Sa,Ea;ph({thousands:",",grouping:[3],currency:["$",""]});function ph(t){return fn=mh(t),Sa=fn.format,Ea=fn.formatPrefix,fn}function _h(t){return Math.max(0,-De(Math.abs(t)))}function bh(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(De(e)/3)))*3-De(Math.abs(t)))}function yh(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,De(e)-De(t))+1}function Or(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ra(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const wi=Symbol("implicit");function Fa(){var t=new Kr,e=[],n=[],r=wi;function i(a){let o=t.get(a);if(o===void 0){if(r!==wi)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Kr;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Fa(e,n).unknown(r)},Or.apply(i,arguments),i}function Bn(){var t=Fa().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var h=e().length,g=i<r,d=g?i:r,p=g?r:i;a=(p-d)/Math.max(1,h-l+u*2),s&&(a=Math.floor(a)),d+=(p-d-a*(h-l))*c,o=a*(1-l),s&&(d=Math.round(d),o=Math.round(o));var m=Tl(h).map(function(b){return d+a*b});return n(g?m.reverse():m)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return Bn(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},Or.apply(f(),arguments)}function vh(t){return function(){return t}}function $h(t){return+t}var ki=[0,1];function Dt(t){return t}function pr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:vh(isNaN(e)?NaN:.5)}function wh(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function kh(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=pr(i,r),a=n(o,a)):(r=pr(r,i),a=n(a,o)),function(s){return a(r(s))}}function xh(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=pr(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=Ki(t,s,1,r)-1;return a[l](i[l](s))}}function Mh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ah(){var t=ki,e=ki,n=nn,r,i,a,o=Dt,s,l,u;function c(){var h=Math.min(t.length,e.length);return o!==Dt&&(o=wh(t[0],t[h-1])),s=h>2?xh:kh,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=s(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=s(e,t.map(r),St)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,$h),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=ya,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Dt,c()):o!==Dt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return r=h,i=g,c()}}function Dh(){return Ah()(Dt,Dt)}function Th(t,e,n,r){var i=xl(t,e,n),a;switch(r=Fn(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=bh(i,o))&&(r.precision=a),Ea(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=yh(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=_h(i))&&(r.precision=a-(r.type==="%")*2);break}}return Sa(r)}function qr(t){var e=t.domain;return t.ticks=function(n){var r=e();return ta(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return Th(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=xe(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function rt(){var t=Dh();return t.copy=function(){return Mh(t,rt())},Or.apply(t,arguments),qr(t)}function xi(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ch(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Nh(t){return t<0?-t*t:t*t}function Sh(t){var e=t(Dt,Dt),n=1;function r(){return n===1?t(Dt,Dt):n===.5?t(Ch,Nh):t(xi(n),xi(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},qr(e)}const nr=new Date,rr=new Date;function Ct(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let u;do l.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return l},i.filter=a=>Ct(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(nr.setTime(+a),rr.setTime(+o),t(nr),t(rr),Math.floor(n(nr,rr))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Ba=1e3,Hn=Ba*60,Ge=Hn*60,Qe=Ge*24,Pa=Qe*7,La=Ct(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ba-t.getMinutes()*Hn)},(t,e)=>{t.setTime(+t+e*Ge)},(t,e)=>(e-t)/Ge,t=>t.getHours());La.range;const Eh=Ct(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ge)},(t,e)=>(e-t)/Ge,t=>t.getUTCHours());Eh.range;const ae=Ct(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Hn)/Qe,t=>t.getDate()-1);ae.range;const Rh=Ct(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qe,t=>t.getUTCDate()-1);Rh.range;const Fh=Ct(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qe,t=>Math.floor(t/Qe));Fh.range;function he(t){return Ct(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Hn)/Pa)}const Ia=he(0),Ya=he(1),Bh=he(2),Ph=he(3),Lh=he(4),Oa=he(5),qa=he(6);Ia.range;Ya.range;Bh.range;Ph.range;Lh.range;Oa.range;qa.range;function ge(t){return Ct(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Pa)}const Ih=ge(0),Yh=ge(1),Oh=ge(2),qh=ge(3),Uh=ge(4),Hh=ge(5),zh=ge(6);Ih.range;Yh.range;Oh.range;qh.range;Uh.range;Hh.range;zh.range;const se=Ct(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());se.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ct(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});se.range;const Ua=Ct(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ua.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ct(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ua.range;function Ha(){var t=0,e=1,n,r,i,a,o=Dt,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(a(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function c(f){return function(h){var g,d;return arguments.length?([g,d]=h,o=f(g,d),u):[o(0),o(1)]}}return u.range=c(nn),u.rangeRound=c(ya),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function za(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function yt(){var t=qr(Ha()(Dt));return t.copy=function(){return za(t,yt())},Ra.apply(t,arguments)}function Va(){var t=Sh(Ha());return t.copy=function(){return za(t,Va()).exponent(t.exponent())},Ra.apply(t,arguments)}function Vh(){return Va.apply(null,arguments).exponent(.5)}function Se(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Ee=t=>Bc(t[t.length-1]);var Xh=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Se);const zn=Ee(Xh);var Xa=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Se);const Vn=Ee(Xa);var _r=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Se);const br=Ee(_r);var Gh=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Se);const Qh=Ee(Gh);var Ga=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Se);const Wh=Ee(Ga);var Qa=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Se);const jh=Ee(Qa);function Z(t){return function(){return t}}const Mi=Math.abs,pt=Math.atan2,re=Math.cos,Zh=Math.max,ir=Math.min,Lt=Math.sin,ve=Math.sqrt,bt=1e-12,We=Math.PI,Pn=We/2,bn=2*We;function Kh(t){return t>1?0:t<-1?We:Math.acos(t)}function Ai(t){return t>=1?Pn:t<=-1?-Pn:Math.asin(t)}function Ur(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new lh(e)}function Jh(t){return t.innerRadius}function tg(t){return t.outerRadius}function eg(t){return t.startAngle}function ng(t){return t.endAngle}function rg(t){return t&&t.padAngle}function ig(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,c=o-i,f=s-a,h=f*l-c*u;if(!(h*h<bt))return h=(c*(e-a)-f*(t-i))/h,[t+h*l,e+h*u]}function hn(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/ve(s*s+l*l),c=u*l,f=-u*s,h=t+c,g=e+f,d=n+c,p=r+f,m=(h+d)/2,b=(g+p)/2,_=d-h,v=p-g,k=_*_+v*v,y=i-a,w=h*p-d*g,x=(v<0?-1:1)*ve(Zh(0,y*y*k-w*w)),T=(w*v-_*x)/k,P=(-w*_-v*x)/k,z=(w*v+_*x)/k,D=(-w*_+v*x)/k,V=T-m,N=P-b,X=z-m,ct=D-b;return V*V+N*N>X*X+ct*ct&&(T=z,P=D),{cx:T,cy:P,x01:-c,y01:-f,x11:T*(i/y-1),y11:P*(i/y-1)}}function ag(){var t=Jh,e=tg,n=Z(0),r=null,i=eg,a=ng,o=rg,s=null,l=Ur(u);function u(){var c,f,h=+t.apply(this,arguments),g=+e.apply(this,arguments),d=i.apply(this,arguments)-Pn,p=a.apply(this,arguments)-Pn,m=Mi(p-d),b=p>d;if(s||(s=c=l()),g<h&&(f=g,g=h,h=f),!(g>bt))s.moveTo(0,0);else if(m>bn-bt)s.moveTo(g*re(d),g*Lt(d)),s.arc(0,0,g,d,p,!b),h>bt&&(s.moveTo(h*re(p),h*Lt(p)),s.arc(0,0,h,p,d,b));else{var _=d,v=p,k=d,y=p,w=m,x=m,T=o.apply(this,arguments)/2,P=T>bt&&(r?+r.apply(this,arguments):ve(h*h+g*g)),z=ir(Mi(g-h)/2,+n.apply(this,arguments)),D=z,V=z,N,X;if(P>bt){var ct=Ai(P/h*Lt(T)),mt=Ai(P/g*Lt(T));(w-=ct*2)>bt?(ct*=b?1:-1,k+=ct,y-=ct):(w=0,k=y=(d+p)/2),(x-=mt*2)>bt?(mt*=b?1:-1,_+=mt,v-=mt):(x=0,_=v=(d+p)/2)}var ft=g*re(_),ht=g*Lt(_),st=h*re(y),_t=h*Lt(y);if(z>bt){var Pt=g*re(v),Jt=g*Lt(v),me=h*re(k),te=h*Lt(k),wt;if(m<We)if(wt=ig(ft,ht,me,te,Pt,Jt,st,_t)){var ee=ft-wt[0],Wt=ht-wt[1],ne=Pt-wt[0],pe=Jt-wt[1],H=1/Lt(Kh((ee*ne+Wt*pe)/(ve(ee*ee+Wt*Wt)*ve(ne*ne+pe*pe)))/2),K=ve(wt[0]*wt[0]+wt[1]*wt[1]);D=ir(z,(h-K)/(H-1)),V=ir(z,(g-K)/(H+1))}else D=V=0}x>bt?V>bt?(N=hn(me,te,ft,ht,g,V,b),X=hn(Pt,Jt,st,_t,g,V,b),s.moveTo(N.cx+N.x01,N.cy+N.y01),V<z?s.arc(N.cx,N.cy,V,pt(N.y01,N.x01),pt(X.y01,X.x01),!b):(s.arc(N.cx,N.cy,V,pt(N.y01,N.x01),pt(N.y11,N.x11),!b),s.arc(0,0,g,pt(N.cy+N.y11,N.cx+N.x11),pt(X.cy+X.y11,X.cx+X.x11),!b),s.arc(X.cx,X.cy,V,pt(X.y11,X.x11),pt(X.y01,X.x01),!b))):(s.moveTo(ft,ht),s.arc(0,0,g,_,v,!b)):s.moveTo(ft,ht),!(h>bt)||!(w>bt)?s.lineTo(st,_t):D>bt?(N=hn(st,_t,Pt,Jt,h,-D,b),X=hn(ft,ht,me,te,h,-D,b),s.lineTo(N.cx+N.x01,N.cy+N.y01),D<z?s.arc(N.cx,N.cy,D,pt(N.y01,N.x01),pt(X.y01,X.x01),!b):(s.arc(N.cx,N.cy,D,pt(N.y01,N.x01),pt(N.y11,N.x11),!b),s.arc(0,0,h,pt(N.cy+N.y11,N.cx+N.x11),pt(X.cy+X.y11,X.cx+X.x11),b),s.arc(X.cx,X.cy,D,pt(X.y11,X.x11),pt(X.y01,X.x01),!b))):s.arc(0,0,h,y,k,b)}if(s.closePath(),c)return s=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-We/2;return[re(f)*c,Lt(f)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Z(+c),u):t},u.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Z(+c),u):e},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Z(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Z(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Z(+c),u):i},u.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Z(+c),u):a},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Z(+c),u):o},u.context=function(c){return arguments.length?(s=c==null?null:c,u):s},u}function Hr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Wa(t){this._context=t}Wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ja(t){return new Wa(t)}function Za(t){return t[0]}function Ka(t){return t[1]}function sg(t,e){var n=Z(!0),r=null,i=ja,a=null,o=Ur(s);t=typeof t=="function"?t:t===void 0?Za:Z(t),e=typeof e=="function"?e:e===void 0?Ka:Z(e);function s(l){var u,c=(l=Hr(l)).length,f,h=!1,g;for(r==null&&(a=i(g=o())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,l),+e(f,u,l));if(g)return a=null,g+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Z(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Z(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Z(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function zr(t,e,n){var r=null,i=Z(!0),a=null,o=ja,s=null,l=Ur(u);t=typeof t=="function"?t:t===void 0?Za:Z(+t),e=typeof e=="function"?e:Z(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Ka:Z(+n);function u(f){var h,g,d,p=(f=Hr(f)).length,m,b=!1,_,v=new Array(p),k=new Array(p);for(a==null&&(s=o(_=l())),h=0;h<=p;++h){if(!(h<p&&i(m=f[h],h,f))===b)if(b=!b)g=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=h-1;d>=g;--d)s.point(v[d],k[d]);s.lineEnd(),s.areaEnd()}b&&(v[h]=+t(m,h,f),k[h]=+e(m,h,f),s.point(r?+r(m,h,f):v[h],n?+n(m,h,f):k[h]))}if(_)return s=null,_+""||null}function c(){return sg().defined(i).curve(o).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Z(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Z(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Z(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Z(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Z(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Z(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Z(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),u):o},u.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),u):a},u}function og(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function lg(t){return t}function ug(){var t=lg,e=og,n=null,r=Z(0),i=Z(bn),a=Z(0);function o(s){var l,u=(s=Hr(s)).length,c,f,h=0,g=new Array(u),d=new Array(u),p=+r.apply(this,arguments),m=Math.min(bn,Math.max(-bn,i.apply(this,arguments)-p)),b,_=Math.min(Math.abs(m)/u,a.apply(this,arguments)),v=_*(m<0?-1:1),k;for(l=0;l<u;++l)(k=d[g[l]=l]=+t(s[l],l,s))>0&&(h+=k);for(e!=null?g.sort(function(y,w){return e(d[y],d[w])}):n!=null&&g.sort(function(y,w){return n(s[y],s[w])}),l=0,f=h?(m-u*v)/h:0;l<u;++l,p=b)c=g[l],k=d[c],b=p+(k>0?k*f:0)+v,d[c]={data:s[c],index:l,value:k,startAngle:p,endAngle:b,padAngle:_};return d}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:Z(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:Z(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:Z(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:Z(+s),o):a},o}function Di(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ja(t){this._context=t}Ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Di(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Di(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vr(t){return new Ja(t)}function Ue(t,e,n){this.k=t,this.x=e,this.y=n}Ue.prototype={constructor:Ue,scale:function(t){return t===1?this:new Ue(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ue(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ue.prototype;var Mt=(t=>(t[t.Year=1]="Year",t[t.All=2]="All",t))(Mt||{});function ts(t){return t>365||t===0?2:1}var j=(t=>(t[t.Month=0]="Month",t[t.ThreeMonths=1]="ThreeMonths",t[t.Year=2]="Year",t[t.AllTime=3]="AllTime",t))(j||{});function Re(){return{width:600,height:250,marginLeft:70,marginRight:70,marginTop:20,marginBottom:25}}function Ut(t,e){t.select(".no-data").attr("pointer-events",e?"none":"all").transition().duration(600).attr("opacity",e?0:1)}function Zt(t){return new Map(Object.entries(t).map(([e,n])=>[Number(e),n]))}function $t(t){return ot(t,e=>e[1])}function cg(t){return{daysAdded:Zt(t.added.added)}}function fg(t,e){const n=`"added:${t}"`;if(t===1)return n;const r=`-"added:${e}"`;return`${n} AND ${r}`}function hg(t,e,n,r){if(!t.daysAdded.size)return[null,[]];let a;switch(e){case j.Month:a=-31;break;case j.ThreeMonths:a=-90;break;case j.Year:a=-365;break;case j.AllTime:a=xn(t.daysAdded.keys());break}const o=1,s=Math.min(70,Math.abs(a)),l=rt().domain([a,o]),u=jt().value(v=>v[0]).domain(l.domain()).thresholds(l.ticks(s))(t.daysAdded.entries()),c=$t;if(!ot(u,c))return[null,[]];const f=rt().range([.7,.3]),h=yt(v=>Vn(f(v))).domain([o,a]),g=ot(u,c),d=Math.abs(a),p=Math.round(g/d),m=[{label:kr(),value:jn({cards:g})},{label:Wi(),value:hs({count:p})}];function b(v,k,y){const w=Tr(v.x0,v.x1),x=jn({cards:c(v)}),T=Ln(),P=jn({cards:k});return`${w}:<br>${x}<br>${T}: ${P}`}function _(v){const k=Math.abs(v.x0)+1,y=Math.abs(v.x1)+1,w=fg(k,y);n("search",{query:w})}return[{scale:l,bins:u,total:g,hoverText:b,onClick:r?_:null,colourScale:h,binValue:$t,showArea:!0},m]}function Ti(t){let e,n;return{c(){e=R("div"),n=Q(t[1]),this.h()},l(r){e=F(r,"DIV",{class:!0});var i=B(e);n=W(i,t[1]),i.forEach($),this.h()},h(){E(e,"class","subtitle svelte-3fyu6y")},m(r,i){A(r,e,i),M(e,n)},p(r,i){i&2&&Yt(n,r[1])},d(r){r&&$(e)}}}function gg(t){let e,n,r,i=t[1]&&Ti(t);const a=t[2].default,o=yr(a,t,t[3],null);return{c(){e=R("div"),i&&i.c(),n=q(),o&&o.c(),this.h()},l(s){e=F(s,"DIV",{class:!0});var l=B(e);i&&i.l(l),n=U(l),o&&o.l(l),l.forEach($),this.h()},h(){E(e,"class","graph d-flex flex-grow-1 flex-column justify-content-center svelte-3fyu6y")},m(s,l){A(s,e,l),i&&i.m(e,null),M(e,n),o&&o.m(e,null),r=!0},p(s,l){s[1]?i?i.p(s,l):(i=Ti(s),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&&o.p&&(!r||l&8)&&vr(o,a,s,s[3],r?wr(a,s[3],l,null):$r(s[3]),null)},i(s){r||(C(o,s),r=!0)},o(s){S(o,s),r=!1},d(s){s&&$(e),i&&i.d(),o&&o.d(s)}}}function dg(t){let e,n;return e=new So({props:{class:"d-flex flex-column",title:t[0],$$slots:{default:[gg]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&1&&(a.title=r[0]),i&10&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function mg(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:a}=e,{subtitle:o=null}=e;return t.$$set=s=>{"title"in s&&n(0,a=s.title),"subtitle"in s&&n(1,o=s.subtitle),"$$scope"in s&&n(3,i=s.$$scope)},[a,o,r,i]}class At extends J{constructor(e){super(),tt(this,e,mg,dg,et,{title:0,subtitle:1})}}function Ci(t){let e,n,r,i,a,o,s;return a=Te(t[8][0]),{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[5]),this.h()},l(l){e=F(l,"LABEL",{});var u=B(e);n=F(u,"INPUT",{type:!0}),r=U(u),i=W(u,t[5]),u.forEach($),this.h()},h(){E(n,"type","radio"),n.__value=j.AllTime,dt(n,n.__value),a.p(n)},m(l,u){A(l,e,u),M(e,n),n.checked=n.__value===t[0],M(e,r),M(e,i),o||(s=nt(n,"change",t[11]),o=!0)},p(l,u){u&1&&(n.checked=n.__value===l[0])},d(l){l&&$(e),a.r(),o=!1,s()}}}function pg(t){let e,n,r,i,a,o,s,l,u,c,f,h,g,d,p,m,b,_,v,k=t[1]===Mt.All&&Ci(t);return b=Te(t[8][0]),{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[2]),a=q(),o=R("label"),s=R("input"),l=q(),u=Q(t[3]),c=q(),f=R("label"),h=R("input"),g=q(),d=Q(t[4]),p=q(),k&&k.c(),m=at(),this.h()},l(y){e=F(y,"LABEL",{});var w=B(e);n=F(w,"INPUT",{type:!0}),r=U(w),i=W(w,t[2]),w.forEach($),a=U(y),o=F(y,"LABEL",{});var x=B(o);s=F(x,"INPUT",{type:!0}),l=U(x),u=W(x,t[3]),x.forEach($),c=U(y),f=F(y,"LABEL",{});var T=B(f);h=F(T,"INPUT",{type:!0}),g=U(T),d=W(T,t[4]),T.forEach($),p=U(y),k&&k.l(y),m=at(),this.h()},h(){E(n,"type","radio"),n.__value=j.Month,dt(n,n.__value),E(s,"type","radio"),s.__value=j.ThreeMonths,dt(s,s.__value),E(h,"type","radio"),h.__value=j.Year,dt(h,h.__value),b.p(n,s,h)},m(y,w){A(y,e,w),M(e,n),n.checked=n.__value===t[0],M(e,r),M(e,i),A(y,a,w),A(y,o,w),M(o,s),s.checked=s.__value===t[0],M(o,l),M(o,u),A(y,c,w),A(y,f,w),M(f,h),h.checked=h.__value===t[0],M(f,g),M(f,d),A(y,p,w),k&&k.m(y,w),A(y,m,w),_||(v=[nt(n,"change",t[7]),nt(s,"change",t[9]),nt(h,"change",t[10])],_=!0)},p(y,[w]){w&1&&(n.checked=n.__value===y[0]),w&1&&(s.checked=s.__value===y[0]),w&1&&(h.checked=h.__value===y[0]),y[1]===Mt.All?k?k.p(y,w):(k=Ci(y),k.c(),k.m(m.parentNode,m)):k&&(k.d(1),k=null)},i:G,o:G,d(y){y&&($(e),$(a),$(o),$(c),$(f),$(p),$(m)),k&&k.d(y),b.r(),_=!1,Ce(v)}}}function _g(t,e,n){let{revlogRange:r}=e,{graphRange:i}=e,{followRevlog:a=!1}=e;function o(m){m===Mt.All?n(0,i=j.AllTime):i===j.AllTime&&n(0,i=j.Year)}const s=Vt(1*vn),l=Vt(3*vn),u=Vt(1*Co),c=xr(),f=[[]];function h(){i=this.__value,n(0,i)}function g(){i=this.__value,n(0,i)}function d(){i=this.__value,n(0,i)}function p(){i=this.__value,n(0,i)}return t.$$set=m=>{"revlogRange"in m&&n(1,r=m.revlogRange),"graphRange"in m&&n(0,i=m.graphRange),"followRevlog"in m&&n(6,a=m.followRevlog)},t.$$.update=()=>{t.$$.dirty&66&&a&&o(r)},[i,r,s,l,u,c,a,h,f,g,d,p]}class rn extends J{constructor(e){super(),tt(this,e,_g,pg,et,{revlogRange:1,graphRange:0,followRevlog:6})}}function bg(t){let e,n,r,i,a,o,s,l;return{c(){e=lt("g"),r=q(),i=lt("g"),o=q(),s=lt("g"),this.h()},l(u){e=ut(u,"g",{class:!0,transform:!0}),B(e).forEach($),r=U(u),i=ut(u,"g",{class:!0,transform:!0}),B(i).forEach($),o=U(u),s=ut(u,"g",{class:!0,transform:!0}),B(s).forEach($),this.h()},h(){E(e,"class","x-ticks svelte-1mgreab"),E(e,"transform",n=`translate(0, ${t[0].height-t[0].marginBottom})`),E(i,"class","y-ticks svelte-1mgreab"),E(i,"transform",a=`translate(${t[0].marginLeft}, 0)`),E(s,"class","y2-ticks svelte-1mgreab"),E(s,"transform",l=`translate(${t[0].width-t[0].marginRight}, 0)`)},m(u,c){A(u,e,c),A(u,r,c),A(u,i,c),A(u,o,c),A(u,s,c)},p(u,[c]){c&1&&n!==(n=`translate(0, ${u[0].height-u[0].marginBottom})`)&&E(e,"transform",n),c&1&&a!==(a=`translate(${u[0].marginLeft}, 0)`)&&E(i,"transform",a),c&1&&l!==(l=`translate(${u[0].width-u[0].marginRight}, 0)`)&&E(s,"transform",l)},i:G,o:G,d(u){u&&($(e),$(r),$(i),$(o),$(s))}}}function yg(t,e,n){let{bounds:r}=e;return t.$$set=i=>{"bounds"in i&&n(0,r=i.bounds)},[r]}class an extends J{constructor(e){super(),tt(this,e,yg,bg,et,{bounds:0})}}function vg(t){let e;return{c(){e=lt("path"),this.h()},l(n){e=ut(n,"path",{class:!0}),B(e).forEach($),this.h()},h(){E(e,"class","cumulative-overlay svelte-5v0l18")},m(n,r){A(n,e,r)},p:G,i:G,o:G,d(n){n&&$(e)}}}function $g(t){return[]}class Xr extends J{constructor(e){super(),tt(this,e,$g,vg,et,{})}}const wg="tick-odd",es="graph-element-clickable";function kg(t){let e,n;return{c(){e=R("div"),n=new us(!1),this.h()},l(r){e=F(r,"DIV",{class:!0,style:!0});var i=B(e);n=cs(i,!1),i.forEach($),this.h()},h(){n.a=null,E(e,"class","tooltip svelte-fno6i4"),Nt(e,"left",t[3]+"px"),Nt(e,"top",t[4]+"px"),Nt(e,"opacity",t[1]?1:0)},m(r,i){A(r,e,i),n.m(t[0],e),t[8](e)},p(r,[i]){i&1&&n.p(r[0]),i&8&&Nt(e,"left",r[3]+"px"),i&16&&Nt(e,"top",r[4]+"px"),i&2&&Nt(e,"opacity",r[1]?1:0)},i:G,o:G,d(r){r&&$(e),t[8](null)}}}function xg(t,e,n){let{html:r=""}=e,{x:i=0}=e,{y:a=0}=e,{show:o=!0}=e,s=null,l,u,c=0;async function f(g){await fs(),n(7,c=s?Math.round(s.clientWidth*1.2*(g/document.body.clientWidth)):0)}function h(g){Tt[g?"unshift":"push"](()=>{s=g,n(2,s)})}return t.$$set=g=>{"html"in g&&n(0,r=g.html),"x"in g&&n(5,i=g.x),"y"in g&&n(6,a=g.y),"show"in g&&n(1,o=g.show)},t.$$.update=()=>{t.$$.dirty&32&&f(i),t.$$.dirty&224&&(n(3,l=i+40-c),n(4,u=a+40))},[r,o,s,l,u,i,a,c,h]}class Mg extends J{constructor(e){super(),tt(this,e,xg,kg,et,{html:0,x:5,y:6,show:1})}}let gn=null;function ns(){if(gn)return gn;const t=document.createElement("div");return gn=new Mg({target:t}),document.body.appendChild(t),gn}function Ag(t,e,n){ns().$set({html:t,x:e,y:n,show:!0})}const Fe=ol(Ag,16);function sn(){const t=ns();Fe.cancel(),t.$set({show:!1})}function Dg(t,e,n){var b;const r=Ne(t),i=r.transition().duration(600),a=_=>gt(_);if(n)Ut(r,!0);else{Ut(r,!1);return}const o=(b=n.binValue)!=null?b:_=>_.length,s=n.scale.range([e.marginLeft,e.width-e.marginRight]);r.select(".x-ticks").call(_=>{var v;return _.transition(i).call(In(s).ticks(7).tickSizeOuter(0).tickFormat((v=n.xTickFormat)!=null?v:a))}).attr("direction","ltr");const l=kn(n.bins,_=>o(_)),u=rt().range([e.height-e.marginBottom,e.marginTop]).domain([0,l]).nice();r.select(".y-ticks").call(_=>_.transition(i).call(Yn(u).ticks(e.height/50).tickSizeOuter(0).tickFormat(a))).attr("direction","ltr");function c(_){const v=Math.max(0,s(_.x1)-s(_.x0)-1);return v!=null?v:0}const f=_=>_.attr("width",c).transition(i).attr("x",v=>s(v.x0)).attr("y",v=>u(o(v))).attr("height",v=>u(0)-u(o(v))).attr("fill",v=>n.colourScale(v.x1));r.select("g.bars").selectAll("rect").data(n.bins).join(_=>_.append("rect").attr("rx",1).attr("x",v=>s(v.x0)).attr("y",u(0)).attr("height",0).call(f),_=>_.call(f),_=>_.call(v=>v.transition(i).attr("height",0).attr("y",u(0))));const h=n.bins.map(_=>o(_));h.unshift(0);const g=Cr(h),d=u.copy().domain([0,n.total]).nice();n.showArea&&n.bins.length&&g.slice(-1)[0]&&(r.select(".y2-ticks").call(_=>_.transition(i).call(Sr(d).ticks(e.height/50).tickSizeOuter(0).tickFormat(a))).attr("direction","ltr"),r.select("path.cumulative-overlay").datum(g).attr("d",zr().curve(Vr).x((_,v)=>s(v===0?n.bins[0].x0:n.bins[v-1].x1)).y0(e.height-e.marginBottom).y1(_=>d(_))));const p=n.bins.map((_,v)=>[_,g[v+1]]),m=r.select("g.hover-columns").selectAll("rect").data(p).join("rect").attr("x",([_])=>s(_.x0)).attr("y",()=>u(l)).attr("width",([_])=>c(_)).attr("height",()=>u(0)-u(l)).on("mousemove",(_,[v,k])=>{const[y,w]=tn(_,document.body),x=n.showArea?k/n.total*100:0;Fe(n.hoverText(v,k,x),y,w)}).on("mouseout",sn);n.onClick&&m.filter(([_])=>_.length>0).attr("class",es).on("click",(_,[v])=>n.onClick(v))}function Tg(t){let e;return{c(){e=lt("g"),this.h()},l(n){e=ut(n,"g",{class:!0}),B(e).forEach($),this.h()},h(){E(e,"class","hover-columns svelte-psugqn")},m(n,r){A(n,e,r)},p:G,i:G,o:G,d(n){n&&$(e)}}}function Cg(t){return[]}class Xn extends J{constructor(e){super(),tt(this,e,Cg,Tg,et,{})}}function Ng(t){let e,n,r,i,a,o,s,l;return{c(){e=lt("g"),n=lt("rect"),a=lt("text"),o=Q(t[1]),this.h()},l(u){e=ut(u,"g",{class:!0});var c=B(e);n=ut(c,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0}),B(n).forEach($),a=ut(c,"text",{x:!0,y:!0,class:!0});var f=B(a);o=W(f,t[1]),f.forEach($),c.forEach($),this.h()},h(){E(n,"x","0"),E(n,"y","0"),E(n,"width",r=t[0].width),E(n,"height",i=t[0].height),E(n,"class","svelte-1u4akxr"),E(a,"x",s=t[0].width/2+","),E(a,"y",l=t[0].height/2),E(a,"class","svelte-1u4akxr"),E(e,"class","no-data svelte-1u4akxr")},m(u,c){A(u,e,c),M(e,n),M(e,a),M(a,o)},p(u,[c]){c&1&&r!==(r=u[0].width)&&E(n,"width",r),c&1&&i!==(i=u[0].height)&&E(n,"height",i),c&1&&s!==(s=u[0].width/2+",")&&E(a,"x",s),c&1&&l!==(l=u[0].height/2)&&E(a,"y",l)},i:G,o:G,d(u){u&&$(e)}}}function Sg(t,e,n){let{bounds:r}=e;const i=gs();return t.$$set=a=>{"bounds"in a&&n(0,r=a.bounds)},[r,i]}class on extends J{constructor(e){super(),tt(this,e,Sg,Ng,et,{bounds:0})}}function Eg(t){let e,n,r,i,a,o,s;return r=new Xn({}),i=new Xr({}),a=new an({props:{bounds:t[1]}}),o=new on({props:{bounds:t[1]}}),{c(){e=lt("svg"),n=lt("g"),L(r.$$.fragment),L(i.$$.fragment),L(a.$$.fragment),L(o.$$.fragment),this.h()},l(l){e=ut(l,"svg",{viewBox:!0});var u=B(e);n=ut(u,"g",{class:!0}),B(n).forEach($),O(r.$$.fragment,u),O(i.$$.fragment,u),O(a.$$.fragment,u),O(o.$$.fragment,u),u.forEach($),this.h()},h(){E(n,"class","bars"),E(e,"viewBox",`0 0 ${t[1].width} ${t[1].height}`)},m(l,u){A(l,e,u),M(e,n),I(r,e,null),I(i,e,null),I(a,e,null),I(o,e,null),t[3](e),s=!0},p:G,i(l){s||(C(r.$$.fragment,l),C(i.$$.fragment,l),C(a.$$.fragment,l),C(o.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),S(i.$$.fragment,l),S(a.$$.fragment,l),S(o.$$.fragment,l),s=!1},d(l){l&&$(e),Y(r),Y(i),Y(a),Y(o),t[3](null)}}}function Rg(t,e,n){let{data:r=null}=e;const i=Re();let a=null;function o(s){Tt[s?"unshift":"push"](()=>{a=s,n(0,a)})}return t.$$set=s=>{"data"in s&&n(2,r=s.data)},t.$$.update=()=>{t.$$.dirty&5&&Dg(a,i,r)},[a,i,r,o]}class de extends J{constructor(e){super(),tt(this,e,Rg,Eg,et,{data:2})}}function Fg(t){let e,n;const r=t[1].default,i=yr(r,t,t[0],null);return{c(){e=R("div"),i&&i.c(),this.h()},l(a){e=F(a,"DIV",{class:!0});var o=B(e);i&&i.l(o),o.forEach($),this.h()},h(){E(e,"class","svelte-1a4bkik")},m(a,o){A(a,e,o),i&&i.m(e,null),n=!0},p(a,[o]){i&&i.p&&(!n||o&1)&&vr(i,r,a,a[0],n?wr(r,a[0],o,null):$r(a[0]),null)},i(a){n||(C(i,a),n=!0)},o(a){S(i,a),n=!1},d(a){a&&$(e),i&&i.d(a)}}}function Bg(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,r]}class Ft extends J{constructor(e){super(),tt(this,e,Bg,Fg,et,{})}}function Ni(t,e,n){const r=t.slice();return r[1]=e[n].label,r[2]=e[n].value,r}function Si(t){let e,n,r=t[1]+"",i,a,o,s,l=t[2]+"",u,c;return{c(){e=R("tr"),n=R("td"),i=Q(r),a=Q(":"),o=q(),s=R("td"),u=Q(l),c=q(),this.h()},l(f){e=F(f,"TR",{});var h=B(e);n=F(h,"TD",{class:!0});var g=B(n);i=W(g,r),a=W(g,":"),g.forEach($),o=U(h),s=F(h,"TD",{class:!0});var d=B(s);u=W(d,l),d.forEach($),c=U(h),h.forEach($),this.h()},h(){E(n,"class","align-end svelte-1blhjzb"),E(s,"class","align-start svelte-1blhjzb")},m(f,h){A(f,e,h),M(e,n),M(n,i),M(n,a),M(e,o),M(e,s),M(s,u),M(e,c)},p(f,h){h&1&&r!==(r=f[1]+"")&&Yt(i,r),h&1&&l!==(l=f[2]+"")&&Yt(u,l)},d(f){f&&$(e)}}}function Pg(t){let e,n,r=Xt(t[0]),i=[];for(let a=0;a<r.length;a+=1)i[a]=Si(Ni(t,r,a));return{c(){e=R("div"),n=R("table");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=F(a,"DIV",{class:!0});var o=B(e);n=F(o,"TABLE",{dir:!0});var s=B(n);for(let l=0;l<i.length;l+=1)i[l].l(s);s.forEach($),o.forEach($),this.h()},h(){E(n,"dir",Eo()),E(e,"class","svelte-1blhjzb")},m(a,o){A(a,e,o),M(e,n);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(n,null)},p(a,[o]){if(o&1){r=Xt(a[0]);let s;for(s=0;s<r.length;s+=1){const l=Ni(a,r,s);i[s]?i[s].p(l,o):(i[s]=Si(l),i[s].c(),i[s].m(n,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}},i:G,o:G,d(a){a&&$(e),je(i,a)}}}function Lg(t,e,n){let{tableData:r}=e;return t.$$set=i=>{"tableData"in i&&n(0,r=i.tableData)},[r]}class Kt extends J{constructor(e){super(),tt(this,e,Lg,Pg,et,{tableData:0})}}function Ig(t){let e,n,r;function i(o){t[9](o)}let a={revlogRange:Mt.All};return t[1]!==void 0&&(a.graphRange=t[1]),e=new rn({props:a}),Tt.push(()=>Ze(e,"graphRange",i)),{c(){L(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){I(e,o,s),r=!0},p(o,s){const l={};!n&&s&2&&(n=!0,l.graphRange=o[1],Ke(()=>n=!1)),e.$set(l)},i(o){r||(C(e.$$.fragment,o),r=!0)},o(o){S(e.$$.fragment,o),r=!1},d(o){Y(e,o)}}}function Yg(t){let e,n,r,i,a,o;return e=new Ft({props:{$$slots:{default:[Ig]},$$scope:{ctx:t}}}),r=new de({props:{data:t[2]}}),a=new Kt({props:{tableData:t[3]}}),{c(){L(e.$$.fragment),n=q(),L(r.$$.fragment),i=q(),L(a.$$.fragment)},l(s){O(e.$$.fragment,s),n=U(s),O(r.$$.fragment,s),i=U(s),O(a.$$.fragment,s)},m(s,l){I(e,s,l),A(s,n,l),I(r,s,l),A(s,i,l),I(a,s,l),o=!0},p(s,l){const u={};l&2050&&(u.$$scope={dirty:l,ctx:s}),e.$set(u);const c={};l&4&&(c.data=s[2]),r.$set(c);const f={};l&8&&(f.tableData=s[3]),a.$set(f)},i(s){o||(C(e.$$.fragment,s),C(r.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(r.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){s&&($(n),$(i)),Y(e,s),Y(r,s),Y(a,s)}}}function Og(t){let e,n;return e=new At({props:{title:t[4],subtitle:t[5],$$slots:{default:[Yg]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&2062&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function qg(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,m=>n(8,r=m)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o=null}=e,{prefs:s}=e;a();let l=null,u=[],c=j.Month;const f=Qt();let h=null;const g=ds(),d=ms();function p(m){c=m,n(1,c)}return t.$$set=m=>{"sourceData"in m&&n(6,o=m.sourceData),"prefs"in m&&a(n(0,s=m.prefs))},t.$$.update=()=>{t.$$.dirty&64&&o&&n(7,h=cg(o)),t.$$.dirty&386&&h&&n(2,[l,u]=hg(h,c,f,r.browserLinksSupported),l,(n(3,u),n(7,h),n(1,c),n(8,r),n(6,o)))},[s,c,l,u,g,d,o,h,r,p]}class Ug extends J{constructor(e){super(),tt(this,e,qg,Og,et,{sourceData:6,prefs:0})}}function Hg(t,e){const n=t.buttons;switch(e){case j.Month:return n.oneMonth;case j.ThreeMonths:return n.threeMonths;case j.Year:return n.oneYear;case j.AllTime:return n.allTime}}function zg(t,e,n,r){const i=Hg(n,r),a=[...i.learning.map((_,v)=>({buttonNum:v+1,group:"learning",count:_})),...i.young.map((_,v)=>({buttonNum:v+1,group:"young",count:_})),...i.mature.map((_,v)=>({buttonNum:v+1,group:"mature",count:_}))],o=_=>{const v=a.filter(x=>x.group==_),k=ot(v,x=>x.count),y=ot(v.filter(x=>x.buttonNum>1),x=>x.count),w=k?gt(y/k*100):"0";return{total:k,correct:y,percent:w}},s=_=>{const v=o(_.group).total,k=_.count,y=v?gt(k/v*100):"0";return`${gt(k)} (${y}%)`},l=Math.max(...a.map(_=>_.count)),u=Ne(t),c=u.transition().duration(600);if(l)Ut(u,!0);else{Ut(u,!1);return}const f=Bn().domain(["learning","young","mature"]).range([e.marginLeft,e.width-e.marginRight]);u.select(".x-ticks").call(_=>_.transition(c).call(In(f).tickFormat(v=>{let k;switch(v){case"learning":k=Dr();break;case"young":k=Ar();break;case"mature":default:k=Mr();break}return`${k} (${o(v).percent}%)`}).tickSizeOuter(0))).attr("direction","ltr");const h=Bn().domain(["1","2","3","4"]).range([0,f.bandwidth()]).paddingOuter(1).paddingInner(.1),g=yt(zn).domain([1,4]),d=_=>gt(_),p=rt().range([e.height-e.marginBottom,e.marginTop]).domain([0,l]);u.select(".y-ticks").call(_=>_.transition(c).call(Yn(p).ticks(e.height/50).tickSizeOuter(0).tickFormat(d))).attr("direction","ltr");const m=_=>_.attr("width",h.bandwidth()).attr("opacity",.8).transition(c).attr("x",v=>f(v.group)+h(v.buttonNum.toString())).attr("y",v=>p(v.count)).attr("height",v=>p(0)-p(v.count)).attr("fill",v=>g(v.buttonNum));u.select("g.bars").selectAll("rect").data(a).join(_=>_.append("rect").attr("rx",1).attr("x",v=>f(v.group)+h(v.buttonNum.toString())).attr("y",p(0)).attr("height",0).call(m),_=>_.call(m),_=>_.call(v=>v.transition(c).attr("height",0).attr("y",p(0))));function b(_){const v=ps(),k=_s(),y=bs(o(_.group)),w=`${k}: ${s(_)}`;return`${v}: ${_.buttonNum}<br>${w}<br>${y}`}u.select("g.hover-columns").selectAll("rect").data(a).join("rect").attr("x",_=>f(_.group)+h(_.buttonNum.toString())).attr("y",()=>p(l)).attr("width",h.bandwidth()).attr("height",()=>p(0)-p(l)).on("mousemove",(_,v)=>{const[k,y]=tn(_,document.body);Fe(b(v),k,y)}).on("mouseout",sn)}function Vg(t){let e,n,r;function i(o){t[7](o)}let a={revlogRange:t[0],followRevlog:!0};return t[1]!==void 0&&(a.graphRange=t[1]),e=new rn({props:a}),Tt.push(()=>Ze(e,"graphRange",i)),{c(){L(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){I(e,o,s),r=!0},p(o,s){const l={};s&1&&(l.revlogRange=o[0]),!n&&s&2&&(n=!0,l.graphRange=o[1],Ke(()=>n=!1)),e.$set(l)},i(o){r||(C(e.$$.fragment,o),r=!0)},o(o){S(e.$$.fragment,o),r=!1},d(o){Y(e,o)}}}function Xg(t){let e,n,r,i,a,o,s,l;return e=new Ft({props:{$$slots:{default:[Vg]},$$scope:{ctx:t}}}),a=new Xn({}),o=new an({props:{bounds:t[3]}}),s=new on({props:{bounds:t[3]}}),{c(){L(e.$$.fragment),n=q(),r=lt("svg"),i=lt("g"),L(a.$$.fragment),L(o.$$.fragment),L(s.$$.fragment),this.h()},l(u){O(e.$$.fragment,u),n=U(u),r=ut(u,"svg",{viewBox:!0});var c=B(r);i=ut(c,"g",{class:!0}),B(i).forEach($),O(a.$$.fragment,c),O(o.$$.fragment,c),O(s.$$.fragment,c),c.forEach($),this.h()},h(){E(i,"class","bars"),E(r,"viewBox",`0 0 ${t[3].width} ${t[3].height}`)},m(u,c){I(e,u,c),A(u,n,c),A(u,r,c),M(r,i),I(a,r,null),I(o,r,null),I(s,r,null),t[8](r),l=!0},p(u,c){const f={};c&515&&(f.$$scope={dirty:c,ctx:u}),e.$set(f)},i(u){l||(C(e.$$.fragment,u),C(a.$$.fragment,u),C(o.$$.fragment,u),C(s.$$.fragment,u),l=!0)},o(u){S(e.$$.fragment,u),S(a.$$.fragment,u),S(o.$$.fragment,u),S(s.$$.fragment,u),l=!1},d(u){u&&($(n),$(r)),Y(e,u),Y(a),Y(o),Y(s),t[8](null)}}}function Gg(t){let e,n;return e=new At({props:{title:t[4],subtitle:t[5],$$slots:{default:[Xg]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&519&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function Qg(t,e,n){let{sourceData:r=null}=e,{revlogRange:i}=e,a=j.Year;const o=Re();let s=null;const l=ys(),u=vs();function c(h){a=h,n(1,a)}function f(h){Tt[h?"unshift":"push"](()=>{s=h,n(2,s)})}return t.$$set=h=>{"sourceData"in h&&n(6,r=h.sourceData),"revlogRange"in h&&n(0,i=h.revlogRange)},t.$$.update=()=>{t.$$.dirty&70&&r&&zg(s,o,r,a)},[i,a,s,o,l,u,r,c,f]}class Wg extends J{constructor(e){super(),tt(this,e,Qg,Gg,et,{sourceData:6,revlogRange:0})}}function jg(t,e){const n=new Map(Object.entries(t.reviews.count).map(([a,o])=>[Number(a),o.learn+o.relearn+o.mature+o.filtered+o.young])),r=Kg(e),i=[];for(let a=0;a<7;a++)i.push((e+a)%7);return{reviewCount:n,timeFunction:r,weekdayLabels:i,rolloverHour:t.rolloverHour}}function Zg(t,e,n,r,i,a,o,s){const l=Ne(t),u=new Date,c=new Date;c.setFullYear(i);const f=rt().range([e.marginLeft,e.width-e.marginRight]).domain([-1,53]),h=new Map;let g=0;for(const[x,T]of n.reviewCount.entries()){let P=ae.offset(u,x);if(P=La.offset(P,-1*n.rolloverHour),T>g&&(g=T),P.getFullYear()!=i)continue;const z=n.timeFunction.count(se(P),P),D=ae.count(n.timeFunction(P),P),V=ae.count(se(P),P);h.set(V,{day:x,count:T,weekNumber:z,weekDay:D,date:P})}if(g)Ut(l,!0);else{Ut(l,!1);return}const d=se(c),p=new Date(u);p.setFullYear(u.getFullYear()-1);for(let x=0;x<365;x++){const T=ae.offset(d,x);if(T>u||o==Mt.Year&&T<p)continue;const P=ae.count(se(T),T);if(!h.has(P)){const z=n.timeFunction.count(se(T),T),D=ae.count(n.timeFunction(T),T);h.set(P,{day:P,count:0,weekNumber:z,weekDay:D,date:T})}}const m=Array.from(h.values()),b=rt().range([.2,a?.8:1]),_=Vh().domain([0,g]).interpolator(x=>Vn(b(x)));function v(x){const T=Fo(x.date,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),P=He({reviews:x.count});return`${T}<br>${P}`}const k=e.height/10,y=a?"#333":"#ddd",w=Io();l.select("g.weekdays").selectAll("text").data(n.weekdayLabels).join("text").text(x=>Ro(x)).attr("width",f(-1)-2).attr("height",k-2).attr("x",f(1)-3).attr("y",(x,T)=>e.marginTop+T*k).attr("fill",a?"#ddd":"black").attr("dominant-baseline","hanging").attr("text-anchor","end").attr("font-size",w.includes("zh")?"xx-small":"small").attr("font-family","monospace").attr("direction","ltr").style("user-select","none").on("click",null).filter(x=>[oe.SUNDAY,oe.MONDAY,oe.FRIDAY,oe.SATURDAY].includes(x)).on("click",(x,T)=>s(T)),l.select("g.days").selectAll("rect").data(m).join("rect").attr("fill",y).attr("width",x=>f(x.weekNumber+1)-f(x.weekNumber)-2).attr("height",k-2).attr("x",x=>f(x.weekNumber+1)).attr("y",x=>e.marginTop+x.weekDay*k).on("mousemove",(x,T)=>{const[P,z]=tn(x,document.body);Fe(v(T),P,z)}).on("mouseout",sn).attr("class",x=>x.count>0?es:"").on("click",function(x,T){T.count>0&&r("search",{query:`"prop:rated=${T.day}"`})}).transition().duration(800).attr("fill",x=>x.count===0?y:_(x.count))}function Kg(t){switch(t){case oe.MONDAY:return Ya;case oe.FRIDAY:return Oa;case oe.SATURDAY:return qa;default:return Ia}}function Jg(t){let e,n,r,i,a,o,s,l,u,c,f,h,g,d;return{c(){e=R("span"),n=R("button"),r=Q(""),a=q(),o=R("span"),s=Q(t[4]),l=q(),u=R("span"),c=R("button"),f=Q(""),this.h()},l(p){e=F(p,"SPAN",{});var m=B(e);n=F(m,"BUTTON",{});var b=B(n);r=W(b,""),b.forEach($),m.forEach($),a=U(p),o=F(p,"SPAN",{});var _=B(o);s=W(_,t[4]),_.forEach($),l=U(p),u=F(p,"SPAN",{});var v=B(u);c=F(v,"BUTTON",{});var k=B(c);f=W(k,""),k.forEach($),v.forEach($),this.h()},h(){n.disabled=i=t[3]>=t[4],c.disabled=h=t[4]>=t[5]},m(p,m){A(p,e,m),M(e,n),M(n,r),A(p,a,m),A(p,o,m),M(o,s),A(p,l,m),A(p,u,m),M(u,c),M(c,f),g||(d=[nt(n,"click",t[12]),nt(c,"click",t[13])],g=!0)},p(p,m){m&24&&i!==(i=p[3]>=p[4])&&(n.disabled=i),m&16&&Yt(s,p[4]),m&16&&h!==(h=p[4]>=p[5])&&(c.disabled=h)},d(p){p&&($(e),$(a),$(o),$(l),$(u)),g=!1,Ce(d)}}}function td(t){let e,n,r,i,a,o,s,l,u;return e=new Ft({props:{$$slots:{default:[Jg]},$$scope:{ctx:t}}}),o=new an({props:{bounds:t[1]}}),s=new on({props:{bounds:t[1]}}),{c(){L(e.$$.fragment),n=q(),r=lt("svg"),i=lt("g"),a=lt("g"),L(o.$$.fragment),L(s.$$.fragment),this.h()},l(c){O(e.$$.fragment,c),n=U(c),r=ut(c,"svg",{viewBox:!0});var f=B(r);i=ut(f,"g",{class:!0}),B(i).forEach($),a=ut(f,"g",{class:!0}),B(a).forEach($),O(o.$$.fragment,f),O(s.$$.fragment,f),f.forEach($),this.h()},h(){E(i,"class","weekdays"),E(a,"class","days"),E(r,"viewBox",l=`0 0 ${t[1].width} ${t[1].height}`)},m(c,f){I(e,c,f),A(c,n,f),A(c,r,f),M(r,i),M(r,a),I(o,r,null),I(s,r,null),t[14](r),u=!0},p(c,f){const h={};f&65560&&(h.$$scope={dirty:f,ctx:c}),e.$set(h);const g={};f&2&&(g.bounds=c[1]),o.$set(g);const d={};f&2&&(d.bounds=c[1]),s.$set(d),(!u||f&2&&l!==(l=`0 0 ${c[1].width} ${c[1].height}`))&&E(r,"viewBox",l)},i(c){u||(C(e.$$.fragment,c),C(o.$$.fragment,c),C(s.$$.fragment,c),u=!0)},o(c){S(e.$$.fragment,c),S(o.$$.fragment,c),S(s.$$.fragment,c),u=!1},d(c){c&&($(n),$(r)),Y(e,c),Y(o),Y(s),t[14](null)}}}function ed(t){let e,n;return e=new At({props:{title:t[6],$$slots:{default:[td]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&65566&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function nd(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,y=>n(11,r=y)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o}=e,{prefs:s}=e;a();let{revlogRange:l}=e,{nightMode:u}=e;const c=Qt();let f=null;const h=Re();h.height=120,h.marginLeft=20,h.marginRight=20;let g=null;const d=new Date().getFullYear();let p=0,m=d;const b=$s(),_=()=>n(4,m--,m),v=()=>n(4,m++,m);function k(y){Tt[y?"unshift":"push"](()=>{g=y,n(2,g)})}return t.$$set=y=>{"sourceData"in y&&n(7,o=y.sourceData),"prefs"in y&&a(n(0,s=y.prefs)),"revlogRange"in y&&n(8,l=y.revlogRange),"nightMode"in y&&n(9,u=y.nightMode)},t.$$.update=()=>{t.$$.dirty&280&&(l<Mt.Year?n(3,p=d):l===Mt.Year?n(3,p=d-1):n(3,p=2e3),m<p&&n(4,m=p)),t.$$.dirty&3990&&o&&(n(10,f=jg(o,r.calendarFirstDayOfWeek)),Zg(g,h,f,c,m,u,l,y=>ye(s,r.calendarFirstDayOfWeek=y,r)))},[s,h,g,p,m,d,b,o,l,u,f,r,_,v,k]}class rd extends J{constructor(e){super(),tt(this,e,nd,ed,et,{sourceData:7,prefs:0,revlogRange:8,nightMode:9})}}const Ei=[Xa[5][2],Qa[5][2],Ga[5][2],_r[5][2],_r[5][3],"#FFDC41","grey"];function id(t,e){const n=e?t.cardCounts.excludingInactive:t.cardCounts.includingInactive,r=e?'AND -("is:buried" OR "is:suspended")':"";return[[ks(),n.newCards,!0,`"is:new"${r}`],[Dr(),n.learn,!0,`(-"is:review" AND "is:learn")${r}`],[ji(),n.relearn,!0,`("is:review" AND "is:learn")${r}`],[Ar(),n.young,!0,`("is:review" AND -"is:learn") AND "prop:ivl<21"${r}`],[Mr(),n.mature,!0,`("is:review" -"is:learn") AND "prop:ivl>=21"${r}`],[xs(),n.suspended,e,'"is:suspended"'],[Ms(),n.buried,e,'"is:buried"']]}function ad(t,e){const n=id(t,e),r=gt(ot(n,i=>i[1]));return{title:ws(),counts:n,totalCards:r}}function sd(t,e,n){const r=Cr(n.counts,d=>d[1]),i=Array.from(r).map((d,p)=>{const m=n.counts[p];return{label:m[0],count:m[1],show:m[2],query:m[3],idx:p,total:d}}),a=Math.max(1,r.slice(-1)[0]),o=rt().domain([0,a]),s=Ne(t),l=s.select(".counts"),u=ug()(n.counts.map(d=>d[1])),c=e.height/2-e.marginTop-e.marginBottom,f=ag().innerRadius(0).outerRadius(c),h=s.transition().duration(600);return l.attr("transform",`translate(${c},${c+e.marginTop})`).selectAll("path").data(u).join(d=>d.append("path").attr("fill",(p,m)=>Ei[m]).attr("d",f),function(d){return d.call(p=>p.transition(h).attrTween("d",m=>{const b=nn({startAngle:0,endAngle:0},m);return _=>f(b(_))}))}),o.range([e.marginLeft,e.width-e.marginRight]),i.flatMap((d,p)=>{const m=gt(d.count/a*100,2);return d.show?{label:d.label,count:gt(d.count),percent:`${m}%`,colour:Ei[p],query:d.query}:[]})}function Ri(t,e,n){const r=t.slice();return r[13]=e[n],r[15]=n,r}function od(t){let e,n,r,i,a,o;return{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[7]),this.h()},l(s){e=F(s,"LABEL",{});var l=B(e);n=F(l,"INPUT",{type:!0}),r=U(l),i=W(l,t[7]),l.forEach($),this.h()},h(){E(n,"type","checkbox")},m(s,l){A(s,e,l),M(e,n),n.checked=t[4].cardCountsSeparateInactive,M(e,r),M(e,i),a||(o=nt(n,"change",t[10]),a=!0)},p(s,l){l&16&&(n.checked=s[4].cardCountsSeparateInactive)},d(s){s&&$(e),a=!1,o()}}}function ld(t){let e,n=t[13].label+"",r;return{c(){e=R("span"),r=Q(n)},l(i){e=F(i,"SPAN",{});var a=B(e);r=W(a,n),a.forEach($)},m(i,a){A(i,e,a),M(e,r)},p(i,a){a&32&&n!==(n=i[13].label+"")&&Yt(r,n)},d(i){i&&$(e)}}}function ud(t){let e,n=t[13].label+"",r,i,a;function o(){return t[12](t[13])}return{c(){e=R("button"),r=Q(n),this.h()},l(s){e=F(s,"BUTTON",{class:!0});var l=B(e);r=W(l,n),l.forEach($),this.h()},h(){E(e,"class","search-link svelte-o8j8wx")},m(s,l){A(s,e,l),M(e,r),i||(a=nt(e,"click",o),i=!0)},p(s,l){t=s,l&32&&n!==(n=t[13].label+"")&&Yt(r,n)},d(s){s&&$(e),i=!1,a()}}}function Fi(t){let e,n,r,i,a,o,s,l=t[13].count+"",u,c,f,h=t[13].percent+"",g;function d(b,_){return b[4].browserLinksSupported?ud:ld}let p=d(t),m=p(t);return{c(){e=R("tr"),n=R("td"),r=R("span"),i=Q(""),a=q(),m.c(),o=q(),s=R("td"),u=Q(l),c=q(),f=R("td"),g=Q(h),this.h()},l(b){e=F(b,"TR",{});var _=B(e);n=F(_,"TD",{class:!0});var v=B(n);r=F(v,"SPAN",{style:!0});var k=B(r);i=W(k,""),k.forEach($),a=U(v),m.l(v),v.forEach($),o=U(_),s=F(_,"TD",{class:!0});var y=B(s);u=W(y,l),y.forEach($),c=U(_),f=F(_,"TD",{class:!0});var w=B(f);g=W(w,h),w.forEach($),_.forEach($),this.h()},h(){Nt(r,"color",t[13].colour),E(n,"class","svelte-o8j8wx"),E(s,"class","right svelte-o8j8wx"),E(f,"class","right svelte-o8j8wx")},m(b,_){A(b,e,_),M(e,n),M(n,r),M(r,i),M(n,a),m.m(n,null),M(e,o),M(e,s),M(s,u),M(e,c),M(e,f),M(f,g)},p(b,_){_&32&&Nt(r,"color",b[13].colour),p===(p=d(b))&&m?m.p(b,_):(m.d(1),m=p(b),m&&(m.c(),m.m(n,null))),_&32&&l!==(l=b[13].count+"")&&Yt(u,l),_&32&&h!==(h=b[13].percent+"")&&Yt(g,h)},d(b){b&&$(e),m.d()}}}function cd(t){let e,n,r,i,a,o,s,l,u,c,f,h,g,d,p="",m,b,_,v,k=t[3].totalCards+"",y,w,x,T;e=new Ft({props:{$$slots:{default:[od]},$$scope:{ctx:t}}});let P=Xt(t[5]),z=[];for(let D=0;D<P.length;D+=1)z[D]=Fi(Ri(t,P,D));return{c(){L(e.$$.fragment),n=q(),r=R("div"),i=R("div"),a=lt("svg"),o=lt("g"),l=q(),u=R("div"),c=R("table");for(let D=0;D<z.length;D+=1)z[D].c();f=q(),h=R("tr"),g=R("td"),d=R("span"),d.textContent=p,m=q(),b=Q(t[8]),_=q(),v=R("td"),y=Q(k),w=q(),x=R("td"),this.h()},l(D){O(e.$$.fragment,D),n=U(D),r=F(D,"DIV",{class:!0});var V=B(r);i=F(V,"DIV",{class:!0});var N=B(i);a=ut(N,"svg",{viewBox:!0,style:!0,class:!0});var X=B(a);o=ut(X,"g",{class:!0}),B(o).forEach($),X.forEach($),N.forEach($),l=U(V),u=F(V,"DIV",{class:!0});var ct=B(u);c=F(ct,"TABLE",{class:!0});var mt=B(c);for(let _t=0;_t<z.length;_t+=1)z[_t].l(mt);f=U(mt),h=F(mt,"TR",{});var ft=B(h);g=F(ft,"TD",{class:!0});var ht=B(g);d=F(ht,"SPAN",{style:!0,"data-svelte-h":!0}),Qi(d)!=="svelte-o96qa9"&&(d.textContent=p),m=U(ht),b=W(ht,t[8]),ht.forEach($),_=U(ft),v=F(ft,"TD",{class:!0});var st=B(v);y=W(st,k),st.forEach($),w=U(ft),x=F(ft,"TD",{class:!0}),B(x).forEach($),ft.forEach($),mt.forEach($),ct.forEach($),V.forEach($),this.h()},h(){E(o,"class","counts"),E(a,"viewBox",s=`0 0 ${t[2].width} ${t[2].height}`),Nt(a,"opacity",t[3].totalCards?1:0),E(a,"class","svelte-o8j8wx"),E(i,"class","svg-container svelte-o8j8wx"),Nt(d,"visibility","hidden"),E(g,"class","svelte-o8j8wx"),E(v,"class","right svelte-o8j8wx"),E(x,"class","svelte-o8j8wx"),E(c,"class","svelte-o8j8wx"),E(u,"class","counts-table svelte-o8j8wx"),E(r,"class","counts-outer svelte-o8j8wx")},m(D,V){I(e,D,V),A(D,n,V),A(D,r,V),M(r,i),M(i,a),M(a,o),t[11](a),M(r,l),M(r,u),M(u,c);for(let N=0;N<z.length;N+=1)z[N]&&z[N].m(c,null);M(c,f),M(c,h),M(h,g),M(g,d),M(g,m),M(g,b),M(h,_),M(h,v),M(v,y),M(h,w),M(h,x),T=!0},p(D,V){const N={};if(V&65552&&(N.$$scope={dirty:V,ctx:D}),e.$set(N),(!T||V&4&&s!==(s=`0 0 ${D[2].width} ${D[2].height}`))&&E(a,"viewBox",s),(!T||V&8)&&Nt(a,"opacity",D[3].totalCards?1:0),V&112){P=Xt(D[5]);let X;for(X=0;X<P.length;X+=1){const ct=Ri(D,P,X);z[X]?z[X].p(ct,V):(z[X]=Fi(ct),z[X].c(),z[X].m(c,f))}for(;X<z.length;X+=1)z[X].d(1);z.length=P.length}(!T||V&8)&&k!==(k=D[3].totalCards+"")&&Yt(y,k)},i(D){T||(C(e.$$.fragment,D),T=!0)},o(D){S(e.$$.fragment,D),T=!1},d(D){D&&($(n),$(r)),Y(e,D),t[11](null),je(z,D)}}}function fd(t){let e,n;return e=new At({props:{title:t[3].title,$$slots:{default:[cd]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&8&&(a.title=r[3].title),i&65598&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function hd(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,_=>n(4,r=_)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o}=e,{prefs:s}=e;a();const l=Qt();let u=null;const c=Re();c.width=225,c.marginBottom=0;let f=null,h=null;const g=As(),d=Ds();function p(){r.cardCountsSeparateInactive=this.checked,s.set(r)}function m(_){Tt[_?"unshift":"push"](()=>{u=_,n(1,u)})}const b=_=>l("search",{query:_.query});return t.$$set=_=>{"sourceData"in _&&n(9,o=_.sourceData),"prefs"in _&&a(n(0,s=_.prefs))},t.$$.update=()=>{t.$$.dirty&542&&(n(3,f=ad(o,r.cardCountsSeparateInactive)),n(5,h=sd(u,c,f)))},[s,u,c,f,r,h,l,g,d,o,p,m,b]}class gd extends J{constructor(e){super(),tt(this,e,hd,fd,et,{sourceData:9,prefs:0})}}function dd(t){return{eases:Zt(t.difficulty.eases)}}function md(t,e){const n=`"prop:d>=${t/100}"`;let r=`"prop:d<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${n} AND ${r}`}function pd(t,e,n){const r=rt().domain([t,e]).nice(),i=r.ticks(n),a=r.domain(),o=t-a[0],s=i[1]-i[0];if(o===0||o%s!==0&&s%o!==0)return[r,i];const l=u=>u+o;return[rt().domain(a.map(l)),i.map(l)]}function _d(t,e,n){const r=t.eases;if(!r.size)return[null,[]];const i=0,a=100,o=20,[s,l]=pd(i,a,o),u=jt().value(m=>m[0]).domain(s.domain()).thresholds(l)(r.entries()),c=ot(u,$t),f=yt(zn).domain([100,0]);function h(m,b){const _=`${m.x0}%-${m.x1}%`;return Cs({cards:$t(m),percent:_})}function g(m){const b=m.x0,_=m.x1-1,v=md(b,_);e("search",{query:v})}const d=m=>gt(m,0)+"%",p=[{label:Ts(),value:d(ot(Array.from(r.entries()).map(([m,b])=>(m+2.5)*b))/c)}];return[{scale:s,bins:u,total:c,hoverText:h,onClick:n?g:null,colourScale:f,showArea:!1,binValue:$t,xTickFormat:d},p]}function Bi(t){let e,n;return e=new At({props:{title:t[4],subtitle:t[5],$$slots:{default:[bd]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,i){const a={};i&268&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function bd(t){let e,n,r,i;return e=new de({props:{data:t[2]}}),r=new Kt({props:{tableData:t[3]}}),{c(){L(e.$$.fragment),n=q(),L(r.$$.fragment)},l(a){O(e.$$.fragment,a),n=U(a),O(r.$$.fragment,a)},m(a,o){I(e,a,o),A(a,n,o),I(r,a,o),i=!0},p(a,o){const s={};o&4&&(s.data=a[2]),e.$set(s);const l={};o&8&&(l.tableData=a[3]),r.$set(l)},i(a){i||(C(e.$$.fragment,a),C(r.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),S(r.$$.fragment,a),i=!1},d(a){a&&$(n),Y(e,a),Y(r,a)}}}function yd(t){var i;let e,n,r=((i=t[0])==null?void 0:i.fsrs)&&Bi(t);return{c(){r&&r.c(),e=at()},l(a){r&&r.l(a),e=at()},m(a,o){r&&r.m(a,o),A(a,e,o),n=!0},p(a,[o]){var s;(s=a[0])!=null&&s.fsrs?r?(r.p(a,o),o&1&&C(r,1)):(r=Bi(a),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(Ot(),S(r,1,1,()=>{r=null}),qt())},i(a){n||(C(r),n=!0)},o(a){S(r),n=!1},d(a){a&&$(e),r&&r.d(a)}}}function vd(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,g=>n(6,r=g)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o=null}=e,{prefs:s}=e;a();const l=Qt();let u=null,c=[];const f=Ns(),h=Ss();return t.$$set=g=>{"sourceData"in g&&n(0,o=g.sourceData),"prefs"in g&&a(n(1,s=g.prefs))},t.$$.update=()=>{t.$$.dirty&65&&o&&n(2,[u,c]=_d(dd(o),l,r.browserLinksSupported),u,(n(3,c),n(0,o),n(6,r)))},[o,s,u,c,f,h,r]}class $d extends J{constructor(e){super(),tt(this,e,vd,yd,et,{sourceData:0,prefs:1})}}function wd(t){return{eases:Zt(t.eases.eases)}}function kd(t,e){if(t===e)return`"prop:ease=${t/100}"`;const n=`"prop:ease>=${t/100}"`,r=`"prop:ease<${(e+1)/100}"`;return`${n} AND ${r}`}function xd(t,e,n){const r=rt().domain([t,e]).nice(),i=r.ticks(n),a=r.domain(),o=t-a[0],s=i[1]-i[0];if(o===0||o%s!==0&&s%o!==0)return[r,i];const l=u=>u+o;return[rt().domain(a.map(l)),i.map(l)]}function Md(t,e,n){const r=t.eases;if(!r.size)return[null,[]];const[,i]=we(r.keys()),a=130,o=i+1,s=20,[l,u]=xd(a,o,s),c=jt().value(b=>b[0]).domain(l.domain()).thresholds(u)(r.entries()),f=ot(c,$t),h=yt(zn).domain([a,300]);function g(b,_){const v=Math.floor(b.x0),y=Math.floor(b.x1)-v<=10?`${b.x0}%`:`${b.x0}%-${b.x1}%`;return Rs({cards:$t(b),percent:y})}function d(b){const _=b.x0,v=b.x1-1,k=kd(_,v);e("search",{query:k})}const p=b=>gt(b,0)+"%",m=[{label:Es(),value:p(ot(Array.from(r.entries()).map(([b,_])=>(b+2.5)*_))/f)}];return[{scale:l,bins:c,total:f,hoverText:g,onClick:n?d:null,colourScale:h,showArea:!1,binValue:$t,xTickFormat:p},m]}function Pi(t){let e,n;return e=new At({props:{title:t[4],subtitle:t[5],$$slots:{default:[Ad]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,i){const a={};i&268&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function Ad(t){let e,n,r,i;return e=new de({props:{data:t[2]}}),r=new Kt({props:{tableData:t[3]}}),{c(){L(e.$$.fragment),n=q(),L(r.$$.fragment)},l(a){O(e.$$.fragment,a),n=U(a),O(r.$$.fragment,a)},m(a,o){I(e,a,o),A(a,n,o),I(r,a,o),i=!0},p(a,o){const s={};o&4&&(s.data=a[2]),e.$set(s);const l={};o&8&&(l.tableData=a[3]),r.$set(l)},i(a){i||(C(e.$$.fragment,a),C(r.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),S(r.$$.fragment,a),i=!1},d(a){a&&$(n),Y(e,a),Y(r,a)}}}function Dd(t){var i,a;let e,n,r=!((a=(i=t[0])==null?void 0:i.fsrs)!=null&&a)&&Pi(t);return{c(){r&&r.c(),e=at()},l(o){r&&r.l(o),e=at()},m(o,s){r&&r.m(o,s),A(o,e,s),n=!0},p(o,[s]){var l,u;(u=(l=o[0])==null?void 0:l.fsrs)!=null&&u?r&&(Ot(),S(r,1,1,()=>{r=null}),qt()):r?(r.p(o,s),s&1&&C(r,1)):(r=Pi(o),r.c(),C(r,1),r.m(e.parentNode,e))},i(o){n||(C(r),n=!0)},o(o){S(r),n=!1},d(o){o&&$(e),r&&r.d(o)}}}function Td(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,g=>n(6,r=g)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o=null}=e,{prefs:s}=e;a();const l=Qt();let u=null,c=[];const f=Fs(),h=Bs();return t.$$set=g=>{"sourceData"in g&&n(0,o=g.sourceData),"prefs"in g&&a(n(1,s=g.prefs))},t.$$.update=()=>{t.$$.dirty&65&&o&&n(2,[u,c]=Md(wd(o),l,r.browserLinksSupported),u,(n(3,c),n(0,o),n(6,r)))},[o,s,u,c,f,h,r]}class Cd extends J{constructor(e){super(),tt(this,e,Td,Dd,et,{sourceData:0,prefs:1})}}function Nd(t){const e=t.futureDue;return{dueCounts:Zt(e.futureDue),haveBacklog:e.haveBacklog}}function Sd(t,e){if(t===e)return`"prop:due=${t}"`;{const n=`"prop:due>=${t}"`,r=`"prop:due<=${e}"`;return`${n} AND ${r}`}}function Ed(t,e,n,r,i){var w;const a={histogramData:null,tableData:[]},o=t.dueCounts;if(!o)return a;const[s,l]=we(o.keys());let u=s;n||(u=0);let c=l;switch(e){case j.Month:c=31;break;case j.ThreeMonths:c=90;break;case j.Year:c=365;break;case j.AllTime:break}const f=Math.min(70,c-u),h=rt().domain([u,c]),g=jt().value(x=>x[0]).domain(h.domain()).thresholds(h.ticks(f))(o.entries());if(!ot(g,x=>x.length))return a;const d=x=>gt(x),p=rt().range([.7,.3]),m=yt(x=>br(p(x))).domain([u,c]),b=ot(g,$t);function _(x,T,P){const z=Tr(x.x0,x.x1===c?x.x1+1:x.x1),D=Ls({cards:$t(x)}),V=Ln();return`${z}:<br>${D}<br>${V}: ${gt(T)}`}function v(x){const T=x.x0,P=x.x1===c?x.x1:x.x1-1,z=Sd(T,P);r("search",{query:z})}const k=c-u,y=[{label:kr(),value:He({reviews:b})},{label:Wi(),value:ar({count:Math.round(b/k)})},{label:Ps(),value:He({reviews:(w=t.dueCounts.get(1))!=null?w:0})}];return{histogramData:{scale:h,bins:g,total:b,hoverText:_,onClick:i?v:null,showArea:!0,colourScale:m,binValue:$t,xTickFormat:d},tableData:y}}function Li(t){let e,n,r,i,a,o;return{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[8]),this.h()},l(s){e=F(s,"LABEL",{});var l=B(e);n=F(l,"INPUT",{type:!0}),r=U(l),i=W(l,t[8]),l.forEach($),this.h()},h(){E(n,"type","checkbox")},m(s,l){A(s,e,l),M(e,n),n.checked=t[3].futureDueShowBacklog,M(e,r),M(e,i),a||(o=nt(n,"change",t[10]),a=!0)},p(s,l){l&8&&(n.checked=s[3].futureDueShowBacklog)},d(s){s&&$(e),a=!1,o()}}}function Rd(t){let e,n,r,i,a=t[1]&&t[1].haveBacklog&&Li(t);function o(l){t[11](l)}let s={revlogRange:Mt.All};return t[2]!==void 0&&(s.graphRange=t[2]),n=new rn({props:s}),Tt.push(()=>Ze(n,"graphRange",o)),{c(){a&&a.c(),e=q(),L(n.$$.fragment)},l(l){a&&a.l(l),e=U(l),O(n.$$.fragment,l)},m(l,u){a&&a.m(l,u),A(l,e,u),I(n,l,u),i=!0},p(l,u){l[1]&&l[1].haveBacklog?a?a.p(l,u):(a=Li(l),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null);const c={};!r&&u&4&&(r=!0,c.graphRange=l[2],Ke(()=>r=!1)),n.$set(c)},i(l){i||(C(n.$$.fragment,l),i=!0)},o(l){S(n.$$.fragment,l),i=!1},d(l){l&&$(e),a&&a.d(l),Y(n,l)}}}function Fd(t){let e,n,r,i,a,o;return e=new Ft({props:{$$slots:{default:[Rd]},$$scope:{ctx:t}}}),r=new de({props:{data:t[4]}}),a=new Kt({props:{tableData:t[5]}}),{c(){L(e.$$.fragment),n=q(),L(r.$$.fragment),i=q(),L(a.$$.fragment)},l(s){O(e.$$.fragment,s),n=U(s),O(r.$$.fragment,s),i=U(s),O(a.$$.fragment,s)},m(s,l){I(e,s,l),A(s,n,l),I(r,s,l),A(s,i,l),I(a,s,l),o=!0},p(s,l){const u={};l&8206&&(u.$$scope={dirty:l,ctx:s}),e.$set(u);const c={};l&16&&(c.data=s[4]),r.$set(c);const f={};l&32&&(f.tableData=s[5]),a.$set(f)},i(s){o||(C(e.$$.fragment,s),C(r.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(r.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){s&&($(n),$(i)),Y(e,s),Y(r,s),Y(a,s)}}}function Bd(t){let e,n;return e=new At({props:{title:t[6],subtitle:t[7],$$slots:{default:[Fd]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&8254&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function Pd(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,_=>n(3,r=_)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o=null}=e,{prefs:s}=e;a();const l=Qt();let u=null,c=null,f=[],h=j.Month;const g=Is(),d=Ys(),p=Os();function m(){r.futureDueShowBacklog=this.checked,s.set(r)}function b(_){h=_,n(2,h)}return t.$$set=_=>{"sourceData"in _&&n(9,o=_.sourceData),"prefs"in _&&a(n(0,s=_.prefs))},t.$$.update=()=>{t.$$.dirty&512&&o&&n(1,u=Nd(o)),t.$$.dirty&14&&u&&n(4,{histogramData:c,tableData:f}=Ed(u,h,r.futureDueShowBacklog,l,r.browserLinksSupported),c,(n(5,f),n(1,u),n(2,h),n(3,r),n(9,o)))},[s,u,h,r,c,f,g,d,p,o,m,b]}class Ld extends J{constructor(e){super(),tt(this,e,Pd,Bd,et,{sourceData:9,prefs:0})}}function Id(t){let e,n,r,i,a,o,s,l,u,c,f,h,g,d;return h=Te(t[14][1]),{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[9]),a=q(),o=R("label"),s=R("input"),l=q(),u=Q(t[10]),c=q(),f=R("input"),this.h()},l(p){e=F(p,"LABEL",{});var m=B(e);n=F(m,"INPUT",{type:!0}),r=U(m),i=W(m,t[9]),m.forEach($),a=U(p),o=F(p,"LABEL",{});var b=B(o);s=F(b,"INPUT",{type:!0}),l=U(b),u=W(b,t[10]),b.forEach($),c=U(p),f=F(p,"INPUT",{type:!0,placeholder:!0}),this.h()},h(){E(n,"type","radio"),n.__value=t[6].Deck,dt(n,n.__value),E(s,"type","radio"),s.__value=t[6].Collection,dt(s,s.__value),E(f,"type","text"),E(f,"placeholder",t[11]),h.p(n,s)},m(p,m){A(p,e,m),M(e,n),n.checked=n.__value===t[4],M(e,r),M(e,i),A(p,a,m),A(p,o,m),M(o,s),s.checked=s.__value===t[4],M(o,l),M(o,u),A(p,c,m),A(p,f,m),dt(f,t[5]),g||(d=[nt(n,"change",t[13]),nt(s,"change",t[15]),nt(f,"input",t[16]),nt(f,"change",t[7]),nt(f,"focus",t[17])],g=!0)},p(p,m){m&16&&(n.checked=n.__value===p[4]),m&16&&(s.checked=s.__value===p[4]),m&32&&f.value!==p[5]&&dt(f,p[5])},d(p){p&&($(e),$(a),$(o),$(c),$(f)),h.r(),g=!1,Ce(d)}}}function Yd(t){let e,n,r,i,a,o,s,l,u,c,f,h;return c=Te(t[14][0]),{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[8]),a=q(),o=R("label"),s=R("input"),l=q(),u=Q(t[12]),this.h()},l(g){e=F(g,"LABEL",{});var d=B(e);n=F(d,"INPUT",{type:!0}),r=U(d),i=W(d,t[8]),d.forEach($),a=U(g),o=F(g,"LABEL",{});var p=B(o);s=F(p,"INPUT",{type:!0}),l=U(p),u=W(p,t[12]),p.forEach($),this.h()},h(){E(n,"type","radio"),n.__value=Mt.Year,dt(n,n.__value),E(s,"type","radio"),s.__value=Mt.All,dt(s,s.__value),c.p(n,s)},m(g,d){A(g,e,d),M(e,n),n.checked=n.__value===t[3],M(e,r),M(e,i),A(g,a,d),A(g,o,d),M(o,s),s.checked=s.__value===t[3],M(o,l),M(o,u),f||(h=[nt(n,"change",t[18]),nt(s,"change",t[19])],f=!0)},p(g,d){d&8&&(n.checked=n.__value===g[3]),d&8&&(s.checked=s.__value===g[3])},d(g){g&&($(e),$(a),$(o)),c.r(),f=!1,Ce(h)}}}function Od(t){let e,n,r="",i,a,o,s,l,u,c;return a=new Ft({props:{$$slots:{default:[Id]},$$scope:{ctx:t}}}),s=new Ft({props:{$$slots:{default:[Yd]},$$scope:{ctx:t}}}),{c(){e=R("div"),n=R("div"),n.textContent=r,i=q(),L(a.$$.fragment),o=q(),L(s.$$.fragment),l=q(),u=R("div"),this.h()},l(f){e=F(f,"DIV",{class:!0});var h=B(e);n=F(h,"DIV",{class:!0,"data-svelte-h":!0}),Qi(n)!=="svelte-cqc81v"&&(n.textContent=r),i=U(h),O(a.$$.fragment,h),o=U(h),O(s.$$.fragment,h),h.forEach($),l=U(f),u=F(f,"DIV",{class:!0}),B(u).forEach($),this.h()},h(){E(n,"class","spin svelte-19q2rko"),Gr(n,"loading",t[0]),E(e,"class","range-box svelte-19q2rko"),E(u,"class","range-box-pad svelte-19q2rko")},m(f,h){A(f,e,h),M(e,n),M(e,i),I(a,e,null),M(e,o),I(s,e,null),A(f,l,h),A(f,u,h),c=!0},p(f,[h]){(!c||h&1)&&Gr(n,"loading",f[0]);const g={};h&4194352&&(g.$$scope={dirty:h,ctx:f}),a.$set(g);const d={};h&4194312&&(d.$$scope={dirty:h,ctx:f}),s.$set(d)},i(f){c||(C(a.$$.fragment,f),C(s.$$.fragment,f),c=!0)},o(f){S(a.$$.fragment,f),S(s.$$.fragment,f),c=!1},d(f){f&&($(e),$(l),$(u)),Y(a),Y(s)}}}function qd(t,e,n){let r,i=G,a=()=>(i(),i=kt(h,N=>n(20,r=N)),h),o,s=G,l=()=>(s(),s=kt(f,N=>n(21,o=N)),f);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>s());var u=(N=>(N[N.Deck=1]="Deck",N[N.Collection=2]="Collection",N[N.Custom=3]="Custom",N))(u||{});let{loading:c}=e,{days:f}=e;l();let{search:h}=e;a();let g=ts(o),d;r==="deck:current"?d=1:r===""?d=2:d=3;let p=r;function m(){ye(h,r=p,r)}const b=qs(),_=Us(),v=Hs(),k=zs(),y=Vs(),w=[[],[]];function x(){d=this.__value,n(4,d)}function T(){d=this.__value,n(4,d)}function P(){p=this.value,n(5,p),n(4,d)}const z=()=>{n(4,d=u.Custom)};function D(){g=this.__value,n(3,g)}function V(){g=this.__value,n(3,g)}return t.$$set=N=>{"loading"in N&&n(0,c=N.loading),"days"in N&&l(n(1,f=N.days)),"search"in N&&a(n(2,h=N.search))},t.$$.update=()=>{if(t.$$.dirty&16)switch(d){case 1:ye(h,r=n(5,p="deck:current"),r);break;case 2:ye(h,r=n(5,p=""),r);break}if(t.$$.dirty&8)switch(g){case Mt.Year:ye(f,o=365,o);break;case Mt.All:ye(f,o=0,o);break}},[c,f,h,g,d,p,u,m,b,_,v,k,y,x,w,T,P,z,D,V]}class rs extends J{constructor(e){super(),tt(this,e,qd,Od,et,{loading:0,days:1,search:2})}}async function Ud(t,e){let n=await t();const{subscribe:r,set:i}=sr(n);function a(s){n=s,i(s),e(s)}function o(s){a(s(n))}return{subscribe:r,set:a,update:o}}const Hd=t=>({revlogRange:t&16,sourceData:t&4,loading:t&8}),Ii=t=>({revlogRange:t[4],prefs:t[11],sourceData:t[2],loading:t[3]});function zd(t){return{c:G,l:G,m:G,p:G,i:G,o:G,d:G}}function Vd(t){let e;const n=t[9].default,r=yr(n,t,t[8],Ii);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,a){r&&r.m(i,a),e=!0},p(i,a){r&&r.p&&(!e||a&284)&&vr(r,n,i,i[8],e?wr(n,i[8],a,Hd):$r(i[8]),Ii)},i(i){e||(C(r,i),e=!0)},o(i){S(r,i),e=!1},d(i){r&&r.d(i)}}}function Xd(t){return{c:G,l:G,m:G,p:G,i:G,o:G,d:G}}function Gd(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:Xd,then:Vd,catch:zd,value:11,blocks:[,,,]};return zo(t[5],r),{c(){e=at(),r.block.c()},l(i){e=at(),r.block.l(i)},m(i,a){A(i,e,a),r.block.m(i,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(i,[a]){t=i,Vo(r,t,a)},i(i){n||(C(r.block),n=!0)},o(i){for(let a=0;a<3;a+=1){const o=r.blocks[a];S(o)}n=!1},d(i){i&&$(e),r.block.d(i),r.token=null,r=null}}}function Qd(t,e,n){let r,i,a=G,o=()=>(a(),a=kt(g,_=>n(6,i=_)),g),s,l=G,u=()=>(l(),l=kt(h,_=>n(7,s=_)),h);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>l());let{$$slots:c={},$$scope:f}=e,{search:h}=e;u();let{days:g}=e;o();const d=Ud(()=>Yo({}),qo);let p=null,m=!0;async function b(_,v){await d,n(3,m=!0);try{n(2,p=await Oo({search:_,days:v}))}finally{n(3,m=!1)}}return t.$$set=_=>{"search"in _&&u(n(0,h=_.search)),"days"in _&&o(n(1,g=_.days)),"$$scope"in _&&n(8,f=_.$$scope)},t.$$.update=()=>{t.$$.dirty&192&&b(s,i),t.$$.dirty&64&&n(4,r=ts(i))},[h,g,p,m,r,d,i,s,f,c]}class Wd extends J{constructor(e){super(),tt(this,e,Qd,Gd,et,{search:0,days:1})}}function Yi(t,e,n){const r=t.slice();return r[13]=e[n],r}function Oi(t){let e,n,r;var i=t[1];function a(o,s){return{props:{search:o[3],days:o[4],loading:o[10]}}}return i&&(e=yn(i,a(t))),{c(){e&&L(e.$$.fragment),n=at()},l(o){e&&O(e.$$.fragment,o),n=at()},m(o,s){e&&I(e,o,s),A(o,n,s),r=!0},p(o,s){if(s&2&&i!==(i=o[1])){if(e){Ot();const l=e;S(l.$$.fragment,1,0,()=>{Y(l,1)}),qt()}i?(e=yn(i,a(o)),L(e.$$.fragment),C(e.$$.fragment,1),I(e,n.parentNode,n)):e=null}else if(i){const l={};s&1024&&(l.loading=o[10]),e.$set(l)}},i(o){r||(e&&C(e.$$.fragment,o),r=!0)},o(o){e&&S(e.$$.fragment,o),r=!1},d(o){o&&$(n),e&&Y(e,o)}}}function qi(t){let e,n,r=Xt(t[0]),i=[];for(let o=0;o<r.length;o+=1)i[o]=Ui(Yi(t,r,o));const a=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=at()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=at()},m(o,s){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(o,s);A(o,e,s),n=!0},p(o,s){if(s&6693){r=Xt(o[0]);let l;for(l=0;l<r.length;l+=1){const u=Yi(o,r,l);i[l]?(i[l].p(u,s),C(i[l],1)):(i[l]=Ui(u),i[l].c(),C(i[l],1),i[l].m(e.parentNode,e))}for(Ot(),l=r.length;l<i.length;l+=1)a(l);qt()}},i(o){if(!n){for(let s=0;s<r.length;s+=1)C(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)S(i[s]);n=!1},d(o){o&&$(e),je(i,o)}}}function Ui(t){let e,n,r;var i=t[13];function a(o,s){return{props:{sourceData:o[9],prefs:o[11],revlogRange:o[12],nightMode:o[2].isDark}}}return i&&(e=yn(i,a(t)),e.$on("search",t[5])),{c(){e&&L(e.$$.fragment),n=at()},l(o){e&&O(e.$$.fragment,o),n=at()},m(o,s){e&&I(e,o,s),A(o,n,s),r=!0},p(o,s){if(s&1&&i!==(i=o[13])){if(e){Ot();const l=e;S(l.$$.fragment,1,0,()=>{Y(l,1)}),qt()}i?(e=yn(i,a(o)),e.$on("search",o[5]),L(e.$$.fragment),C(e.$$.fragment,1),I(e,n.parentNode,n)):e=null}else if(i){const l={};s&512&&(l.sourceData=o[9]),s&2048&&(l.prefs=o[11]),s&4096&&(l.revlogRange=o[12]),s&4&&(l.nightMode=o[2].isDark),e.$set(l)}},i(o){r||(e&&C(e.$$.fragment,o),r=!0)},o(o){e&&S(e.$$.fragment,o),r=!1},d(o){o&&$(n),e&&Y(e,o)}}}function jd(t){let e,n,r,i,a,o=t[1]&&Oi(t),s=t[9]&&t[12]&&qi(t);return{c(){o&&o.c(),e=q(),n=R("div"),s&&s.c(),r=q(),i=R("div"),this.h()},l(l){o&&o.l(l),e=U(l),n=F(l,"DIV",{class:!0});var u=B(n);s&&s.l(u),u.forEach($),r=U(l),i=F(l,"DIV",{class:!0}),B(i).forEach($),this.h()},h(){E(n,"class","graphs-container svelte-n9umk6"),E(i,"class","spacer svelte-n9umk6")},m(l,u){o&&o.m(l,u),A(l,e,u),A(l,n,u),s&&s.m(n,null),A(l,r,u),A(l,i,u),a=!0},p(l,u){l[1]?o?(o.p(l,u),u&2&&C(o,1)):(o=Oi(l),o.c(),C(o,1),o.m(e.parentNode,e)):o&&(Ot(),S(o,1,1,()=>{o=null}),qt()),l[9]&&l[12]?s?(s.p(l,u),u&4608&&C(s,1)):(s=qi(l),s.c(),C(s,1),s.m(n,null)):s&&(Ot(),S(s,1,1,()=>{s=null}),qt())},i(l){a||(C(o),C(s),a=!0)},o(l){S(o),S(s),a=!1},d(l){l&&($(e),$(n),$(r),$(i)),o&&o.d(l),s&&s.d()}}}function Zd(t){let e,n;return e=new Wd({props:{search:t[3],days:t[4],$$slots:{default:[jd,({sourceData:r,loading:i,prefs:a,revlogRange:o})=>({9:r,10:i,11:a,12:o}),({sourceData:r,loading:i,prefs:a,revlogRange:o})=>(r?512:0)|(i?1024:0)|(a?2048:0)|(o?4096:0)]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&73223&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function Kd(t,e,n){let r,i;Qr(t,Ho,h=>n(2,i=h));let{initialSearch:a}=e,{initialDays:o}=e;const s=sr(a);Qr(t,s,h=>n(8,r=h));const l=sr(o);let{graphs:u}=e,{controller:c=rs}=e;function f(h){Uo(`browserSearch: ${r} ${h.detail.query}`)}return t.$$set=h=>{"initialSearch"in h&&n(6,a=h.initialSearch),"initialDays"in h&&n(7,o=h.initialDays),"graphs"in h&&n(0,u=h.graphs),"controller"in h&&n(1,c=h.controller)},[u,c,i,s,l,f,a,o]}class Jd extends J{constructor(e){super(),tt(this,e,Kd,Zd,et,{initialSearch:6,initialDays:7,graphs:0,controller:1})}}function t0(t,e){function n(r){return r.map((i,a)=>({hour:a,totalCount:i.total,correctCount:i.correct}))}switch(e){case j.Month:return n(t.hours.oneMonth);case j.ThreeMonths:return n(t.hours.threeMonths);case j.Year:return n(t.hours.oneYear);case j.AllTime:return n(t.hours.allTime)}}function e0(t,e,n,r){const i=t0(n,r),a=Math.max(...i.map(m=>m.totalCount)),o=Ne(t),s=o.transition().duration(600);if(a)Ut(o,!0);else{Ut(o,!1);return}const l=Bn().domain(i.map(m=>m.hour.toString())).range([e.marginLeft,e.width-e.marginRight]).paddingInner(.1);o.select(".x-ticks").call(m=>m.transition(s).call(In(l).tickSizeOuter(0))).selectAll(".tick").selectAll("text").classed(wg,m=>m%2!=0).attr("direction","ltr");const u=rt().range([.1,.8]),c=yt(m=>Vn(u(m))).domain([0,a]),f=m=>gt(m),h=rt().range([e.height-e.marginBottom,e.marginTop]).domain([0,a]).nice();o.select(".y-ticks").call(m=>m.transition(s).call(Yn(h).ticks(e.height/50).tickSizeOuter(0).tickFormat(f))).attr("direction","ltr");const g=h.copy().domain([0,1]),d=m=>m.attr("width",l.bandwidth()).transition(s).attr("x",b=>l(b.hour.toString())).attr("y",b=>h(b.totalCount)).attr("height",b=>h(0)-h(b.totalCount)).attr("fill",b=>c(b.totalCount));o.select("g.bars").selectAll("rect").data(i).join(m=>m.append("rect").attr("rx",1).attr("x",b=>l(b.hour.toString())).attr("y",h(0)).attr("height",0).call(d),m=>m.call(d),m=>m.call(b=>b.transition(s).attr("height",0).attr("y",h(0)))),o.select(".y2-ticks").call(m=>m.transition(s).call(Sr(g).ticks(e.height/50).tickFormat(b=>`${Math.round(b*100)}%`).tickSizeOuter(0))).attr("direction","ltr"),o.select("path.cumulative-overlay").datum(i).attr("d",zr().curve(Vr).defined(m=>m.totalCount>0).x(m=>l(m.hour.toString())+l.bandwidth()/2).y0(e.height-e.marginBottom).y1(m=>{const b=m.correctCount/m.totalCount;return g(isNaN(b)?0:b)}));function p(m){const b=Xs({hourStart:m.hour,hourEnd:m.hour+1}),_=Gs({reviews:m.totalCount}),v=Qs({percent:m.totalCount?m.correctCount/m.totalCount*100:0,reviews:m.correctCount});return`${b}<br>${_}<br>${v}`}o.select("g.hover-columns").selectAll("rect").data(i).join("rect").attr("x",m=>l(m.hour.toString())).attr("y",()=>h(a)).attr("width",l.bandwidth()).attr("height",()=>h(0)-h(a)).on("mousemove",(m,b)=>{const[_,v]=tn(m,document.body);Fe(p(b),_,v)}).on("mouseout",sn)}function n0(t){let e,n,r;function i(o){t[7](o)}let a={revlogRange:t[0],followRevlog:!0};return t[1]!==void 0&&(a.graphRange=t[1]),e=new rn({props:a}),Tt.push(()=>Ze(e,"graphRange",i)),{c(){L(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){I(e,o,s),r=!0},p(o,s){const l={};s&1&&(l.revlogRange=o[0]),!n&&s&2&&(n=!0,l.graphRange=o[1],Ke(()=>n=!1)),e.$set(l)},i(o){r||(C(e.$$.fragment,o),r=!0)},o(o){S(e.$$.fragment,o),r=!1},d(o){Y(e,o)}}}function r0(t){let e,n,r,i,a,o,s,l,u;return e=new Ft({props:{$$slots:{default:[n0]},$$scope:{ctx:t}}}),a=new Xr({}),o=new Xn({}),s=new an({props:{bounds:t[3]}}),l=new on({props:{bounds:t[3]}}),{c(){L(e.$$.fragment),n=q(),r=lt("svg"),i=lt("g"),L(a.$$.fragment),L(o.$$.fragment),L(s.$$.fragment),L(l.$$.fragment),this.h()},l(c){O(e.$$.fragment,c),n=U(c),r=ut(c,"svg",{viewBox:!0});var f=B(r);i=ut(f,"g",{class:!0}),B(i).forEach($),O(a.$$.fragment,f),O(o.$$.fragment,f),O(s.$$.fragment,f),O(l.$$.fragment,f),f.forEach($),this.h()},h(){E(i,"class","bars"),E(r,"viewBox",`0 0 ${t[3].width} ${t[3].height}`)},m(c,f){I(e,c,f),A(c,n,f),A(c,r,f),M(r,i),I(a,r,null),I(o,r,null),I(s,r,null),I(l,r,null),t[8](r),u=!0},p(c,f){const h={};f&515&&(h.$$scope={dirty:f,ctx:c}),e.$set(h)},i(c){u||(C(e.$$.fragment,c),C(a.$$.fragment,c),C(o.$$.fragment,c),C(s.$$.fragment,c),C(l.$$.fragment,c),u=!0)},o(c){S(e.$$.fragment,c),S(a.$$.fragment,c),S(o.$$.fragment,c),S(s.$$.fragment,c),S(l.$$.fragment,c),u=!1},d(c){c&&($(n),$(r)),Y(e,c),Y(a),Y(o),Y(s),Y(l),t[8](null)}}}function i0(t){let e,n;return e=new At({props:{title:t[4],subtitle:t[5],$$slots:{default:[r0]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&519&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function a0(t,e,n){let{sourceData:r=null}=e,{revlogRange:i}=e,a=j.Year;const o=Re();let s=null;const l=Ws(),u=js();function c(h){a=h,n(1,a)}function f(h){Tt[h?"unshift":"push"](()=>{s=h,n(2,s)})}return t.$$set=h=>{"sourceData"in h&&n(6,r=h.sourceData),"revlogRange"in h&&n(0,i=h.revlogRange)},t.$$.update=()=>{t.$$.dirty&70&&r&&e0(s,o,r,a)},[i,a,s,o,l,u,r,c,f]}class s0 extends J{constructor(e){super(),tt(this,e,a0,i0,et,{sourceData:6,revlogRange:0})}}var Rt=(t=>(t[t.Month=0]="Month",t[t.Percentile50=1]="Percentile50",t[t.Percentile95=2]="Percentile95",t[t.All=3]="All",t))(Rt||{});function is(t){const e=Zt(t.intervals),n=ot(e,([a,o])=>o),r=Array(n);let i=0;for(const a of e.entries())r.fill(a[0],i,i+a[1]),i+=a[1];return r.sort((a,o)=>a-o),{intervals:r}}function o0(t,e,n,r){return e-t<=1?(r?Js:to)({day:t,cards:n}):(r?eo:no)({daysStart:t,daysEnd:e-1,cards:n})}function l0(t,e){if(t===e)return`"prop:ivl=${t}"`;const n=`"prop:ivl>=${t}"`,r=`"prop:ivl<=${e}"`;return`${n} ${r}`}function u0(t,e){t===0&&(t=.5);const n=`"prop:s>=${t-.5}"`,r=`"prop:s<${e+.5}"`;return`${n} ${r}`}function as(t,e,n,r,i){var x;const a=t.intervals;if(!a.length)return[null,[]];const o=0;let[,s]=we(a),l=!1;switch(e){case 0:s=Math.min(s,30);break;case 1:s=ti(a,.5),l=!0;break;case 2:s=ti(a,.95),l=!0;break;case 3:l=!0;break}s=s+1;const u=i?T=>T:T=>T+1,c=(T,P,z)=>P===z.length-1?[T-(z[0]-1),T+1]:[T-(z[0]-1)],f=Math.min(70,s-o),h=rt().domain([o,s]),g=rt().domain((l?h.nice():h).domain().map(u)),d=jt().domain(g.domain()).thresholds(g.ticks(f).flatMap(c))(a),p=ot(d,T=>T.length);if(!p)return[null,[]];const m=rt().range([.7,.3]),b=yt(T=>Vn(m(T))).domain([s,o]);function _(T,P,z){const D=o0(T.x0,T.x1,T.length,i),V=Ln();return`${D}<br>${V}: ${gt(z,1)}%`}function v(T){const P=T.x0,z=T.x1-1,D=(i?u0:l0)(P,z);n("search",{query:D})}const k=Math.round((x=Dl(a))!=null?x:0),y=Vt(k*86400,!1),w=[{label:i?Zs():Ks(),value:y}];return[{scale:g,bins:d,total:p,hoverText:_,onClick:r?v:null,colourScale:b,showArea:!0},w]}function c0(t){let e,n,r,i,a,o,s,l,u,c,f,h,g,d,p,m,b,_,v,k;return _=Te(t[12][0]),{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[6]),a=q(),o=R("label"),s=R("input"),l=Q(`
            50%`),u=q(),c=R("label"),f=R("input"),h=Q(`
            95%`),g=q(),d=R("label"),p=R("input"),m=q(),b=Q(t[7]),this.h()},l(y){e=F(y,"LABEL",{});var w=B(e);n=F(w,"INPUT",{type:!0}),r=U(w),i=W(w,t[6]),w.forEach($),a=U(y),o=F(y,"LABEL",{});var x=B(o);s=F(x,"INPUT",{type:!0}),l=W(x,`
            50%`),x.forEach($),u=U(y),c=F(y,"LABEL",{});var T=B(c);f=F(T,"INPUT",{type:!0}),h=W(T,`
            95%`),T.forEach($),g=U(y),d=F(y,"LABEL",{});var P=B(d);p=F(P,"INPUT",{type:!0}),m=U(P),b=W(P,t[7]),P.forEach($),this.h()},h(){E(n,"type","radio"),n.__value=Rt.Month,dt(n,n.__value),E(s,"type","radio"),s.__value=Rt.Percentile50,dt(s,s.__value),E(f,"type","radio"),f.__value=Rt.Percentile95,dt(f,f.__value),E(p,"type","radio"),p.__value=Rt.All,dt(p,p.__value),_.p(n,s,f,p)},m(y,w){A(y,e,w),M(e,n),n.checked=n.__value===t[1],M(e,r),M(e,i),A(y,a,w),A(y,o,w),M(o,s),s.checked=s.__value===t[1],M(o,l),A(y,u,w),A(y,c,w),M(c,f),f.checked=f.__value===t[1],M(c,h),A(y,g,w),A(y,d,w),M(d,p),p.checked=p.__value===t[1],M(d,m),M(d,b),v||(k=[nt(n,"change",t[11]),nt(s,"change",t[13]),nt(f,"change",t[14]),nt(p,"change",t[15])],v=!0)},p(y,w){w&2&&(n.checked=n.__value===y[1]),w&2&&(s.checked=s.__value===y[1]),w&2&&(f.checked=f.__value===y[1]),w&2&&(p.checked=p.__value===y[1])},d(y){y&&($(e),$(a),$(o),$(u),$(c),$(g),$(d)),_.r(),v=!1,Ce(k)}}}function f0(t){let e,n,r,i,a,o;return e=new Ft({props:{$$slots:{default:[c0]},$$scope:{ctx:t}}}),r=new de({props:{data:t[2]}}),a=new Kt({props:{tableData:t[3]}}),{c(){L(e.$$.fragment),n=q(),L(r.$$.fragment),i=q(),L(a.$$.fragment)},l(s){O(e.$$.fragment,s),n=U(s),O(r.$$.fragment,s),i=U(s),O(a.$$.fragment,s)},m(s,l){I(e,s,l),A(s,n,l),I(r,s,l),A(s,i,l),I(a,s,l),o=!0},p(s,l){const u={};l&131074&&(u.$$scope={dirty:l,ctx:s}),e.$set(u);const c={};l&4&&(c.data=s[2]),r.$set(c);const f={};l&8&&(f.tableData=s[3]),a.$set(f)},i(s){o||(C(e.$$.fragment,s),C(r.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(r.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){s&&($(n),$(i)),Y(e,s),Y(r,s),Y(a,s)}}}function h0(t){let e,n;return e=new At({props:{title:t[4],subtitle:t[5],$$slots:{default:[f0]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&131086&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function g0(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,w=>n(10,r=w)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o=null}=e,{prefs:s}=e;a();const l=Qt();let u=null,c=null,f=[],h=Rt.Percentile95;const g=ro(),d=io(),p=Vt(1*vn),m=xr(),b=[[]];function _(){h=this.__value,n(1,h)}function v(){h=this.__value,n(1,h)}function k(){h=this.__value,n(1,h)}function y(){h=this.__value,n(1,h)}return t.$$set=w=>{"sourceData"in w&&n(8,o=w.sourceData),"prefs"in w&&a(n(0,s=w.prefs))},t.$$.update=()=>{t.$$.dirty&256&&o&&n(9,u=is(o.intervals)),t.$$.dirty&1538&&u&&n(2,[c,f]=as(u,h,l,r.browserLinksSupported,!1),c,(n(3,f),n(9,u),n(1,h),n(10,r),n(8,o)))},[s,h,c,f,g,d,p,m,o,u,r,_,b,v,k,y]}class d0 extends J{constructor(e){super(),tt(this,e,g0,h0,et,{sourceData:8,prefs:0})}}function m0(t){return{retrievability:Zt(t.retrievability.retrievability)}}function p0(t,e){const n=`"prop:r>=${t/100}"`;let r=`"prop:r<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${n} AND ${r}`}function _0(t,e,n){const r=rt().domain([t,e]).nice(),i=r.ticks(n),a=r.domain(),o=t-a[0],s=i[1]-i[0];if(o===0||o%s!==0&&s%o!==0)return[r,i];const l=u=>u+o;return[rt().domain(a.map(l)),i.map(l)]}function b0(t,e,n){const r=t.retrievability;if(!r.size)return[null,[]];const i=0,a=100,o=20,[s,l]=_0(i,a,o),u=jt().value(m=>m[0]).domain(s.domain()).thresholds(l)(r.entries()),c=ot(u,$t),f=yt(zn).domain([0,100]);function h(m,b){const _=`${m.x0}%-${m.x1}%`;return so({cards:$t(m),percent:_})}function g(m){const b=m.x0,_=m.x1-1,v=p0(b,_);e("search",{query:v})}const d=m=>gt(m,0)+"%",p=[{label:ao(),value:d(ot(Array.from(r.entries()).map(([m,b])=>(m+2.5)*b))/c)}];return[{scale:s,bins:u,total:c,hoverText:h,onClick:n?g:null,colourScale:f,showArea:!1,binValue:$t,xTickFormat:d},p]}function Hi(t){let e,n;return e=new At({props:{title:t[4],subtitle:t[5],$$slots:{default:[y0]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,i){const a={};i&268&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function y0(t){let e,n,r,i;return e=new de({props:{data:t[2]}}),r=new Kt({props:{tableData:t[3]}}),{c(){L(e.$$.fragment),n=q(),L(r.$$.fragment)},l(a){O(e.$$.fragment,a),n=U(a),O(r.$$.fragment,a)},m(a,o){I(e,a,o),A(a,n,o),I(r,a,o),i=!0},p(a,o){const s={};o&4&&(s.data=a[2]),e.$set(s);const l={};o&8&&(l.tableData=a[3]),r.$set(l)},i(a){i||(C(e.$$.fragment,a),C(r.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),S(r.$$.fragment,a),i=!1},d(a){a&&$(n),Y(e,a),Y(r,a)}}}function v0(t){var i;let e,n,r=((i=t[0])==null?void 0:i.fsrs)&&Hi(t);return{c(){r&&r.c(),e=at()},l(a){r&&r.l(a),e=at()},m(a,o){r&&r.m(a,o),A(a,e,o),n=!0},p(a,[o]){var s;(s=a[0])!=null&&s.fsrs?r?(r.p(a,o),o&1&&C(r,1)):(r=Hi(a),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(Ot(),S(r,1,1,()=>{r=null}),qt())},i(a){n||(C(r),n=!0)},o(a){S(r),n=!1},d(a){a&&$(e),r&&r.d(a)}}}function $0(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,g=>n(6,r=g)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o=null}=e,{prefs:s}=e;a();const l=Qt();let u=null,c=[];const f=oo(),h=lo();return t.$$set=g=>{"sourceData"in g&&n(0,o=g.sourceData),"prefs"in g&&a(n(1,s=g.prefs))},t.$$.update=()=>{t.$$.dirty&65&&o&&n(2,[u,c]=b0(m0(o),l,r.browserLinksSupported),u,(n(3,c),n(0,o),n(6,r)))},[o,s,u,c,f,h,r]}class w0 extends J{constructor(e){super(),tt(this,e,$0,v0,et,{sourceData:0,prefs:1})}}function k0(t){return{reviewCount:Zt(t.reviews.count),reviewTime:Zt(t.reviews.time)}}function ss(t){const e=[0,0,0,0,0];for(const n of t)e[0]+=n[1].mature,e[1]+=n[1].young,e[2]+=n[1].relearn,e[3]+=n[1].learn,e[4]+=n[1].filtered;return e}function Ie(t,e){return ot(ss(t).slice(0,e+1))}function x0(t,e,n,r,i){const a=Ne(t),o=a.transition().duration(600),s=1;let l=0;switch(r){case j.Month:l=-30;break;case j.ThreeMonths:l=-89;break;case j.Year:l=-364;break;case j.AllTime:l=xn(n.reviewCount.keys());break}const u=Math.min(70,Math.abs(l)),c=rt().domain([l,s]);r===j.AllTime&&c.nice(u);const f=i?n.reviewTime:n.reviewCount,h=jt().value(H=>H[0]).domain(c.domain()).thresholds(c.ticks(u))(f.entries());if(ot(h,H=>H.length))Ut(a,!0);else return Ut(a,!1),[];c.range([e.marginLeft,e.width-e.marginRight]),a.select(".x-ticks").call(H=>H.transition(o).call(In(c).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const d=H=>i?Vt(H/1e3,!0):Math.round(H)!=H?"":gt(H),p=kn(h,H=>Ie(H,4)),m=rt().range([e.height-e.marginBottom,e.marginTop]).domain([0,p]).nice();a.select(".y-ticks").call(H=>H.transition(o).call(Yn(m).ticks(e.height/50).tickSizeOuter(0).tickFormat(d))).attr("direction","ltr");function b(H){const K=Math.max(0,c(H.x1)-c(H.x0)-1);return K!=null?K:0}const _=rt().range([.3,.5]),v=rt().range([.4,.7]),k=yt(H=>br(v(H))).domain(c.domain()),y=yt(H=>br(_(H))).domain(c.domain()),w=yt(H=>Wh(_(H))).domain(c.domain()),x=yt(H=>jh(_(H))).domain(c.domain()),T=yt(H=>Qh(_(H))).domain(c.domain());function P(H){switch(H){case 0:return k;case 1:return y;case 3:return x;case 2:return w;case 4:return T}}function z(H){return i?Vt(H/1e3):He({reviews:H})}function D(H,K){const it=Tr(H.x0,H.x1),_e=ss(H),Be=z(ot(_e));let be=`<table><tr><td>${it}</td><td align=end>${Be}</td></tr>`;const os=[[4,po()],[3,Dr()],[2,ji()],[1,Ar()],[0,Mr()],[null,Ln()]];for(const[Gn,ls]of os){let Qn,Wn;Gn==null?(Qn="transparent",Wn=z(K)):(Qn=P(Gn)(1),Wn=z(_e[Gn])),be+=`<tr>
            <td><span style="color: ${Qn};"></span> ${ls}</td>
            <td align=end>${Wn}</td>
            </tr>`}return be}const V=(H,K)=>H.attr("width",b).transition(o).attr("x",it=>c(it.x0)).attr("y",it=>m(Ie(it,K))).attr("height",it=>m(0)-m(Ie(it,K))).attr("fill",it=>P(K)(it.x0));for(const H of[0,1,2,3,4])a.select(`g.bars${H}`).selectAll("rect").data(h).join(K=>K.append("rect").attr("rx",1).attr("x",it=>c(it.x0)).attr("y",m(0)).attr("height",0).call(it=>V(it,H)),K=>K.call(it=>V(it,H)),K=>K.call(it=>it.transition(o).attr("height",0).attr("y",m(0))));const N=h.map(H=>Ie(H,4));N.unshift(0);const X=Cr(N),ct=X.slice(-1)[0],mt=m.copy().domain([0,ct]).nice();ct&&(a.select(".y2-ticks").call(H=>H.transition(o).call(Sr(mt).ticks(e.height/50).tickFormat(d).tickSizeOuter(0))).attr("direction","ltr"),a.select("path.cumulative-overlay").datum(X).attr("d",zr().curve(Vr).x((H,K)=>c(K===0?h[0].x0:h[K-1].x1)).y0(e.height-e.marginBottom).y1(H=>mt(H))));const ft=h.map((H,K)=>[H,X[K+1]]);a.select("g.hover-columns").selectAll("rect").data(ft).join("rect").attr("x",([H])=>c(H.x0)).attr("y",()=>m(p)).attr("width",([H])=>b(H)).attr("height",()=>m(0)-m(p)).on("mousemove",(H,[K,it])=>{const[_e,Be]=tn(H,document.body);Fe(D(K,it),_e,Be)}).on("mouseout",sn);const ht=-l+1,st=ot(h,H=>H.length),_t=st/ht*100,Pt=ct,Jt=Pt/ht,me=Pt/st;let te,wt,ee,Wt,ne;if(i){te=Vt(Pt/1e3,!1),wt=Wr({count:Math.round(me/1e3/60)}),ee=Wr({count:Math.round(Jt/1e3/60)}),ne=uo();const H=jt().value(be=>be[0]).domain(c.domain())(n.reviewCount.entries()),K=ot(H,be=>Ie(be,4)),it=Pt/1e3,_e=it/K,Be=K*60/it;Wt=co({averageSeconds:_e,cardsPerMinute:Be})}else te=He({reviews:Pt}),wt=ar({count:Math.round(me)}),ee=ar({count:Math.round(Jt)}),Wt=ne="";const pe=[{label:fo(),value:ho({amount:st,total:ht,percent:_t<99.5?gt(_t):_t<99.95?gt(_t,1):_t<100?gt(_t,2):"100"})},{label:kr(),value:te},{label:go(),value:wt},{label:mo(),value:ee}];return Wt&&pe.push({label:ne,value:Wt}),pe}function M0(t,e,n){const r=t.slice();return r[14]=e[n],r}function A0(t){let e,n,r,i,a,o,s,l,u,c;function f(g){t[12](g)}let h={revlogRange:t[0],followRevlog:!0};return t[2]!==void 0&&(h.graphRange=t[2]),o=new rn({props:h}),Tt.push(()=>Ze(o,"graphRange",f)),{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[8]),a=q(),L(o.$$.fragment),this.h()},l(g){e=F(g,"LABEL",{});var d=B(e);n=F(d,"INPUT",{type:!0}),r=U(d),i=W(d,t[8]),d.forEach($),a=U(g),O(o.$$.fragment,g),this.h()},h(){E(n,"type","checkbox")},m(g,d){A(g,e,d),M(e,n),n.checked=t[3],M(e,r),M(e,i),A(g,a,d),I(o,g,d),l=!0,u||(c=nt(n,"change",t[11]),u=!0)},p(g,d){d&8&&(n.checked=g[3]);const p={};d&1&&(p.revlogRange=g[0]),!s&&d&4&&(s=!0,p.graphRange=g[2],Ke(()=>s=!1)),o.$set(p)},i(g){l||(C(o.$$.fragment,g),l=!0)},o(g){S(o.$$.fragment,g),l=!1},d(g){g&&($(e),$(a)),Y(o,g),u=!1,c()}}}function D0(t){let e;return{c(){e=lt("g"),this.h()},l(n){e=ut(n,"g",{class:!0}),B(e).forEach($),this.h()},h(){E(e,"class","bars"+t[14])},m(n,r){A(n,e,r)},p:G,d(n){n&&$(e)}}}function T0(t){let e,n,r,i,a,o,s,l,u,c,f;e=new Ft({props:{$$slots:{default:[A0]},$$scope:{ctx:t}}});let h=Xt([4,3,2,1,0]),g=[];for(let d=0;d<5;d+=1)g[d]=D0(M0(t,h,d));return a=new Xr({}),o=new Xn({}),s=new an({props:{bounds:t[6]}}),l=new on({props:{bounds:t[6]}}),c=new Kt({props:{tableData:t[4]}}),{c(){L(e.$$.fragment),n=q(),r=lt("svg");for(let d=0;d<5;d+=1)g[d].c();i=at(),L(a.$$.fragment),L(o.$$.fragment),L(s.$$.fragment),L(l.$$.fragment),u=q(),L(c.$$.fragment),this.h()},l(d){O(e.$$.fragment,d),n=U(d),r=ut(d,"svg",{viewBox:!0});var p=B(r);for(let m=0;m<5;m+=1)g[m].l(p);i=at(),O(a.$$.fragment,p),O(o.$$.fragment,p),O(s.$$.fragment,p),O(l.$$.fragment,p),p.forEach($),u=U(d),O(c.$$.fragment,d),this.h()},h(){E(r,"viewBox",`0 0 ${t[6].width} ${t[6].height}`)},m(d,p){I(e,d,p),A(d,n,p),A(d,r,p);for(let m=0;m<5;m+=1)g[m]&&g[m].m(r,null);M(r,i),I(a,r,null),I(o,r,null),I(s,r,null),I(l,r,null),t[13](r),A(d,u,p),I(c,d,p),f=!0},p(d,p){const m={};p&131085&&(m.$$scope={dirty:p,ctx:d}),e.$set(m);const b={};p&16&&(b.tableData=d[4]),c.$set(b)},i(d){f||(C(e.$$.fragment,d),C(a.$$.fragment,d),C(o.$$.fragment,d),C(s.$$.fragment,d),C(l.$$.fragment,d),C(c.$$.fragment,d),f=!0)},o(d){S(e.$$.fragment,d),S(a.$$.fragment,d),S(o.$$.fragment,d),S(s.$$.fragment,d),S(l.$$.fragment,d),S(c.$$.fragment,d),f=!1},d(d){d&&($(n),$(r),$(u)),Y(e,d),je(g,d),Y(a),Y(o),Y(s),Y(l),t[13](null),Y(c,d)}}}function C0(t){let e,n;return e=new At({props:{title:t[7],subtitle:t[5],$$slots:{default:[T0]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,[i]){const a={};i&32&&(a.subtitle=r[5]),i&131103&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function N0(t,e,n){let{sourceData:r=null}=e,{revlogRange:i}=e,a=null;const o=Re();let s=null,l=j.Month,u=!1,c=[];const f=_o(),h=bo();let g="";function d(){u=this.checked,n(3,u)}function p(b){l=b,n(2,l)}function m(b){Tt[b?"unshift":"push"](()=>{s=b,n(1,s)})}return t.$$set=b=>{"sourceData"in b&&n(9,r=b.sourceData),"revlogRange"in b&&n(0,i=b.revlogRange)},t.$$.update=()=>{t.$$.dirty&512&&r&&n(10,a=k0(r)),t.$$.dirty&1038&&a&&n(4,c=x0(s,o,a,l,u)),t.$$.dirty&8&&(u?n(5,g=vo()):n(5,g=yo()))},[i,s,l,u,c,g,o,f,h,r,a,d,p,m]}class S0 extends J{constructor(e){super(),tt(this,e,N0,C0,et,{sourceData:9,revlogRange:0})}}function zi(t){let e,n;return e=new At({props:{title:t[5],subtitle:t[6],$$slots:{default:[R0]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,i){const a={};i&131100&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function E0(t){let e,n,r,i,a,o,s,l,u,c,f,h,g,d,p,m,b,_,v,k;return _=Te(t[12][0]),{c(){e=R("label"),n=R("input"),r=q(),i=Q(t[7]),a=q(),o=R("label"),s=R("input"),l=Q(`
                50%`),u=q(),c=R("label"),f=R("input"),h=Q(`
                95%`),g=q(),d=R("label"),p=R("input"),m=q(),b=Q(t[8]),this.h()},l(y){e=F(y,"LABEL",{});var w=B(e);n=F(w,"INPUT",{type:!0}),r=U(w),i=W(w,t[7]),w.forEach($),a=U(y),o=F(y,"LABEL",{});var x=B(o);s=F(x,"INPUT",{type:!0}),l=W(x,`
                50%`),x.forEach($),u=U(y),c=F(y,"LABEL",{});var T=B(c);f=F(T,"INPUT",{type:!0}),h=W(T,`
                95%`),T.forEach($),g=U(y),d=F(y,"LABEL",{});var P=B(d);p=F(P,"INPUT",{type:!0}),m=U(P),b=W(P,t[8]),P.forEach($),this.h()},h(){E(n,"type","radio"),n.__value=Rt.Month,dt(n,n.__value),E(s,"type","radio"),s.__value=Rt.Percentile50,dt(s,s.__value),E(f,"type","radio"),f.__value=Rt.Percentile95,dt(f,f.__value),E(p,"type","radio"),p.__value=Rt.All,dt(p,p.__value),_.p(n,s,f,p)},m(y,w){A(y,e,w),M(e,n),n.checked=n.__value===t[2],M(e,r),M(e,i),A(y,a,w),A(y,o,w),M(o,s),s.checked=s.__value===t[2],M(o,l),A(y,u,w),A(y,c,w),M(c,f),f.checked=f.__value===t[2],M(c,h),A(y,g,w),A(y,d,w),M(d,p),p.checked=p.__value===t[2],M(d,m),M(d,b),v||(k=[nt(n,"change",t[11]),nt(s,"change",t[13]),nt(f,"change",t[14]),nt(p,"change",t[15])],v=!0)},p(y,w){w&4&&(n.checked=n.__value===y[2]),w&4&&(s.checked=s.__value===y[2]),w&4&&(f.checked=f.__value===y[2]),w&4&&(p.checked=p.__value===y[2])},d(y){y&&($(e),$(a),$(o),$(u),$(c),$(g),$(d)),_.r(),v=!1,Ce(k)}}}function R0(t){let e,n,r,i,a,o;return e=new Ft({props:{$$slots:{default:[E0]},$$scope:{ctx:t}}}),r=new de({props:{data:t[3]}}),a=new Kt({props:{tableData:t[4]}}),{c(){L(e.$$.fragment),n=q(),L(r.$$.fragment),i=q(),L(a.$$.fragment)},l(s){O(e.$$.fragment,s),n=U(s),O(r.$$.fragment,s),i=U(s),O(a.$$.fragment,s)},m(s,l){I(e,s,l),A(s,n,l),I(r,s,l),A(s,i,l),I(a,s,l),o=!0},p(s,l){const u={};l&131076&&(u.$$scope={dirty:l,ctx:s}),e.$set(u);const c={};l&8&&(c.data=s[3]),r.$set(c);const f={};l&16&&(f.tableData=s[4]),a.$set(f)},i(s){o||(C(e.$$.fragment,s),C(r.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(r.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){s&&($(n),$(i)),Y(e,s),Y(r,s),Y(a,s)}}}function F0(t){var i;let e,n,r=((i=t[0])==null?void 0:i.fsrs)&&zi(t);return{c(){r&&r.c(),e=at()},l(a){r&&r.l(a),e=at()},m(a,o){r&&r.m(a,o),A(a,e,o),n=!0},p(a,[o]){var s;(s=a[0])!=null&&s.fsrs?r?(r.p(a,o),o&1&&C(r,1)):(r=zi(a),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(Ot(),S(r,1,1,()=>{r=null}),qt())},i(a){n||(C(r),n=!0)},o(a){S(r),n=!1},d(a){a&&$(e),r&&r.d(a)}}}function B0(t,e,n){let r,i=G,a=()=>(i(),i=kt(s,w=>n(10,r=w)),s);t.$$.on_destroy.push(()=>i());let{sourceData:o=null}=e,{prefs:s}=e;a();const l=Qt();let u=null,c=null,f=[],h=Rt.Percentile95;const g=$o(),d=wo(),p=Vt(1*vn),m=xr(),b=[[]];function _(){h=this.__value,n(2,h)}function v(){h=this.__value,n(2,h)}function k(){h=this.__value,n(2,h)}function y(){h=this.__value,n(2,h)}return t.$$set=w=>{"sourceData"in w&&n(0,o=w.sourceData),"prefs"in w&&a(n(1,s=w.prefs))},t.$$.update=()=>{t.$$.dirty&1&&o&&n(9,u=is(o.stability)),t.$$.dirty&1540&&u&&n(3,[c,f]=as(u,h,l,r.browserLinksSupported,!0),c,(n(4,f),n(9,u),n(2,h),n(10,r),n(0,o)))},[o,s,h,c,f,g,d,p,m,u,r,_,b,v,k,y]}class P0 extends J{constructor(e){super(),tt(this,e,B0,F0,et,{sourceData:0,prefs:1})}}function L0(t){let e;const n=t.today;if(n.answerCount){const r=No(n.answerCount,n.answerMillis/1e3),i=n.answerCount-n.correctCount;let a=ko();a+=` ${i} (${gt(i/n.answerCount*100)}%)`;const o=xo({learnCount:n.learnCount,reviewCount:n.reviewCount,relearnCount:n.relearnCount,filteredCount:n.earlyReviewCount});let s;n.matureCount?s=Mo({correct:n.matureCorrect,total:n.matureCount,percent:n.matureCorrect/n.matureCount*100}):s=Ao(),e=[r,a,o,s]}else e=[Do()];return{title:To(),lines:e}}function Vi(t,e,n){const r=t.slice();return r[2]=e[n],r}function Xi(t){let e,n;return e=new At({props:{title:t[0].title,$$slots:{default:[I0]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p(r,i){const a={};i&1&&(a.title=r[0].title),i&33&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function Gi(t){let e,n=t[2]+"",r;return{c(){e=R("div"),r=Q(n)},l(i){e=F(i,"DIV",{});var a=B(e);r=W(a,n),a.forEach($)},m(i,a){A(i,e,a),M(e,r)},p(i,a){a&1&&n!==(n=i[2]+"")&&Yt(r,n)},d(i){i&&$(e)}}}function I0(t){let e,n=Xt(t[0].lines),r=[];for(let i=0;i<n.length;i+=1)r[i]=Gi(Vi(t,n,i));return{c(){e=R("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=F(i,"DIV",{class:!0});var a=B(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach($),this.h()},h(){E(e,"class","legend svelte-2llkqb")},m(i,a){A(i,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(i,a){if(a&1){n=Xt(i[0].lines);let o;for(o=0;o<n.length;o+=1){const s=Vi(i,n,o);r[o]?r[o].p(s,a):(r[o]=Gi(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(i){i&&$(e),je(r,i)}}}function Y0(t){let e,n,r=t[0]&&Xi(t);return{c(){r&&r.c(),e=at()},l(i){r&&r.l(i),e=at()},m(i,a){r&&r.m(i,a),A(i,e,a),n=!0},p(i,[a]){i[0]?r?(r.p(i,a),a&1&&C(r,1)):(r=Xi(i),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(Ot(),S(r,1,1,()=>{r=null}),qt())},i(i){n||(C(r),n=!0)},o(i){S(r),n=!1},d(i){i&&$(e),r&&r.d(i)}}}function O0(t,e,n){let{sourceData:r=null}=e,i=null;return t.$$set=a=>{"sourceData"in a&&n(1,r=a.sourceData)},t.$$.update=()=>{t.$$.dirty&2&&r&&n(0,i=L0(r))},[i,r]}class q0 extends J{constructor(e){super(),tt(this,e,O0,Y0,et,{sourceData:1})}}function U0(t){let e,n;return e=new Jd({props:{graphs:t[0],initialSearch:"deck:current",initialDays:365,controller:rs}}),{c(){L(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){I(e,r,i),n=!0},p:G,i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function H0(t){return[[q0,Ld,rd,S0,gd,d0,P0,Cd,$d,w0,s0,Wg,Ug]]}class rm extends J{constructor(e){super(),tt(this,e,H0,U0,et,{})}}export{rm as component};
