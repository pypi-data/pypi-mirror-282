var De=Object.defineProperty;var Ve=(i,e,n)=>e in i?De(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var z=(i,e,n)=>(Ve(i,typeof e!="symbol"?e+"":e,n),n);import{u as ve,v as Ee,o as Oe}from"../chunks/backend.pzQSPd-R.mjs";import{ai as Te,aM as ze,aN as Fe,aO as Be,aP as Le,aQ as je,aR as Ae,aS as He,aT as Pe,aU as Me,aV as Re}from"../chunks/ftl.cKofWsqB.mjs";import{r as te}from"../chunks/index.grcEGtIt.mjs";import{i as ne,S as be}from"../chunks/Select.R1roNBxL.mjs";import{S as L,i as j,s as A,e as N,c as k,b as I,f as m,D as F,h as d,n as E,B as v,C as b,F as y,v as p,r as _,H as w,l as J,a as S,g as C,t as O,d as T,k as M,N as g,V as D,q as R,u as q,a3 as ye,j as V,U as qe,_ as Ue,$ as We,a1 as W,a2 as G,E as we,a9 as Ge,aa as Qe,O as se,A as Je,y as Ke,z as Ne,G as Xe}from"../chunks/Component.-XTVY6ph.mjs";import"../chunks/index.HrFqG6o2.mjs";import{a as Ye}from"../chunks/helpers.Gx5FBjbA.mjs";import{C as U}from"../chunks/Col.0MgQrJqK.mjs";import{C as X}from"../chunks/Container.T7flwP-u.mjs";import{R as Y}from"../chunks/Row.9I620FT8.mjs";import{S as ke}from"../chunks/StickyContainer.GIYfErNx.mjs";import{e as K}from"../chunks/each.mrBeHWFK.mjs";import{B as Z}from"../chunks/Badge.EYzNN-L8.mjs";import{B as Ze,s as le}from"../chunks/index.TzTdlOlB.mjs";import{g as xe,S as et,a as tt,b as nt,p as st,o as re,m as lt,e as rt}from"../chunks/Shortcut.F_v_rQsz.mjs";import{L as Ie}from"../chunks/LabelButton.cYtwXhrB.mjs";import{B as it}from"../chunks/ButtonGroup.d7QDvkED.mjs";function ie(i){return i.map(e=>e??-1)}function ae(i){return i.map(e=>e===-1?null:e)}class oe{constructor(e){z(this,"fields");z(this,"templates");z(this,"oldNotetypeName");z(this,"isCloze");z(this,"info");var t,s,l;this.info=e;const n=((t=e.input)==null?void 0:t.newTemplates)??[];this.isCloze=((s=e.input)==null?void 0:s.isCloze)??!1,n.length>0&&(this.templates=ae(n)),this.fields=ae(((l=e.input)==null?void 0:l.newFields)??[]),this.oldNotetypeName=e.oldNotetypeName}mapForContext(e){return e==1?this.templates??[]:this.fields}getOldIndex(e,n){return this.mapForContext(e)[n]??this.getOldNamesIncludingNothing(e).length-1}getOldNamesIncludingNothing(e){return[...this.getOldNames(e),Te()]}getOldNames(e){return e==1?this.info.oldTemplateNames:this.info.oldFieldNames}getOldNotetypeName(){return this.info.oldNotetypeName}getNewName(e,n){return(e==1?this.info.newTemplateNames:this.info.newFieldNames)[n]}unusedItems(e){const n=new Set(this.mapForContext(e).filter(r=>r!==null)),t=this.getOldNames(e);return[...Array(t.length).keys()].filter(r=>!n.has(r)).map(r=>t[r])}unchanged(){var e;return this.input().newNotetypeId===this.input().oldNotetypeId&&ne(this.fields,[...Array(this.fields.length).keys()])&&ne(this.templates,[...Array(((e=this.templates)==null?void 0:e.length)??0).keys()])}input(){return this.info.input}intoInput(){const e=this.info.input;return e.newFields=ie(this.fields),this.templates&&(e.newTemplates=ie(this.templates)),e}}var B=(i=>(i[i.Field=0]="Field",i[i.Template=1]="Template",i))(B||{});class at{constructor(e,n){z(this,"info");z(this,"notetypes");z(this,"info_");z(this,"infoSetter");z(this,"notetypeNames");z(this,"notetypesSetter");this.info_=new oe(n),this.info=te(this.info_,t=>{this.infoSetter=t}),this.notetypeNames=e,this.notetypes=te(this.buildNotetypeList(),t=>{this.notetypesSetter=t})}async setTargetNotetypeIndex(e){this.info_.input().newNotetypeId=this.notetypeNames.entries[e].id,this.notetypesSetter(this.buildNotetypeList());const{oldNotetypeId:n,newNotetypeId:t}=this.info_.input(),s=await ve({oldNotetypeId:n,newNotetypeId:t});this.info_=new oe(s),this.info_.unusedItems(0),this.infoSetter(this.info_)}setOldIndex(e,n,t){const s=this.info_.mapForContext(e),l=this.info_.getOldNames(e),r=t<l.length?t:null;if(!(e==0)&&r!==null)for(let o=0;o<s.length;o++)s[o]===r&&(s[o]=null);s[n]=r,this.infoSetter(this.info_)}dataForSaving(){return this.info_.intoInput()}async save(){if(this.info_.unchanged()){alert("No changes to save");return}await Ee(this.dataForSaving())}buildNotetypeList(){const e=this.info_.input().newNotetypeId;return this.notetypeNames.entries.map((n,t)=>({idx:t,name:n.name,current:n.id===e}))}}const ot=async({params:i})=>{const[e,n]=i.notetypeIds.split("/"),t=BigInt(e),s=n?BigInt(n):t,l=Oe({}),r=ve({oldNotetypeId:t,newNotetypeId:s}),[a,o]=await Promise.all([l,r]);return{state:new at(a,o)}},In=Object.freeze(Object.defineProperty({__proto__:null,load:ot},Symbol.toStringTag,{value:"Module"}));function ft(i){let e;return{c(){e=N("div"),this.h()},l(n){e=k(n,"DIV",{class:!0}),I(e).forEach(m),this.h()},h(){F(e,"class","svelte-1xardfc")},m(n,t){d(n,e,t)},p:E,i:E,o:E,d(n){n&&m(e)}}}class ut extends L{constructor(e){super(),j(this,e,null,ft,A,{})}}function ct(i){let e,n;return e=new be({props:{value:i[2],label:i[4],list:i[3].getOldNamesIncludingNothing(i[0])}}),e.$on("change",i[6]),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&4&&(l.value=t[2]),s&16&&(l.label=t[4]),s&9&&(l.list=t[3].getOldNamesIncludingNothing(t[0])),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $t(i){let e=i[3].getNewName(i[0],i[1])+"",n;return{c(){n=O(e)},l(t){n=T(t,e)},m(t,s){d(t,n,s)},p(t,s){s&11&&e!==(e=t[3].getNewName(t[0],t[1])+"")&&M(n,e)},d(t){t&&m(n)}}}function mt(i){let e,n,t,s;return e=new U({props:{$$slots:{default:[ct]},$$scope:{ctx:i}}}),t=new U({props:{$$slots:{default:[$t]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=S(),v(t.$$.fragment)},l(l){b(e.$$.fragment,l),n=C(l),b(t.$$.fragment,l)},m(l,r){y(e,l,r),d(l,n,r),y(t,l,r),s=!0},p(l,r){const a={};r&285&&(a.$$scope={dirty:r,ctx:l}),e.$set(a);const o={};r&267&&(o.$$scope={dirty:r,ctx:l}),t.$set(o)},i(l){s||(p(e.$$.fragment,l),p(t.$$.fragment,l),s=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),s=!1},d(l){l&&m(n),w(e,l),w(t,l)}}}function pt(i){let e,n;return e=new Y({props:{$$slots:{default:[mt]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,[s]){const l={};s&287&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function dt(i,e,n){let t,s,l,{state:r}=e,{ctx:a}=e,{newIndex:o}=e;const c=r.info;J(i,c,f=>n(3,l=f));function $(f){n(2,t=f.detail.value),r.setOldIndex(a,o,t)}return i.$$set=f=>{"state"in f&&n(7,r=f.state),"ctx"in f&&n(0,a=f.ctx),"newIndex"in f&&n(1,o=f.newIndex)},i.$$.update=()=>{i.$$.dirty&11&&n(2,t=l.getOldIndex(a,o)),i.$$.dirty&13&&n(4,s=l.getOldNamesIncludingNothing(a)[t])},[a,o,t,l,s,c,$,r]}class _t extends L{constructor(e){super(),j(this,e,dt,pt,A,{state:7,ctx:0,newIndex:1})}}function fe(i,e,n){const t=i.slice();return t[4]=e[n],t[6]=n,t}function ue(i){let e,n;return e=new _t({props:{state:i[0],ctx:i[1],newIndex:i[6]}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&1&&(l.state=t[0]),s&2&&(l.ctx=t[1]),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ht(i){let e,n,t=K(i[2].mapForContext(i[1])),s=[];for(let r=0;r<t.length;r+=1)s[r]=ue(fe(i,t,r));const l=r=>_(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=D()},l(r){for(let a=0;a<s.length;a+=1)s[a].l(r);e=D()},m(r,a){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(r,a);d(r,e,a),n=!0},p(r,a){if(a&7){t=K(r[2].mapForContext(r[1]));let o;for(o=0;o<t.length;o+=1){const c=fe(r,t,o);s[o]?(s[o].p(c,a),p(s[o],1)):(s[o]=ue(c),s[o].c(),p(s[o],1),s[o].m(e.parentNode,e))}for(R(),o=t.length;o<s.length;o+=1)l(o);q()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)p(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)_(s[a]);n=!1},d(r){r&&m(e),ye(s,r)}}}function gt(i){let e,n,t,s,l,r;return e=new ut({}),s=new X({props:{$$slots:{default:[ht]},$$scope:{ctx:i}}}),{c(){n=N("div"),v(e.$$.fragment),t=S(),l=N("div"),v(s.$$.fragment),this.h()},l(a){n=k(a,"DIV",{style:!0});var o=I(n);b(e.$$.fragment,o),t=C(a),l=k(a,"DIV",{style:!0});var c=I(l);b(s.$$.fragment,c),this.h()},h(){g(n,"display","contents"),g(n,"--height","0.5rem"),g(l,"display","contents"),g(l,"--gutter-inline","0.5rem"),g(l,"--gutter-block","0.15rem")},m(a,o){d(a,n,o),y(e,n,null),d(a,t,o),d(a,l,o),y(s,l,null),r=!0},p(a,[o]){const c={};o&135&&(c.$$scope={dirty:o,ctx:a}),s.$set(c)},i(a){r||(p(e.$$.fragment,a),p(s.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(s.$$.fragment,a),r=!1},d(a){a&&m(t),a&&e&&m(n),w(e,a),a&&s&&m(l),w(s,a)}}}function vt(i,e,n){let t,{state:s}=e,{ctx:l}=e;const r=s.info;return J(i,r,a=>n(2,t=a)),i.$$set=a=>{"state"in a&&n(0,s=a.state),"ctx"in a&&n(1,l=a.ctx)},[s,l,t,r]}class Se extends L{constructor(e){super(),j(this,e,vt,gt,A,{state:0,ctx:1})}}function bt(i){let e,n=ze()+"",t;return{c(){e=N("div"),t=O(n),this.h()},l(s){e=k(s,"DIV",{class:!0});var l=I(e);t=T(l,n),l.forEach(m),this.h()},h(){F(e,"class","save svelte-1polrdz")},m(s,l){d(s,e,l),V(e,t)},p:E,d(s){s&&m(e)}}}function yt(i){let e,n,t,s,l;return e=new Ie({props:{primary:!0,tooltip:xe(ce),$$slots:{default:[bt]},$$scope:{ctx:i}}}),e.$on("click",i[0]),s=new et({props:{keyCombination:ce}}),s.$on("action",i[0]),{c(){n=N("div"),v(e.$$.fragment),t=S(),v(s.$$.fragment),this.h()},l(r){n=k(r,"DIV",{style:!0});var a=I(n);b(e.$$.fragment,a),t=C(r),b(s.$$.fragment,r),this.h()},h(){g(n,"display","contents"),g(n,"--border-left-radius","5px"),g(n,"--border-right-radius","5px")},m(r,a){d(r,n,a),y(e,n,null),d(r,t,a),y(s,r,a),l=!0},p(r,a){const o={};a&4&&(o.$$scope={dirty:a,ctx:r}),e.$set(o)},i(r){l||(p(e.$$.fragment,r),p(s.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),_(s.$$.fragment,r),l=!1},d(r){r&&m(t),r&&e&&m(n),w(e,r),w(s,r)}}}function wt(i){let e,n;return e=new it({props:{$$slots:{default:[yt]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,[s]){const l={};s&4&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}const ce="Control+Enter";function Nt(i,e,n){let{state:t}=e;function s(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),t.save()}return i.$$set=l=>{"state"in l&&n(1,t=l.state)},[s,t]}class kt extends L{constructor(e){super(),j(this,e,Nt,wt,A,{state:1})}}function It(i){let e=i[4].oldNotetypeName+"",n;return{c(){n=O(e)},l(t){n=T(t,e)},m(t,s){d(t,n,s)},p(t,s){s&16&&e!==(e=t[4].oldNotetypeName+"")&&M(n,e)},d(t){t&&m(n)}}}function St(i){let e,n;return{c(){e=new W(!1),n=D(),this.h()},l(t){e=G(t,!1),n=D(),this.h()},h(){e.a=n},m(t,s){e.m(tt,t,s),d(t,n,s)},d(t){t&&(m(n),e.d())}}}function Ct(i){let e,n;return{c(){e=new W(!1),n=D(),this.h()},l(t){e=G(t,!1),n=D(),this.h()},h(){e.a=n},m(t,s){e.m(nt,t,s),d(t,n,s)},d(t){t&&(m(n),e.d())}}}function Dt(i){let e;function n(l,r){return window.getComputedStyle(document.body).direction=="rtl"?Ct:St}let s=n()(i);return{c(){s.c(),e=D()},l(l){s.l(l),e=D()},m(l,r){s.m(l,r),d(l,e,r)},p:E,d(l){l&&m(e),s.d(l)}}}function Vt(i){let e,n,t,s,l,r,a,o,c;e=new Ie({props:{ellipsis:!0,disabled:!0,$$slots:{default:[It]},$$scope:{ctx:i}}}),t=new Z({props:{iconSize:70,$$slots:{default:[Dt]},$$scope:{ctx:i}}});function $(u){i[8](u)}let f={class:"flex-grow-1",list:i[2],label:i[3]};return i[1]!==void 0&&(f.value=i[1]),l=new be({props:f}),qe.push(()=>Ue(l,"value",$)),o=new kt({props:{state:i[0]}}),{c(){v(e.$$.fragment),n=S(),v(t.$$.fragment),s=S(),v(l.$$.fragment),a=S(),v(o.$$.fragment)},l(u){b(e.$$.fragment,u),n=C(u),b(t.$$.fragment,u),s=C(u),b(l.$$.fragment,u),a=C(u),b(o.$$.fragment,u)},m(u,h){y(e,u,h),d(u,n,h),y(t,u,h),d(u,s,h),y(l,u,h),d(u,a,h),y(o,u,h),c=!0},p(u,h){const H={};h&528&&(H.$$scope={dirty:h,ctx:u}),e.$set(H);const x={};h&512&&(x.$$scope={dirty:h,ctx:u}),t.$set(x);const Q={};h&4&&(Q.list=u[2]),h&8&&(Q.label=u[3]),!r&&h&2&&(r=!0,Q.value=u[1],We(()=>r=!1)),l.$set(Q);const ee={};h&1&&(ee.state=u[0]),o.$set(ee)},i(u){c||(p(e.$$.fragment,u),p(t.$$.fragment,u),p(l.$$.fragment,u),p(o.$$.fragment,u),c=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(l.$$.fragment,u),_(o.$$.fragment,u),c=!1},d(u){u&&(m(n),m(s),m(a)),w(e,u),w(t,u),w(l,u),w(o,u)}}}function Et(i){let e,n;return e=new Ze({props:{class:"justify-content-between",wrap:!1,$$slots:{default:[Vt]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,[s]){const l={};s&543&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ot(i,e,n){let t,s,l,r,{state:a}=e;const o=a.notetypes;J(i,o,u=>n(7,l=u));const c=a.info;J(i,c,u=>n(4,r=u));let $=l.findIndex(u=>u.current);function f(u){$=u,n(1,$)}return i.$$set=u=>{"state"in u&&n(0,a=u.state)},i.$$.update=()=>{i.$$.dirty&128&&n(2,t=Array.from(l,u=>u.name)),i.$$.dirty&6&&n(3,s=t[$]),i.$$.dirty&3&&a.setTargetNotetypeIndex($)},[a,$,t,s,r,o,c,l,f]}class Tt extends L{constructor(e){super(),j(this,e,Ot,Et,A,{state:0})}}function $e(i,e,n){const t=i.slice();return t[8]=e[n],t}function me(i){let e,n,t,s,l,r,a,o;return n=new Z({props:{iconSize:80,$$slots:{default:[zt]},$$scope:{ctx:i}}}),{c(){e=N("div"),v(n.$$.fragment),t=S(),s=O(i[4]),this.h()},l(c){e=k(c,"DIV",{class:!0,role:!0,tabindex:!0,"aria-expanded":!0});var $=I(e);b(n.$$.fragment,$),t=C($),s=T($,i[4]),$.forEach(m),this.h()},h(){F(e,"class","clickable svelte-18ivrjn"),F(e,"role","button"),F(e,"tabindex","0"),F(e,"aria-expanded",l=!i[1])},m(c,$){d(c,e,$),y(n,e,null),V(e,t),V(e,s),r=!0,a||(o=[se(e,"click",i[6]),se(e,"keydown",function(){Je(re(i[7]))&&re(i[7]).apply(this,arguments)})],a=!0)},p(c,$){i=c;const f={};$&2056&&(f.$$scope={dirty:$,ctx:i}),n.$set(f),(!r||$&16)&&M(s,i[4]),(!r||$&2&&l!==(l=!i[1]))&&F(e,"aria-expanded",l)},i(c){r||(p(n.$$.fragment,c),r=!0)},o(c){_(n.$$.fragment,c),r=!1},d(c){c&&m(e),w(n),a=!1,Ke(o)}}}function zt(i){let e,n;return{c(){e=new W(!1),n=D(),this.h()},l(t){e=G(t,!1),n=D(),this.h()},h(){e.a=n},m(t,s){e.m(i[3],t,s),d(t,n,s)},p(t,s){s&8&&e.p(t[3])},d(t){t&&(m(n),e.d())}}}function Ft(i){let e,n=K(i[0]),t=[];for(let s=0;s<n.length;s+=1)t[s]=pe($e(i,n,s));return{c(){e=N("ul");for(let s=0;s<t.length;s+=1)t[s].c()},l(s){e=k(s,"UL",{});var l=I(e);for(let r=0;r<t.length;r+=1)t[r].l(l);l.forEach(m)},m(s,l){d(s,e,l);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(s,l){if(l&1){n=K(s[0]);let r;for(r=0;r<n.length;r+=1){const a=$e(s,n,r);t[r]?t[r].p(a,l):(t[r]=pe(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},d(s){s&&m(e),ye(t,s)}}}function Bt(i){let e,n=i[0].slice(0,P).join(", ")+"",t,s,l=i[0].length>P&&de(i);return{c(){e=N("div"),t=O(n),s=S(),l&&l.c()},l(r){e=k(r,"DIV",{});var a=I(e);t=T(a,n),s=C(a),l&&l.l(a),a.forEach(m)},m(r,a){d(r,e,a),V(e,t),V(e,s),l&&l.m(e,null)},p(r,a){a&1&&n!==(n=r[0].slice(0,P).join(", ")+"")&&M(t,n),r[0].length>P?l?l.p(r,a):(l=de(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(r){r&&m(e),l&&l.d()}}}function pe(i){let e,n=i[8]+"",t;return{c(){e=N("li"),t=O(n)},l(s){e=k(s,"LI",{});var l=I(e);t=T(l,n),l.forEach(m)},m(s,l){d(s,e,l),V(e,t)},p(s,l){l&1&&n!==(n=s[8]+"")&&M(t,n)},d(s){s&&m(e)}}}function de(i){let e,n=i[0].length-P+"",t,s;return{c(){e=O("... (+"),t=O(n),s=O(")")},l(l){e=T(l,"... (+"),t=T(l,n),s=T(l,")")},m(l,r){d(l,e,r),d(l,t,r),d(l,s,r)},p(l,r){r&1&&n!==(n=l[0].length-P+"")&&M(t,n)},d(l){l&&(m(e),m(t),m(s))}}}function Lt(i){let e,n,t,s,l,r,a,o=i[0].length>P&&me(i);function c(u,h){return u[1]?Bt:Ft}let $=c(i),f=$(i);return{c(){e=N("div"),o&&o.c(),n=S(),t=O(i[2]),s=S(),f.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var h=I(e);o&&o.l(h),n=C(h),t=T(h,i[2]),s=C(h),f.l(h),h.forEach(m),this.h()},h(){F(e,"class","alert alert-warning")},m(u,h){d(u,e,h),o&&o.m(e,null),V(e,n),V(e,t),V(e,s),f.m(e,null),a=!0},p(u,[h]){u[0].length>P?o?(o.p(u,h),h&1&&p(o,1)):(o=me(u),o.c(),p(o,1),o.m(e,n)):o&&(R(),_(o,1,1,()=>{o=null}),q()),(!a||h&4)&&M(t,u[2]),$===($=c(u))&&f?f.p(u,h):(f.d(1),f=$(u),f&&(f.c(),f.m(e,null)))},i(u){a||(p(o),u&&we(()=>{a&&(r&&r.end(1),l=Ge(e,le,{}),l.start())}),a=!0)},o(u){_(o),l&&l.invalidate(),u&&(r=Qe(e,le,{})),a=!1},d(u){u&&m(e),o&&o.d(),f.d(),u&&r&&r.end()}}}const P=3;function jt(i,e,n){let t,s,{unused:l}=e,{ctx:r}=e,a,o=!0;const c=()=>n(1,o=!o),$=()=>n(1,o=!o);return i.$$set=f=>{"unused"in f&&n(0,l=f.unused),"ctx"in f&&n(5,r=f.ctx)},i.$$.update=()=>{i.$$.dirty&32&&n(2,a=r===B.Field?Fe():Be()),i.$$.dirty&2&&n(4,t=o?Le():je()),i.$$.dirty&2&&n(3,s=o?st:lt)},[l,o,a,s,t,r,c,$]}class At extends L{constructor(e){super(),j(this,e,jt,Lt,A,{unused:0,ctx:5})}}function _e(i){let e,n;return e=new Z({props:{iconSize:80,$$slots:{default:[Ht]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ht(i){let e,n;return{c(){e=new W(!1),n=D(),this.h()},l(t){e=G(t,!1),n=D(),this.h()},h(){e.a=n},m(t,s){e.m(rt,t,s),d(t,n,s)},p:E,d(t){t&&(m(n),e.d())}}}function he(i){let e,n;return e=new At({props:{unused:i[2],ctx:i[0]}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&4&&(l.unused=t[2]),s&1&&(l.ctx=t[0]),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ge(i){let e,n,t;return e=new X({props:{$$slots:{default:[qt]},$$scope:{ctx:i}}}),{c(){n=N("div"),v(e.$$.fragment),this.h()},l(s){n=k(s,"DIV",{style:!0});var l=I(n);b(e.$$.fragment,l),this.h()},h(){g(n,"display","contents"),g(n,"--gutter-inline","0.5rem"),g(n,"--gutter-block","0.2rem")},m(s,l){d(s,n,l),y(e,n,null),t=!0},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&e&&m(n),w(e,s)}}}function Pt(i){let e,n=Pe()+"",t;return{c(){e=N("b"),t=O(n)},l(s){e=k(s,"B",{});var l=I(e);t=T(l,n),l.forEach(m)},m(s,l){d(s,e,l),V(e,t)},p:E,d(s){s&&m(e)}}}function Mt(i){let e,n=Me()+"",t;return{c(){e=N("b"),t=O(n)},l(s){e=k(s,"B",{});var l=I(e);t=T(l,n),l.forEach(m)},m(s,l){d(s,e,l),V(e,t)},p:E,d(s){s&&m(e)}}}function Rt(i){let e,n,t,s,l,r;return e=new U({props:{$$slots:{default:[Pt]},$$scope:{ctx:i}}}),s=new U({props:{$$slots:{default:[Mt]},$$scope:{ctx:i}}}),{c(){n=N("div"),v(e.$$.fragment),t=S(),l=N("div"),v(s.$$.fragment),this.h()},l(a){n=k(a,"DIV",{style:!0});var o=I(n);b(e.$$.fragment,o),t=C(a),l=k(a,"DIV",{style:!0});var c=I(l);b(s.$$.fragment,c),this.h()},h(){g(n,"display","contents"),g(n,"--col-size",1),g(l,"display","contents"),g(l,"--col-size",1)},m(a,o){d(a,n,o),y(e,n,null),d(a,t,o),d(a,l,o),y(s,l,null),r=!0},p(a,o){const c={};o&64&&(c.$$scope={dirty:o,ctx:a}),e.$set(c);const $={};o&64&&($.$$scope={dirty:o,ctx:a}),s.$set($)},i(a){r||(p(e.$$.fragment,a),p(s.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(s.$$.fragment,a),r=!1},d(a){a&&m(t),a&&e&&m(n),w(e,a),a&&s&&m(l),w(s,a)}}}function qt(i){let e,n,t;return e=new Y({props:{$$slots:{default:[Rt]},$$scope:{ctx:i}}}),{c(){n=N("div"),v(e.$$.fragment),this.h()},l(s){n=k(s,"DIV",{style:!0});var l=I(n);b(e.$$.fragment,l),this.h()},h(){g(n,"display","contents"),g(n,"--cols",2)},m(s,l){d(s,n,l),y(e,n,null),t=!0},p(s,l){const r={};l&64&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&e&&m(n),w(e,s)}}}function Ut(i){let e,n,t,s,l,r,a,o=i[2].length>0&&_e(i),c=i[2].length>0&&he(i),$=i[1].templates&&ge(i);return{c(){e=N("h1"),n=O(i[4]),t=S(),o&&o.c(),s=S(),c&&c.c(),l=S(),$&&$.c(),r=D(),this.h()},l(f){e=k(f,"H1",{class:!0});var u=I(e);n=T(u,i[4]),t=C(u),o&&o.l(u),u.forEach(m),s=C(f),c&&c.l(f),l=C(f),$&&$.l(f),r=D(),this.h()},h(){F(e,"class","svelte-x919bl")},m(f,u){d(f,e,u),V(e,n),V(e,t),o&&o.m(e,null),d(f,s,u),c&&c.m(f,u),d(f,l,u),$&&$.m(f,u),d(f,r,u),a=!0},p(f,u){f[2].length>0?o?u&4&&p(o,1):(o=_e(f),o.c(),p(o,1),o.m(e,null)):o&&(R(),_(o,1,1,()=>{o=null}),q()),f[2].length>0?c?(c.p(f,u),u&4&&p(c,1)):(c=he(f),c.c(),p(c,1),c.m(l.parentNode,l)):c&&(R(),_(c,1,1,()=>{c=null}),q()),f[1].templates?$?u&2&&p($,1):($=ge(f),$.c(),p($,1),$.m(r.parentNode,r)):$&&(R(),_($,1,1,()=>{$=null}),q())},i(f){a||(p(o),p(c),p($),a=!0)},o(f){_(o),_(c),_($),a=!1},d(f){f&&(m(e),m(s),m(l),m(r)),o&&o.d(),c&&c.d(f),$&&$.d(f)}}}function Wt(i){let e,n,t,s;return e=new ke({props:{$$slots:{default:[Ut]},$$scope:{ctx:i}}}),{c(){n=N("div"),v(e.$$.fragment),this.h()},l(l){n=k(l,"DIV",{style:!0});var r=I(n);b(e.$$.fragment,r),this.h()},h(){g(n,"display","contents"),g(n,"--sticky-top",t=i[0]===B.Template?"-1px":"0"),g(n,"--sticky-border","var(--border)"),g(n,"--sticky-borders","0px 0 1px")},m(l,r){d(l,n,r),y(e,n,null),s=!0},p(l,[r]){r&1&&t!==(t=l[0]===B.Template?"-1px":"0")&&g(n,"--sticky-top",t);const a={};r&71&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){_(e.$$.fragment,l),s=!1},d(l){l&&e&&m(n),w(e,l)}}}function Gt(i,e,n){let t,s,l,r=E,a=()=>(r(),r=Ne(t,f=>n(1,l=f)),t);i.$$.on_destroy.push(()=>r());let{state:o}=e,{ctx:c}=e;const $=c===B.Field?Ae():He();return i.$$set=f=>{"state"in f&&n(5,o=f.state),"ctx"in f&&n(0,c=f.ctx)},i.$$.update=()=>{i.$$.dirty&32&&a(n(3,t=o.info)),i.$$.dirty&3&&n(2,s=l.isCloze&&c===B.Template?[]:l.unusedItems(c))},[c,l,s,t,$,o]}class Ce extends L{constructor(e){super(),j(this,e,Gt,Wt,A,{state:5,ctx:0})}}function Qt(i){let e,n;return e=new Tt({props:{state:i[0]}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&1&&(l.state=t[0]),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jt(i){let e,n,t,s,l;return e=new Ce({props:{state:i[0],ctx:B.Field}}),s=new Se({props:{state:i[0],ctx:B.Field}}),{c(){n=N("div"),v(e.$$.fragment),t=S(),v(s.$$.fragment),this.h()},l(r){n=k(r,"DIV",{style:!0});var a=I(n);b(e.$$.fragment,a),t=C(r),b(s.$$.fragment,r),this.h()},h(){g(n,"display","contents"),g(n,"--z-index","2")},m(r,a){d(r,n,a),y(e,n,null),d(r,t,a),y(s,r,a),l=!0},p(r,a){const o={};a&1&&(o.state=r[0]),e.$set(o);const c={};a&1&&(c.state=r[0]),s.$set(c)},i(r){l||(p(e.$$.fragment,r),p(s.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),_(s.$$.fragment,r),l=!1},d(r){r&&m(t),r&&e&&m(n),w(e,r),w(s,r)}}}function Kt(i){let e,n;return e=new X({props:{$$slots:{default:[Jt]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&33&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xt(i){let e,n,t=Ye(Re())+"";return{c(){e=N("div"),n=new W(!1),this.h()},l(s){e=k(s,"DIV",{});var l=I(e);n=G(l,!1),l.forEach(m),this.h()},h(){n.a=null},m(s,l){d(s,e,l),n.m(t,e)},p:E,i:E,o:E,d(s){s&&m(e)}}}function Yt(i){let e,n;return e=new Se({props:{state:i[0],ctx:B.Template}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&1&&(l.state=t[0]),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Zt(i){let e,n,t,s,l,r,a;e=new Ce({props:{state:i[0],ctx:B.Template}});const o=[Yt,Xt],c=[];function $(f,u){return f[3].templates?0:1}return s=$(i),l=c[s]=o[s](i),{c(){n=N("div"),v(e.$$.fragment),t=S(),l.c(),r=D(),this.h()},l(f){n=k(f,"DIV",{style:!0});var u=I(n);b(e.$$.fragment,u),t=C(f),l.l(f),r=D(),this.h()},h(){g(n,"display","contents"),g(n,"--z-index","2")},m(f,u){d(f,n,u),y(e,n,null),d(f,t,u),c[s].m(f,u),d(f,r,u),a=!0},p(f,u){const h={};u&1&&(h.state=f[0]),e.$set(h);let H=s;s=$(f),s===H?c[s].p(f,u):(R(),_(c[H],1,1,()=>{c[H]=null}),q(),l=c[s],l?l.p(f,u):(l=c[s]=o[s](f),l.c()),p(l,1),l.m(r.parentNode,r))},i(f){a||(p(e.$$.fragment,f),p(l),a=!0)},o(f){_(e.$$.fragment,f),_(l),a=!1},d(f){f&&(m(t),m(r)),f&&e&&m(n),w(e,f),c[s].d(f)}}}function xt(i){let e,n;return e=new X({props:{$$slots:{default:[Zt]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&41&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function en(i){let e,n,t,s,l,r;return e=new U({props:{breakpoint:"md",$$slots:{default:[Kt]},$$scope:{ctx:i}}}),s=new U({props:{breakpoint:"md",$$slots:{default:[xt]},$$scope:{ctx:i}}}),{c(){n=N("div"),v(e.$$.fragment),t=S(),l=N("div"),v(s.$$.fragment),this.h()},l(a){n=k(a,"DIV",{style:!0});var o=I(n);b(e.$$.fragment,o),t=C(a),l=k(a,"DIV",{style:!0});var c=I(l);b(s.$$.fragment,c),this.h()},h(){g(n,"display","contents"),g(n,"--col-size",1),g(l,"display","contents"),g(l,"--col-size",1)},m(a,o){d(a,n,o),y(e,n,null),d(a,t,o),d(a,l,o),y(s,l,null),r=!0},p(a,o){const c={};o&33&&(c.$$scope={dirty:o,ctx:a}),e.$set(c);const $={};o&41&&($.$$scope={dirty:o,ctx:a}),s.$set($)},i(a){r||(p(e.$$.fragment,a),p(s.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(s.$$.fragment,a),r=!1},d(a){a&&m(t),a&&e&&m(n),w(e,a),a&&s&&m(l),w(s,a)}}}function tn(i){let e,n,t,s,l,r,a,o,c;return n=new ke({props:{$$slots:{default:[Qt]},$$scope:{ctx:i}}}),a=new Y({props:{class:"gx-0",$$slots:{default:[en]},$$scope:{ctx:i}}}),{c(){e=N("div"),t=N("div"),v(n.$$.fragment),l=S(),r=N("div"),o=N("div"),v(a.$$.fragment),this.h()},l($){e=k($,"DIV",{});var f=I(e);t=k(f,"DIV",{style:!0});var u=I(t);b(n.$$.fragment,u),f.forEach(m),l=C($),r=k($,"DIV",{id:!0,style:!0,class:!0});var h=I(r);o=k(h,"DIV",{style:!0});var H=I(o);b(a.$$.fragment,H),h.forEach(m),this.h()},h(){g(t,"display","contents"),g(t,"--gutter-block","0.1rem"),g(t,"--gutter-inline","0.25rem"),g(t,"--sticky-borders","0 0 1px"),g(t,"--z-index","4"),we(()=>i[4].call(e)),g(o,"display","contents"),g(o,"--cols",2),F(r,"id","scrollArea"),g(r,"--offset",i[1]+"px"),g(r,"--gutter-inline","0.25rem"),F(r,"class","svelte-lccyt2")},m($,f){d($,e,f),V(e,t),y(n,t,null),s=Xe(e,i[4].bind(e)),d($,l,f),d($,r,f),V(r,o),y(a,o,null),c=!0},p($,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:$}),n.$set(u);const h={};f&41&&(h.$$scope={dirty:f,ctx:$}),a.$set(h),(!c||f&2)&&g(r,"--offset",$[1]+"px")},i($){c||(p(n.$$.fragment,$),p(a.$$.fragment,$),c=!0)},o($){_(n.$$.fragment,$),_(a.$$.fragment,$),c=!1},d($){$&&(m(e),m(l),m(r)),w(n),s(),w(a)}}}function nn(i,e,n){let t,s,l=E,r=()=>(l(),l=Ne(t,$=>n(3,s=$)),t);i.$$.on_destroy.push(()=>l());let{state:a}=e,o;function c(){o=this.offsetHeight,n(1,o)}return i.$$set=$=>{"state"in $&&n(0,a=$.state)},i.$$.update=()=>{i.$$.dirty&1&&r(n(2,t=a.info))},[a,o,t,s,c]}class sn extends L{constructor(e){super(),j(this,e,nn,tn,A,{state:0})}}function ln(i){let e,n;return e=new sn({props:{state:i[0].state}}),{c(){v(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,[s]){const l={};s&1&&(l.state=t[0].state),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rn(i,e,n){let{data:t}=e;return i.$$set=s=>{"data"in s&&n(0,t=s.data)},[t]}class Sn extends L{constructor(e){super(),j(this,e,rn,ln,A,{data:0})}}export{Sn as component,In as universal};
