(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{43212:function(e,t,n){"use strict";n.d(t,{Gn:function(){return o},zR:function(){return i}});var r=n(28841),s=n(24246),i=function(e){var t=e.title,n=e.onDelete;return(0,s.jsxs)(r.OXI,{py:2,display:"flex",alignItems:"center",children:[(0,s.jsx)(r.xvT,{mr:"2",children:t}),n?(0,s.jsx)(r.hU,{"aria-label":"delete",icon:(0,s.jsx)(r.lr0,{}),size:"xs",onClick:n,"data-testid":"delete-btn"}):null]})},o=function(e){var t=e.onClose,n=e.formId,i=e.isSaving;return(0,s.jsxs)(r.zeN,{justifyContent:"flex-start",children:[(0,s.jsx)(r.zxk,{onClick:t,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,s.jsx)(r.zxk,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",form:n,isLoading:i,children:"Save"})]})};t.ZP=function(e){var t=e.header,n=e.description,i=e.isOpen,o=e.onClose,c=e.children,a=e.footer;return(0,s.jsxs)(r.dys,{placement:"right",isOpen:i,onClose:o,size:"lg",children:[(0,s.jsx)(r.P1B,{}),(0,s.jsxs)(r.scA,{"data-testid":"edit-drawer-content",py:2,children:[(0,s.jsx)(r.xuv,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,s.jsx)(r.zxk,{variant:"ghost",onClick:o,"data-testid":"close-drawer-btn",children:(0,s.jsx)(r.LGN,{width:"17px"})})}),t,(0,s.jsxs)(r.Ng0,{children:[n?(0,s.jsx)(r.xvT,{fontSize:"sm",mb:4,children:n}):null,c]}),a]})]})}},51471:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(90849),s=n(28841),i=n(88038),o=n.n(i),c=n(86677),a=(n(27378),n(90768)),l=n(51365),u=n(60709),d=n(24246),f=function(){var e=(0,c.useRouter)();return(0,d.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,d.jsxs)(s.xuv,{children:[(0,d.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,d.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,d.jsx)(s.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(u.fz)},children:"Configure"})]}),(0,d.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.children,n=e.title,r=e.padded,i=void 0===r||r,u=e.mainProps,y=(0,a.hz)(),p=(0,c.useRouter)(),g="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,v=!(y.flags.privacyRequestsConfiguration&&g),j=(0,l.JE)(void 0,{skip:v}).data,m=(0,l.PW)(void 0,{skip:v}).data,x=y.flags.privacyRequestsConfiguration&&(!j||!m)&&g;return(0,d.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,d.jsxs)(o(),{children:[(0,d.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,d.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)(s.kCb,h(h({as:"main",direction:"column",py:i?6:0,px:i?10:0,h:i?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},u),{},{children:[x?(0,d.jsx)(f,{}):null,t]}))]})}},85859:function(e,t,n){"use strict";n.d(t,{Rt:function(){return l},cK:function(){return u}});var r=n(90849),s=n(73679),i=n(28841),o=n(24246);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t,n,r,s,c=e.system,a=e.attribute;return"name"===a?(0,o.jsx)("label",{htmlFor:"checkbox-".concat(c.fides_key),children:c.name}):"fidesctl_meta.resource_id"===a?(0,o.jsx)(i.xuv,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",title:null===(t=c.fidesctl_meta)||void 0===t?void 0:t.resource_id,children:null===(n=c.fidesctl_meta)||void 0===n?void 0:n.resource_id}):(0,o.jsx)(o.Fragment,{children:(r=c,s=a,s.split(".").reduce((function(e,t){return e?e[t]:void 0}),r))})},u=function(e){var t=e.allSystems,n=e.checked,r=e.onChange,c=e.columns,u=e.tableHeadProps,d=function(e){var t=n.indexOf(e)>=0;r(t?n.filter((function(t){return t.fides_key!==e.fides_key})):[].concat((0,s.Z)(n),[e]))},f=t.length===n.length;return 0===c.length?(0,o.jsx)(i.xvT,{children:"No columns selected to display"}):(0,o.jsxs)(i.iA_,{size:"sm",sx:{tableLayout:"fixed"},children:[(0,o.jsx)(i.hrZ,a(a({},u),{},{children:(0,o.jsxs)(i.Tr,{children:[(0,o.jsx)(i.Th,{width:"15px",children:(0,o.jsx)(i.XZJ,{colorScheme:"complimentary",title:"Select All",isChecked:f,onChange:function(e){e.target.checked?r(t):r([])},"data-testid":"select-all"})}),c.map((function(e){return(0,o.jsx)(i.Th,{children:e.name},e.attribute)}))]})})),(0,o.jsx)(i.p3B,{children:t.map((function(e){return(0,o.jsxs)(i.Tr,{children:[(0,o.jsx)(i.Td,{children:(0,o.jsx)(i.XZJ,{colorScheme:"complimentary",value:e.fides_key,isChecked:n.indexOf(e)>=0,onChange:function(){return d(e)},"data-testid":"checkbox-".concat(e.fides_key)})}),c.map((function(t){return(0,o.jsx)(i.Td,{children:(0,o.jsx)(l,{system:e,attribute:t.attribute})},t.attribute)}))]},e.fides_key)}))})]})}},48187:function(e,t,n){"use strict";n.d(t,{w:function(){return l}});var r=n(90849),s=n(27378),i=n(44047),o=n(4938);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=e.resourceType,n=e.fidesKeys,r=e.skip,c=(0,s.useState)(!0),l=c[0],u=c[1],d=(0,i.Wm)({resource_type:t,fides_keys:n},{skip:r,pollingInterval:l?3e3:void 0}),f=!!d.data&&d.data.every((function(e){return e.status===o.Wg.COMPLETE||e.status===o.Wg.FAILED||e.status===o.Wg.REVIEWED}));return(0,s.useEffect)((function(){f&&u(!1)}),[f]),a(a({},d),{},{isClassificationFinished:f})}},78624:function(e,t,n){"use strict";n.d(t,{D4:function(){return i.D4},MM:function(){return y},Ot:function(){return l},c6:function(){return d},cj:function(){return p},e$:function(){return c},fn:function(){return a},iC:function(){return h},nU:function(){return f},tB:function(){return u}});var r,s=n(90849),i=n(60041),o="An unexpected error occurred. Please try again.",c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if((0,i.Bw)(e)){if((0,i.hE)(e.data))return e.data.detail;if((0,i.cz)(e.data)){var n,r=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null===r||void 0===r?void 0:r.msg,": ").concat(null===r||void 0===r?void 0:r.loc)}if(409===e.status&&(0,i.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,i.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function a(e){return"object"===typeof e&&null!=e&&"status"in e}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function u(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:o};if((0,i.oK)(e))return{status:e.originalStatus,message:e.data};if((0,i.Bw)(e)){var n=e.status;return{status:n,message:c(e,t.message)}}return t},y=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(d||(d={}));var h=(r={},(0,s.Z)(r,d.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,s.Z)(r,d.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,s.Z)(r,d.COMPASS,{label:"",fullName:""}),r),p=function(e){var t=e.split(".")[0];return t===d.AC?d.AC:t===d.GVL?d.GVL:d.COMPASS}},12187:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(90768),s=n(60709),i=function(){return{systemOrDatamapRoute:(0,r.hz)().plus?s.oG:s.So}}},24753:function(e,t,n){"use strict";n.d(t,{MA:function(){return u},Vo:function(){return f},t5:function(){return d}});var r=n(90849),s=n(28841),i=n(24246);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(e){var t=e.children;return(0,i.jsxs)(s.xvT,{"data-testid":"toast-success-msg",children:[(0,i.jsx)("strong",{children:"Success:"})," ",t]})},l=function(e){var t=e.children;return(0,i.jsxs)(s.xvT,{"data-testid":"toast-error-msg",children:[(0,i.jsx)("strong",{children:"Error:"})," ",t]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,i.jsx)(a,{children:e});return c(c({},u),{description:t})},f=function(e){var t=(0,i.jsx)(l,{children:e});return c(c({},u),{description:t,status:"error"})}},72779:function(e,t,n){"use strict";var r=n(90089),s=n(90849),i=n(28841),o=n(4938),c=n(24246),a=["status","resource"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.status,n=e.resource,l=(0,r.Z)(e,a),d=function(e){var t,n=e===o.j.DATASETS?"dataset":"system";return t={},(0,s.Z)(t,o.Wg.PROCESSING,{title:"Processing",tooltip:"This ".concat(n," is currently being ").concat("dataset"===n?"generated and":""," classified. You will be notified when this process is complete"),color:"orange"}),(0,s.Z)(t,o.Wg.CREATED,{title:"Processing",tooltip:"This ".concat(n," is currently being ").concat("dataset"===n&&"generated and"," and classified. You will be notified when this process is complete"),color:"orange"}),(0,s.Z)(t,o.Wg.COMPLETE,{title:"Awaiting Review",tooltip:"This ".concat(n," has been automatically classified. Review the results and update the ").concat(n,"."),color:"orange"}),(0,s.Z)(t,o.Wg.REVIEWED,{title:"Classified",tooltip:"This ".concat(n," has been classified."),color:"green"}),(0,s.Z)(t,o.Wg.FAILED,{title:"Failed",tooltip:"This ".concat(n," must be manually updated."),color:"red"}),(0,s.Z)(t,"unknown",{title:"Unknown",tooltip:"This ".concat(n," must be manually updated."),color:"gray"}),t}(n)[null!==t&&void 0!==t?t:"unknown"];return(0,c.jsx)(i.ua7,{"data-testid":"classification-status-badge",label:d.tooltip,children:(0,c.jsx)(i.Cts,u(u({variant:"solid",colorScheme:d.color,w:"100%",textAlign:"center"},l),{},{"data-testid":"classification-status-badge",children:d.title}))})}},52562:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var r=function(e){var t=e.dataCategories,n=e.mostLikelyCategories;return null!==t&&void 0!==t&&t.length?t:null!==n&&void 0!==n&&n.length?[n.reduce((function(e,t){var n,r;return(null!==(n=t.confidence)&&void 0!==n?n:0)>(null!==(r=e.confidence)&&void 0!==r?r:0)?t:e})).fides_key]:[]}},19665:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var r=n(28841),s=n(79894),i=n.n(s),o=n(86677),c=n(27378),a=n(60245),l=n(6848),u=n(48187),d=n(12187),f=n(51471),y=n(44047),h=n(48466),p=n(24246),g=function(e){var t=e.hideEmpty,n=e.onChange;return(0,p.jsx)(r.rsf,{colorScheme:"secondary",isChecked:t,onChange:function(e){return n(e.target.checked)}})},v=n(85859),j=n(72779),m=n(4938),x=n(90849),b=n(55732),O=n(97865),w=n(34707),k=n.n(w),S=n(34090),P=n(76649),C=n(43212),_=n(78624),E=n(24753),D=n(75523),T=n(1326),L=n(52562);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,x.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e){var t=e.headingLevel,n=e.title,s=e.children;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.X6q,{as:t,children:(0,p.jsxs)(r.KFZ,{_expanded:{color:"complimentary.500"},_hover:{bg:"gray.50"},pl:0,children:[(0,p.jsx)(r.xuv,{flex:"1",textAlign:"left",children:n}),(0,p.jsx)(r.XEm,{})]})}),(0,p.jsx)(r.Hk3,{py:2,px:0,children:s})]})},z=function(e){var t=e.flow,n=e.index,s=e.classifyDataFlows,i=e.type,o=(0,S.u6)().setFieldValue,c=(0,l.C)(D.qb),a=(0,l.C)(D.L5),u=null===s||void 0===s?void 0:s.find((function(e){return e.fides_key===t.fides_key})),d=null===u||void 0===u?void 0:u.classifications.map((function(e){var t=e.label,n=e.aggregated_score;return A(A({},a.get(t)),{},{fides_key:t,confidence:n})})),f=(0,L.I)({dataCategories:t.data_categories,mostLikelyCategories:d});return(0,p.jsx)(r.Qdk,{pl:4,borderBottom:"none","data-testid":"accordion-item-".concat(t.fides_key),children:(0,p.jsx)(F,{headingLevel:"h3",title:t.fides_key,children:c?(0,p.jsx)(r.xuv,{pr:2,children:(0,p.jsx)(r.P$4,{mostLikelyCategories:d||[],dataCategories:c,checked:f,onChecked:function(e){o("".concat(i,"[").concat(n,"].data_categories"),e)}})}):null})})},N=function(e){var t=e.classifyDataFlows,n=e.type,s=(0,S.u6)().values[n],i={ingress:"source",egress:"destination"}[n];return 0===s.length?(0,p.jsxs)(r.xvT,{p:4,children:["No ",n,"es found."]}):(0,p.jsx)(r.Qdk,{p:0,"data-testid":"accordion-item-".concat(n),children:(0,p.jsx)(F,{headingLevel:"h2",title:"Connected ".concat((0,T.G8)(i)," Systems"),children:s.map((function(e,r){return(0,p.jsx)(z,{flow:e,index:r,classifyDataFlows:t,type:n},e.fides_key)}))})})},I=function(e){var t=e.system,n=e.classificationInstance;return(null==t.ingress||0===t.ingress.length)&&(null==t.egress||0===t.egress.length)?(0,p.jsx)(r.xvT,{children:"No data flows found on this system."}):(0,p.jsxs)(r.Kqy,{children:[(0,p.jsx)(r.xvT,{fontWeight:"semibold",children:t.name}),(0,p.jsxs)(r.UQy,{allowMultiple:!0,pl:2,children:[(0,p.jsx)(N,{classifyDataFlows:null===n||void 0===n?void 0:n.ingress,type:"ingress"}),(0,p.jsx)(N,{classifyDataFlows:null===n||void 0===n?void 0:n.egress,type:"egress"})]})]})},R=n(51860);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,x.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M="data-flow-form",V=function(e){var t=e.label,n=e.value;return(0,p.jsxs)(r.P4e,{children:[(0,p.jsxs)(r.xvT,{as:"span",fontWeight:"semibold",children:[t,":"]})," ",n]})},q=function(e){return(0,P.Ln)({fides_key:"string"},e)},K=function(e){var t,n,s=e.system,i=e.isOpen,o=e.onClose,c=function(e){var t=e.system,n=e.onClose,s=(0,r.pmc)();(0,D.MO)();var i,o=(0,y.$b)(t.fides_key),c=o.data,a=o.isLoading;if(null==c||q(c)){var l,u=t.ingress||[],d=t.egress||[],f=(null===c||void 0===c?void 0:c.ingress.filter((function(e){return u.find((function(t){return t.fides_key===e.fides_key}))})))||[],h=(null===c||void 0===c?void 0:c.egress.filter((function(e){return d.find((function(t){return t.fides_key===e.fides_key}))})))||[],g=f.length>0,v=h.length>0,j=!g&&!v,x=u.length>0,w=d.length>0,S=!x&&!w;l=x&&w?"which send or receive data from your selected system":x?"from which your selected system receives data":"to which your selected system sends data",i=(null===c||void 0===c?void 0:c.status)===m.Wg.PROCESSING?(0,p.jsx)(r.xvT,{fontSize:"sm","data-testid":"processing",children:"Fides classify is still classifying, please check back later."}):S?(0,p.jsx)(r.xvT,{fontSize:"sm","data-testid":"no-data-flows",children:"Fides classify did not detect any additional systems sending or receiving data from your selected system."}):j?(0,p.jsx)(r.xvT,{fontSize:"sm","data-testid":"no-classification",children:"Fides classify has detected additional systems which send or receive data from your selected system, but was unable to classify these data flows. You may classify these data flows manually below."}):(0,p.jsxs)(r.xvT,{fontSize:"sm","data-testid":"data-flow-with-classification",children:["Fides classify has detected additional systems ",l,". Each system has been automatically assigned data categories. Choose to keep the assigned data category selection or review more classification recommendations."]})}else i=(0,p.jsx)(r.xvT,{fontSize:"sm","data-testid":"no-classification-instance",children:"No classification instance found but you may still manually classify the data flows."});var P=(0,R.qQ)(),C=(0,O.Z)(P,1)[0],T=(0,y.MD)(),L=(0,O.Z)(T,1)[0],Z=function(){var e=(0,b.Z)(k().mark((function e(t){var r,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a&&c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,C(t);case 5:if(r=e.sent,!(0,_.D4)(r)){e.next=9;break}return s((0,E.Vo)((0,_.e$)(r.error))),e.abrupt("return");case 9:return e.next=11,L({dataset_fides_key:t.fides_key,status:m.Wg.REVIEWED,resource_type:m.j.SYSTEMS});case 11:if(i=e.sent,!(0,_.D4)(i)){e.next=15;break}return s((0,E.Vo)((0,_.e$)(i.error))),e.abrupt("return");case 15:s((0,E.t5)("System data flows classified and approved")),n(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),s((0,E.Vo)("".concat(e.t0)));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}();return{description:i,classificationInstance:c,isLoadingClassificationInstance:a,handleSave:Z}}({system:s,onClose:o}),a=c.description,l=c.isLoadingClassificationInstance,u=c.classificationInstance,d=c.handleSave,f=function(){var e=(0,b.Z)(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ingress,r=t.egress,e.next=3,d(G(G({},s),{},{ingress:n,egress:r}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={egress:null!==(t=s.egress)&&void 0!==t?t:[],ingress:null!==(n=s.ingress)&&void 0!==n?n:[]},g=q(u)?u.status:void 0,v=g!==m.Wg.PROCESSING;return(0,p.jsx)(S.J9,{initialValues:h,onSubmit:f,children:function(e){var t=e.isSubmitting;return(0,p.jsx)(S.l0,{id:M,children:(0,p.jsx)(C.ZP,{isOpen:i,onClose:o,header:(0,p.jsx)(C.zR,{title:"System classification details"}),footer:g!==m.Wg.PROCESSING?(0,p.jsx)(C.Gn,{onClose:o,formId:M,isSaving:t}):void 0,children:l?(0,p.jsx)(r.M5Y,{children:(0,p.jsx)(r.$jN,{})}):(0,p.jsxs)(r.Kqy,{spacing:4,children:[(0,p.jsxs)(r.MIq,{columns:2,spacingY:2,children:[(0,p.jsx)(V,{label:"System name",value:s.name}),(0,p.jsx)(V,{label:"System type",value:s.system_type}),(0,p.jsx)(V,{label:"Classification status",value:(0,p.jsx)(j.Z,{status:g,resource:m.j.SYSTEMS,display:"inline"})})]}),a,v?(0,p.jsx)(I,{system:s,classificationInstance:q(u)?u:void 0}):null]})})})}})},X=function(e){var t=e.systems,n=(0,l.T)(),s=(0,l.C)(y.Oq),i=(0,l.C)(R.o5),o=(0,c.useState)(!1),a=o[0],u=o[1],d=a?t.filter((function(e){var t;return null===(t=s.get(e.fides_key))||void 0===t?void 0:t.has_labels})):t;return(0,p.jsxs)(r.Kqy,{children:[(0,p.jsxs)(r.kCb,{flexShrink:0,alignItems:"center",children:[(0,p.jsx)(r.xvT,{fontSize:"xs",mr:2,size:"sm",children:"Only Show Findings"}),(0,p.jsx)(g,{hideEmpty:a,onChange:u})]}),(0,p.jsxs)(r.iA_,{size:"sm","data-testid":"systems-classify-table",children:[(0,p.jsx)(r.hrZ,{children:(0,p.jsxs)(r.Tr,{children:[(0,p.jsx)(r.Th,{children:"System Name"}),(0,p.jsx)(r.Th,{maxWidth:"100px",children:"Classification Status"})]})}),(0,p.jsx)(r.p3B,{children:d.map((function(e){var t=s.get(e.fides_key);return(0,p.jsxs)(r.Tr,{"data-testid":"row-".concat(e.fides_key),_hover:{bg:"gray.50"},cursor:"pointer",onClick:function(){return function(e){n((0,R.Pj)(e.fides_key))}(e)},children:[(0,p.jsx)(r.Td,{children:(0,p.jsx)(v.Rt,{system:e,attribute:"name"})}),(0,p.jsx)(r.Td,{"data-testid":"status-".concat(e.fides_key),children:(0,p.jsx)(j.Z,{resource:m.j.SYSTEMS,status:null===t||void 0===t?void 0:t.status})})]},e.fides_key)}))})]}),i?(0,p.jsx)(K,{system:i,isOpen:null!=i,onClose:function(){return n((0,R.Pj)(void 0))}}):null]})},B=function(e){var t=e.children;return(0,p.jsx)(f.Z,{title:"Classify Systems",children:(0,p.jsxs)(r.Kqy,{spacing:4,children:[(0,p.jsx)(r.X6q,{fontSize:"2xl",fontWeight:"semibold",children:"Classified systems"}),t]})})},Y=function(){var e=(0,o.useRouter)(),t=(0,a.I0)(),n=(0,d.V)().systemOrDatamapRoute,s=(0,y.x8)(),f=s.isSuccess,g=s.isLoading,v=(0,l.C)(h.PG),j=(0,h.K3)(void 0,{skip:!f||v&&v.length>0}),x=j.isLoading,b=j.data,O=v||b;(0,c.useEffect)((function(){b&&b.length&&t((0,h.Wc)(b))}),[t,b]);var w=(0,u.w)({resourceType:m.j.SYSTEMS,fidesKeys:null===O||void 0===O?void 0:O.map((function(e){return e.fides_key})),skip:!f}),k=w.isLoading,S=w.data,P=w.isClassificationFinished;return(0,c.useEffect)((function(){g||f||e.push("/")}),[e,f,g]),x||k?(0,p.jsx)(B,{children:(0,p.jsx)(r.$jN,{})}):S&&0!==S.length?(0,p.jsxs)(B,{children:[(0,p.jsx)(r.xvT,{children:P?"All systems have been classifed by Fides.":"Systems are still being classified by Fides."}),O&&O.length?(0,p.jsx)(X,{systems:O}):"No systems with classifications found",(0,p.jsx)(r.Ugi,{children:(0,p.jsx)(i(),{href:n,passHref:!0,children:(0,p.jsx)(r.zxk,{variant:"primary",size:"sm",children:"Finish"})})})]}):(0,p.jsx)(B,{children:(0,p.jsx)(r.xvT,{"data-testid":"no-classifications",children:"No classifications found. Have you run a scan?"})})}},60041:function(e,t,n){"use strict";n.d(t,{Bw:function(){return o},D4:function(){return s},Dy:function(){return a},XD:function(){return l},cz:function(){return u},hE:function(){return c},oK:function(){return i}});var r=n(76649),s=function(e){return"error"in e},i=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},o=function(e){return(0,r.Ln)({status:"number",data:{}},e)},c=function(e){return(0,r.Ln)({detail:"string"},e)},a=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},18533:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/classify-systems",function(){return n(19665)}])},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return o}});const r=(e,t)=>i(e,t),s=Symbol("SOME"),i=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return s in e?e.some((e=>i(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>i(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>i(t,n[e])))},o=e=>t=>r(e,t);class c{static narrow(e){return new c((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof c?e.NF:e instanceof Function?e:t=>r(e,t);return new c((e=>t(e)&&n(e)))}}new c((e=>!0))}},function(e){e.O(0,[9774,2888,179],(function(){return t=18533,e(e.s=t);var t}));var t=e.O();_N_E=t}]);