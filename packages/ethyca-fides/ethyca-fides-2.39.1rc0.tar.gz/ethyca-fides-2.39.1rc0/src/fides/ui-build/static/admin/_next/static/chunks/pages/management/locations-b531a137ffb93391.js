(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9060],{38687:function(e,n,t){"use strict";var r=t(90849),o=t(31099),i=t(28841),c=t(24246);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=(0,o.Z)({},e);return(0,c.jsx)(i.ua7,a(a({placement:"right"},n),{},{children:(0,c.jsx)(i.UOT,{color:"gray.400"})}))}},24263:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var r=t(28841),o=t(6848),i=t(51471),c=t(55732),s=t(97865),a=t(34707),l=t.n(a),u=t(98784),d=t.n(u),f=t(86677),h=t(27378),g=t(78624),p=t(2458),m=t(44845),j=t(24753),x=t(33167),v=t(60709),y=t(27808),O=t(90849),b=t(73679),C=t(53333),w=t(38687),S=t(24246),k=function(e){var n=e.id,t=e.isChecked,o=e.onChange;return(0,S.jsxs)(r.kCb,{alignItems:"center",gap:"8px",children:[(0,S.jsx)(r.rsf,{isChecked:t,size:"sm",onChange:o,colorScheme:"complimentary",id:n,"data-testid":"regulated-toggle"}),(0,S.jsx)(r.lXp,{fontSize:"sm",m:0,htmlFor:n,children:"Regulated"}),(0,S.jsx)(w.Z,{label:"Toggle on to see only locations in this region with privacy regulations supported by Fides"})]})},Z=t(90131),P=t(93246),E=function(e){var n=e.groups,t=e.locations,o=e.isOpen,i=e.onClose,c=e.selected,a=e.onChange,l=(0,h.useState)(c),u=l[0],d=l[1],f=(0,h.useState)(!1),g=f[0],p=f[1],m=(0,h.useMemo)((function(){var e=g?t.filter((function(e){var n;return null===(n=e.regulation)||void 0===n?void 0:n.length})):t;return{locationsByGroup:(0,P.VT)(e),filteredLocations:e}}),[t,g]),j=m.filteredLocations,x=m.locationsByGroup,v=(0,C.QZ)({items:j,selected:u,onChange:d}),y=v.allSelected,O=v.handleToggleAll,b=v.handleToggleSelection,w=u.filter((function(e){return!Object.keys(x).includes(e)})).length,E=t[0].continent,_=Object.keys(x),z=!(1===_.length&&"Other"===_[0]);return(0,S.jsxs)(r.u_l,{size:"2xl",isOpen:o,onClose:i,isCentered:!0,children:[(0,S.jsx)(r.ZAr,{}),(0,S.jsxs)(r.hzk,{"data-testid":"subgroup-modal",children:[(0,S.jsx)(Z.h4,{title:"Select locations"}),(0,S.jsxs)(r.fef,{p:6,maxHeight:"70vh",overflowY:"auto",children:[(0,S.jsx)(Z.x$,{title:E,allSelected:y,onToggleAll:O,numSelected:w,children:(0,S.jsx)(k,{id:"".concat(E,"-modal-regulated"),isChecked:g,onChange:function(){return p(!g)}})}),z?(0,S.jsx)(r.UQy,{allowToggle:!0,allowMultiple:!0,children:Object.entries(x).map((function(e){var t=(0,s.Z)(e,2),o=t[0],i=t[1],c=n.find((function(e){return o===e.id})),a=c?c.name:o;return(0,S.jsxs)(r.Qdk,{"data-testid":"".concat(a,"-accordion"),children:[(0,S.jsx)("h2",{children:(0,S.jsxs)(r.KFZ,{children:[(0,S.jsx)(r.xuv,{as:"span",flex:"1",textAlign:"left",fontWeight:"semibold",fontSize:"sm",children:a}),(0,S.jsx)(r.XEm,{})]})}),(0,S.jsx)(r.Hk3,{pb:4,children:(0,S.jsx)(r.MIq,{columns:3,spacing:6,children:i.map((function(e){return(0,S.jsx)(r.XZJ,{size:"sm",colorScheme:"complimentary",isChecked:u.includes(e.id),onChange:function(){return b(e.id)},"data-testid":"".concat(e.name,"-checkbox"),children:e.name},e.id)}))})})]},o)}))}):(0,S.jsx)(r.MIq,{columns:3,spacing:6,paddingInline:4,children:j.map((function(e){return(0,S.jsx)(r.XZJ,{size:"sm",colorScheme:"complimentary",isChecked:u.includes(e.id),onChange:function(){return b(e.id)},"data-testid":"".concat(e.name,"-checkbox"),children:e.name},e.id)}))})]}),(0,S.jsx)(Z.$_,{onApply:function(){var e=new Set(u);Object.entries(x).forEach((function(n){var t=(0,s.Z)(n,2),r=t[0];t[1].every((function(e){return u.includes(e.id)}))?e.add(r):e.delete(r)})),a(Array.from(e)),i()},onClose:i})]})]})};function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L=function(e){var n=e.title,t=e.groups,o=e.locations,i=e.selected,c=e.onChange,s=e.search,a=(0,r.qY0)(),l=(0,h.useState)(!1),u=l[0],d=l[1],f=!(null===s||void 0===s||!s.length),g=t.length>0,p=o;t.length&&(p=t),f&&(p=[].concat((0,b.Z)(o),(0,b.Z)(t)).sort((function(e,n){return e.name.localeCompare(n.name)})));var m=u?p.filter((function(e){return(0,P.$q)(e,o)})):p,j=s?m.filter((function(e){return function(e,n){var t;return null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}(e,s)})):m,x=t.filter((function(e){return"checked"===(0,P.ji)({group:e,selected:i,locations:o})})).map((function(e){return e.id})),v=t.filter((function(e){return"indeterminate"===(0,P.ji)({group:e,selected:i,locations:o})})).map((function(e){return e.id})),y=g?[].concat((0,b.Z)(x),(0,b.Z)(i)):i,O=i.length,w=function(e){var n=o.map((function(n){return e.includes(n.id)?z(z({},n),{},{selected:!0}):z(z({},n),{},{selected:!1})}));c(n)};return 0===j.length&&s?null:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(C.ZP,{title:n,items:j,selected:y,indeterminate:g?v:[],onChange:function(e){var n=new Set(e),r=new Set(y);e.forEach((function(e){r.has(e)||t.find((function(n){return n.id===e}))&&o.filter((function(n){var t;return null===(t=n.belongs_to)||void 0===t?void 0:t.includes(e)})).forEach((function(e){n.add(e.id)}))})),r.forEach((function(e){n.has(e)||t.find((function(n){return n.id===e}))&&o.filter((function(n){var t;return null===(t=n.belongs_to)||void 0===t?void 0:t.includes(e)})).forEach((function(e){n.delete(e.id)}))})),w(Array.from(n))},onViewMore:function(){a.onOpen()},numSelected:O,toggle:(0,S.jsx)(k,{id:"".concat(n,"-regulated"),isChecked:u,onChange:function(){return d(!u)}})}),(0,S.jsx)(E,{groups:t,locations:o,isOpen:a.isOpen,onClose:a.onClose,selected:i,onChange:w},"subgroup-modal-selected-".concat(y.length))]})},T=t(17165),A=function(e){var n,t=e.data,o=(0,r.pmc)(),i=(0,r.qY0)(),a=(0,h.useState)(null!==(n=t.locations)&&void 0!==n?n:[]),u=a[0],O=a[1],b=(0,h.useState)(""),C=b[0],w=b[1],k=(0,T.WA)(),Z=(0,s.Z)(k,2),E=Z[0],_=Z[1].isLoading,z=(0,h.useMemo)((function(){return(0,P.Il)(t.locations||[],t.location_groups||[])}),[t]),A=!d().isEqual(u,t.locations),M=(0,f.useRouter)(),q=function(){M.push(v.vY).then((function(){o.closeAll()}))},D=function(){var e=(0,c.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({locations:u.map((function(e){return{id:e.id,selected:e.selected}})),regulations:[]});case 2:n=e.sent,(0,x.isErrorResult)(n)?o((0,j.Vo)((0,g.e$)(n.error))):o((0,j.t5)((0,S.jsxs)(r.xvT,{display:"inline",children:["Fides has automatically associated the relevant regulations with your location choices."," ",(0,S.jsx)(y.Z,{onClick:q,children:"View regulations here."})]})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){var n=u.map((function(n){var t=e.find((function(e){return e.id===n.id}));return null!==t&&void 0!==t?t:n}));O(n)};return(0,S.jsxs)(r.gCW,{alignItems:"start",spacing:4,children:[(0,S.jsx)(r.xuv,{maxWidth:"510px",width:"100%",children:(0,S.jsx)(m.Z,{onChange:w,placeholder:"Search",search:C,onClear:function(){return w("")},"data-testid":"search-bar"})}),(0,S.jsx)(r.MIq,{columns:{base:1,md:2,xl:3},spacing:6,width:"100%",children:Object.entries(z).map((function(e){var n=(0,s.Z)(e,2),t=n[0],r=n[1];return(0,S.jsx)(L,{title:t,groups:r.locationGroups,locations:r.locations,selected:u.filter((function(e){return r.locations.find((function(n){return n.id===e.id}))&&e.selected})).map((function(e){return e.id})),onChange:F,search:C},t)}))}),(0,S.jsx)(p.Z,{isOpen:i.isOpen,onClose:i.onClose,onConfirm:function(){D(),i.onClose()},title:"Regulation updates",message:"Modifications in your location settings may also affect your regulation settings to simplify management. You can override any Fides-initiated changes directly in the regulation settings.",isCentered:!0,icon:(0,S.jsx)(r.aNP,{color:"orange"})}),A?(0,S.jsx)(r.zxk,{colorScheme:"primary",size:"sm",onClick:i.onOpen,isLoading:_,"data-testid":"save-btn",children:"Save"}):null]})},M=function(){var e=(0,T.QM)().isLoading,n=(0,o.C)(T.P8);return(0,S.jsx)(i.Z,{title:"Locations",children:(0,S.jsxs)(r.xuv,{"data-testid":"location-management",children:[(0,S.jsx)(r.X6q,{marginBottom:2,fontSize:"2xl",children:"Locations"}),(0,S.jsxs)(r.xuv,{children:[(0,S.jsx)(r.xvT,{marginBottom:4,fontSize:"sm",maxWidth:"720px",children:"Select the locations that you operate in and Fides will make sure that you are automatically presented with the relevant regulatory guidelines and global frameworks for your locations."}),(0,S.jsx)(r.xuv,{children:e?(0,S.jsx)(r.$jN,{}):(0,S.jsx)(A,{data:n})})]})]})})}},55478:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/locations",function(){return t(24263)}])}},function(e){e.O(0,[8033,7227,9774,2888,179],(function(){return n=55478,e(e.s=n);var n}));var n=e.O();_N_E=n}]);