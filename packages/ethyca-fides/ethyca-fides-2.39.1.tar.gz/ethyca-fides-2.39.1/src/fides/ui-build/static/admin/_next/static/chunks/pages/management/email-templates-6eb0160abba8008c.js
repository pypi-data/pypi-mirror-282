(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1014],{6719:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(27378),i=n(25773),o=n(36924),s=n(38097),a=n(50189),c=n(70409),u=n(53782),l=n(53991),p=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=String(e).toLowerCase(),i=String(n.getOptionValue(t)).toLowerCase(),o=String(n.getOptionLabel(t)).toLowerCase();return i===r||o===r},f={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,r){return!(!e||t.some((function(t){return d(e,t,r)}))||n.some((function(t){return d(e,t,r)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};n(31542),n(92486);var g=(0,r.forwardRef)((function(e,t){var n=function(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,i=e.createOptionPosition,s=void 0===i?"last":i,d=e.formatCreateLabel,g=void 0===d?f.formatCreateLabel:d,b=e.isValidNewOption,m=void 0===b?f.isValidNewOption:b,h=e.getNewOptionData,v=void 0===h?f.getNewOptionData:h,j=e.onCreateOption,y=e.options,O=void 0===y?[]:y,x=e.onChange,w=(0,u.Z)(e,p),P=w.getOptionValue,C=void 0===P?o.g:P,Z=w.getOptionLabel,E=void 0===Z?o.b:Z,T=w.inputValue,k=w.isLoading,D=w.isMulti,S=w.value,N=w.name,L=(0,r.useMemo)((function(){return m(T,(0,l.I)(S),O,{getOptionValue:C,getOptionLabel:E})?v(T,g(T)):void 0}),[g,v,E,C,T,m,O,S]),_=(0,r.useMemo)((function(){return!n&&k||!L?O:"first"===s?[L].concat((0,c.Z)(O)):[].concat((0,c.Z)(O),[L])}),[n,s,k,L,O]),M=(0,r.useCallback)((function(e,t){if("select-option"!==t.action)return x(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==L)x(e,t);else if(j)j(T);else{var r=v(T,T),i={action:"create-option",name:N,option:r};x((0,l.D)(D,[].concat((0,c.Z)((0,l.I)(S)),[r]),r),i)}}),[v,T,D,N,L,j,x,S]);return(0,a.Z)((0,a.Z)({},w),{},{options:_,onChange:M})}((0,s.u)(e));return r.createElement(o.S,(0,i.Z)({ref:t},n))})),b=n(32916);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var h=(0,r.forwardRef)((function(e,t){var n=(0,b.Z)(e);return r.createElement(g,m({ref:t},n))}))},51471:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(90849),i=n(28841),o=n(88038),s=n.n(o),a=n(86677),c=(n(27378),n(90768)),u=n(51365),l=n(60709),p=n(24246),d=function(){var e=(0,a.useRouter)();return(0,p.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,p.jsxs)(i.xuv,{children:[(0,p.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,p.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,p.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(l.fz)},children:"Configure"})]}),(0,p.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.children,n=e.title,r=e.padded,o=void 0===r||r,l=e.mainProps,f=(0,c.hz)(),b=(0,a.useRouter)(),m="/privacy-requests"===b.pathname||"/datastore-connection"===b.pathname,h=!(f.flags.privacyRequestsConfiguration&&m),v=(0,u.JE)(void 0,{skip:h}).data,j=(0,u.PW)(void 0,{skip:h}).data,y=f.flags.privacyRequestsConfiguration&&(!v||!j)&&m;return(0,p.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,p.jsxs)(s(),{children:[(0,p.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,p.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,p.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,p.jsxs)(i.kCb,g(g({as:"main",direction:"column",py:o?6:0,px:o?10:0,h:o?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},l),{},{children:[y?(0,p.jsx)(d,{}):null,t]}))]})}},86054:function(e,t,n){"use strict";var r=n(90849),i=n(90089),o=n(28841),s=n(38687),a=n(24246),c=["title","tooltip","children"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.title,n=e.tooltip,r=e.children,u=(0,i.Z)(e,c);return(0,a.jsxs)(o.xuv,l(l({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},u),{},{children:[(0,a.jsxs)(o.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,n?(0,a.jsx)(o.xvT,{as:"span",mx:1,children:(0,a.jsx)(s.Z,{label:n})}):void 0]}),(0,a.jsx)(o.Kqy,{p:6,spacing:6,children:r})]}))}},24753:function(e,t,n){"use strict";n.d(t,{MA:function(){return l},Vo:function(){return d},t5:function(){return p}});var r=n(90849),i=n(28841),o=n(24246);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},u=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},p=function(e){var t=(0,o.jsx)(c,{children:e});return a(a({},l),{description:t})},d=function(e){var t=(0,o.jsx)(u,{children:e});return a(a({},l),{description:t,status:"error"})}},28506:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(28841),i=n(51471),o=n(90849),s=n(55732),a=n(97865),c=n(34707),u=n.n(c),l=n(34090),p=n(86054),d=n(43139),f=n(78624),g=n(24753),b=n(28703).u.injectEndpoints({endpoints:function(e){return{getMessagingTemplates:e.query({query:function(){return{url:"messaging/templates"}},providesTags:function(){return["Messaging Templates"]}}),updateMessagingTemplates:e.mutation({query:function(e){return{url:"messaging/templates",method:"PUT",body:e}},invalidatesTags:function(){return["Messaging Templates"]}})}}}),m=b.useGetMessagingTemplatesQuery,h=b.useUpdateMessagingTemplatesMutation,v=n(24246);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){var t=e.emailTemplates,n=h(),i=(0,a.Z)(n,2),c=i[0],b=i[1].isLoading,m=(0,r.pmc)(),j=function(){var e=(0,s.Z)(u().mark((function e(t,n){var r,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){if((0,f.D4)(e)){var r=(0,f.e$)(e.error,"An unexpected error occurred while editing the email templates. Please try again.");m((0,g.Vo)(r))}else m((0,g.t5)("Email templates saved.")),n.resetForm({values:t})},i=Object.entries(t).map((function(e){var t=(0,a.Z)(e,2);return{type:t[0],content:t[1].content}})),e.next=4,c(i);case 4:o=e.sent,r(o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=t.reduce((function(e,t){return y(y({},e),{},(0,o.Z)({},t.type,{label:t.label,content:t.content}))}),{});return(0,v.jsx)(l.J9,{enableReinitialize:!0,initialValues:O,onSubmit:j,children:function(){return(0,v.jsxs)(l.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[Object.entries(O).map((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];return(0,v.jsx)(r.xuv,{py:3,children:(0,v.jsxs)(p.Z,{title:i.label,children:[(0,v.jsx)(d.j0,{label:"Message subject",name:"".concat(n,".content.subject"),variant:"stacked"}),(0,v.jsx)(d.Ks,{label:"Message body",name:"".concat(n,".content.body"),variant:"stacked",resize:!0})]})},n)})),(0,v.jsx)(r.kCb,{justifyContent:"right",width:"100%",paddingTop:2,children:(0,v.jsx)(r.zxk,{size:"sm",type:"submit",colorScheme:"primary",isLoading:b,children:"Save"})})]})}})},x=function(){var e=m(),t=e.data;return e.isLoading?(0,v.jsx)(i.Z,{title:"Email templates",children:(0,v.jsx)(r.$jN,{})}):(0,v.jsx)(i.Z,{title:"Email templates",children:(0,v.jsxs)(r.xuv,{"data-testid":"email-templates",children:[(0,v.jsx)(r.X6q,{marginBottom:2,fontSize:"2xl",children:"Email templates"}),(0,v.jsxs)(r.xuv,{maxWidth:"720px",children:[(0,v.jsx)(r.xvT,{fontSize:"sm",children:"When privacy requests are submitted, Fides emails the data subject to confirm their identity and keep them updated on the status of the request. The templates below allow you to configure the subject and body of the email to suit your business needs. To change the appearance of the email, you may use the editors within your messaging provider (e.g. Mailgun, SendGrid, Twilio)."}),(0,v.jsx)(r.xuv,{padding:2,children:(0,v.jsx)(O,{emailTemplates:t})})]})]})})}},8334:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/email-templates",function(){return n(28506)}])},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return s}});const r=(e,t)=>o(e,t),i=Symbol("SOME"),o=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>o(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>o(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>o(t,n[e])))},s=e=>t=>r(e,t);class a{static narrow(e){return new a((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof a?e.NF:e instanceof Function?e:t=>r(e,t);return new a((e=>t(e)&&n(e)))}}new a((e=>!0))}},function(e){e.O(0,[338,3139,9774,2888,179],(function(){return t=8334,e(e.s=t);var t}));var t=e.O();_N_E=t}]);