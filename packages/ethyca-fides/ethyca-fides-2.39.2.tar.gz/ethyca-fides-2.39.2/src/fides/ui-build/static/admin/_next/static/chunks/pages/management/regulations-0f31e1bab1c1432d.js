(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4917],{54827:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return q}});var i=t(28841),o=t(79894),r=t.n(o),s=t(6848),a=t(51471),l=t(60709),c=t(17165),u=t(90849),d=t(55732),h=t(97865),f=t(34707),g=t.n(f),m=t(98784),p=t.n(m),x=t(86677),j=t(27378),v=t(78624),y=t(2458),C=t(44845),O=t(24753),w=t(27808),b=t(33167),S=t(53333),_=t(90131),k=t(24246),P=function(e){var n=e.regulations,t=e.isOpen,o=e.onClose,r=e.selected,s=e.onChange,a=(0,j.useState)(r),l=a[0],c=a[1],u=(0,S.QZ)({items:n,selected:l,onChange:c}),d=u.allSelected,h=u.handleToggleAll,f=u.handleToggleSelection,g=l.length,m=n[0].continent;return(0,k.jsxs)(i.u_l,{size:"2xl",isOpen:t,onClose:o,isCentered:!0,children:[(0,k.jsx)(i.ZAr,{}),(0,k.jsxs)(i.hzk,{"data-testid":"regulation-modal",children:[(0,k.jsx)(_.h4,{title:"Select regulations"}),(0,k.jsxs)(i.fef,{p:6,maxHeight:"70vh",overflowY:"auto",children:[(0,k.jsx)(_.x$,{title:m,allSelected:d,onToggleAll:h,numSelected:g}),(0,k.jsx)(i.MIq,{columns:3,spacing:6,paddingInline:4,children:n.map((function(e){return(0,k.jsx)(i.XZJ,{size:"sm",colorScheme:"complimentary",isChecked:l.includes(e.id),onChange:function(){return f(e.id)},"data-testid":"".concat(e.name,"-checkbox"),children:e.name},e.id)}))})]}),(0,k.jsx)(_.$_,{onApply:function(){s(l),o()},onClose:o})]})]})},Z=function(e){var n=e.title,t=e.items,o=e.selected,r=e.onChange,s=(0,i.qY0)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(S.ZP,{title:n,items:t,selected:o,onChange:r,numSelected:o.length,indeterminate:[],onViewMore:t.length>S.I_?s.onOpen:void 0}),(0,k.jsx)(P,{regulations:t,isOpen:s.isOpen,onClose:s.onClose,selected:o,onChange:r},"regulation-modal-selected-".concat(o.length))]})},E=t(93246);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L=function(e){var n,t=e.data,o=(0,i.pmc)(),r=(0,i.qY0)(),s=(0,j.useState)(null!==(n=t.regulations)&&void 0!==n?n:[]),a=s[0],u=s[1],f=(0,j.useState)(""),m=f[0],S=f[1],_=(0,c.WA)(),P=(0,h.Z)(_,2),T=P[0],L=P[1].isLoading,q=(0,j.useMemo)((function(){var e,n,i=null!==(e=null===(n=t.regulations)||void 0===n?void 0:n.filter((function(e){return function(e,n){var t;return null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}(e,m)})))&&void 0!==e?e:[];return(0,E.F7)(i)}),[t.regulations,m]),N=!p().isEqual(a,t.regulations),A=(0,x.useRouter)(),M=function(){A.push(l.r5).then((function(){o.closeAll()}))},I=function(){var e=(0,d.Z)(g().mark((function e(){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({regulations:a.map((function(e){return{id:e.id,selected:e.selected}})),locations:[]});case 2:n=e.sent,(0,b.isErrorResult)(n)?o((0,O.Vo)((0,v.e$)(n.error))):o((0,O.t5)((0,k.jsxs)(i.xvT,{display:"inline",children:["Fides has automatically associated the relevant locations with your regulation choices.",(0,k.jsx)(w.Z,{onClick:M,children:"View locations here."})]})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsxs)(i.gCW,{alignItems:"start",spacing:4,children:[(0,k.jsx)(i.xuv,{maxWidth:"510px",width:"100%",children:(0,k.jsx)(C.Z,{onChange:S,placeholder:"Search",search:m,onClear:function(){return S("")},"data-testid":"search-bar"})}),(0,k.jsx)(i.MIq,{columns:{base:1,md:2,xl:3},spacing:6,width:"100%",children:Object.entries(q).map((function(e){var n=(0,h.Z)(e,2),t=n[0],i=n[1],o=a.filter((function(e){return i.find((function(n){return n.id===e.id}))&&e.selected})).map((function(e){return e.id}));return(0,k.jsx)(Z,{title:t,items:i,selected:o,onChange:function(e){!function(e){var n=a.map((function(n){var t=e.find((function(e){return e.id===n.id}));return null!==t&&void 0!==t?t:n}));u(n)}(i.map((function(n){return e.includes(n.id)?z(z({},n),{},{selected:!0}):z(z({},n),{},{selected:!1})})))}},t)}))}),(0,k.jsx)(y.Z,{isOpen:r.isOpen,onClose:r.onClose,onConfirm:function(){I(),r.onClose()},title:"Location updates",message:"Modifications in your regulation settings may also affect your location settings to simplify management. You can override any Fides-initiated changes directly in the location settings.",isCentered:!0,icon:(0,k.jsx)(i.aNP,{color:"orange"})}),N?(0,k.jsx)(i.zxk,{colorScheme:"primary",size:"sm",onClick:r.onOpen,isLoading:L,"data-testid":"save-btn",children:"Save"}):null]})},q=function(){var e=(0,c.QM)().isLoading,n=(0,s.C)(c.P8);return(0,k.jsx)(a.Z,{title:"Regulations",children:(0,k.jsxs)(i.xuv,{"data-testid":"regulation-management",children:[(0,k.jsx)(i.X6q,{marginBottom:2,fontSize:"2xl",children:"Regulations"}),(0,k.jsxs)(i.xuv,{children:[(0,k.jsxs)(i.xvT,{marginBottom:4,fontSize:"sm",maxWidth:"600px",children:["Select the regulations that apply to your organizations compliance requirements. The selections you make here will automatically update your location selections."," ",(0,k.jsx)(i.xvT,{color:"complimentary.500",children:(0,k.jsx)(r(),{href:l.r5,passHref:!0,children:"You can view your location settings here."})})]}),(0,k.jsx)(i.xuv,{children:e?(0,k.jsx)(i.$jN,{}):(0,k.jsx)(L,{data:n})})]})]})})}},180:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/regulations",function(){return t(54827)}])}},function(e){e.O(0,[8033,7227,9774,2888,179],(function(){return n=180,e(e.s=n);var n}));var n=e.O();_N_E=n}]);