(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{99089:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return D}});var n=t(28841),i=t(27378),s=t(90849),o=t(60245),c=t(6848),a=t(30002),l=t(96156),d=t(86677),u=t(45802),p=t(60709),h=t(63238),f=t(75834),j=t(4938),g=t(78098),b=t(24246);function x(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?x(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m=function(e){var r,t,i=e.user,s=(0,d.useRouter)(),o=(0,n.qY0)(),x=(0,c.C)(u.dy),m=!!x&&x.id===i.id,y=(0,h.Tg)([j.Sh.USER_UPDATE])||m,v=function(){y&&s.push("".concat(p.e3,"/profile/").concat(i.id))},P=(0,a.gU)(null!==(r=i.id)&&void 0!==r?r:"",{skip:!i.id}).data,w=(0,a.d6)(null!==(t=i.id)&&void 0!==t?t:"",{skip:!i.id}).data,T=[];return P&&P.roles&&P.roles.forEach((function(e){var r=f.K.find((function(r){return r.roleKey===e}));r&&T.push(r.permissions_label)})),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(n.Tr,{_hover:{bg:"gray.50",cursor:y?"pointer":void 0},height:"36px","data-testid":"row-".concat(i.id),children:[(0,b.jsx)(n.Td,{pl:0,py:1,onClick:v,children:i.username}),(0,b.jsx)(n.Td,{pl:0,py:1,onClick:v,children:i.first_name}),(0,b.jsx)(n.Td,{pl:0,py:1,onClick:v,children:i.last_name}),(0,b.jsx)(n.Td,{pl:0,py:1,onClick:v,children:T.map((function(e){return(0,b.jsx)(n.Cts,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-permissions-badge",children:e},e)}))}),(0,b.jsx)(n.Td,{pl:0,py:1,onClick:v,children:(0,b.jsx)(n.Cts,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-systems-badge",children:w?w.length:0})}),(0,b.jsx)(n.Td,{pl:0,py:1,onClick:v,children:i.created_at?new Date(i.created_at).toUTCString():null}),(0,b.jsx)(h.ZP,{scopes:[j.Sh.USER_DELETE],children:(0,b.jsx)(n.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:(0,b.jsx)(n.hE2,{children:(0,b.jsx)(n.hU,{"aria-label":"delete",icon:(0,b.jsx)(l.l,{}),variant:"outline",size:"sm",onClick:o.onOpen,"data-testid":"delete-user-btn"})})})})]},i.id),(0,b.jsx)(g.Z,O({user:i},o))]})};function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var P=function(){var e=function(){var e=(0,o.I0)(),r=(0,o.v9)(a.lq),t=(0,a.wv)(r),n=t.data,i=t.isLoading,s=n||{users:[],total:0},c=s.items,l=s.total;return v(v({},r),{},{isLoading:i,users:c,total:l,handleNextPage:function(){e((0,a.YA)(r.page+1))},handlePreviousPage:function(){e((0,a.YA)(r.page-1))}})}(),r=e.users,t=e.total,s=e.page,l=e.size,d=e.handleNextPage,u=e.handlePreviousPage,p=(s-1)*l+1,h=Math.min(t,s*l),f=(0,c.T)();return(0,i.useEffect)((function(){f((0,a.Vv)(void 0))}),[f]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(n.iA_,{size:"sm","data-testid":"user-management-table",children:[(0,b.jsx)(n.hrZ,{children:(0,b.jsxs)(n.Tr,{children:[(0,b.jsx)(n.Th,{pl:0,children:"Username"}),(0,b.jsx)(n.Th,{pl:0,children:"First Name"}),(0,b.jsx)(n.Th,{pl:0,children:"Last Name"}),(0,b.jsx)(n.Th,{pl:0,children:"Permissions"}),(0,b.jsx)(n.Th,{pl:0,children:"Assigned Systems"}),(0,b.jsx)(n.Th,{pl:0,children:"Created At"})]})}),(0,b.jsx)(n.p3B,{children:null===r||void 0===r?void 0:r.map((function(e){return(0,b.jsx)(m,{user:e},e.id)}))})]}),(0,b.jsxs)(n.kCb,{justifyContent:"space-between",mt:6,children:[(0,b.jsx)(n.xvT,{fontSize:"xs",color:"gray.600",children:t>0?(0,b.jsxs)(b.Fragment,{children:["Showing ",Number.isNaN(p)?0:p," to"," ",Number.isNaN(h)?0:h," of"," ",Number.isNaN(t)?0:t," results"]}):"0 results"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.zxk,{disabled:s<=1,onClick:u,mr:2,size:"sm",children:"Previous"}),(0,b.jsx)(n.zxk,{disabled:s*l>=t,onClick:d,size:"sm",children:"Next"})]})]})]})};P.defaultProps={users:[]};var w=P,T=t(79894),k=t.n(T),E=t(44845);function S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var C=function(){var e=(0,o.v9)(a.lq),r=(0,o.I0)();return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({handleSearchChange:function(e){r((0,a.SY)(e))}},e)},_=function(){var e=C(),r=e.handleSearchChange,t=e.username;return(0,b.jsxs)(n.Kqy,{direction:"row",spacing:4,mb:6,children:[(0,b.jsx)(E.Z,{search:t,onChange:r,placeholder:"Search by Username"}),(0,b.jsx)(h.ZP,{scopes:[j.Sh.USER_CREATE],children:(0,b.jsx)(k(),{href:"".concat(p.e3,"/new"),passHref:!0,children:(0,b.jsx)(n.zxk,{colorScheme:"primary",flexShrink:0,size:"sm","data-testid":"add-new-user-btn",children:"Add New User"})})})]})},N=t(51471),D=function(){return(0,b.jsxs)(N.Z,{title:"User Management",children:[(0,b.jsx)(n.X6q,{fontSize:"2xl",fontWeight:"semibold",mb:4,children:"User Management"}),(0,b.jsx)(_,{}),(0,b.jsx)(w,{})]})}},7873:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return t(99089)}])}},function(e){e.O(0,[2160,338,3139,4301,9774,2888,179],(function(){return r=7873,e(e.s=r);var r}));var r=e.O();_N_E=r}]);