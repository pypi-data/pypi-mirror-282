(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4966],{6719:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(27378),i=n(25773),o=n(36924),a=n(38097),s=n(50189),u=n(70409),c=n(53782),l=n(53991),p=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=String(e).toLowerCase(),i=String(n.getOptionValue(t)).toLowerCase(),o=String(n.getOptionLabel(t)).toLowerCase();return i===r||o===r},f={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,r){return!(!e||t.some((function(t){return d(e,t,r)}))||n.some((function(t){return d(e,t,r)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};n(31542),n(92486);var g=(0,r.forwardRef)((function(e,t){var n=function(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,i=e.createOptionPosition,a=void 0===i?"last":i,d=e.formatCreateLabel,g=void 0===d?f.formatCreateLabel:d,m=e.isValidNewOption,y=void 0===m?f.isValidNewOption:m,b=e.getNewOptionData,h=void 0===b?f.getNewOptionData:b,v=e.onCreateOption,j=e.options,O=void 0===j?[]:j,x=e.onChange,w=(0,c.Z)(e,p),T=w.getOptionValue,P=void 0===T?o.g:T,M=w.getOptionLabel,C=void 0===M?o.b:M,S=w.inputValue,E=w.isLoading,D=w.isMulti,Z=w.value,k=w.name,q=(0,r.useMemo)((function(){return y(S,(0,l.I)(Z),O,{getOptionValue:P,getOptionLabel:C})?h(S,g(S)):void 0}),[g,h,C,P,S,y,O,Z]),N=(0,r.useMemo)((function(){return!n&&E||!q?O:"first"===a?[q].concat((0,u.Z)(O)):[].concat((0,u.Z)(O),[q])}),[n,a,E,q,O]),L=(0,r.useCallback)((function(e,t){if("select-option"!==t.action)return x(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==q)x(e,t);else if(v)v(S);else{var r=h(S,S),i={action:"create-option",name:k,option:r};x((0,l.D)(D,[].concat((0,u.Z)((0,l.I)(Z)),[r]),r),i)}}),[h,S,D,k,q,v,x,Z]);return(0,s.Z)((0,s.Z)({},w),{},{options:N,onChange:L})}((0,a.u)(e));return r.createElement(o.S,(0,i.Z)({ref:t},n))})),m=n(32916);function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}var b=(0,r.forwardRef)((function(e,t){var n=(0,m.Z)(e);return r.createElement(g,y({ref:t},n))}))},51471:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(90849),i=n(28841),o=n(88038),a=n.n(o),s=n(86677),u=(n(27378),n(90768)),c=n(51365),l=n(60709),p=n(24246),d=function(){var e=(0,s.useRouter)();return(0,p.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,p.jsxs)(i.xuv,{children:[(0,p.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,p.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,p.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(l.fz)},children:"Configure"})]}),(0,p.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.children,n=e.title,r=e.padded,o=void 0===r||r,l=e.mainProps,f=(0,u.hz)(),m=(0,s.useRouter)(),y="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,b=!(f.flags.privacyRequestsConfiguration&&y),h=(0,c.JE)(void 0,{skip:b}).data,v=(0,c.PW)(void 0,{skip:b}).data,j=f.flags.privacyRequestsConfiguration&&(!h||!v)&&y;return(0,p.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,p.jsxs)(a(),{children:[(0,p.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,p.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,p.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,p.jsxs)(i.kCb,g(g({as:"main",direction:"column",py:o?6:0,px:o?10:0,h:o?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},l),{},{children:[j?(0,p.jsx)(d,{}):null,t]}))]})}},86054:function(e,t,n){"use strict";var r=n(90849),i=n(90089),o=n(28841),a=n(38687),s=n(24246),u=["title","tooltip","children"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.title,n=e.tooltip,r=e.children,c=(0,i.Z)(e,u);return(0,s.jsxs)(o.xuv,l(l({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},c),{},{children:[(0,s.jsxs)(o.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,n?(0,s.jsx)(o.xvT,{as:"span",mx:1,children:(0,s.jsx)(a.Z,{label:n})}):void 0]}),(0,s.jsx)(o.Kqy,{p:6,spacing:6,children:r})]}))}},24753:function(e,t,n){"use strict";n.d(t,{MA:function(){return l},Vo:function(){return d},t5:function(){return p}});var r=n(90849),i=n(28841),o=n(24246);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},c=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},p=function(e){var t=(0,o.jsx)(u,{children:e});return s(s({},l),{description:t})},d=function(e){var t=(0,o.jsx)(c,{children:e});return s(s({},l),{description:t,status:"error"})}},16436:function(e,t,n){"use strict";n.d(t,{KC:function(){return c},Vw:function(){return l},ew:function(){return p},gQ:function(){return s},jM:function(){return i},lE:function(){return o},ms:function(){return a},pS:function(){return u},vm:function(){return d}});var r=n(28703).u.injectEndpoints({endpoints:function(e){return{getMessagingTemplates:e.query({query:function(){return{url:"messaging/templates"}},providesTags:function(){return["Messaging Templates"]}}),getSummaryMessagingTemplates:e.query({query:function(e){return{method:"GET",url:"messaging/templates/summary",params:e}},providesTags:function(){return["Property-Specific Messaging Templates"]}}),updateMessagingTemplates:e.mutation({query:function(e){return{url:"messaging/templates",method:"PUT",body:e}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),getMessagingTemplateById:e.query({query:function(e){return{url:"/messaging/templates/".concat(e)}},providesTags:function(){return["Property-Specific Messaging Templates"]}}),putMessagingTemplateById:e.mutation({query:function(e){var t=e.templateId,n=e.template;return{url:"/messaging/templates/".concat(t),method:"PUT",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),patchMessagingTemplateById:e.mutation({query:function(e){var t=e.templateId,n=e.template;return{url:"/messaging/templates/".concat(t),method:"PATCH",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),getMessagingTemplateDefault:e.query({query:function(e){return{url:"/messaging/templates/default/".concat(e)}}}),createMessagingTemplateByType:e.mutation({query:function(e){var t=e.templateType,n=e.template;return{url:"/messaging/templates/".concat(t),method:"POST",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),deleteMessagingTemplateById:e.mutation({query:function(e){return{url:"/messaging/templates/".concat(e),method:"DELETE"}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}})}}}),i=r.useGetMessagingTemplatesQuery,o=r.useUpdateMessagingTemplatesMutation,a=r.useGetSummaryMessagingTemplatesQuery,s=r.useGetMessagingTemplateByIdQuery,u=r.usePutMessagingTemplateByIdMutation,c=r.useGetMessagingTemplateDefaultQuery,l=r.useCreateMessagingTemplateByTypeMutation,p=r.useDeleteMessagingTemplateByIdMutation,d=r.usePatchMessagingTemplateByIdMutation},97318:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(28841),i=n(51471),o=n(90849),a=n(55732),s=n(97865),u=n(34707),c=n.n(u),l=n(34090),p=n(86054),d=n(43139),f=n(78624),g=n(24753),m=n(16436),y=n(24246);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.emailTemplates,n=(0,m.lE)(),i=(0,s.Z)(n,2),u=i[0],b=i[1].isLoading,v=(0,r.pmc)(),j=function(){var e=(0,a.Z)(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){if((0,f.D4)(e)){var r=(0,f.e$)(e.error,"An unexpected error occurred while editing the email templates. Please try again.");v((0,g.Vo)(r))}else v((0,g.t5)("Email templates saved.")),n.resetForm({values:t})},i=Object.entries(t).map((function(e){var t=(0,s.Z)(e,2);return{type:t[0],content:t[1].content}})),e.next=4,u(i);case 4:o=e.sent,r(o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=t.reduce((function(e,t){return h(h({},e),{},(0,o.Z)({},t.type,{label:t.label,content:t.content}))}),{});return(0,y.jsx)(l.J9,{enableReinitialize:!0,initialValues:O,onSubmit:j,children:function(){return(0,y.jsxs)(l.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[Object.entries(O).map((function(e){var t=(0,s.Z)(e,2),n=t[0],i=t[1];return(0,y.jsx)(r.xuv,{py:3,children:(0,y.jsxs)(p.Z,{title:i.label,children:[(0,y.jsx)(d.j0,{label:"Message subject",name:"".concat(n,".content.subject"),variant:"stacked"}),(0,y.jsx)(d.Ks,{label:"Message body",name:"".concat(n,".content.body"),variant:"stacked",resize:!0})]})},n)})),(0,y.jsx)(r.kCb,{justifyContent:"right",width:"100%",paddingTop:2,children:(0,y.jsx)(r.zxk,{size:"sm",type:"submit",colorScheme:"primary",isLoading:b,children:"Save"})})]})}})},j=function(){var e=(0,m.jM)(),t=e.data;return e.isLoading?(0,y.jsx)(i.Z,{title:"Email templates",children:(0,y.jsx)(r.$jN,{})}):(0,y.jsx)(i.Z,{title:"Email templates",children:(0,y.jsxs)(r.xuv,{"data-testid":"email-templates",children:[(0,y.jsx)(r.X6q,{marginBottom:2,fontSize:"2xl",children:"Email templates"}),(0,y.jsxs)(r.xuv,{maxWidth:"720px",children:[(0,y.jsx)(r.xvT,{fontSize:"sm",children:"When privacy requests are submitted, Fides emails the data subject to confirm their identity and keep them updated on the status of the request. The templates below allow you to configure the subject and body of the email to suit your business needs. To change the appearance of the email, you may use the editors within your messaging provider (e.g. Mailgun, SendGrid, Twilio)."}),(0,y.jsx)(r.xuv,{padding:2,children:(0,y.jsx)(v,{emailTemplates:t})})]})]})})}},18193:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/email-templates",function(){return n(97318)}])},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return a}});const r=(e,t)=>o(e,t),i=Symbol("SOME"),o=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>o(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>o(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>o(t,n[e])))},a=e=>t=>r(e,t);class s{static narrow(e){return new s((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof s?e.NF:e instanceof Function?e:t=>r(e,t);return new s((e=>t(e)&&n(e)))}}new s((e=>!0))}},function(e){e.O(0,[338,3139,9774,2888,179],(function(){return t=18193,e(e.s=t);var t}));var t=e.O();_N_E=t}]);