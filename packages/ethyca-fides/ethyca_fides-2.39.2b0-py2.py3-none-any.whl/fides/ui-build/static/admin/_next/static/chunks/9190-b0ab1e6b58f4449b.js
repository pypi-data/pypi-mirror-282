(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9190],{14441:function(e,n,t){var i="[object Symbol]",r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",l="A-Z\\xc0-\\xd6\\xd8-\\xde",u="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",c="['\u2019]",d="["+u+"]",f="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",p="\\d+",g="[\\u2700-\\u27bf]",x="["+s+"]",v="[^\\ud800-\\udfff"+u+p+o+s+l+"]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",j="[\\ud800-\\udbff][\\udc00-\\udfff]",m="["+l+"]",h="(?:"+x+"|"+v+")",y="(?:"+m+"|"+v+")",O="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",_="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",w="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",P="[\\ufe0e\\ufe0f]?",k=P+w+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",b,j].join("|")+")"+P+w+")*"),E="(?:"+[g,b,j].join("|")+")"+k,C=RegExp(c,"g"),S=RegExp(f,"g"),Z=RegExp([m+"?"+x+"+"+O+"(?="+[d,m,"$"].join("|")+")",y+"+"+_+"(?="+[d,m+h,"$"].join("|")+")",m+"?"+h+"+"+O,m+"+"+_,p,E].join("|"),"g"),z=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,N="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,D="object"==typeof self&&self&&self.Object===Object&&self,T=N||D||Function("return this")();var A,R=(A={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"ss"},function(e){return null==A?void 0:A[e]});var I=Object.prototype.toString,L=T.Symbol,U=L?L.prototype:void 0,F=U?U.toString:void 0;function q(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&I.call(e)==i}(e))return F?F.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}function J(e){return null==e?"":q(e)}var G,M=(G=function(e,n,t){return e+(t?"_":"")+n.toLowerCase()},function(e){return function(e,n,t,i){var r=-1,a=e?e.length:0;for(i&&a&&(t=e[++r]);++r<a;)t=n(t,e[r],r,e);return t}(function(e,n,t){return e=J(e),void 0===(n=t?void 0:n)?function(e){return z.test(e)}(e)?function(e){return e.match(Z)||[]}(e):function(e){return e.match(r)||[]}(e):e.match(n)||[]}(function(e){return(e=J(e))&&e.replace(a,R).replace(S,"")}(e).replace(C,"")),G,"")});e.exports=M},86054:function(e,n,t){"use strict";var i=t(90849),r=t(90089),a=t(28841),o=t(38687),s=t(24246),l=["title","tooltip","children"];function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.title,t=e.tooltip,i=e.children,u=(0,r.Z)(e,l);return(0,s.jsxs)(a.xuv,c(c({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},u),{},{children:[(0,s.jsxs)(a.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[n,t?(0,s.jsx)(a.xvT,{as:"span",mx:1,children:(0,s.jsx)(o.Z,{label:t})}):void 0]}),(0,s.jsx)(a.Kqy,{p:6,spacing:6,children:i})]}))}},59190:function(e,n,t){"use strict";t.d(n,{Z:function(){return H}});var i=t(55732),r=t(97865),a=t(90849),o=t(34707),s=t.n(o),l=t(58981),u=t(28841),c=t(34090),d=t(86677),f=t(27378),p=t(6848),g=t(86054),x=t(43139),v=t(78624),b=t(60709),j=t(64429),m=t(38687),h=t(24753),y=t(75846),O=t(73679),_=t(49601),w=t(83026),P=t(89403),k=t(24246),E=function(e){var n=e.index;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.j0,{autoFocus:0!==n,name:"translations.".concat(n,".title"),label:"Title of privacy notice as displayed to user",variant:"stacked"}),(0,k.jsx)(x.Ks,{name:"translations.".concat(n,".description"),label:"Privacy notice displayed to the user",variant:"stacked"})]})},C=function(e){var n=e.index,t=e.name,i=e.isOOB;return(0,k.jsxs)(u.kCb,{direction:"column",gap:6,children:[(0,k.jsxs)(u.X6q,{size:"sm",children:["Edit ",t," translation"]}),i?(0,k.jsx)(w.f,{languageName:t}):null,(0,k.jsx)(E,{index:n})]})},S=function(e){var n=e.translation,t=e.name,i=e.onLanguageDeleted;return(0,k.jsxs)(u.kCb,{gap:2,direction:"row",w:"100%",children:[(0,k.jsx)(u.OK9,{as:u.zxk,variant:"outline",size:"sm",fontWeight:"normal",w:"100%",_selected:{color:"white",bg:"gray.500"},children:t},n.language),i?(0,k.jsx)(u.hU,{"aria-label":"Delete translation",variant:"outline",size:"sm",onClick:function(){return i(n.language)},children:(0,k.jsx)(u.pJl,{boxSize:4})}):null]})},Z=function(e){var n,t=e.availableTranslations,i=(0,c.u6)(),r=i.values,a=i.setFieldValue,o=(0,f.useState)(!1),s=o[0],d=o[1],v=(0,f.useState)(!1),b=v[0],j=v[1],m=(0,f.useState)(0),h=m[0],y=m[1],w=(0,P.tB)({api_set:!1}).data,Z=null===w||void 0===w||null===(n=w.plus_consent_settings)||void 0===n?void 0:n.enable_translations,z=(0,p.C)(_.Zp),N=(0,p.C)(_.G1);(0,_.Ah)({page:z,size:N});var D=(0,p.C)(_.fJ).slice().sort((function(e,n){return e.name.localeCompare(n.name)})),T=D.filter((function(e){var n;return null===(n=r.translations)||void 0===n?void 0:n.every((function(n){return n.language!==e.id}))})).map((function(e){return{label:e.name,value:e.id}})),A=function(e){var n=r.translations?r.translations.slice().filter((function(n){return n.language!==e})):[],t=h===n.length?n.length-1:h;a("translations",n),y(t)},R=function(e){var n,t;return null!==(n=null===(t=D.find((function(n){return n.id===e})))||void 0===t?void 0:t.name)&&void 0!==n?n:e};return Z?(0,k.jsx)(g.Z,{title:"Localizations",children:(0,k.jsxs)(u.mQc,{index:h,onChange:function(e){y(e),j(!1)},as:u.Ugi,spacing:8,align:"start",grow:1,w:"100%",orientation:"vertical",variant:"unstyled",children:[(0,k.jsxs)(u.gCW,{spacing:4,minW:"30%",p:2,children:[(0,k.jsx)(u.tdY,{w:"100%",children:(0,k.jsx)(u.gCW,{spacing:2,w:"100%",p:4,maxH:60,overflow:"scroll",outline:"1px solid",outlineColor:"gray.200",borderRadius:"md",children:r.translations.map((function(e){return(0,k.jsx)(S,{translation:e,name:R(e.language),onLanguageDeleted:A},e.language)}))})}),s?(0,k.jsx)(u.xuv,{w:"full","data-testid":"select-language",children:(0,k.jsx)(l.Z,{chakraStyles:x.hP,size:"sm",options:T,onChange:function(e){return function(e){var n=null===t||void 0===t?void 0:t.find((function(n){return n.language===e}));j(!!n);var i=null!==n&&void 0!==n?n:{language:e,title:"",description:""};y(r.translations.length),a("translations",[].concat((0,O.Z)(r.translations),[i])),d(!1)}(e.value)},autoFocus:!0,classNamePrefix:"select-language",menuPlacement:"auto"})}):null,!s&&T.length?(0,k.jsx)(u.zxk,{leftIcon:(0,k.jsx)(u.jBn,{boxSize:6}),w:"full",variant:"outline",size:"sm",onClick:function(){return d(!0)},"data-testid":"add-language-btn",children:"Add a language"}):null]}),(0,k.jsx)(u.xuv,{w:"100%",children:(0,k.jsx)(c.F2,{name:"translations",render:function(){return(0,k.jsx)(u.nPR,{w:"100%",children:r.translations.map((function(e,n){return(0,k.jsx)(u.x45,{children:(0,k.jsx)(C,{index:n,name:R(e.language),isOOB:b})},e.language)}))})}})})]})}):(0,k.jsx)(g.Z,{title:"Notice text",children:(0,k.jsx)(E,{index:0})})},z=t(90089),N=t(14633),D=t(1326),T=t(20800),A=t(4938),R=["privacy_notice_history_id"];function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U=(0,D.Jt)(T.ye),F=(0,D.Jt)(T.B8),q=[{language:A.eU.EN,title:"",description:""}],J={name:"",consent_mechanism:A.J7.OPT_IN,data_uses:[],enforcement_level:A.QT.FRONTEND,disabled:!0,translations:q},G=N.Ry().shape({name:N.Z_().required().label("Title"),consent_mechanism:N.Z_().required().label("Consent mechanism")}),M=t(14441),W=t.n(M),B=function(e){var n=e.isEditing,t=(0,c.u6)(),i=t.values,r=t.setFieldValue;return(0,f.useEffect)((function(){if(!n){var e=W()(i.name);r("notice_key",e)}}),[i.name,n,r]),(0,k.jsx)(x.j0,{name:"notice_key",label:"Key used in Fides cookie",variant:"stacked"})},K=t(15749);function V(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?V(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Q=function(e){var n,t=e.regions,i=e.label,r=e.tooltip;return(0,k.jsxs)(u.gCW,{align:"start",children:[(0,k.jsxs)(u.kCb,{align:"start",children:[i?(0,k.jsx)(u.lXp,{htmlFor:"regions",fontSize:"xs",my:0,mr:1,children:i}):null,r?(0,k.jsx)(m.Z,{label:r}):null]}),(0,k.jsx)(u.xuv,{w:"100%","data-testid":"notice-locations",children:(0,k.jsx)(l.Z,{chakraStyles:Y(Y({},x.hP),{},{dropdownIndicator:function(e){return Y(Y({},e),{},{display:"none"})},multiValueRemove:function(e){return Y(Y({},e),{},{display:"none"})}}),classNamePrefix:"notice-locations",size:"sm",isMulti:!0,isDisabled:!0,placeholder:"No locations assigned",value:null!==(n=null===t||void 0===t?void 0:t.map((function(e){return{label:j.Z8[e],value:e}})))&&void 0!==n?n:[]})})]})},H=function(e){var n=e.privacyNotice,t=e.availableTranslations,a=(0,d.useRouter)(),o=(0,u.pmc)(),l=n?function(e){var n,t,i,r;return{name:null!==(n=e.name)&&void 0!==n?n:J.name,consent_mechanism:null!==(t=e.consent_mechanism)&&void 0!==t?t:J.consent_mechanism,data_uses:null!==(i=e.data_uses)&&void 0!==i?i:J.data_uses,enforcement_level:null!==(r=e.enforcement_level)&&void 0!==r?r:J.enforcement_level,notice_key:e.notice_key,disabled:e.disabled,has_gpc_flag:e.has_gpc_flag,id:e.id,internal_description:e.internal_description,translations:e.translations?e.translations.map((function(e){var n;return e.privacy_notice_history_id,L(L({},(0,z.Z)(e,R)),{},{title:null!==(n=e.title)&&void 0!==n?n:""})})):q}}(n):J;(0,y.fd)();var j=(0,p.C)(y.qv),m=(0,K.vL)(),O=(0,r.Z)(m,1)[0],_=(0,K.p4)(),w=(0,r.Z)(_,1)[0],P=(0,f.useMemo)((function(){return!!n}),[n]),E=function(){var e=(0,i.Z)(s().mark((function e(t){var i,r,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=7;break}return l=Y(Y({},t),{},{id:n.id,translations:null!==(r=t.translations)&&void 0!==r?r:[]}),e.next=4,O(l);case 4:i=e.sent,e.next=10;break;case 7:return e.next=9,w(t);case 9:i=e.sent;case 10:(0,v.D4)(i)?o((0,h.Vo)((0,v.e$)(i.error))):(o((0,h.t5)("Privacy notice ".concat(P?"updated":"created"))),P||a.push(b.IT));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,k.jsx)(c.J9,{initialValues:l,enableReinitialize:!0,onSubmit:E,validationSchema:G,children:function(e){var i=e.dirty,r=e.isValid,o=e.isSubmitting;return(0,k.jsx)(c.l0,{children:(0,k.jsxs)(u.Kqy,{spacing:10,children:[(0,k.jsxs)(u.Kqy,{spacing:6,children:[(0,k.jsxs)(g.Z,{title:"Privacy notice details",children:[(0,k.jsx)(x.j0,{label:"Notice title",name:"name",isRequired:!0,variant:"stacked"}),(0,k.jsx)(x.AP,{name:"consent_mechanism",label:"Consent mechanism",options:U,isRequired:!0,variant:"stacked"}),(0,k.jsx)(B,{isEditing:P}),(0,k.jsx)(Q,{regions:null===n||void 0===n?void 0:n.configured_regions,label:"Locations where privacy notice is shown to visitors",tooltip:"To configure locations, change the privacy experiences where this notice is shown"}),(0,k.jsx)(x.w8,{name:"has_gpc_flag",label:"Configure whether this notice conforms to the Global Privacy Control",variant:"stacked"}),(0,k.jsx)(x.AP,{name:"data_uses",label:"Data use",options:j,isMulti:!0,variant:"stacked"}),(0,k.jsx)(x.AP,{name:"enforcement_level",label:"Enforcement level",options:F,isRequired:!0,variant:"stacked"})]}),(0,k.jsx)(Z,{availableTranslations:t})]}),(0,k.jsxs)(u.hE2,{size:"sm",spacing:2,children:[(0,k.jsx)(u.zxk,{variant:"outline",onClick:function(){a.back()},children:"Cancel"}),(0,k.jsx)(u.zxk,{type:"submit",variant:"primary",size:"sm",isDisabled:o||!i||!r,isLoading:o,"data-testid":"save-btn",children:"Save"})]})]})})}})}},20800:function(e,n,t){"use strict";t.d(n,{B8:function(){return a},Ep:function(){return o},ye:function(){return r}});var i=t(4938),r=new Map([[i.J7.OPT_IN,"Opt in"],[i.J7.NOTICE_ONLY,"Notice only"],[i.J7.OPT_OUT,"Opt out"]]),a=new Map([[i.QT.SYSTEM_WIDE,"System wide"],[i.QT.FRONTEND,"Front end"],[i.QT.NOT_APPLICABLE,"Not applicable"]]),o=new Map([["gpp_us_national","GPP US National"],["gpp_us_state","GPP US State"]])}}]);