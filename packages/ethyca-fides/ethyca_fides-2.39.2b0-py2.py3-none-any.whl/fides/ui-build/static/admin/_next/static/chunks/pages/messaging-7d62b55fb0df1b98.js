(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2815],{6719:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(27378),i=n(25773),a=n(36924),s=n(38097),o=n(50189),c=n(70409),u=n(53782),l=n(53991),p=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=String(e).toLowerCase(),i=String(n.getOptionValue(t)).toLowerCase(),a=String(n.getOptionLabel(t)).toLowerCase();return i===r||a===r},g={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,r){return!(!e||t.some((function(t){return d(e,t,r)}))||n.some((function(t){return d(e,t,r)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};n(31542),n(92486);var f=(0,r.forwardRef)((function(e,t){var n=function(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,i=e.createOptionPosition,s=void 0===i?"last":i,d=e.formatCreateLabel,f=void 0===d?g.formatCreateLabel:d,m=e.isValidNewOption,y=void 0===m?g.isValidNewOption:m,v=e.getNewOptionData,h=void 0===v?g.getNewOptionData:v,b=e.onCreateOption,j=e.options,x=void 0===j?[]:j,P=e.onChange,O=(0,u.Z)(e,p),E=O.getOptionValue,T=void 0===E?a.g:E,C=O.getOptionLabel,w=void 0===C?a.b:C,_=O.inputValue,S=O.isLoading,I=O.isMulti,M=O.value,R=O.name,k=(0,r.useMemo)((function(){return y(_,(0,l.I)(M),x,{getOptionValue:T,getOptionLabel:w})?h(_,f(_)):void 0}),[f,h,w,T,_,y,x,M]),A=(0,r.useMemo)((function(){return!n&&S||!k?x:"first"===s?[k].concat((0,c.Z)(x)):[].concat((0,c.Z)(x),[k])}),[n,s,S,k,x]),N=(0,r.useCallback)((function(e,t){if("select-option"!==t.action)return P(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==k)P(e,t);else if(b)b(_);else{var r=h(_,_),i={action:"create-option",name:R,option:r};P((0,l.D)(I,[].concat((0,c.Z)((0,l.I)(M)),[r]),r),i)}}),[h,_,I,R,k,b,P,M]);return(0,o.Z)((0,o.Z)({},O),{},{options:A,onChange:N})}((0,s.u)(e));return r.createElement(a.S,(0,i.Z)({ref:t},n))})),m=n(32916);function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}var v=(0,r.forwardRef)((function(e,t){var n=(0,m.Z)(e);return r.createElement(f,y({ref:t},n))}))},68512:function(e,t,n){"use strict";var r=n(90849),i=n(28841),a=n(88038),s=n.n(a),o=(n(27378),n(24246));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.children,n=e.title,r=e.mainProps;return(0,o.jsxs)(i.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 200px)",children:[(0,o.jsxs)(s(),{children:[(0,o.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,o.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)(i.kCb,u(u({pt:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0},r),{},{children:t}))]})}},28171:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(90849),i=n(90089),a=n(28841),s=n(98784),o=n(27378),c=n(79894),u=n.n(c),l=n(24246),p=function(e){var t=e.breadcrumbs;return(0,l.jsx)(a.aGc,{separator:"->",fontSize:"2xl",fontWeight:"semibold","data-testid":"breadcrumbs",children:t.map((function(e,n){var r=n+1===t.length,i=!!e.link||!!e.onClick;return(0,l.jsx)(a.gN6,{color:r||e.isOpaque?"black":"gray.500",children:i?(0,l.jsx)(a.Atw,{as:u(),href:e.link,isCurrentPage:r,children:e.title}):(0,l.jsx)(a.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:r,children:e.title})},e.title)}))})},d=["breadcrumbs","isSticky","children"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.breadcrumbs,n=e.isSticky,r=void 0===n||n,c=e.children,u=(0,i.Z)(e,d);return(0,l.jsxs)(a.xuv,f(f(f({bgColor:"white",paddingY:5},r?{position:"sticky",top:0,left:0,zIndex:10}:{}),u),{},{children:[(0,s.isArray)(t)&&(0,l.jsx)(a.xuv,{marginBottom:c?4:0,children:(0,l.jsx)(p,{breadcrumbs:t})}),(0,o.isValidElement)(t)&&t,c]}))}},6887:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r,i,a=n(90849);!function(e){e.PRIVACY_REQUEST_REVIEW_APPROVE="privacy_request_review_approve",e.PRIVACY_REQUEST_REVIEW_DENY="privacy_request_review_deny",e.PRIVACY_REQUEST_RECEIPT="privacy_request_receipt",e.PRIVACY_REQUEST_COMPLETE_ACCESS="privacy_request_complete_access",e.PRIVACY_REQUEST_COMPLETE_DELETION="privacy_request_complete_deletion",e.SUBJECT_IDENTITY_VERIFICATION="subject_identity_verification"}(r||(r={}));var s=(i={},(0,a.Z)(i,r.PRIVACY_REQUEST_COMPLETE_ACCESS,"Access request completed"),(0,a.Z)(i,r.PRIVACY_REQUEST_COMPLETE_DELETION,"Erasure request completed"),(0,a.Z)(i,r.PRIVACY_REQUEST_RECEIPT,"Privacy request received"),(0,a.Z)(i,r.PRIVACY_REQUEST_REVIEW_APPROVE,"Privacy request approved"),(0,a.Z)(i,r.PRIVACY_REQUEST_REVIEW_DENY,"Privacy request denied"),(0,a.Z)(i,r.SUBJECT_IDENTITY_VERIFICATION,"Subject identity verification"),i)},16436:function(e,t,n){"use strict";n.d(t,{KC:function(){return u},Vw:function(){return l},ew:function(){return p},gQ:function(){return o},jM:function(){return i},lE:function(){return a},ms:function(){return s},pS:function(){return c},vm:function(){return d}});var r=n(28703).u.injectEndpoints({endpoints:function(e){return{getMessagingTemplates:e.query({query:function(){return{url:"messaging/templates"}},providesTags:function(){return["Messaging Templates"]}}),getSummaryMessagingTemplates:e.query({query:function(e){return{method:"GET",url:"messaging/templates/summary",params:e}},providesTags:function(){return["Property-Specific Messaging Templates"]}}),updateMessagingTemplates:e.mutation({query:function(e){return{url:"messaging/templates",method:"PUT",body:e}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),getMessagingTemplateById:e.query({query:function(e){return{url:"/messaging/templates/".concat(e)}},providesTags:function(){return["Property-Specific Messaging Templates"]}}),putMessagingTemplateById:e.mutation({query:function(e){var t=e.templateId,n=e.template;return{url:"/messaging/templates/".concat(t),method:"PUT",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),patchMessagingTemplateById:e.mutation({query:function(e){var t=e.templateId,n=e.template;return{url:"/messaging/templates/".concat(t),method:"PATCH",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),getMessagingTemplateDefault:e.query({query:function(e){return{url:"/messaging/templates/default/".concat(e)}}}),createMessagingTemplateByType:e.mutation({query:function(e){var t=e.templateType,n=e.template;return{url:"/messaging/templates/".concat(t),method:"POST",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),deleteMessagingTemplateById:e.mutation({query:function(e){return{url:"/messaging/templates/".concat(e),method:"DELETE"}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}})}}}),i=r.useGetMessagingTemplatesQuery,a=r.useUpdateMessagingTemplatesMutation,s=r.useGetSummaryMessagingTemplatesQuery,o=r.useGetMessagingTemplateByIdQuery,c=r.usePutMessagingTemplateByIdMutation,u=r.useGetMessagingTemplateDefaultQuery,l=r.useCreateMessagingTemplateByTypeMutation,p=r.useDeleteMessagingTemplateByIdMutation,d=r.usePatchMessagingTemplateByIdMutation},34519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(55732),i=n(90849),a=n(34707),s=n.n(a),o=n(92222),c=n(59003),u=n(28841),l=n(98784),p=n(86677),d=n(27378),g=n(68512),f=n(60709),m=n(28171),y=n(49938),v=n(74385),h=n(58981),b=n(43139),j=n(6887),x=n(24246),P=function(e){var t=e.isOpen,n=e.onClose,r=e.onAccept,i=(0,d.useState)(void 0),a=i[0],s=i[1],o=Object.keys(j.Z).map((function(e){return{value:e,label:j.Z[e]}}));return(0,x.jsxs)(u.u_l,{isOpen:t,onClose:n,size:"2xl",isCentered:!0,children:[(0,x.jsx)(u.ZAr,{}),(0,x.jsxs)(u.hzk,{"data-testid":"add-messaging-template-modal",children:[(0,x.jsx)(u.xBx,{borderBottomWidth:1,fontWeight:"bold",children:"Select message template"}),(0,x.jsxs)(u.fef,{children:[(0,x.jsx)(u.xvT,{color:"gray.700",fontWeight:"medium",fontSize:"sm",marginBottom:3,marginTop:1,children:"Add a new email message by selecting a template below and clicking accept."}),(0,x.jsx)(u.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"medium",marginBottom:2,children:"Choose template:"}),(0,x.jsx)(u.xuv,{"data-testid":"template-type-selector",children:(0,x.jsx)(h.Z,{options:o,size:"sm",chakraStyles:b.hP,onChange:function(e){s(null===e||void 0===e?void 0:e.value)},classNamePrefix:"custom-select"})})]}),(0,x.jsx)(u.mzw,{justifyContent:"flex-start",children:(0,x.jsxs)(u.hE2,{size:"sm",display:"flex",justifyItems:"stretch",w:"full",children:[(0,x.jsx)(u.zxk,{variant:"outline",mr:2,onClick:n,"data-testid":"cancel-btn",size:"md",flex:1,children:"Cancel"}),(0,x.jsx)(u.zxk,{size:"md",colorScheme:"primary",bgColor:"primary.800",onClick:function(){return r(a)},"data-testid":"confirm-btn",disabled:!a,flex:1,children:"Next"})]})})]})]})},O=n(16436),E=n(97865),T=n(78624),C=n(24753),w=n(33167),_=function(){var e=(0,u.pmc)(),t=(0,O.vm)(),n=(0,E.Z)(t,1)[0],i=function(){var t=(0,r.Z)(s().mark((function t(r){var i,a,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.isEnabled,a=r.templateId,t.next=3,n({templateId:a,template:{is_enabled:i}});case 3:if(o=t.sent,!(0,w.isErrorResult)(o)){t.next=7;break}return e((0,C.Vo)((0,T.e$)(o.error))),t.abrupt("return");case 7:e((0,C.t5)("Messaging template ".concat(i?"enabled":"disabled")));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{toggleIsTemplateEnabled:i}};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=(0,o.Cl)(),R={items:[],total:0,page:1,size:50,pages:1},k=function(){return(0,x.jsx)(u.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,x.jsxs)(u.gCW,{children:[(0,x.jsx)(u.xvT,{fontSize:"md",fontWeight:"600",children:"It looks like it\u2019s your first time here!"}),(0,x.jsxs)(u.xvT,{fontSize:"sm",children:["Add new email templates with the ",'"Add message +"'," button.",(0,x.jsx)("br",{})]})]})})},A=function(){var e=(0,p.useRouter)(),t=_().toggleIsTemplateEnabled,n=(0,y.oi)(),i=n.PAGE_SIZES,a=n.pageSize,h=n.setPageSize,b=n.onPreviousPageClick,E=n.isPreviousPageDisabled,T=n.onNextPageClick,C=n.isNextPageDisabled,w=n.startRange,S=n.endRange,A=n.pageIndex,N=n.setTotalPages,Z=(0,O.ms)({page:A,size:a}),D=Z.data,V=Z.isLoading,q=Z.isFetching,z=(0,d.useMemo)((function(){return null!==D&&void 0!==D?D:R}),[D]),L=z.items,B=z.total,W=z.pages;(0,d.useEffect)((function(){N(W)}),[W,N]);var U=(0,d.useState)(!1),Q=U[0],Y=U[1],F=(0,d.useMemo)((function(){return[M.accessor((function(e){return e.type}),{id:"message",cell:function(e){return(0,x.jsx)(y.G3,{value:j.Z[e.getValue()]})},header:function(e){return(0,x.jsx)(y.Rr,I({value:"Message"},e))},size:150}),M.accessor((function(e){return(e.properties||[]).map((function(e){return e.name}))}),{id:"properties",cell:function(e){return(0,x.jsx)(y.WP,I({suffix:"properties",value:e.getValue()},e))},header:function(e){return(0,x.jsx)(y.Rr,I({value:"Properties"},e))},meta:{displayText:"Properties",showHeaderMenu:!0},size:250}),M.accessor((function(e){return e.is_enabled}),{id:"is_enabled",cell:function(e){return(0,x.jsx)(u.kCb,{align:"center",justifyContent:"flex-start",w:"full",h:"full",children:(0,x.jsx)(u.rsf,{isChecked:e.getValue(),colorScheme:"complimentary",onChange:function(){var n=(0,r.Z)(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({isEnabled:r.target.checked,templateId:e.row.original.id});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})})},header:function(e){return(0,x.jsx)(y.Rr,I({value:"Enable"},e))},size:200,meta:{disableRowClick:!0}})]}),[t]),G=(0,l.sortBy)(L,"id"),H=(0,c.b7)({getCoreRowModel:(0,o.sC)(),getFilteredRowModel:(0,o.vL)(),getSortedRowModel:(0,o.tj)(),columns:F,data:G});return(0,x.jsxs)(g.Z,{title:"Messaging",mainProps:{padding:"0 40px 10px"},children:[(0,x.jsx)(m.Z,{breadcrumbs:[{title:"Messaging"}],children:(0,x.jsx)(u.xvT,{fontWeight:500,color:"gray.700",children:"Configure Fides messaging."})}),(0,x.jsx)(y.Q$,{children:(0,x.jsx)(u.Ugi,{alignItems:"center",spacing:4,marginLeft:"auto",children:(0,x.jsx)(u.zxk,{size:"xs",colorScheme:"primary","data-testid":"add-message-btn",onClick:function(){return Y(!0)},children:"Add message +"})})}),V?(0,x.jsx)(y.I4,{rowHeight:36,numRows:15}):(0,x.jsx)(y.ZK,{tableInstance:H,onRowClick:function(t){e.push({pathname:f.ax,query:{id:t.id}})},emptyTableNotice:(0,x.jsx)(k,{})}),(0,x.jsx)(v.s8,{totalRows:B,pageSizes:i,setPageSize:h,onPreviousPageClick:b,isPreviousPageDisabled:E||q,onNextPageClick:T,isNextPageDisabled:C||q,startRange:w,endRange:S}),(0,x.jsx)(P,{isOpen:Q,onClose:function(){return Y(!1)},onAccept:function(t){e.push({pathname:f.sM,query:{templateType:t}})}})]})}},33167:function(e,t,n){"use strict";n.d(t,{isAPIError:function(){return r.Bw},isErrorResult:function(){return r.D4}});var r=n(60041)},24081:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/messaging",function(){return n(34519)}])},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return s}});const r=(e,t)=>a(e,t),i=Symbol("SOME"),a=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>a(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>a(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>a(t,n[e])))},s=e=>t=>r(e,t);class o{static narrow(e){return new o((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof o?e.NF:e instanceof Function?e:t=>r(e,t);return new o((e=>t(e)&&n(e)))}}new o((e=>!0))}},function(e){e.O(0,[8033,2142,338,3139,9938,9774,2888,179],(function(){return t=24081,e(e.s=t);var t}));var t=e.O();_N_E=t}]);